; Dominik Dagiel   ix 2005

	new string,A
	push "!!!"
	pop A
	new real,PI
	push 3.14159265358979323846
	pop PI
	new int,BYTE0
	push "0"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTE0
	new int,BYTE9
	push "9"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTE9
	new int,BYTEa
	push "a"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTEa
	new int,BYTEz
	push "z"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTEz
	new int,BYTEA
	push "A"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTEA
	new int,BYTEZ
	push "Z"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTEZ
	new int,BYTE_
	push "_"
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTE_
	new int,BYTESPACE
	push " "
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop BYTESPACE
	method varget
	localstring $1
	pop $1
	push $1
	popax
	mov $a,[$a]
	psax
	end method
	method varset
	localstring $1
	localdef $2
	pop $2
	pop $1
	push $1
	spushs
	push $2
	spop $b
	popax
	mov [$b],$a
	end method
	method varnew
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push $2
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	end method
	method varnewif
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $2
	cthis hasvar
	neg
	cmp0
	je l2
	push $1
	push $2
	cthis varnew
l2:
	end method
	method vardelif
	localstring $1
	pop $1
	push $1
	cthis hasvar
	cmp0
	je l4
	push $1
	cthis vardel
l4:
	end method
	method vardel
	localstring $1
	pop $1
	push $1
	spushs
	spop $d
	delete [$d]
	end method
	method reader
	localstring $1
	pop $1
	push "def"
	push $1
	cthis varnewif
	push $1
	push "global0"
	cthis addmethod
	end method
	method global0
	cthis methodname
	popax
	mov $a,[$a]
	psax
	end method
	method writer
	localstring $1
	pop $1
	push "def"
	push $1
	cthis varnewif
	push $1
	push "="
	pop $b
	popax
	add $a,$b
	push "global1"
	cthis addmethod
	end method
	method global1
	localdef $1
	pop $1
	cthis methodname
	spushs
	push 1
	spop $a
	call $a,strsube
	spushs
	push $1
	spop $b
	popax
	mov [$b],$a
	end method
	method var
	localstring $1
	pop $1
	push $1
	cthis reader
	push $1
	cthis writer
	end method
	method var2
	localstring $1
	localdef $2
	pop $2
	pop $1
	push $1
	cthis var
	push $1
	spushs
	push $2
	spop $b
	popax
	mov [$b],$a
	end method
	method withlist
	localstring $1
	pop $1
	localdef $2
	pop $2
l5:
	push A
	push $2
	cmpjne
	cmp0
	je l6
	push $1
	spushs
	push $2
	spop $d
	cthis [$d]
	localdef $2
	pop $2
	jmp l5
l6:
	end method
	method withlist2
	localstring $1
	pop $1
	localdef $2
	pop $2
l7:
	push A
	push $2
	cmpjne
	cmp0
	je l8
	localdef $3
	pop $3
	push $1
	spushs
	push $3
	push $2
	spop $d
	cthis [$d]
	localdef $2
	pop $2
	jmp l7
l8:
	end method
	method vars
	push "var"
	cthis withlist
	end method
	method vars2
	push "var2"
	cthis withlist2
	end method
	method in
	localint $1
	push 0
	pop $1
	localdef $2
	cthis get
	pop $2
	localdef $3
	pop $3
l9:
	push A
	push $3
	cmpjne
	cmp0
	je l10
	push $1
	neg
	cmp0
	je l12
	push $2
	push $3
	cmpje
	pop $1
l12:
	localdef $3
	pop $3
	jmp l9
l10:
	push $1
	end method
	method with
	localstring $1
	pop $1
	localstring $2
	pop $2
l13:
	push $2
	push A
	cmpjne
	cmp0
	je l14
	push $2
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	pop $2
	jmp l13
l14:
	end method
	method copycall
	localstring $1
	localstring $2
	pop $2
	pop $1
	localstring $3
	push "__call"
	push $1
	pop $b
	popax
	add $a,$b
	pop $3
	push $3
	spushs
	spop $e
	new string,[$e]
	push $3
	spushs
	push $2
	spop $b
	popax
	mov [$b],$a
	push $1
	push "global2"
	cthis addmethod
	end method
	method global2
	localstring $1
	cthis methodname
	pop $1
	push "__call"
	push $1
	pop $b
	popax
	add $a,$b
	popax
	mov $a,[$a]
	psax
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	end method
	method copycalls
	localstring $1
	pop $1
	localstring $2
	pop $2
l15:
	push $2
	push A
	cmpjne
	cmp0
	je l16
	push $2
	push $1
	cthis copycall
	pop $2
	jmp l15
l16:
	end method
	method mresize
	cthis gettype
	push "_pack"
	pop $b
	popax
	add $a,$b
	spushs
	cthis getname
	spop $a
	 clparent [$a],resizemethods
	end method
	method times
	localstring $1
	pop $1
	push 0
	cthis get
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	cthis for_plus
	end method
	method upto
	localint $1
	localstring $2
	pop $2
	pop $1
	cthis get
	push $1
	push $2
	cthis for_plus
	end method
	method downto
	localint $1
	localstring $2
	pop $2
	pop $1
	cthis get
	push $1
	push $2
	cthis for_minus
	end method
	method for_plus
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $2
	push $1
	pop $b
	popax
	sub $a,$b
	push 0
	cmpjle
	cmp0
	je l18
	ret
l18:
l19:
	push $1
	push $2
	cmpjle
	cmp0
	je l20
	jmp l22
l21:
	add $1,1
	pop $1
	jmp l19
l22:
	push $3
	spushs
	push $1
	spop $d
	cthis [$d]
	jmp l21
l20:
	end method
	method for_minus
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	pop $b
	popax
	sub $a,$b
	push 0
	cmpjle
	cmp0
	je l24
	ret
l24:
l25:
	push $1
	push $2
	cmpjae
	cmp0
	je l26
	jmp l28
l27:
	sub $1,1
	pop $1
	jmp l25
l28:
	push $3
	spushs
	push $1
	spop $d
	cthis [$d]
	jmp l27
l26:
	end method
	method double_for
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localint $4
	localint $5
	push 0
	pop $5
l29:
	push $5
	push $1
	cmpjl
	cmp0
	je l30
	jmp l32
l31:
	add $5,1
	pop $5
	jmp l29
l32:
	push 0
	pop $4
l33:
	push $4
	push $2
	cmpjl
	cmp0
	je l34
	jmp l36
l35:
	add $4,1
	pop $4
	jmp l33
l36:
	push $3
	spushs
	push $5
	push $4
	spop $d
	cthis [$d]
	jmp l35
l34:
	jmp l31
l30:
	end method
	class classobjcounter
	method init
	localstring $1
	pop $1
	new string,_sprefix
	push $1
	pop _sprefix
	new int,_iile
	push 0
	pop _iile
	push "limit"
	push 0
	cthis var2
	end method
	method get
	push limit
	push 0
	cmpja
	cmp0
	je l38
	push _iile
	push limit
	pop $b
	popax
	div $a,$b
	push $d
	push 1
	pop $b
	popax
	add $a,$b
	pop _iile
	jmp l37
l38:
	add _iile,1
	pop _iile
l37:
	push _sprefix
	push _iile
	push 1
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	ret
	end method
	method size
	push _iile
	end method
	method getid
	localint $1
	pop $1
	push _sprefix
	push _iile
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	end method
	end class

	class classsignals
	method init
	end method
	method stdfinish
	localstring $1
	pop $1
	push $1
	spushs
	push "onfinish"
	push "classsignals0"
	spop $a
	call [$a],addmethod
	end method
	method classsignals0
	cthis getname
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method stdstart
	localstring $1
	pop $1
	push $1
	spushs
	push "onstart"
	push "classsignals1"
	spop $a
	call [$a],addmethod
	end method
	method classsignals1
	cthis getname
	push "_START"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method stdsigs
	localstring $1
	pop $1
	push $1
	cthis stdstart
	push $1
	cthis stdfinish
	end method
	method buildanima
	localstring $1
	pop $1
	push $1
	cthis stdsigs
	push $1
	spushs
	push "onendframe"
	push "classsignals2"
	spop $a
	call [$a],addmethod
	end method
	method classsignals2
	cthis getname
	push "_ENDFRAME"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method buildsnd
	localstring $1
	pop $1
	push $1
	cthis stdsigs
	end method
	method buildtimer
	localstring $1
	pop $1
	push $1
	cthis stdsigs
	push $1
	spushs
	push "ontick"
	push "classsignals3"
	spop $a
	call [$a],addmethod
	end method
	method classsignals3
	cthis getname
	push "_TICK"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method buildbut
	localstring $1
	pop $1
	push $1
	spushs
	push "onclick"
	push "classsignals4"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "onrel"
	push "classsignals5"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "onmoveon"
	push "classsignals6"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "onmoveoff"
	push "classsignals7"
	spop $a
	call [$a],addmethod
	end method
	method classsignals4
	cthis getname
	push "_CLICK"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method classsignals5
	cthis getname
	push "_REL"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method classsignals6
	cthis getname
	push "_MOVEON"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method classsignals7
	cthis getname
	push "_MOVEOFF"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end class

	class classlocker
	method init
	new int,_block
	push 1
	pop _block
	end method
	method lock
	push 1
	pop _block
	end method
	method unlock
	push 0
	pop _block
	end method
	method setlock
	localint $1
	pop $1
	push $1
	pop _block
	end method
	method getlock
	push _block
	ret
	end method
	method unlocked
	push _block
	push 0
	cmpje
	end method
	method setaslocker
	localstring $1
	pop $1
	push $1
	spushs
	push "buildlocker"
	push "classlocker0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	spop $a
	call [$a],buildlocker
	push $1
	spushs
	push "lock"
	push "lock"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "unlock"
	push "unlock"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setlock"
	push "setlock"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getlock"
	push "getlock"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "unlocked"
	push "unlocked"
	spop $a
	call [$a],addmethod
	end method
	method classlocker0
	new int,_block
	push 1
	pop _block
	end method
	end class

	module classdbreader
	method init
	new db,dbl
	end method
	method readdb
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
	localint $3
	call dbl,getrowsno
	pop $3
l39:
	push $2
	push $3
	cmpjl
	cmp0
	je l40
	push $1
	spushs
	push $2
	spop $d
	cthis [$d]
	add $2,1
	pop $2
	jmp l39
l40:
	end method
	method readrow
	localstring $1
	localstring $2
	pop $2
	pop $1
	localint $3
	push $1
	call dbl,findbyrow
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l42
	push $2
	spushs
	push $3
	spop $d
	cthis [$d]
l42:
	end method
	end module

	class collection
	method init
	localstring $1
	pop $1
	new string,stype
	push $1
	pop stype
	end method
	method type
	push stype
	ret
	end method
	end class

	class array
	parent collection
	method init
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	clparent collection,init
	new int,idim
	push $2
	pop idim
	new int,isize
	push $3
	pop isize
	new vector,vec
	push $1
	call vec,type
	push $2
	push 0
	cmpjle
	cmp0
	jne l45
	push $3
	push 0
	cmpjle
	jmp l46
l44:
	push 0
	jmp l46
l45:
	push 1
l46:
	cmp0
	je l47
	ret
l47:
	push $2
	call $3,pow
	push 0
	call vec,resize
	end method
	method getid
	localint $1
	push 0
	pop $1
	localint $2
	push idim
	push 1
	pop $b
	popax
	sub $a,$b
	pop $2
l48:
	push $2
	push 0
	cmpja
	cmp0
	je l49
	popax
	add $1,$a
	pop $1
	push isize
	popax
	mul $1,$a
	pop $1
	sub $2,1
	pop $2
	jmp l48
l49:
	push $1
	pop $b
	popax
	add $a,$b
	ret
	end method
	method get
	cthis getid
	call vec,get
	ret
	end method
	method set
	localdef $1
	pop $1
	cthis getid
	push $1
	call vec,set
	end method
	method getsize
	push isize
	ret
	end method
	method getdim
	push idim
	ret
	end method
	end class

	class stack
	parent collection
	method init
	localstring $1
	pop $1
	push $1
	clparent collection,init
	new vector,vec
	push $1
	call vec,type
	push $1
	spushs
	spop $d
	new [$d],var
	end method
	method push
	localstring $1
	pop $1
	push $1
	call vec,add
	end method
	method top
	call vec,last
	ret
	end method
	method pop
	cthis top
	pop var
	call vec,size
	push 1
	pop $b
	popax
	sub $a,$b
	call vec,removeat
	push var
	ret
	end method
	method free
	call vec,free
	end method
	end class

	class map
	parent collection
	method init
	localstring $1
	pop $1
	push $1
	clparent collection,init
	new int,isize
	push 0
	pop isize
	end method
	method set
	localstring $1
	localdef $2
	pop $2
	pop $1
	push "v"
	push $1
	pop $b
	popax
	add $a,$b
	cthis hasvar
	neg
	cmp0
	je l51
	push $1
	cthis add
l51:
	push "v"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	push $2
	spop $a
	call [$a],set
	end method
	method add
	localstring $1
	pop $1
	push stype
	spushs
	push "v"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	end method
	method get
	localstring $1
	pop $1
	push "v"
	push $1
	pop $b
	popax
	add $a,$b
	popax
	mov $a,[$a]
	psax
	ret
	end method
	method remove
	localstring $1
	pop $1
	push "v"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	delete [$d]
	end method
	method contains
	localstring $1
	pop $1
	push "v"
	push $1
	pop $b
	popax
	add $a,$b
	cthis hasvar
	ret
	end method
	end class

	class map2
	parent collection
	method init
	localstring $1
	pop $1
	push $1
	clparent collection,init
	new vector,vn
	push "string"
	call vn,type
	new vector,vec
	push $1
	call vec,type
	end method
	method add
	localstring $1
	localdef $2
	pop $2
	pop $1
	push $1
	call vn,add
	push $2
	call vec,add
	end method
	method set
	localstring $1
	localdef $2
	pop $2
	pop $1
	push $1
	call vn,find
	push $2
	call vec,set
	end method
	method contains
	localstring $1
	pop $1
	push $1
	call vn,contains
	ret
	end method
	method get
	localstring $1
	pop $1
	push $1
	call vn,find
	call vec,get
	ret
	end method
	method remove
	localstring $1
	pop $1
	localint $2
	push $1
	call vn,find
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l53
	push $2
	call vec,removeat
	push $2
	call vn,removeat
l53:
	end method
	method free
	call vn,free
	call vec,free
	end method
	end class

	class classgamemusic
	parent classdbreader
	method init
	clparent classdbreader,init
	new string,smuspath
	push ""
	pop smuspath
	new string,sbgrpath
	push ""
	pop sbgrpath
	new snd,_sndbgr
	push "onfinish"
	push "_stdsndloop"
	call _sndbgr,addmethod
	end method
	method reset
	call gameapi,stopmusic
	cthis stopbgr
	end method
	method _stdsndloop
	cthis play
	end method
	method load
	localstring $1
	pop $1
	push $1
	call dbl,loadscript
	end method
	method musicpath
	localstring $1
	pop $1
	push $1
	pop smuspath
	end method
	method sndbgrpath
	localstring $1
	pop $1
	push $1
	pop sbgrpath
	end method
	method _play
	localint $1
	pop $1
	localint $2
	localint $3
	localint $4
	localstring $5
	localstring $6
	push 1
	pop $2
	push $1
	call dbl,getcolsno
	pop $3
l54:
	push $2
	push $3
	cmpjl
	cmp0
	je l55
	push $1
	push $2
	call dbl,get
	pop $5
	add $2,1
	pop $2
	push $5
	push "music"
	cmpje
	cmp0
	je l57
	push smuspath
	push $1
	push $2
	call dbl,get
	pop $b
	popax
	add $a,$b
	pop $6
	add $2,1
	pop $2
	push $2
	push $3
	cmpjl
	cmp0
	je l59
	push $1
	push $2
	call dbl,get
	push "vol"
	cmpje
	cmp0
	je l61
	add $2,1
	pop $2
	push $1
	push $2
	call dbl,get
	call gameapi,setmusicvol
	add $2,1
	pop $2
l61:
	jmp l58
l59:
	push 100
	call gameapi,setmusicvol
l58:
	push $6
	call gameapi,playmusic
	jmp l56
l57:
	push $5
	push "bgr"
	cmpje
	cmp0
	je l63
	push sbgrpath
	push $1
	push $2
	call dbl,get
	pop $b
	popax
	add $a,$b
	call _sndbgr,load
	add $2,1
	pop $2
	push $2
	push $3
	cmpjl
	cmp0
	je l65
	push $1
	push $2
	call dbl,get
	push "vol"
	cmpje
	cmp0
	je l67
	add $2,1
	pop $2
	push $1
	push $2
	call dbl,get
	call _sndbgr,setvol
	add $2,1
	pop $2
l67:
	jmp l64
l65:
	push 100
	call _sndbgr,setvol
l64:
	cthis playbgr
	jmp l62
l63:
	add $2,1
	pop $2
l62:
l56:
	jmp l54
l55:
	end method
	method play
	cthis reset
	call gameapi,getgamename
	push "_play"
	cthis readrow
	end method
	method playbgr
	call _sndbgr,play
	end method
	method stopbgr
	push 0
	call _sndbgr,stop
	end method
	end class

	class Music
	method init
	new vector,vmus
	push "string"
	call vmus,type
	new int,ilastid
	end method
	method playdb
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	call vmus,free
l68:
	push $3
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l69
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	call vmus,add
	add $3,1
	pop $3
	jmp l68
l69:
	push 0
	pop ilastid
	cthis play
	end method
	method playvec
	localstring $1
	localint $2
	pop $2
	pop $1
	call vmus,free
l70:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l71
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	call vmus,add
	add $2,1
	pop $2
	jmp l70
l71:
	push 0
	pop ilastid
	cthis play
	end method
	method playstr
	localstring $1
	pop $1
	push $1
	push " "
	call vmus,vecbuildfromstring
	push 0
	pop ilastid
	cthis play
	end method
	method play
	push ilastid
	call vmus,size
	cmpjae
	cmp0
	je l73
	ret
l73:
	localdef $1
	push MUSICPATH
	push ilastid
	call vmus,get
	pop $b
	popax
	add $a,$b
	pop $1
	add ilastid,1
	pop ilastid
	localint $2
	push 0
	pop $2
	localint $3
	push 0
	pop $3
	localint $4
	push 0
	pop $4
	localint $5
	push 100
	pop $5
	localint $6
	push ilastid
	pop $6
l74:
	push $6
	call vmus,size
	cmpjl
	cmp0
	je l75
	jmp l77
l76:
	add $6,1
	pop $6
	jmp l74
l77:
	localdef $7
	push $6
	call vmus,get
	pop $7
	push $7
	spushs
	push "-l"
	cmpst
	jne l79
	spop $a
	push 1
	pop $2
	jmp l78
l79:
	push "-v"
	cmpst
	jne l80
	spop $a
	add $6,1
	pop $6
	push $6
	call vmus,get
	pop $5
	jmp l78
l80:
	push "-fin"
	cmpst
	jne l81
	spop $a
	add $6,1
	pop $6
	push $6
	call vmus,get
	pop $3
	jmp l78
l81:
	push "-fout"
	cmpst
	jne l82
	spop $a
	add $6,1
	pop $6
	push $6
	call vmus,get
	pop $4
	jmp l78
l82:
	push "-p"
	cmpst
	jne l83
	spop $a
	jmp l78
l83:
	spop $a
	push $6
	pop ilastid
	call vmus,size
	pop $6
l78:
	jmp l76
l75:
	push $5
	call gameapi,setmusicvol
	push $2
	cmp0
	je l85
	push $1
	call gameapi,playmusic
	call vmus,size
	pop ilastid
	ret
l85:
	push $1
	call gameapi,loadmusic
	push $3
	cmp0
	je l87
	push $3
	call gameapi,fadeinmusic
	jmp l86
l87:
	call gameapi,startmusic
l86:
	push $4
	cmp0
	je l89
	push $4
	call gameapi,fadeoutmusic
l89:
	end method
	method fadeout
	localint $1
	pop $1
	call gameapi,ismusicplaying
	cmp0
	je l91
	push $1
	call gameapi,fadeoutmusic
	call vmus,size
	pop ilastid
l91:
	end method
	method isplaying
	call gameapi,ismusicplaying
	end method
	method stop
	push 0
	call gameapi,endmusic
	end method
	end class

	new int,igmdebug
	push 0
	pop igmdebug
	new int,igmstate
	new int,igmmac
	push 1
	pop igmmac
	new int,igmipad
	push 0
	pop igmipad
	new int,igmwinlocal
	push 0
	pop igmwinlocal
	new string,sgmproject
	push "DagielMezo"
	pop sgmproject
	method getwinpath
	localstring $1
	pop $1
	localstring $2
	push "appdata"
	call engine,getspecialpath
	pop $2
	push $2
	push "null"
	cmpjne
	cmp0
	je l93
	push $2
	push "\/"
	pop $b
	popax
	add $a,$b
	push sgmproject
	pop $b
	popax
	add $a,$b
	push "/"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	jmp l92
l93:
	push $1
l92:
	end method
	method getsavepath
	push igmipad
	cmp0
	jne l96
	push igmmac
	jmp l97
l95:
	push 0
	jmp l97
l96:
	push 1
l97:
	cmp0
	je l98
	call engine,getsavepath
	jmp l94
l98:
	push igmwinlocal
	cmp0
	je l100
	push "saves/"
	cthis getwinpath
	jmp l99
l100:
	push "saves/"
l99:
l94:
	end method
	new int,igmeasy
	push 0
	pop igmeasy
	new int,igmdemo
	push 0
	pop igmdemo
	new int,igmbegin
	push 1
	pop igmbegin
	new string,sgmfontfile
	push "configs/fonts/normal.ttf"
	pop sgmfontfile
	new string,sgmfontmono
	push "configs/fonts/mono.ttf"
	pop sgmfontmono
	new string,sgmfontmonobold
	push "configs/fonts/monobold.ttf"
	pop sgmfontmonobold
	new string,sgmfontbold
	push "configs/fonts/monobold.ttf"
	pop sgmfontbold
	new string,sgmfontitalic
	push "configs/fonts/timesit.ttf"
	pop sgmfontitalic
	new string,SFXPATH
	push "sounds/sfx/"
	pop SFXPATH
	new string,BGRPATH
	push "sounds/bgr/"
	pop BGRPATH
	new string,MUSICPATH
	push "sounds/music/"
	pop MUSICPATH
	new string,LANG
	push "pl"
	pop LANG
	new string,SNDPATH
	push "sounds/"
	pop SNDPATH
	push LANG
	push "pl"
	cmpje
	cmp0
	je l102
	push ""
	pop LANG
l102:
	call LANG,length
	push 0
	cmpja
	cmp0
	je l104
	push LANG
	push "/"
	pop $b
	popax
	add $a,$b
	popax
	add SNDPATH,$a
	pop SNDPATH
l104:
	new int,iResX
	push 1024
	pop iResX
	new int,iResY
	push 768
	pop iResY
	class newvars
	method init
	new string,_sclpath
	push ""
	pop _sclpath
	new string,_sclwavpath
	push ""
	pop _sclwavpath
	end method
	method _checkfont
	localstring $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push "null"
	cmpje
	cmp0
	je l106
	push sgmfontfile
	pop $1
l106:
	push ".ttf"
	call $1,contains
	cmp0
	je l108
	push $3
	spushs
	spop $e
	new font,[$e]
	push $3
	spushs
	push $1
	push $2
	spop $a
	call [$a],load
	push $3
	pop $1
l108:
	push $1
	end method
	method checkfont
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	push "_fnt"
	cthis _checkfont
	end method
	method begingame
	push igmbegin
	neg
	pop igmbegin
	push igmbegin
	neg
	end method
	method newarray
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $3
	push 0
	cmpjle
	cmp0
	je l110
	ret
l110:
	sub $3,1
	pop $3
l111:
	push $3
	push 0
	cmpjae
	cmp0
	je l112
	push $1
	spushs
	push $2
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	sub $3,1
	pop $3
	jmp l111
l112:
	end method
	method setgraphpath
	localstring $1
	pop $1
	push $1
	pop _sclpath
	end method
	method setwavpath
	localstring $1
	pop $1
	push $1
	pop _sclwavpath
	end method
	method getgraphpath
	push _sclpath
	ret
	end method
	method getsndpath
	push _sclwavpath
	ret
	end method
	method getpath
	localstring $1
	pop $1
	push 0
	push 1
	call $1,getb
	push "$"
	cmpje
	cmp0
	je l114
	push 1
	call $1,strsubb
	jmp l113
l114:
	cthis getgraphpath
	push $1
	pop $b
	popax
	add $a,$b
l113:
	end method
	method newanima
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new anima,[$e]
	push $1
	spushs
	push $2
	cthis getpath
	spop $a
	call [$a],load
	push $1
	spushs
	push $3
	spop $a
	call [$a],setz
	end method
	method newstdanima
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis newanima
	push $1
	cthis stdanaction
	end method
	method copyanimaactz
	localstring $1
	localstring $2
	localstring $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis copyanimaact
	push $2
	spushs
	push $4
	spop $a
	call [$a],setz
	end method
	method copyanimaact
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis copyanima
	push $2
	spushs
	push $3
	push 0
	spop $a
	call [$a],setframe
	end method
	method copyanima
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $2
	spushs
	spop $e
	new anima,[$e]
	push $2
	spushs
	push $1
	spop $a
	call [$a],copy
	end method
	method copyanimas
	localstring $1
	localstring $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $4
	push 0
	cmpjl
	cmp0
	je l116
	ret
l116:
	localint $5
	push 0
	pop $5
l117:
	push $5
	push $4
	cmpjl
	cmp0
	je l118
	jmp l120
l119:
	add $5,1
	pop $5
	jmp l117
l120:
	push $1
	push $2
	push $3
	push $5
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	cthis copyanima
	jmp l119
l118:
	end method
	method newanimas
	localstring $1
	localstring $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $4
	push 0
	cmpjl
	cmp0
	je l122
	ret
l122:
	push $1
	push "0"
	pop $b
	popax
	add $a,$b
	push $2
	push $3
	cthis newanima
	push $1
	push "0"
	pop $b
	popax
	add $a,$b
	push $1
	push 1
	push $4
	push 1
	pop $b
	popax
	sub $a,$b
	cthis copyanimas
	end method
	method newanframesgr
	localstring $1
	localstring $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push $1
	spushs
	push $3
	spop $a
	call [$a],nofframes
	pop $5
	push $1
	push $2
	push 0
	push $5
	cthis copyanimas
	localint $6
	push 0
	pop $6
l123:
	push $6
	push $5
	cmpjl
	cmp0
	je l124
	jmp l126
l125:
	add $6,1
	pop $6
	jmp l123
l126:
	push $2
	push $6
	pop $b
	popax
	add $a,$b
	spushs
	push $3
	push $6
	spop $a
	call [$a],setframe
	push $4
	push "null"
	cmpjne
	cmp0
	je l128
	push $4
	spushs
	push $2
	push $6
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],add
l128:
	jmp l125
l124:
	push $5
	ret
	end method
	method newanframes
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "null"
	cthis newanframesgr
	ret
	end method
	method newcanvas
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new img,[$e]
	push $1
	spushs
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	spop $a
	call [$a],create
	push $1
	spushs
	push $8
	spop $a
	call [$a],setz
	end method
	method newimg
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new img,[$e]
	push $1
	spushs
	push $2
	cthis getpath
	spop $a
	call [$a],load
	push $1
	spushs
	push $3
	spop $a
	call [$a],setz
	end method
	method copyimg
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $2
	spushs
	spop $e
	new img,[$e]
	push $2
	spushs
	push $1
	spop $a
	call [$a],copy
	end method
	method playmusic
	localstring $1
	pop $1
	push MUSICPATH
	push $1
	pop $b
	popax
	add $a,$b
	call gameapi,playmusic
	end method
	method newsndfree
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new snd,[$e]
	push $1
	spushs
	push 0
	push 1
	spop $a
	call [$a],setstartstopflag
	push $1
	spushs
	cthis getsndpath
	push $2
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],load
	end method
	method snewsnd
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis newsnd
	push $1
	spushs
	push "onfinish"
	push "__std_finish"
	spop $a
	call [$a],addmethod
	end method
	method _newsnd
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new snd,[$e]
	push "."
	call $2,contains
	neg
	cmp0
	je l130
	push ".wav"
	popax
	add $2,$a
	pop $2
l130:
	push $1
	spushs
	push $2
	spop $a
	call [$a],load
	push igmsubtitle
	cmp0
	je l132
	push $1
	push $2
	call subtitle,register
l132:
	end method
	method newsfx
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push SFXPATH
	push $2
	pop $b
	popax
	add $a,$b
	cthis _newsnd
	end method
	method newbgr
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push BGRPATH
	push $2
	pop $b
	popax
	add $a,$b
	cthis _newsnd
	end method
	method newbgrloop
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis newbgr
	push $1
	cthis sndplayloop
	end method
	method newsnd
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis getsndpath
	push $2
	pop $b
	popax
	add $a,$b
	cthis _newsnd
	end method
	method newsndloop
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis newsnd
	push $1
	cthis looponfinish1
	end method
	method looponfinish1
	localstring $1
	pop $1
	push $1
	spushs
	push "onfinish"
	push "_stdsndloop"
	spop $a
	call [$a],addmethod
	end method
	method sndplayloop
	localstring $1
	pop $1
	push $1
	cthis looponfinish1
	push $1
	spushs
	spop $a
	call [$a],play
	end method
	method newsnds
	localstring $1
	localint $2
	localstring $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $6
	localint $7
	push $5
	push $4
	pop $b
	popax
	sub $a,$b
	push 1
	pop $b
	popax
	add $a,$b
	pop $7
	localint $8
	push 0
	pop $8
l133:
	push $8
	push $7
	cmpjl
	cmp0
	je l134
	jmp l136
l135:
	add $8,1
	pop $8
	jmp l133
l136:
	push $1
	push $2
	push $8
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	pop $6
	push $6
	spushs
	spop $e
	new snd,[$e]
	push $6
	spushs
	cthis getsndpath
	push $3
	pop $b
	popax
	add $a,$b
	push $4
	push $8
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],load
	jmp l135
l134:
	end method
	method newtimer
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new timer,[$e]
	push $1
	spushs
	push $3
	spop $a
	call [$a],settick
	push $1
	spushs
	push $2
	spop $a
	call [$a],delay
	end method
	method newtimercycle
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new timer,[$e]
	push $1
	spushs
	push $3
	spop $a
	call [$a],settick
	push $1
	spushs
	push $2
	spop $a
	call [$a],setcycle
	end method
	method stdanaction
	localstring $1
	pop $1
	localstring $2
	push $1
	spushs
	spop $a
	call [$a],actionname
	pop $2
	push "L"
	call $2,contains
	cmp0
	je l138
	push $1
	cthis looponfinish
	jmp l137
l138:
	push "H"
	call $2,contains
	cmp0
	je l140
	push $1
	cthis hideonfinish
l140:
l137:
	push "P"
	call $2,contains
	cmp0
	je l142
	push $1
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],play
l142:
	end method
	method newanactionsgr
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $1
	spushs
	spop $a
	call [$a],nofactions
	pop $4
	push $1
	push $2
	push 0
	push $4
	cthis copyanimas
	localstring $5
	localint $6
	push 0
	pop $6
l143:
	push $6
	push $4
	cmpjl
	cmp0
	je l144
	jmp l146
l145:
	add $6,1
	pop $6
	jmp l143
l146:
	push $2
	push $6
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	spushs
	push $6
	push 0
	spop $a
	call [$a],setframe
	push $5
	cthis stdanaction
	push $3
	push "null"
	cmpjne
	cmp0
	je l148
	push $3
	spushs
	push $5
	spop $a
	call [$a],add
l148:
	jmp l145
l144:
	push $4
	ret
	end method
	method newanactions
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "null"
	cthis newanactionsgr
	ret
	end method
	method newanfrbyactgr
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $1
	spushs
	spop $a
	call [$a],nofactions
	pop $4
	localint $5
	push 0
	pop $5
l149:
	push $5
	push $4
	cmpjl
	cmp0
	je l150
	jmp l152
l151:
	add $5,1
	pop $5
	jmp l149
l152:
	push $1
	push $2
	push $5
	pop $b
	popax
	add $a,$b
	push "_"
	pop $b
	popax
	add $a,$b
	push $5
	push $3
	cthis newanframesgr
	popax
	jmp l151
l150:
	push $4
	ret
	end method
	method newanfrbyact
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "null"
	cthis newanfrbyactgr
	ret
	end method
	method loadanfrbyact
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	localstring $4
	push "_"
	push $1
	pop $b
	popax
	add $a,$b
	pop $4
	push $4
	push $2
	push $3
	cthis newanima
	localint $5
	push $4
	push $1
	cthis newanfrbyact
	pop $5
	push $4
	spushs
	spop $a
	call [$a],hide
	push $5
	ret
	end method
	method loadanactions
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	localstring $4
	push "_"
	push $1
	pop $b
	popax
	add $a,$b
	pop $4
	push $4
	push $2
	push $3
	cthis newanima
	localint $5
	push $4
	push $1
	cthis newanactions
	pop $5
	push $4
	spushs
	spop $a
	call [$a],hide
	push $5
	ret
	end method
	method loadanframes
	localstring $1
	localstring $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $5
	push "_"
	push $1
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	push $2
	push $4
	cthis newanima
	localint $6
	push $5
	push $1
	push $3
	cthis newanframes
	pop $6
	push $5
	spushs
	spop $a
	call [$a],hide
	push $6
	ret
	end method
	method newbutimg
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new button,[$e]
	push $1
	spushs
	push $2
	push $3
	push $4
	spop $a
	call [$a],set
	push $1
	spushs
	push $5
	spop $a
	call [$a],setmouse
	end method
	method newbutan
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new button,[$e]
	push $1
	spushs
	push $2
	push $3
	push $4
	spop $a
	call [$a],setan
	push $1
	spushs
	push $5
	spop $a
	call [$a],setmouse
	end method
	method newdb
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new db,[$e]
	push $1
	spushs
	push $2
	cthis getpath
	spop $a
	call [$a],load
	end method
	method newdbscript
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new db,[$e]
	push $1
	spushs
	push $2
	cthis getpath
	spop $a
	call [$a],loadscritp
	end method
	method vargmset
	localstring $1
	localdef $2
	pop $2
	pop $1
	localstring $3
	call gameapi,getgamename
	pop $3
	push $3
	spushs
	push $1
	spop $a
	call [$a],hasvar
	neg
	cmp0
	je l154
	push $3
	spushs
	call $2,gettype
	push $1
	spop $a
	call [$a],varnew
l154:
	push $1
	spushs
	push $2
	spop $b
	popax
	mov [$b],$a
	end method
	end class

	new img,imglobcurs
	push "configs/kursorstd.png"
	push "configs/kursoract.png"
	call bsms,load
	module bsms
	method init
	new img,imgstd
	new img,imgact
	new int,msid
	push 0
	pop msid
	end method
	method load
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	call imgstd,load
	push $2
	call imgact,load
	push "imgact"
	call imglobcurs,copy
	call imglobcurs,hide
	call imgstd,hide
	call imgact,hide
	cthis reset
	push "imgstd"
	call engine,stdbutcursor
	end method
	method setinitial
	call mouse,stdcursor
	push 0
	pop msid
	end method
	method setstd
	push msid
	push 1
	cmpjne
	cmp0
	je l156
	push "imgstd"
	call mouse,setcursor
	push "imgstd"
	call engine,stdbutcursor
	push 1
	pop msid
l156:
	end method
	method setact
	push msid
	push 2
	cmpjne
	cmp0
	je l158
	push "imgact"
	call mouse,setcursor
	push 2
	pop msid
l158:
	end method
	method setown
	push 3
	pop msid
	end method
	method isinitial
	push msid
	push 0
	cmpje
	end method
	method isstd
	push msid
	push 1
	cmpje
	end method
	method isact
	push msid
	push 2
	cmpje
	end method
	method isown
	push msid
	push 3
	cmpje
	end method
	end module

	module clsurf
	method init
	end method
	method isin
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $3
	cmpjae
	cmp0
	je l159
	push $1
	push $5
	cmpjle
	cmp0
	je l159
	push $2
	push $4
	cmpjae
	cmp0
	je l159
	push $2
	push $6
	cmpjle
	jmp l161
l159:
	push 0
	jmp l161
l160:
	push 1
l161:
	end method
	method isin2
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $3
	cmpjae
	cmp0
	je l162
	push $1
	push $3
	push $5
	pop $b
	popax
	add $a,$b
	cmpjl
	cmp0
	je l162
	push $2
	push $4
	cmpjae
	cmp0
	je l162
	push $2
	push $4
	push $6
	pop $b
	popax
	add $a,$b
	cmpjl
	jmp l164
l162:
	push 0
	jmp l164
l163:
	push 1
l164:
	end method
	method inscreen
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push 0
	push $3
	pop $b
	popax
	sub $a,$b
	push 0
	push $4
	pop $b
	popax
	sub $a,$b
	push 800
	push $3
	pop $b
	popax
	add $a,$b
	push 600
	push $4
	pop $b
	popax
	add $a,$b
	cthis isin
	end method
	method insurf
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	spushs
	spop $a
	call [$a],getpx
	push $3
	spushs
	spop $a
	call [$a],getpy
	push $3
	spushs
	spop $a
	call [$a],getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $3
	spushs
	spop $a
	call [$a],getey
	push 1
	pop $b
	popax
	sub $a,$b
	cthis isin
	end method
	method issurfin
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $5
	push $6
	push $7
	push $8
	cthis isin
	cmp0
	jne l166
	push $3
	push $2
	push $5
	push $6
	push $7
	push $8
	cthis isin
	cmp0
	jne l166
	push $1
	push $4
	push $5
	push $6
	push $7
	push $8
	cthis isin
	cmp0
	jne l166
	push $3
	push $4
	push $5
	push $6
	push $7
	push $8
	cthis isin
	jmp l167
l165:
	push 0
	jmp l167
l166:
	push 1
l167:
	end method
	method commonsurface
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	push $8
	cthis issurfin
	cmp0
	jne l169
	push $5
	push $6
	push $7
	push $8
	push $1
	push $2
	push $3
	push $4
	cthis issurfin
	jmp l170
l168:
	push 0
	jmp l170
l169:
	push 1
l170:
	end method
	method commonimgs
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push $1
	spushs
	spop $a
	call [$a],getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getey
	push 1
	pop $b
	popax
	sub $a,$b
	push $2
	spushs
	spop $a
	call [$a],getpx
	push $2
	spushs
	spop $a
	call [$a],getpy
	push $2
	spushs
	spop $a
	call [$a],getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $2
	spushs
	spop $a
	call [$a],getey
	push 1
	pop $b
	popax
	sub $a,$b
	cthis commonsurface
	end method
	method surfwithinsurf
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $5
	push $6
	push $7
	push $8
	cthis isin
	cmp0
	je l171
	push $3
	push $2
	push $5
	push $6
	push $7
	push $8
	cthis isin
	cmp0
	je l171
	push $1
	push $4
	push $5
	push $6
	push $7
	push $8
	cthis isin
	cmp0
	je l171
	push $3
	push $4
	push $5
	push $6
	push $7
	push $8
	cthis isin
	jmp l173
l171:
	push 0
	jmp l173
l172:
	push 1
l173:
	end method
	method imgwithinimg
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push $1
	spushs
	spop $a
	call [$a],getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getey
	push 1
	pop $b
	popax
	sub $a,$b
	push $2
	spushs
	spop $a
	call [$a],getpx
	push $2
	spushs
	spop $a
	call [$a],getpy
	push $2
	spushs
	spop $a
	call [$a],getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $2
	spushs
	spop $a
	call [$a],getey
	push 1
	pop $b
	popax
	sub $a,$b
	cthis surfwithinsurf
	end method
	end module

	module cllen
	method init
	new int,il1
	new int,ilx
	new int,ily
	end method
	method ilenx
	push ilx
	ret
	end method
	method ileny
	push ily
	ret
	end method
	method ilen4
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	pop $b
	popax
	sub $a,$b
	spushs
	spop $h
	call $h,abs
	ret
	end method
	method ilen3
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	push $1
	spushs
	spop $a
	call [$a],getcy
	push $2
	spushs
	spop $a
	call [$a],getcx
	push $2
	spushs
	spop $a
	call [$a],getcy
	cthis ilen
	ret
	end method
	method ilen5
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push $2
	spushs
	spop $a
	call [$a],getpx
	push $2
	spushs
	spop $a
	call [$a],getpy
	cthis ilen
	ret
	end method
	method ilen2
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	push $1
	spushs
	spop $a
	call [$a],getcy
	push $2
	push $3
	cthis ilen
	ret
	end method
	method ilen
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $3
	pop $b
	popax
	sub $a,$b
	pop ilx
	push $2
	push $4
	pop $b
	popax
	sub $a,$b
	pop ily
	push ilx
	push ily
	call il1,length
	ret
	end method
	method iclenx
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	push $2
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method iclenx2
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	push $2
	spushs
	spop $a
	call [$a],getcx
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method icleny
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcy
	push $2
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method icleny2
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcy
	push $2
	spushs
	spop $a
	call [$a],getcy
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method isbetween2
	localstring $1
	localstring $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	spushs
	spop $a
	call [$a],getcx
	push $2
	spushs
	spop $a
	call [$a],getcy
	push $3
	push $4
	push $5
	push $6
	cthis isbetween
	ret
	end method
	method isbetween
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis ilen
	pop il1
	push ilx
	push $4
	cmpjae
	cmp0
	je l174
	push ilx
	push $6
	cmpjle
	cmp0
	je l174
	push ily
	push $5
	cmpjae
	cmp0
	je l174
	push ily
	push $7
	cmpjle
	jmp l176
l174:
	push 0
	jmp l176
l175:
	push 1
l176:
	ret
	end method
	method ilodlen
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],lodx
	push $1
	spushs
	spop $a
	call [$a],lody
	push $2
	spushs
	spop $a
	call [$a],lodx
	push $2
	spushs
	spop $a
	call [$a],lody
	cthis ilen
	end method
	method iposlen
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getpos
	push $2
	spushs
	spop $a
	call [$a],getpos
	cthis ilen
	end method
	end module

	class classansearcher
	method init
	end method
	method _findnotr
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localint $6
	push $1
	spushs
	spop $a
	call [$a],getex
	pop $6
	localint $7
	push $1
	spushs
	spop $a
	call [$a],getey
	pop $7
l177:
	push $2
	push $6
	cmpjne
	cmp0
	je l178
	push $3
	push $7
	cmpjne
	jmp l180
l178:
	push 0
	jmp l180
l179:
	push 1
l180:
	cmp0
	je l181
	push $1
	spushs
	push $2
	push $3
	push 0
	push 1
	spop $a
	call [$a],isin
	cmp0
	je l183
	push $2
	push $3
	ret
l183:
	push $4
	popax
	add $2,$a
	pop $2
	push $5
	popax
	add $3,$a
	pop $3
	jmp l177
l181:
	push 1
	popax
	sub 0,$a
	push 1
	popax
	sub 0,$a
	ret
	end method
	method firstnotrx1y
	localstring $1
	pop $1
	push $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push 1
	push 0
	cthis _findnotr
	ret
	end method
	method firstnotrexy1
	localstring $1
	pop $1
	push $1
	push $1
	spushs
	spop $a
	call [$a],getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getpy
	push 0
	push 1
	cthis _findnotr
	ret
	end method
	method firstnotrxy1
	localstring $1
	pop $1
	push $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push 0
	push 1
	cthis _findnotr
	ret
	end method
	method firstnotrx1ey
	localstring $1
	pop $1
	push $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getey
	push 1
	pop $b
	popax
	sub $a,$b
	push 1
	push 0
	cthis _findnotr
	ret
	end method
	end class

	class signal_pack
	method init
	end method
	method addsignals
	localstring $1
	pop $1
	push $1
	spushs
	push "operator<"
	push "signal_pack0"
	spop $a
	call [$a],addmethod
	end method
	method signal_pack0
	localstring $1
	pop $1
	push "onfinish"
	push $1
	cthis addmethod
	end method
	end class

	class ImagePos
	method init
	end method
	method getex
	cthis getpx
	cthis getw
	pop $b
	popax
	add $a,$b
	end method
	method getey
	cthis getpy
	cthis geth
	pop $b
	popax
	add $a,$b
	end method
	method getcx
	cthis getpx
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	end method
	method getcy
	cthis getpy
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis getpx
	pop $b
	popax
	sub $a,$b
	push $2
	cthis getpy
	pop $b
	popax
	sub $a,$b
	cthis move
	end method
	end class

	class ImageVisible
	method init
	new int,_isvisible
	push 1
	pop _isvisible
	end method
	method isvisible
	push _isvisible
	end method
	method show
	push 1
	pop _isvisible
	end method
	method hide
	push 0
	pop _isvisible
	end method
	end class

	class Image
	method init
	end method
	method resizemethods
	localstring $1
	pop $1
	push $1
	spushs
	push A
	push "getz"
	push 0
	push "getpx"
	push 0
	push "getpy"
	push 0
	push "getw"
	push 0
	push "geth"
	push 0
	push "isvisible"
	push 0
	spop $a
	call [$a],vars2
	push $1
	spushs
	push "show"
	push "Image0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "hide"
	push "Image1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setz"
	push "Image2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setpos"
	push "Image3"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "move"
	push "Image4"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getex"
	push "Image5"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getey"
	push "Image6"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getcx"
	push "Image7"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getcy"
	push "Image8"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isin"
	push "Image9"
	spop $a
	call [$a],addmethod
	end method
	method Image0
	push 1
	pop isvisible
	end method
	method Image1
	push 0
	pop isvisible
	end method
	method Image2
	localint $1
	pop $1
	push $1
	pop getz
	end method
	method Image3
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	pop getpx
	push $2
	pop getpy
	end method
	method Image4
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	popax
	add getpx,$a
	pop getpx
	push $2
	popax
	add getpy,$a
	pop getpy
	end method
	method Image5
	push getpx
	push getw
	pop $b
	popax
	add $a,$b
	end method
	method Image6
	push getpy
	push geth
	pop $b
	popax
	add $a,$b
	end method
	method Image7
	push getpx
	push getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	end method
	method Image8
	push getpy
	push geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	end method
	method Image9
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $4
	neg
	cmp0
	je l185
	push $3
	neg
	cmp0
	jne l188
	push $3
	cmp0
	je l189
	push isvisible
	jmp l191
l189:
	push 0
	jmp l191
l190:
	push 1
l191:
	jmp l192
l187:
	push 0
	jmp l192
l188:
	push 1
l192:
	cmp0
	je l193
	push $1
	push getpx
	cmpjae
	cmp0
	je l194
	push $1
	cthis getex
	cmpjl
	cmp0
	je l194
	push $2
	push getpy
	cmpjae
	cmp0
	je l194
	push $2
	cthis getey
	cmpjl
	jmp l196
l194:
	push 0
	jmp l196
l195:
	push 1
l196:
	jmp l186
l193:
	push 0
l186:
	jmp l184
l185:
	push 0
l184:
	end method
	end class

	class anima_pack
	parent signal_pack
	method init
	end method
	method resizemethods
	localstring $1
	pop $1
	push $1
	spushs
	push "_clanbuildpomvars"
	push "anima_pack0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	spop $a
	call [$a],_clanbuildpomvars
	push $1
	spushs
	push "setbpos"
	push "anima_pack1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "saverelpos"
	push "anima_pack2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setrelpos"
	push "anima_pack3"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "mssaverelpos"
	push "anima_pack4"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "mssetrelpos"
	push "anima_pack5"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "rplay"
	push "anima_pack6"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setcpos"
	push "anima_pack7"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "operator="
	push "anima_pack8"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "operator=="
	push "anima_pack9"
	spop $a
	call [$a],addmethod
	push $1
	cthis addsignals
	end method
	method anima_pack0
	new int,_ixp
	new int,_iyp
	end method
	method anima_pack1
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push $2
	cthis lody
	pop $b
	popax
	sub $a,$b
	cthis setpos
	end method
	method anima_pack2
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis getpx
	pop $b
	popax
	sub $a,$b
	pop _ixp
	push $2
	cthis getpy
	pop $b
	popax
	sub $a,$b
	pop _iyp
	end method
	method anima_pack3
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push _ixp
	pop $b
	popax
	sub $a,$b
	push $2
	push _iyp
	pop $b
	popax
	sub $a,$b
	cthis setbpos
	end method
	method anima_pack4
	call mouse,getpos
	cthis saverelpos
	end method
	method anima_pack5
	call mouse,getpos
	cthis setrelpos
	end method
	method anima_pack6
	localstring $1
	pop $1
	push $1
	cthis isplaying
	neg
	cmp0
	je l198
	push $1
	cthis play
l198:
	end method
	method anima_pack7
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $2
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	cthis setbpos
	end method
	method anima_pack8
	localstring $1
	pop $1
	push $1
	cthis copy
	end method
	method anima_pack9
	localstring $1
	pop $1
	cthis actionnr
	push $1
	spushs
	spop $a
	call [$a],actionnr
	cmpje
	cmp0
	je l199
	cthis framenr
	push $1
	spushs
	spop $a
	call [$a],framenr
	cmpje
	jmp l201
l199:
	push 0
	jmp l201
l200:
	push 1
l201:
	end method
	end class

	class timer_pack
	parent signal_pack
	method init
	end method
	method resizemethods
	localstring $1
	pop $1
	push $1
	cthis addsignals
	end method
	end class

	class vector_pack
	method init
	end method
	method each
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l202:
	push $2
	cthis size
	cmpjl
	cmp0
	je l203
	jmp l205
l204:
	add $2,1
	pop $2
	jmp l202
l205:
	push $1
	spushs
	push $2
	cthis get
	spop $d
	cthis [$d]
	jmp l204
l203:
	end method
	method resizemethods
	localstring $1
	pop $1
	push $1
	spushs
	push "each"
	push "each"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "operator-"
	push "vector_pack0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "operator+"
	push "vector_pack1"
	spop $a
	call [$a],addmethod
	end method
	method vector_pack0
	localdef $1
	pop $1
	push $1
	cthis remove
	cthis getname
	end method
	method vector_pack1
	localdef $1
	pop $1
	push $1
	cthis add
	cthis getname
	end method
	end class

	method new_object
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push $2
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	push $1
	push "_pack"
	pop $b
	popax
	add $a,$b
	spushs
	push $2
	spop $a
	 clparent [$a],resizemethods
	end method
	method new_anima
	localstring $1
	pop $1
	push "anima"
	push $1
	cthis new_object
	end method
	method new_vector
	localstring $1
	pop $1
	push "vector"
	push $1
	cthis new_object
	end method
	class classanfilter
	method init
	end method
	method buildanfilter
	new filter,ft
	cthis getname
	call ft,link
	push 1
	call ft,setpivottype
	end method
	method build
	localstring $1
	pop $1
	push $1
	spushs
	push "buildanfilter"
	push "buildanfilter"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	spop $a
	call [$a],buildanfilter
	push $1
	spushs
	push "setopacity"
	push "classanfilter0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setzoom"
	push "classanfilter1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setangle"
	push "classanfilter2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getangle"
	push "classanfilter3"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "rotate"
	push "classanfilter4"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setpivottype"
	push "classanfilter5"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "unlink"
	push "classanfilter6"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "link"
	push "classanfilter7"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "blend"
	push "classanfilter8"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "mask"
	push "classanfilter9"
	spop $a
	call [$a],addmethod
	end method
	method classanfilter0
	localint $1
	pop $1
	push $1
	call ft,setopacity
	end method
	method classanfilter1
	localreal $1
	pop $1
	push $1
	call ft,setzoom
	end method
	method classanfilter2
	localreal $1
	pop $1
	push $1
	call ft,setangle
	end method
	method classanfilter3
	call ft,getangle
	ret
	end method
	method classanfilter4
	localreal $1
	pop $1
	push $1
	call ft,rotate
	end method
	method classanfilter5
	localint $1
	pop $1
	push $1
	call ft,setpivottype
	end method
	method classanfilter6
	call ft,unlink
	end method
	method classanfilter7
	cthis getname
	call ft,link
	end method
	method classanfilter8
	localstring $1
	pop $1
	push $1
	call ft,blend
	end method
	method classanfilter9
	localstring $1
	pop $1
	push $1
	call ft,mask
	end method
	end class

	class classancounter
	method init
	new int,iile
	new int,id
	new string,_san
	new vector,_vs
	new int,_pos
	end method
	method set
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	pop _san
	push $2
	pop iile
	push 0
	pop id
	call $1,length
	pop _pos
	push $2
	push 0
	call _vs,resize
	end method
	method get
	localstring $1
	push _san
	push id
	pop $b
	popax
	add $a,$b
	pop $1
	push id
	push 1
	pop $b
	popax
	add $a,$b
	push iile
	pop $b
	popax
	div $a,$b
	push $d
	pop id
	push $1
	ret
	end method
	method getf
	localint $1
	push 0
	pop $1
l206:
	push $1
	push iile
	cmpjl
	cmp0
	je l207
	jmp l209
l208:
	add $1,1
	pop $1
	jmp l206
l209:
	push $1
	call _vs,get
	neg
	cmp0
	je l211
	push $1
	push 1
	call _vs,set
	push _san
	push $1
	pop $b
	popax
	add $a,$b
	ret
l211:
	jmp l208
l207:
	push "null"
	ret
	end method
	method retf
	localstring $1
	pop $1
	push _pos
	push 10
	call $1,getb
	push 0
	call _vs,set
	end method
	method isfree
	localint $1
	pop $1
	push $1
	call _vs,get
	ret
	end method
	method getile
	push iile
	ret
	end method
	end class

	class gmobjvec
	method init
	new vector,lsim
	push "string"
	call lsim,type
	end method
	method operator=
	localstring $1
	pop $1
	push $1
	call engine,varexist
	cmp0
	je l213
	push $1
	spushs
	spop $a
	call [$a],gettype
	spushs
	push "vector"
	cmpst
	jne l215
	spop $a
	push $1
	cthis copy
	jmp l214
l215:
	push "gmobjvec"
	cmpst
	jne l216
	spop $a
	push $1
	cthis copy
	jmp l214
l216:
	push "gmimgvec"
	cmpst
	jne l217
	spop $a
	push $1
	cthis copy
	jmp l214
l217:
	spop $a
	cthis free
	push $1
	cthis add
l214:
	jmp l212
l213:
	cthis free
	push $1
	cthis add
l212:
	end method
	method save
	localstring $1
	pop $1
	push $1
	call lsim,save
	end method
	method load
	localstring $1
	pop $1
	push $1
	call lsim,load
	end method
	method operator+
	localstring $1
	pop $1
	push $1
	cthis add
	cthis getname
	ret
	end method
	method operator-
	localstring $1
	pop $1
	push $1
	cthis remove
	cthis getname
	ret
	end method
	method removegr
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l218:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l219
	jmp l221
l220:
	add $2,1
	pop $2
	jmp l218
l221:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis remove
	jmp l220
l219:
	end method
	method addtogr
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l222:
	push $2
	cthis size
	cmpjl
	cmp0
	je l223
	jmp l225
l224:
	add $2,1
	pop $2
	jmp l222
l225:
	push $1
	spushs
	push $2
	cthis get
	spop $a
	call [$a],add
	jmp l224
l223:
	end method
	method addgr
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l226:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l227
	jmp l229
l228:
	add $2,1
	pop $2
	jmp l226
l229:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis add
	jmp l228
l227:
	end method
	method addgroups
	push "addgr"
	cthis withlist
	end method
	method copy
	localstring $1
	pop $1
	cthis free
	push $1
	cthis addgr
	end method
	method free
	call lsim,free
	end method
	method size
	call lsim,size
	ret
	end method
	method empty
	cthis size
	push 0
	cmpje
	ret
	end method
	method hash
	call lsim,hash
	end method
	method first
	push 0
	call lsim,get
	ret
	end method
	method last
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	call lsim,get
	ret
	end method
	method print
	call lsim,print
	end method
	method get
	localint $1
	pop $1
	push $1
	call lsim,get
	ret
	end method
	method set
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	call lsim,set
	end method
	method add
	localstring $1
	pop $1
	push $1
	call lsim,add
	end method
	method additer
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
l230:
	push $3
	push 0
	cmpja
	cmp0
	je l231
	push $1
	push $2
	pop $b
	popax
	add $a,$b
	cthis add
	add $2,1
	pop $2
	sub $3,1
	pop $3
	jmp l230
l231:
	end method
	method buildarray
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	call gameapi,getgamename
	spushs
	push $1
	push $2
	push $3
	spop $a
	call [$a],newarray
	push $2
	push 0
	push $3
	cthis additer
	end method
	method deleteall
	localint $1
	push 0
	pop $1
l232:
	push $1
	cthis size
	cmpjl
	cmp0
	je l233
	jmp l235
l234:
	add $1,1
	pop $1
	jmp l232
l235:
	push $1
	cthis get
	spushs
	spop $d
	delete [$d]
	jmp l234
l233:
	end method
	method deleteallgm
	localdef $1
	call gameapi,getgamename
	pop $1
	localint $2
	push 0
	pop $2
l236:
	push $2
	cthis size
	cmpjl
	cmp0
	je l237
	jmp l239
l238:
	add $2,1
	pop $2
	jmp l236
l239:
	push $1
	spushs
	push $2
	cthis get
	spop $a
	call [$a],vardel
	jmp l238
l237:
	end method
	method deleteallgmobj
	localdef $1
	call gameapi,getgamename
	pop $1
	localint $2
	push 0
	pop $2
l240:
	push $2
	cthis size
	cmpjl
	cmp0
	je l241
	jmp l243
l242:
	add $2,1
	pop $2
	jmp l240
l243:
	push $1
	spushs
	push $2
	cthis get
	spop $a
	call [$a],deletegmobj
	jmp l242
l241:
	end method
	method lockall
	push "lock"
	cthis eval
	cthis print
	end method
	method unlockall
	push "unlock"
	cthis eval
	end method
	method addbegin
	localstring $1
	pop $1
	push $1
	call lsim,addbegin
	end method
	method swap
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call lsim,swap
	end method
	method addonce
	localstring $1
	pop $1
	push $1
	call lsim,contains
	neg
	cmp0
	je l245
	push $1
	call lsim,add
l245:
	end method
	method sepadd
	localstring $1
	pop $1
	localstring $2
	pop $2
l246:
	push $2
	push $1
	cmpjne
	cmp0
	je l247
	push $2
	cthis addbegin
	pop $2
	jmp l246
l247:
	end method
	method addlist
	push A
	cthis sepadd
	end method
	method removelist
	push "remove"
	cthis withlist
	end method
	method insertat
	localstring $1
	localint $2
	pop $2
	pop $1
	localdef $3
	cthis size
	pop $3
	push $2
	push 0
	cmpjle
	cmp0
	je l249
	push $1
	cthis addbegin
	jmp l248
l249:
	push $2
	push $3
	cmpjae
	cmp0
	je l251
	push $1
	cthis add
	jmp l250
l251:
	push "null"
	cthis add
	localdef $4
	push $3
	pop $4
l252:
	push $4
	push $2
	cmpja
	cmp0
	je l253
	jmp l255
l254:
	sub $4,1
	pop $4
	jmp l252
l255:
	push $4
	push $4
	push 1
	pop $b
	popax
	sub $a,$b
	cthis get
	cthis set
	jmp l254
l253:
	push $2
	push $1
	cthis set
l250:
l248:
	end method
	method remove
	localstring $1
	pop $1
	push $1
	call lsim,remove
	end method
	method removeat
	localint $1
	pop $1
	push $1
	call lsim,removeat
	end method
	method removefirst
	push 0
	call lsim,removeat
	end method
	method removelast
	cthis size
	push 1
	pop $b
	popax
	sub $a,$b
	call lsim,removeat
	end method
	method removealloccurs
	localstring $1
	pop $1
l256:
	push $1
	cthis contains
	cmp0
	je l257
	push $1
	cthis remove
	jmp l256
l257:
	end method
	method removeif
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l258:
	push $2
	cthis size
	cmpjl
	cmp0
	je l259
	jmp l261
l260:
	add $2,1
	pop $2
	jmp l258
l261:
	push $2
	cthis get
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	cmp0
	je l263
	push $2
	cthis removeat
l263:
	jmp l260
l259:
	end method
	method find
	localstring $1
	pop $1
	push $1
	call lsim,find
	ret
	end method
	method contains
	localstring $1
	pop $1
	push $1
	call lsim,contains
	ret
	end method
	method addgroup
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	push 0
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	cthis addgroup2
	end method
	method addgroup2
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
l264:
	push $2
	push $3
	cmpjle
	cmp0
	je l265
	push $1
	push $2
	pop $b
	popax
	add $a,$b
	cthis add
	add $2,1
	pop $2
	jmp l264
l265:
	end method
	method rand
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpja
	cmp0
	je l267
	call $1,rand
	cthis get
	jmp l266
l267:
	push "null"
l266:
	end method
	method randdiff
	localstring $1
	pop $1
	localint $2
	cthis size
	pop $2
	push $2
	push 0
	cmpja
	cmp0
	je l269
	localint $3
	call $2,rand
	pop $3
	localint $4
	push $3
	pop $4
l270:
	push $3
	cthis get
	push $1
	cmpje
	cmp0
	je l271
	push $3
	push 1
	pop $b
	popax
	add $a,$b
	push $2
	pop $b
	popax
	div $a,$b
	push $d
	pop $3
	push $3
	push $4
	cmpje
	cmp0
	je l273
	push "null"
	ret
l273:
	jmp l270
l271:
	push $3
	cthis get
	ret
l269:
	push "null"
	end method
	method buildfullvars
	push "gmobjvec0"
	cthis each
	end method
	method gmobjvec0
	localdef $1
	pop $1
	cthis buildfullname
	end method
	method buildvars
	push "gmobjvec1"
	cthis each
	end method
	method gmobjvec1
	localdef $1
	pop $1
	cthis getname
	cthis addtogamevars
	end method
	method movefrom
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $1
	cthis find
	pop $4
	push $4
	push 0
	cmpjae
	cmp0
	je l275
l276:
	push $4
	call lsim,size
	cmpjl
	cmp0
	je l277
	push $4
	call lsim,get
	spushs
	push $2
	push $3
	spop $a
	call [$a],move
	add $4,1
	pop $4
	jmp l276
l277:
l275:
	end method
	method move
	localint $1
	localint $2
	pop $2
	pop $1
	push "move"
	push $1
	push $2
	cthis eval2
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push "setpos"
	push $1
	push $2
	cthis eval2
	end method
	method show
	push "show"
	cthis eval
	end method
	method hide
	push "hide"
	cthis eval
	end method
	method stop
	localint $1
	pop $1
	push "stop"
	push $1
	cthis eval1
	end method
	method play
	push "play"
	cthis eval
	end method
	method setdelay
	localint $1
	pop $1
	push "setdelay"
	push $1
	cthis eval1
	end method
	method graddmethod
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "addmethod"
	push $1
	push $2
	cthis eval2
	end method
	method getimg
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $5
l278:
	push $5
	push 0
	cmpjae
	cmp0
	je l279
	jmp l281
l280:
	sub $5,1
	pop $5
	jmp l278
l281:
	push $5
	call lsim,get
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],isin
	cmp0
	je l283
	push $5
	call lsim,get
	ret
l283:
	jmp l280
l279:
	push "null"
	ret
	end method
	method isin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $5
l284:
	push $5
	push 0
	cmpjae
	cmp0
	je l285
	jmp l287
l286:
	sub $5,1
	pop $5
	jmp l284
l287:
	push $5
	call lsim,get
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],isin
	cmp0
	je l289
	push $5
	push 1
	pop $b
	popax
	add $a,$b
	ret
l289:
	jmp l286
l285:
	push 0
	ret
	end method
	method setframe
	localdef $1
	localint $2
	pop $2
	pop $1
	push "setframe"
	push $1
	push $2
	cthis eval2
	end method
	method setz
	localint $1
	pop $1
	push "setz"
	push $1
	cthis eval1
	end method
	method eval
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l290:
	push $2
	call lsim,size
	cmpjl
	cmp0
	je l291
	jmp l293
l292:
	add $2,1
	pop $2
	jmp l290
l293:
	push $2
	call lsim,get
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	jmp l292
l291:
	end method
	method eval1
	localstring $1
	localdef $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l294:
	push $3
	call lsim,size
	cmpjl
	cmp0
	je l295
	jmp l297
l296:
	add $3,1
	pop $3
	jmp l294
l297:
	push $3
	call lsim,get
	spushs
	push $1
	spushs
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	jmp l296
l295:
	end method
	method eval2
	localstring $1
	localdef $2
	localdef $3
	pop $3
	pop $2
	pop $1
	localint $4
	push 0
	pop $4
l298:
	push $4
	call lsim,size
	cmpjl
	cmp0
	je l299
	jmp l301
l300:
	add $4,1
	pop $4
	jmp l298
l301:
	push $4
	call lsim,get
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $d
	spop $a
	call [$a],[$d]
	jmp l300
l299:
	end method
	method eval3
	localstring $1
	localdef $2
	localdef $3
	localdef $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push 0
	pop $5
l302:
	push $5
	call lsim,size
	cmpjl
	cmp0
	je l303
	jmp l305
l304:
	add $5,1
	pop $5
	jmp l302
l305:
	push $5
	call lsim,get
	spushs
	push $1
	spushs
	push $2
	push $3
	push $4
	spop $d
	spop $a
	call [$a],[$d]
	jmp l304
l303:
	end method
	method _find
	localstring $1
	localdef $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l306:
	push $3
	cthis size
	cmpjl
	cmp0
	je l307
	jmp l309
l308:
	add $3,1
	pop $3
	jmp l306
l309:
	push $3
	cthis get
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	push $2
	cmpje
	cmp0
	je l311
	push $3
	ret
l311:
	jmp l308
l307:
	push 1
	popax
	sub 0,$a
	end method
	method _find1
	localstring $1
	localdef $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l312:
	push $3
	cthis size
	cmpjl
	cmp0
	je l313
	jmp l315
l314:
	add $3,1
	pop $3
	jmp l312
l315:
	push $3
	cthis get
	spushs
	push $1
	spushs
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	cmp0
	je l317
	push $3
	ret
l317:
	jmp l314
l313:
	push 1
	popax
	sub 0,$a
	end method
	method each
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l318:
	push $2
	cthis size
	cmpjl
	cmp0
	je l319
	jmp l321
l320:
	add $2,1
	pop $2
	jmp l318
l321:
	push $2
	cthis get
	spushs
	push $1
	spushs
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	jmp l320
l319:
	end method
	method each1
	localstring $1
	localdef $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l322:
	push $3
	cthis size
	cmpjl
	cmp0
	je l323
	jmp l325
l324:
	add $3,1
	pop $3
	jmp l322
l325:
	push $3
	cthis get
	spushs
	push $1
	spushs
	push $3
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	jmp l324
l323:
	end method
	method each2
	localstring $1
	localdef $2
	localdef $3
	pop $3
	pop $2
	pop $1
	localint $4
	push 0
	pop $4
l326:
	push $4
	cthis size
	cmpjl
	cmp0
	je l327
	jmp l329
l328:
	add $4,1
	pop $4
	jmp l326
l329:
	push $4
	cthis get
	spushs
	push $1
	spushs
	push $4
	push $2
	push $3
	spop $d
	spop $a
	call [$a],[$d]
	jmp l328
l327:
	end method
	method ineach
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l330:
	push $2
	cthis size
	cmpjl
	cmp0
	je l331
	jmp l333
l332:
	add $2,1
	pop $2
	jmp l330
l333:
	push $2
	cthis get
	spushs
	push $1
	spushs
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	neg
	cmp0
	je l335
	push 0
	ret
l335:
	jmp l332
l331:
	push 1
	end method
	method find_closest
	localstring $1
	localstring $2
	pop $2
	pop $1
	cthis empty
	cmp0
	je l337
	ret
l337:
	localint $3
	push 0
	pop $3
	localreal $4
	localreal $5
	push 0
	cthis get
	spushs
	push $2
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	pop $5
	localint $6
	push 1
	pop $6
l338:
	push $6
	cthis size
	cmpjl
	cmp0
	je l339
	jmp l341
l340:
	add $6,1
	pop $6
	jmp l338
l341:
	push $6
	cthis get
	spushs
	push $2
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	pop $4
	push $4
	push $5
	cmpjl
	cmp0
	je l343
	push $6
	pop $3
	push $5
	pop $4
l343:
	jmp l340
l339:
	push $3
	end method
	method sortimgsfun
	localstring $1
	pop $1
	push $1
	call lsim,vecsort
	end method
	method sortimgs
	push "_scmpimg1"
	call lsim,vecsort
	end method
	method _scmpimg1
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getz
	push $2
	spushs
	spop $a
	call [$a],getz
	cmpjl
	cmp0
	jne l345
	push $1
	spushs
	spop $a
	call [$a],getz
	push $2
	spushs
	spop $a
	call [$a],getz
	cmpje
	cmp0
	je l346
	push $1
	spushs
	spop $a
	call [$a],getidobj
	push $2
	spushs
	spop $a
	call [$a],getidobj
	cmpjl
	jmp l348
l346:
	push 0
	jmp l348
l347:
	push 1
l348:
	jmp l349
l344:
	push 0
	jmp l349
l345:
	push 1
l349:
	ret
	end method
	end class

	class gmimgvec
	parent gmobjvec
	method init
	clparent gmobjvec,init
	new int,_ix
	push 0
	pop _ix
	new int,_iy
	push 0
	pop _iy
	new int,_iz
	push 0
	pop _iz
	new int,_ifound
	push 1
	popax
	sub 0,$a
	pop _ifound
	new string,sanload
	push "null"
	pop sanload
	end method
	method _setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	pop _iy
	pop _ix
	end method
	method lodx
	push 0
	end method
	method lody
	push 0
	end method
	method getposx
	push _ix
	ret
	end method
	method getposy
	push _iy
	ret
	end method
	method getpos
	push _ix
	push _iy
	ret
	end method
	method getpx
	push _ix
	ret
	end method
	method getpy
	push _iy
	ret
	end method
	method getw
	cthis getex
	cthis getpx
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method geth
	cthis getey
	cthis getpy
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method getcx
	cthis getpx
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	ret
	end method
	method getcy
	cthis getpy
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	ret
	end method
	method getz
	push _iz
	ret
	end method
	method getex
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpjle
	cmp0
	je l351
	push _ix
	ret
l351:
	localint $2
	push 0
	cthis get
	spushs
	spop $a
	call [$a],getex
	pop $2
	localint $3
	localint $4
	push 1
	pop $4
l352:
	push $4
	push $1
	cmpjl
	cmp0
	je l353
	jmp l355
l354:
	add $4,1
	pop $4
	jmp l352
l355:
	push $4
	cthis get
	spushs
	spop $a
	call [$a],getex
	pop $3
	push $3
	push $2
	cmpja
	cmp0
	je l357
	push $3
	pop $2
l357:
	jmp l354
l353:
	push $2
	ret
	end method
	method getey
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpjle
	cmp0
	je l359
	push _iy
	ret
l359:
	localint $2
	push 0
	cthis get
	spushs
	spop $a
	call [$a],getey
	pop $2
	localint $3
	localint $4
	push 1
	pop $4
l360:
	push $4
	push $1
	cmpjl
	cmp0
	je l361
	jmp l363
l362:
	add $4,1
	pop $4
	jmp l360
l363:
	push $4
	cthis get
	spushs
	spop $a
	call [$a],getey
	pop $3
	push $3
	push $2
	cmpja
	cmp0
	je l365
	push $3
	pop $2
l365:
	jmp l362
l361:
	push $2
	ret
	end method
	method _getpx
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpjle
	cmp0
	je l367
	push _ix
	ret
l367:
	localint $2
	push 0
	cthis get
	spushs
	spop $a
	call [$a],getpx
	pop $2
	localint $3
	localint $4
	push 1
	pop $4
l368:
	push $4
	push $1
	cmpjl
	cmp0
	je l369
	jmp l371
l370:
	add $4,1
	pop $4
	jmp l368
l371:
	push $4
	cthis get
	spushs
	spop $a
	call [$a],getpx
	pop $3
	push $3
	push $2
	cmpjl
	cmp0
	je l373
	push $3
	pop $2
l373:
	jmp l370
l369:
	push $2
	ret
	end method
	method _getpy
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpjle
	cmp0
	je l375
	push _iy
	ret
l375:
	localint $2
	push 0
	cthis get
	spushs
	spop $a
	call [$a],getpy
	pop $2
	localint $3
	localint $4
	push 1
	pop $4
l376:
	push $4
	push $1
	cmpjl
	cmp0
	je l377
	jmp l379
l378:
	add $4,1
	pop $4
	jmp l376
l379:
	push $4
	cthis get
	spushs
	spop $a
	call [$a],getpy
	pop $3
	push $3
	push $2
	cmpjl
	cmp0
	je l381
	push $3
	pop $2
l381:
	jmp l378
l377:
	push $2
	ret
	end method
	method _getw
	cthis getex
	cthis _getpx
	pop $b
	popax
	sub $a,$b
	end method
	method _geth
	cthis getey
	cthis _getpy
	pop $b
	popax
	sub $a,$b
	end method
	method setz
	localint $1
	pop $1
	push $1
	pop _iz
	push "setz"
	push $1
	cthis eval1
	end method
	method move
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	popax
	add _ix,$a
	pop _ix
	push $2
	popax
	add _iy,$a
	pop _iy
	push "move"
	push $1
	push $2
	cthis eval2
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	pop _ix
	push $2
	pop _iy
	push "setpos"
	push $1
	push $2
	cthis eval2
	end method
	method setpos2
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	pop _ix
	push $2
	pop _iy
	cthis empty
	neg
	cmp0
	je l383
	push 0
	cthis get
	spushs
	spop $a
	call [$a],getpx
	popax
	sub $1,$a
	pop $1
	push 0
	cthis get
	spushs
	spop $a
	call [$a],getpy
	popax
	sub $2,$a
	pop $2
	push $1
	popax
	sub 0,$a
	push $2
	popax
	sub 0,$a
	cthis move
l383:
	end method
	method changeframe
	localint $1
	pop $1
	localstring $2
	localint $3
	push 0
	pop $3
l384:
	push $3
	cthis size
	cmpjl
	cmp0
	je l385
	jmp l387
l386:
	add $3,1
	pop $3
	jmp l384
l387:
	push $3
	cthis get
	pop $2
	push $2
	spushs
	push $2
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],actionnr
	push $1
	spop $a
	call [$a],setframe
	jmp l386
l385:
	end method
	method nplay
	localint $1
	pop $1
	push "play"
	push $1
	cthis eval1
	end method
	method txtreset
	localint $1
	push 0
	pop $1
l388:
	push $1
	cthis size
	cmpjl
	cmp0
	je l389
	jmp l391
l390:
	add $1,1
	pop $1
	jmp l388
l391:
	push $1
	cthis get
	spushs
	push ""
	spop $a
	call [$a],txtset
	jmp l390
l389:
	end method
	method anputgr
	push "anputgr"
	cthis eval
	end method
	method anputy
	localint $1
	pop $1
	push "anputy"
	push ipos
	cthis eval1
	end method
	method isin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $5
l392:
	push $5
	push 0
	cmpjae
	cmp0
	je l393
	jmp l395
l394:
	sub $5,1
	pop $5
	jmp l392
l395:
	push $5
	call lsim,get
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],isin
	cmp0
	je l397
	push $5
	pop _ifound
	push $5
	push 1
	pop $b
	popax
	add $a,$b
	ret
l397:
	jmp l394
l393:
	push 1
	popax
	sub 0,$a
	pop _ifound
	push 0
	ret
	end method
	method isinfunc
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localint $4
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $4
l398:
	push $4
	push 0
	cmpjae
	cmp0
	je l399
	jmp l401
l400:
	sub $4,1
	pop $4
	jmp l398
l401:
	push $4
	call lsim,get
	spushs
	push $3
	spushs
	push $1
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	cmp0
	je l403
	push $4
	pop _ifound
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	ret
l403:
	jmp l400
l399:
	push 1
	popax
	sub 0,$a
	pop _ifound
	push 0
	ret
	end method
	method isincut
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $5
l404:
	push $5
	push 0
	cmpjae
	cmp0
	je l405
	jmp l407
l406:
	sub $5,1
	pop $5
	jmp l404
l407:
	push $5
	call lsim,get
	spushs
	push $1
	push $2
	spop $a
	call [$a],withincut
	cmp0
	je l409
	push $5
	call lsim,get
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],isin
	jmp l411
l409:
	push 0
	jmp l411
l410:
	push 1
l411:
	cmp0
	je l412
	push $5
	pop _ifound
	push $5
	push 1
	pop $b
	popax
	add $a,$b
	ret
l412:
	jmp l406
l405:
	push 1
	popax
	sub 0,$a
	pop _ifound
	push 0
	ret
	end method
	method findif
	localstring $1
	pop $1
	push $1
	push 1
	cthis _find
	end method
	method getfound
	push _ifound
	ret
	end method
	method getsfound
	push _ifound
	cthis get
	ret
	end method
	method findfr
	localint $1
	pop $1
	push "framenr"
	push $1
	cthis _find
	end method
	method findsfr
	localstring $1
	pop $1
	push "framename"
	push $1
	cthis _find
	end method
	method findac
	localint $1
	pop $1
	push "actionnr"
	push $1
	cthis _find
	end method
	method findsac
	localstring $1
	pop $1
	push "actionname"
	push $1
	cthis _find
	end method
	method nearest_to
	localstring $1
	pop $1
	push $1
	push "gmimgvec0"
	cthis find_closest
	end method
	method gmimgvec0
	localstring $1
	pop $1
	cthis getname
	push $1
	call cllen,ilen5
	end method
	method getsac
	localstring $1
	pop $1
	push $1
	cthis findsac
	cthis get
	end method
	method getsacfr
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l413:
	push $3
	cthis size
	cmpjl
	cmp0
	je l414
	jmp l416
l415:
	add $3,1
	pop $3
	jmp l413
l416:
	push $3
	cthis get
	spushs
	spop $a
	call [$a],actionname
	push $1
	cmpje
	cmp0
	je l418
	push $3
	cthis get
	spushs
	spop $a
	call [$a],framenr
	push $2
	cmpje
	jmp l420
l418:
	push 0
	jmp l420
l419:
	push 1
l420:
	cmp0
	je l421
	push $3
	cthis get
	ret
l421:
	jmp l415
l414:
	push "null"
	end method
	method blitto
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l422:
	push $2
	cthis size
	cmpjl
	cmp0
	je l423
	jmp l425
l424:
	add $2,1
	pop $2
	jmp l422
l425:
	push $1
	spushs
	push $2
	cthis get
	spop $a
	call [$a],blit
	jmp l424
l423:
	end method
	method sortz
	localint $1
	pop $1
	localint $2
	push 0
	pop $2
l426:
	push $2
	cthis size
	cmpjl
	cmp0
	je l427
	jmp l429
l428:
	add $2,1
	pop $2
	jmp l426
l429:
	push $2
	cthis get
	spushs
	push $1
	push $2
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setz
	jmp l428
l427:
	end method
	method loadallan
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	localstring $4
	call gameapi,getgamename
	pop $4
	push $4
	spushs
	push $1
	push $2
	push $3
	spop $a
	call [$a],newanima
	push $4
	spushs
	push $1
	push $1
	cthis getname
	spop $a
	call [$a],newanfrbyactgr
	popax
	push $1
	spushs
	spop $a
	call [$a],hide
	end method
	method operator*
	localstring $1
	pop $1
	localstring $2
	call gameapi,getgamename
	pop $2
	localstring $3
	push ".pyz"
	call $1,contains
	cmp0
	je l431
	push "an"
	push ".pyz"
	call $1,strsubes
	pop $b
	popax
	add $a,$b
	pop $3
	push $2
	spushs
	push $3
	push $1
	push 0
	spop $a
	call [$a],newanima
	jmp l430
l431:
	push $1
	pop $3
l430:
	push $3
	pop sanload
	push $2
	spushs
	push $3
	push $3
	cthis getname
	spop $a
	call [$a],newanactionsgr
	popax
	push $3
	spushs
	spop $a
	call [$a],hide
	end method
	method operator<
	localstring $1
	pop $1
	localstring $2
	call gameapi,getgamename
	pop $2
	localstring $3
	push ".pyz"
	call $1,contains
	cmp0
	je l433
	push "an"
	push ".pyz"
	call $1,strsubes
	pop $b
	popax
	add $a,$b
	pop $3
	push $2
	spushs
	push $3
	push $1
	push 0
	spop $a
	call [$a],newanima
	jmp l432
l433:
	push $1
	pop $3
l432:
	push $3
	pop sanload
	push $2
	spushs
	push $3
	push $3
	cthis getname
	spop $a
	call [$a],newanfrbyactgr
	popax
	push $3
	spushs
	spop $a
	call [$a],hide
	end method
	method deleteloaded
	cthis deleteallgm
	push sanload
	push "null"
	cmpjne
	cmp0
	je l435
	call gameapi,getgamename
	spushs
	push sanload
	spop $a
	call [$a],vardel
l435:
	end method
	end class

	class gmadvvec
	parent gmimgvec
	method init
	clparent gmimgvec,init
	end method
	method butisin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	call lsim,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $5
l436:
	push $5
	push 0
	cmpjae
	cmp0
	je l437
	jmp l439
l438:
	sub $5,1
	pop $5
	jmp l436
l439:
	push $5
	call lsim,get
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],butisin
	cmp0
	je l441
	push $5
	pop _ifound
	push $5
	push 1
	pop $b
	popax
	add $a,$b
	ret
l441:
	jmp l438
l437:
	push 1
	popax
	sub 0,$a
	pop _ifound
	push 0
	ret
	end method
	end class

	class gmmaskvec
	parent gmadvvec
	method init
	clparent gmadvvec,init
	end method
	method butisin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push 0
	push $4
	clparent gmimgvec,butisin
	end method
	end class

	new int,igmsubtitle
	push 0
	pop igmsubtitle
	class Subtitle
	method init
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localreal $7
	push 0.5
	pop $7
	localint $8
	localint $9
	localint $10
	push 255
	pop $8
	push 255
	pop $9
	push 255
	pop $10
	new int,iborx
	push $5
	pop iborx
	new int,ibory
	push $6
	pop ibory
	new font,fnt
	push $3
	push $4
	call fnt,load
	new int,ifontsize
	push $4
	pop ifontsize
	new db,dbl
	push "lang/"
	push $1
	pop $b
	popax
	add $a,$b
	call dbl,load
	localstring $11
	localstring $12
	new vector,v1
	push "string"
	call v1,type
	localint $13
	push iResX
	push 2
	push $5
	pop $b
	popax
	mul $a,$b
	pop $b
	popax
	sub $a,$b
	push $7
	push $4
	pop $b
	popax
	mul $a,$b
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	div $a,$b
	psax
	pop $13
	localint $14
	localint $15
	localint $16
	push 0
	pop $16
	localint $17
	push 0
	pop $17
l442:
	push $17
	call dbl,getrowsno
	cmpjl
	cmp0
	je l443
	jmp l445
l444:
	add $17,1
	pop $17
	jmp l442
l445:
	push $17
	push 0
	push $2
	push $17
	push 0
	call dbl,get
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	call dbl,set
	push $17
	push 1
	call dbl,get
	pop $11
	push $11
	push " "
	call v1,vecbuildfromstring
	push ""
	pop $12
	push 1
	pop $14
	push 0
	pop $15
l446:
	push $15
	call v1,size
	cmpjl
	cmp0
	je l447
	jmp l449
l448:
	add $15,1
	pop $15
	jmp l446
l449:
	call $12,length
	push $15
	call v1,get
	spushs
	spop $h
	call $h,length
	pop $b
	popax
	add $a,$b
	push 1
	pop $b
	popax
	add $a,$b
	push $13
	cmpjle
	cmp0
	je l451
	push " "
	push $15
	call v1,get
	pop $b
	popax
	add $a,$b
	popax
	add $12,$a
	pop $12
	jmp l450
l451:
	push $14
	push 1
	cmpje
	cmp0
	je l453
	push $17
	push $14
	push $12
	call dbl,set
	jmp l452
l453:
	push $17
	push $12
	call dbl,add
l452:
	push $15
	call v1,get
	pop $12
	add $14,1
	pop $14
l450:
	jmp l448
l447:
	push $14
	push 1
	cmpje
	cmp0
	je l455
	push $17
	push $14
	push $12
	call dbl,set
	jmp l454
l455:
	push $17
	push $12
	call dbl,add
l454:
	push $14
	push $16
	cmpja
	cmp0
	je l457
	push $14
	pop $16
l457:
	jmp l444
l443:
	new gmimgvec,grtxt
	localint $17
	push 0
	pop $17
l458:
	push $17
	push $16
	cmpjl
	cmp0
	je l459
	jmp l461
l460:
	add $17,1
	pop $17
	jmp l458
l461:
	push "txt"
	push $17
	pop $b
	popax
	add $a,$b
	pop $11
	push "txts"
	push $17
	pop $b
	popax
	add $a,$b
	pop $12
	push $12
	push ""
	push "fnt"
	cthis black
	clparent classgame,newtext
	push $11
	push ""
	push "fnt"
	push $8
	push $9
	push $10
	clparent classgame,newtext
	push $11
	call grtxt,add
	push $12
	call grtxt,add
	jmp l460
l459:
	new db,dbsnd
	new timer,timtxt
	push 1
	call timtxt,settick
	push 1
	call timtxt,setcycle
	push "onfinish"
	push "Subtitle0"
	call timtxt,addmethod
	push 12000
	cthis setz
	end method
	method Subtitle0
	cthis cisplaying
	neg
	cmp0
	je l463
	cthis hidesubs
	jmp l462
l463:
	cthis play
l462:
	end method
	method reset
	cthis stop
	call dbsnd,free
	end method
	method hidesubs
	call grtxt,hide
	end method
	method setz
	localint $1
	pop $1
	push $1
	call grtxt,setz
	end method
	method stop
	cthis hidesubs
	push 0
	call timtxt,stop
	end method
	method register
	localstring $1
	localstring $2
	pop $2
	pop $1
	localdef $3
	push $2
	call dbl,findbyrow
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l465
	localdef $4
	push $1
	call dbsnd,findbyrow
	pop $4
	push $4
	push 0
	cmpjae
	cmp0
	je l467
	push $4
	push 1
	push $3
	call dbsnd,set
	jmp l466
l467:
	localdef $4
	call dbsnd,addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $4
	push $4
	push $1
	call dbsnd,add
	push $4
	push $3
	call dbsnd,add
l466:
l465:
	end method
	method play
	localstring $1
	pop $1
	cthis stop
	localdef $2
	push $1
	call dbsnd,findbyrow
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l469
	push $2
	push 1
	call dbsnd,get
	pop $2
	localdef $3
	push $2
	call dbl,getcolsno
	push 1
	pop $b
	popax
	sub $a,$b
	pop $3
	localstring $4
	localstring $5
	localint $6
	push 0
	push 0
	call grtxt,setpos
	localint $7
	push 2
	pop $7
	localint $8
	push 0
	pop $8
l470:
	push $8
	push $3
	cmpjl
	cmp0
	je l471
	jmp l473
l472:
	add $8,1
	pop $8
	jmp l470
l473:
	push 2
	push $8
	pop $b
	popax
	mul $a,$b
	pop $6
	push $6
	call grtxt,get
	pop $4
	push $4
	spushs
	push $2
	push $8
	push 1
	pop $b
	popax
	add $a,$b
	call dbl,get
	spop $a
	call [$a],txtset
	push $6
	push 1
	pop $b
	popax
	add $a,$b
	call grtxt,get
	pop $5
	push $5
	spushs
	push $4
	spushs
	spop $a
	call [$a],get
	spop $a
	call [$a],txtset
	push $4
	spushs
	push iResX
	push $4
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push $8
	push ifontsize
	pop $b
	popax
	mul $a,$b
	push $7
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	push $4
	spushs
	spop $a
	call [$a],show
	push $5
	spushs
	push $4
	spushs
	spop $a
	call [$a],getpx
	push 1
	pop $b
	popax
	add $a,$b
	push $4
	spushs
	spop $a
	call [$a],getpy
	push 1
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	push $5
	spushs
	spop $a
	call [$a],show
	jmp l472
l471:
	push 0
	push iResY
	push $3
	push ifontsize
	push $7
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	mul $a,$b
	pop $b
	popax
	sub $a,$b
	push ibory
	pop $b
	popax
	sub $a,$b
	call grtxt,move
	call timtxt,play
l469:
	end method
	end class

	push igmsubtitle
	cmp0
	je l475
	push "eng_egipt.db"
	push "sounds/"
	push sgmfontbold
	push 24
	push 50
	push 15
	new Subtitle,subtitle
l475:
	class classsound
	method init
	new string,_csplay
	push "null"
	pop _csplay
	push igmsubtitle
	cmp0
	je l477
	call subtitle,reset
l477:
	end method
	method creset
	push "null"
	pop _csplay
	end method
	method cgetactsnd
	push _csplay
	ret
	end method
	method crselfplay
	localstring $1
	pop $1
	cthis cisplaying
	neg
	cmp0
	je l479
	push $1
	cthis cbplay
	jmp l478
l479:
	cthis cgetactsnd
	push $1
	cmpjne
	cmp0
	je l481
	push $1
	cthis cbplay
l481:
l478:
	end method
	method cbselfplay
	localstring $1
	pop $1
	cthis cisplaying
	neg
	cmp0
	jne l484
	cthis cgetactsnd
	push $1
	cmpjne
	jmp l485
l483:
	push 0
	jmp l485
l484:
	push 1
l485:
	cmp0
	je l486
	push $1
	cthis cbplay
l486:
	end method
	method cbplay
	localstring $1
	pop $1
	cthis cisplaying
	cmp0
	je l488
	push _csplay
	spushs
	push 1
	spop $a
	call [$a],stop
l488:
	push $1
	pop _csplay
	push $1
	push "null"
	cmpjne
	cmp0
	je l490
	push $1
	cthis csubplay
l490:
	end method
	method cbsplay
	localstring $1
	pop $1
	push $1
	pop _csplay
	push $1
	push "null"
	cmpjne
	cmp0
	je l492
	push $1
	cthis csubplay
l492:
	end method
	method cbplayfin
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push "onfinish"
	push $2
	spop $a
	call [$a],addmethod
	push $1
	cthis cbplay
	end method
	method cbplay2
	localstring $1
	pop $1
	cthis cisplaying
	cmp0
	je l494
	push _csplay
	spushs
	push 0
	spop $a
	call [$a],stop
l494:
	push $1
	pop _csplay
	push $1
	push "null"
	cmpjne
	cmp0
	je l496
	push $1
	cthis csubplay
l496:
	end method
	method crplay
	localstring $1
	pop $1
	push _csplay
	push "null"
	cmpjne
	cmp0
	je l498
	push _csplay
	spushs
	spop $a
	call [$a],isplaying
	jmp l500
l498:
	push 0
	jmp l500
l499:
	push 1
l500:
	cmp0
	je l501
	ret
l501:
	push $1
	pop _csplay
	push $1
	push "null"
	cmpjne
	cmp0
	je l503
	push $1
	cthis csubplay
l503:
	end method
	method crbgplay
	localstring $1
	pop $1
	push $1
	push "null"
	cmpjne
	cmp0
	je l505
	push $1
	spushs
	spop $a
	call [$a],isplaying
	neg
	jmp l507
l505:
	push 0
	jmp l507
l506:
	push 1
l507:
	cmp0
	je l508
	push $1
	cthis csubplay
l508:
	end method
	method crandplay
	localstring $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	call $2,rand
	push 0
	cmpje
	cmp0
	je l510
	push "c"
	push $3
	pop $b
	popax
	add $a,$b
	push "play"
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spop $d
	cthis [$d]
l510:
	end method
	method cplayf
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push "c"
	push $1
	pop $b
	popax
	add $a,$b
	push "play"
	pop $b
	popax
	add $a,$b
	spushs
	push $2
	spop $d
	cthis [$d]
	push $2
	spushs
	spop $a
	call [$a],isplaying
	cmp0
	je l512
	push $3
	push "null"
	cmpjne
	jmp l514
l512:
	push 0
	jmp l514
l513:
	push 1
l514:
	cmp0
	je l515
	push $2
	spushs
	push "onfinish"
	push $3
	spop $a
	call [$a],addmethod
l515:
	end method
	method cactsndstop
	localint $1
	pop $1
	cthis cisplaying
	cmp0
	je l517
	push _csplay
	spushs
	push $1
	spop $a
	call [$a],stop
l517:
	end method
	method cstopsnds
	localint $1
	pop $1
	call _csplay,in
	cmp0
	je l519
	cthis cisplaying
	jmp l521
l519:
	push 0
	jmp l521
l520:
	push 1
l521:
	cmp0
	je l522
	push $1
	cthis cactsndstop
l522:
	end method
	method cisplaying
	push _csplay
	push "null"
	cmpjne
	cmp0
	je l524
	push _csplay
	spushs
	spop $a
	call [$a],isplaying
	jmp l523
l524:
	push 0
l523:
	end method
	method csubplay
	localstring $1
	pop $1
	push igmsubtitle
	cmp0
	je l526
	push $1
	call subtitle,play
l526:
	push $1
	spushs
	spop $a
	call [$a],play
	end method
	end class

	class classsndbank
	method init
	new int,itype
	new int,ilicz
	push 0
	pop ilicz
	new int,iile
	new string,splay
	push "null"
	pop splay
	new string,ssnd
	push "snd"
	pop ssnd
	end method
	method loadsingle
	localstring $1
	localint $2
	pop $2
	pop $1
	push $2
	push 0
	cmpjle
	cmp0
	je l528
	push 0
	pop iile
	ret
l528:
	push $2
	pop iile
	push 0
	pop itype
	localint $3
	push 0
	pop $3
l529:
	push $3
	push $2
	cmpjl
	cmp0
	je l530
	jmp l532
l531:
	add $3,1
	pop $3
	jmp l529
l532:
	push ssnd
	push $3
	pop $b
	popax
	add $a,$b
	push $1
	clparent newvars,newsnd
	jmp l531
l530:
	end method
	method load
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $3
	push $2
	pop $b
	popax
	sub $a,$b
	push 1
	pop $b
	popax
	add $a,$b
	pop iile
	push iile
	push 0
	cmpjle
	cmp0
	je l534
	push 0
	pop iile
	ret
l534:
	push ssnd
	push 0
	push $1
	push $2
	push $3
	clparent newvars,newsnds
	push $4
	pop itype
	push $5
	push 1
	cmpje
	cmp0
	je l536
	call iile,rand
	pop ilicz
l536:
	end method
	method addmethod
	localstring $1
	localstring $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l537:
	push $3
	push iile
	cmpjl
	cmp0
	je l538
	jmp l540
l539:
	add $3,1
	pop $3
	jmp l537
l540:
	push ssnd
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	push $2
	spop $a
	call [$a],addmethod
	jmp l539
l538:
	end method
	method stop
	localint $1
	pop $1
	push splay
	push "null"
	cmpjne
	cmp0
	je l542
	push splay
	spushs
	push $1
	spop $a
	call [$a],stop
l542:
	end method
	method isplaying
	push splay
	push "null"
	cmpjne
	cmp0
	je l544
	push splay
	spushs
	spop $a
	call [$a],isplaying
	jmp l543
l544:
	push 0
l543:
	end method
	method randplay
	localint $1
	pop $1
	call $1,rand
	push 0
	cmpje
	cmp0
	je l546
	cthis play
l546:
	end method
	method playid
	localint $1
	pop $1
	push $1
	push iile
	pop $b
	popax
	div $a,$b
	push $d
	pop ilicz
	cthis play
	end method
	method play
	push 0
	cthis stop
	cthis bgplay
	end method
	method reset
	push 0
	pop ilicz
	end method
	method rbgplay
	cthis isplaying
	neg
	cmp0
	je l548
	cthis bgplay
l548:
	end method
	method rplay
	cthis isplaying
	neg
	cmp0
	je l550
	cthis play
l550:
	end method
	method bgplay
	push ssnd
	push ilicz
	pop $b
	popax
	add $a,$b
	pop splay
	push splay
	spushs
	spop $a
	call [$a],play
	push itype
	push 0
	cmpje
	cmp0
	je l552
	push ilicz
	push 1
	pop $b
	popax
	add $a,$b
	push iile
	pop $b
	popax
	div $a,$b
	push $d
	pop ilicz
	jmp l551
l552:
	push itype
	push 1
	cmpje
	cmp0
	je l554
	call iile,rand
	pop ilicz
l554:
l551:
	end method
	method setvol
	localint $1
	pop $1
	localint $2
	push 0
	pop $2
l555:
	push $2
	push iile
	cmpjl
	cmp0
	je l556
	jmp l558
l557:
	add $2,1
	pop $2
	jmp l555
l558:
	push ssnd
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spop $a
	call [$a],setvol
	jmp l557
l556:
	end method
	end class

	class SoundSource
	method init
	end method
	method setvol
	localstring $1
	localint $2
	localint $3
	localreal $4
	localreal $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	call $5,abs
	push $4
	cmpjae
	cmp0
	je l560
	push $1
	spushs
	push $3
	spop $a
	call [$a],setvol
	jmp l559
l560:
	push $1
	spushs
	push 1.0
	call $5,abs
	push $4
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $2
	pop $b
	popax
	mul $a,$b
	push $3
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setvol
l559:
	end method
	end class

	class classgame
	parent newvars
	parent classsound
	method init
	clparent newvars,init
	clparent classsound,init
	new int,_iconstid
	end method
	method bkg=
	localdef $1
	pop $1
	push ".pyz"
	call $1,contains
	cmp0
	je l562
	push "anbkg"
	push $1
	push 0
	cthis newanima
	jmp l561
l562:
	push "imgbkg"
	push $1
	push 0
	cthis newimg
l561:
	end method
	method bgr=
	localdef $1
	pop $1
	push $1
	cthis csndbgr
	end method
	method path=
	localdef $1
	pop $1
	push "scripts/"
	push $1
	pop $b
	popax
	add $a,$b
	push "/"
	pop $b
	popax
	add $a,$b
	cthis setgraphpath
	end method
	method cycle=
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push 1
	push 1
	push $2
	cthis cnewtimercyclefin
	end method
	method timer=
	localdef $1
	localdef $2
	localdef $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push 1
	push $3
	cthis cnewtimerfin
	end method
	method _getflags
	localstring $1
	pop $1
	localdef $2
	push 0
	pop $2
	push "L"
	call $1,contains
	cmp0
	je l564
	push "L"
	call $1,strremove
	push 1
	pop $2
l564:
	localdef $3
	push 0
	pop $3
	push "P"
	call $1,contains
	cmp0
	je l566
	push "P"
	call $1,strremove
	push 1
	pop $3
l566:
	localdef $4
	push 0
	pop $4
	push "H"
	call $1,contains
	cmp0
	je l568
	push "H"
	call $1,strremove
	push 1
	pop $4
l568:
	push $1
	push $2
	push $3
	push $4
	ret
	end method
	method img=
	localdef $1
	pop $1
	localdef $2
	localdef $3
	localdef $4
	push $1
	cthis _getflags
	pop $4
	pop $3
	pop $2
	pop $1
	localdef $5
	push 0
	pop $5
	push " "
	call $1,contains
	cmp0
	je l570
	push " "
	call $1,strgetfrom
	pop $5
	push " "
	call $1,strgetto
	pop $1
l570:
	localstring $6
	push "/"
	call $1,contains
	cmp0
	je l572
	new vector,_v_sfile
	push "string"
	call _v_sfile,type
	push $1
	push "/"
	call _v_sfile,vecbuildfromstring
	call _v_sfile,last
	spushs
	push 4
	spop $h
	call $h,strsube
	pop $6
	delete _v_sfile
	jmp l571
l572:
	push 4
	call $1,strsube
	pop $6
l571:
	localstring $7
	push ".pyz"
	call $1,contains
	cmp0
	je l574
	push "an"
	push $6
	pop $b
	popax
	add $a,$b
	pop $7
	push $7
	push $1
	push $5
	cthis newanima
	jmp l573
l574:
	push "img"
	push $6
	pop $b
	popax
	add $a,$b
	pop $7
	push $7
	push $1
	push $5
	cthis newimg
l573:
	push $2
	cmp0
	je l576
	push $7
	spushs
	spop $a
	call [$a],anloopfin
l576:
	push $3
	cmp0
	je l578
	push $7
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],play
l578:
	push $4
	cmp0
	je l580
	push $7
	spushs
	spop $a
	call [$a],hide
l580:
	end method
	method imgs=
	push "img="
	cthis withlist
	end method
	method clone
	localstring $1
	pop $1
	call gameapi,getgamename
	spushs
	cthis getname
	cthis gettype
	push $1
	spop $a
	call [$a],classgame0
	end method
	method classgame0
	localdef $1
	localdef $2
	localdef $3
	pop $3
	pop $2
	pop $1
	push $2
	spushs
	push $3
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	push $3
	spushs
	push $1
	spop $a
	call [$a],copy
	end method
	method clones=
	push "clone"
	cthis withlist
	end method
	method list=
	localdef $1
	pop $1
	localdef $2
	pop $2
	push $1
	spushs
	spop $e
	new gmobjvec,[$e]
l581:
	push A
	push $2
	cmpjne
	cmp0
	je l582
	push $1
	spushs
	push $2
	spop $a
	call [$a],addbegin
	pop $2
	jmp l581
l582:
	end method
	method list2=
	localdef $1
	push "gmobjvec"
	cthis newconst
	pop $1
	push $1
	cthis list=
	push $1
	end method
	method debug=
	localdef $1
	pop $1
	push $1
	call engine,setdebugstate
	end method
	method sfx=
	localstring $1
	pop $1
	localint $2
	push "N"
	call $1,contains
	pop $2
	push $2
	cmp0
	je l584
	push "N"
	call $1,strremove
l584:
	localdef $3
	localdef $4
	push $1
	cthis _getflags
	popax
	pop $4
	pop $3
	pop $1
	localdef $5
	push 100
	pop $5
	push " "
	call $1,contains
	cmp0
	je l586
	push " "
	call $1,strgetfrom
	pop $5
	push " "
	call $1,strgetto
	pop $1
l586:
	localstring $6
	push "fx"
	push $1
	pop $b
	popax
	add $a,$b
	pop $6
	push $6
	push $1
	push ".wav"
	pop $b
	popax
	add $a,$b
	cthis newsfx
	push $6
	spushs
	push $5
	spop $a
	call [$a],setvol
	push $3
	cmp0
	je l588
	push $6
	spushs
	push "onfinish"
	push "_stdsndloop"
	spop $a
	call [$a],addmethod
l588:
	push $4
	cmp0
	je l590
	push $6
	spushs
	spop $a
	call [$a],play
	jmp l589
l590:
	push $2
	cmp0
	je l592
	push $6
	spushs
	spop $a
	call [$a],playloop
l592:
l589:
	end method
	method sfxs=
	push "sfx="
	cthis withlist
	end method
	method tickstart
	push "__timspeed"
	cthis hasvar
	neg
	cmp0
	je l594
	new TicksCounter,__timspeed
l594:
	call __timspeed,start
	end method
	method tickstop
	push "ticker: "
	call __timspeed,print
	end method
	method csndplayloop
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis newsndloop
	push $1
	spushs
	spop $a
	call [$a],play
	end method
	method csndbgr
	localstring $1
	pop $1
	push "sndbgr"
	push $1
	cthis newbgr
	push "sndbgr"
	cthis sndplayloop
	end method
	method cloadcursor
	localstring $1
	pop $1
	push "."
	call $1,contains
	cmp0
	je l596
	push "imgkursor"
	push $1
	push 0
	cthis newimg
	push "imgkursor"
	pop $1
l596:
	push $1
	spushs
	spop $a
	call [$a],hide
	push $1
	call mouse,setcursor
	push $1
	call engine,stdbutcursor
	call bsms,setown
	end method
	method newimgarray
	localstring $1
	localstring $2
	localstring $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new gmimgvec,[$e]
	push $1
	spushs
	push $2
	push $3
	push $4
	spop $a
	call [$a],buildarray
	end method
	method newfont
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new font,[$e]
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],load
	end method
	method monofont
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	push sgmfontmono
	push $2
	cthis newfont
	end method
	method newfontbold
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	push sgmfontbold
	push $2
	cthis newfont
	end method
	method snewfont
	localstring $1
	localint $2
	pop $2
	pop $1
	localstring $3
	push "font"
	cthis newconst
	pop $3
	push $3
	spushs
	push $1
	push $2
	spop $a
	call [$a],load
	push $3
	ret
	end method
	method stdfont
	localint $1
	pop $1
	push sgmfontfile
	push $1
	cthis snewfont
	end method
	method stdmono
	localint $1
	pop $1
	push sgmfontmono
	push $1
	cthis snewfont
	end method
	method stdbold
	localint $1
	pop $1
	push sgmfontbold
	push $1
	cthis snewfont
	end method
	method getconstid
	add _iconstid,1
	pop _iconstid
	push _iconstid
	push 1
	pop $b
	popax
	sub $a,$b
	end method
	method newconst
	localstring $1
	pop $1
	localstring $2
	push "const"
	push $1
	pop $b
	popax
	add $a,$b
	cthis getconstid
	pop $b
	popax
	add $a,$b
	pop $2
	push $1
	spushs
	push $2
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	push $2
	ret
	end method
	method consttext
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $8
	push "text"
	cthis newconst
	pop $8
	localstring $9
	push $4
	cthis stdfont
	pop $9
	push $8
	spushs
	push $9
	spop $a
	call [$a],setfont
	push $8
	spushs
	push $1
	spop $a
	call [$a],set
	push $8
	spushs
	push $5
	push $6
	push $7
	spop $a
	call [$a],createtxt
	push $8
	spushs
	push $2
	push $3
	spop $a
	call [$a],setpos
	push $8
	ret
	end method
	method newtext
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new text,[$e]
	push $1
	spushs
	push $2
	spop $a
	call [$a],set
	push $1
	spushs
	push $3
	spop $a
	call [$a],setfont
	push $1
	spushs
	push $4
	push $5
	push $6
	spop $a
	call [$a],createtxt
	end method
	method newtextposz
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	localint $9
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	cthis newtext
	push $1
	spushs
	push $7
	push $8
	push $9
	spop $a
	call [$a],anposz
	end method
	method cfinmethod
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push "onfinish"
	push $2
	spop $a
	call [$a],addmethod
	end method
	method cnewsndfin
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis newsnd
	push $1
	push $3
	cthis cfinmethod
	end method
	method cnewsndsfin
	localstring $1
	localint $2
	localstring $3
	localint $4
	localint $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis newsnds
	push $1
	push $2
	push $2
	push $5
	push $4
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	push $6
	cthis caddobjsfunfin
	end method
	method cnewsndfinbplay
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis cnewsndfin
	push $1
	cthis cbplay
	end method
	method cnewtimerfin
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis newtimer
	push $1
	push $4
	cthis cfinmethod
	end method
	method cnewtimercyclefin
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis newtimercycle
	push $1
	push $4
	cthis cfinmethod
	end method
	method caddobjsfun
	localstring $1
	localint $2
	localint $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
l597:
	push $2
	push $3
	cmpjle
	cmp0
	je l598
	push $1
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	push $4
	push $5
	push $2
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],addmethod
	add $2,1
	pop $2
	jmp l597
l598:
	end method
	method caddobjsfunfin
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "onfinish"
	push $4
	cthis caddobjsfun
	end method
	method newancounter
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $2
	push $3
	push $4
	push $5
	cthis newanimas
	push $1
	spushs
	spop $e
	new classancounter,[$e]
	push $1
	spushs
	push $2
	push $5
	spop $a
	call [$a],set
	end method
	method newancounterh
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis newancounter
	localint $6
	push 0
	pop $6
l599:
	push $6
	push $5
	cmpjl
	cmp0
	je l600
	jmp l602
l601:
	add $6,1
	pop $6
	jmp l599
l602:
	push $2
	push $6
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],hide
	jmp l601
l600:
	end method
	method newancounterf
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis newancounter
	localint $7
	push 0
	pop $7
l603:
	push $7
	push $5
	cmpjl
	cmp0
	je l604
	jmp l606
l605:
	add $7,1
	pop $7
	jmp l603
l606:
	push $2
	push $7
	pop $b
	popax
	add $a,$b
	spushs
	push "onfinish"
	push $6
	spop $a
	call [$a],addmethod
	jmp l605
l604:
	end method
	method newancounterhf
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis newancounter
	localint $7
	push 0
	pop $7
l607:
	push $7
	push $5
	cmpjl
	cmp0
	je l608
	jmp l610
l609:
	add $7,1
	pop $7
	jmp l607
l610:
	push $2
	push $7
	pop $b
	popax
	add $a,$b
	spushs
	push "onfinish"
	push $6
	spop $a
	call [$a],addmethod
	push $2
	push $7
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],hide
	jmp l609
l608:
	end method
	method cnewanimafin
	localstring $1
	localstring $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis newanima
	push $1
	spushs
	push "onfinish"
	push $4
	spop $a
	call [$a],addmethod
	end method
	method ccopyanimafin
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis copyanima
	push $2
	spushs
	push "onfinish"
	push $3
	spop $a
	call [$a],addmethod
	end method
	method cloadwavs
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis newdb
	localint $3
	push 0
	pop $3
	localint $4
	push $1
	spushs
	spop $a
	call [$a],getrowsno
	pop $4
	localint $5
	localint $6
	localint $7
	localint $8
	localint $9
	localint $10
	localstring $11
	localstring $12
	localstring $13
	localstring $14
	localstring $15
l611:
	push $3
	push $4
	cmpjl
	cmp0
	je l612
	push $1
	spushs
	push $3
	spop $a
	call [$a],getcolsno
	pop $6
	push 0
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $12
	add $7,1
	pop $7
	push 0
	push 1
	call $12,getb
	push "#"
	cmpjne
	cmp0
	je l614
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $14
	add $7,1
	pop $7
	push $12
	push "wav"
	cmpje
	cmp0
	jne l617
	push $12
	push "sfx"
	cmpje
	jmp l618
l616:
	push 0
	jmp l618
l617:
	push 1
l618:
	cmp0
	je l619
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $13
	add $7,1
	pop $7
	push $12
	push "sfx"
	cmpje
	cmp0
	je l621
	push $14
	push $13
	cthis newsfx
	jmp l620
l621:
	push $14
	push $13
	cthis newsnd
l620:
	push $7
	push $6
	cmpjl
	cmp0
	je l623
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $12
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $13
	add $7,1
	pop $7
	push $12
	push "method"
	cmpje
	cmp0
	je l625
	push $14
	spushs
	push "onfinish"
	push $13
	spop $a
	call [$a],addmethod
	jmp l624
l625:
	push 0
	push 4
	call $12,gete
	push "play"
	cmpje
	cmp0
	je l627
	push "c"
	push 4
	push 10
	call $12,gete
	pop $b
	popax
	add $a,$b
	push "playonfin"
	pop $b
	popax
	add $a,$b
	spushs
	push $14
	push $13
	spop $d
	cthis [$d]
	jmp l626
l627:
	push $12
	push "vol"
	cmpje
	cmp0
	je l629
	push $14
	spushs
	push $13
	spop $a
	call [$a],setvol
l629:
l626:
l624:
l623:
	jmp l615
l619:
	push $12
	push "group"
	cmpje
	cmp0
	je l631
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $13
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $8
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $9
	add $7,1
	pop $7
	push $7
	push $6
	cmpjl
	cmp0
	je l633
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $12
	add $7,1
	pop $7
	push $12
	push "method"
	cmpje
	cmp0
	je l635
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $15
	add $7,1
	pop $7
	push $14
	push $8
	push $13
	push $8
	push $9
	push $15
	cthis cnewsndsfin
l635:
	jmp l632
l633:
	push $14
	push $8
	push $13
	push $8
	push $9
	cthis newsnds
l632:
	jmp l630
l631:
	push $12
	push "bank"
	cmpje
	cmp0
	je l637
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $13
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $5
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $8
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $9
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $10
	add $7,1
	pop $7
	push $14
	spushs
	spop $e
	new classsndbank,[$e]
	push $14
	spushs
	push $13
	push $5
	push $8
	push $9
	push $10
	spop $a
	call [$a],load
	push $7
	push $6
	cmpjl
	cmp0
	je l639
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $12
	add $7,1
	pop $7
	push $12
	push "method"
	cmpje
	cmp0
	je l641
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $15
	add $7,1
	pop $7
	push $14
	spushs
	push "onfinish"
	push $15
	spop $a
	call [$a],addmethod
	jmp l640
l641:
	push $12
	push "vol"
	cmpje
	cmp0
	je l643
	push $14
	spushs
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	spop $a
	call [$a],setvol
l643:
l640:
l639:
	jmp l636
l637:
	push $12
	push "method"
	cmpje
	cmp0
	je l645
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $13
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $8
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $9
	add $7,1
	pop $7
l646:
	push $8
	push $9
	cmpjle
	cmp0
	je l647
	push $13
	push $8
	pop $b
	popax
	add $a,$b
	spushs
	push "onfinish"
	push $14
	spop $a
	call [$a],addmethod
	add $8,1
	pop $8
	jmp l646
l647:
	jmp l644
l645:
	push $12
	push "singlebank"
	cmpje
	cmp0
	je l649
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $13
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	pop $8
	add $7,1
	pop $7
	push $14
	spushs
	spop $e
	new classsndbank,[$e]
	push $14
	spushs
	push $13
	push $8
	spop $a
	call [$a],loadsingle
	jmp l648
l649:
	push $12
	push "bgr"
	cmpje
	cmp0
	je l651
	push $14
	cthis csndbgr
	push $7
	push $6
	cmpjl
	cmp0
	je l653
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	push "vol"
	cmpje
	cmp0
	je l655
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	call sndbgr,setvol
	add $7,1
	pop $7
l655:
l653:
	jmp l650
l651:
	push $12
	push "music"
	cmpje
	cmp0
	je l657
	push $14
	cthis playmusic
	push $7
	push $6
	cmpjl
	cmp0
	je l659
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	push "vol"
	cmpje
	cmp0
	je l661
	add $7,1
	pop $7
	push $1
	spushs
	push $3
	push $7
	spop $a
	call [$a],get
	call sndbgr,setvol
	add $7,1
	pop $7
l661:
l659:
l657:
l650:
l648:
l644:
l636:
l630:
l615:
l614:
	add $3,1
	pop $3
	jmp l611
l612:
	end method
	method crestart
	call gameapi,getgamename
	call gameapi,play
	end method
	end class

	class clfindfunc
	method init
	end method
	method _stdfindfunc
	localstring $1
	localint $2
	localint $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
l662:
	push $2
	push $3
	cmpjle
	cmp0
	je l663
	push $1
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	push $5
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	push $4
	cmpje
	cmp0
	je l665
	push $2
	ret
l665:
	add $2,1
	pop $2
	jmp l662
l663:
	push 1
	popax
	sub 0,$a
	end method
	method _stdfindfunc2
	localstring $1
	localint $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push 0
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	push $3
	push $4
	cthis _stdfindfunc
	end method
	method cfindandeval2
	localstring $1
	localint $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push 0
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	push $3
	push $4
	push $5
	cthis cfindandeval
	end method
	method cfindandeval
	localstring $1
	localint $2
	localint $3
	localstring $4
	localstring $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localint $7
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis _stdfindfunc
	pop $7
	push $7
	push 0
	cmpjae
	cmp0
	je l667
	push $1
	push $7
	pop $b
	popax
	add $a,$b
	spushs
	push $6
	spushs
	spop $d
	spop $a
	call [$a],[$d]
l667:
	end method
	end class

	class classbutton
	method init
	new string,san
	push "anbut"
	pop san
	new string,sbut
	push "but"
	pop sbut
	new int,iilebut
	push 0
	pop iilebut
	new string,sfxmon
	push "null"
	pop sfxmon
	end method
	method _cbuildbutname
	localstring $1
	pop $1
	new string,_sbutname
	push $1
	pop _sbutname
	end method
	method cgetbutname
	push _sbutname
	ret
	end method
	method build
	localstring $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "null"
	cthis build2
	end method
	method build2
	localstring $1
	localint $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $5
	push "_"
	push san
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	spushs
	spop $e
	new anima,[$e]
	push $5
	spushs
	push $1
	spop $a
	call [$a],load
	push $5
	spushs
	push $2
	spop $a
	call [$a],setz
	localint $6
	push $5
	spushs
	spop $a
	call [$a],nofactions
	pop $6
	localint $7
	localint $8
	localint $9
	push 0
	pop $9
	localstring $10
	localstring $11
	localstring $12
	localstring $13
	localint $14
	push 0
	pop $14
l668:
	push $14
	push $6
	cmpjl
	cmp0
	je l669
	jmp l671
l670:
	add $14,1
	pop $14
	jmp l668
l671:
	push "null"
	pop $10
	push "null"
	pop $11
	push "null"
	pop $12
	push $5
	spushs
	push $14
	spop $a
	call [$a],nofframes
	pop $7
	push 1
	pop $8
l672:
	push $8
	push $7
	cmpjle
	cmp0
	je l673
	jmp l675
l674:
	add $8,1
	pop $8
	jmp l672
l675:
	push san
	push $9
	pop $b
	popax
	add $a,$b
	pop $13
	push $8
	push 1
	cmpje
	cmp0
	je l677
	push $13
	pop $10
	jmp l676
l677:
	push $8
	push 2
	cmpje
	cmp0
	je l679
	push $13
	pop $11
	jmp l678
l679:
	push $8
	push 3
	cmpje
	cmp0
	je l681
	push $13
	pop $12
l681:
l678:
l676:
	push $5
	push $13
	clparent newvars,copyanima
	push $13
	spushs
	push $14
	push $8
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setframe
	add $9,1
	pop $9
	jmp l674
l673:
	push $4
	push "null"
	cmpjne
	cmp0
	je l683
	push $4
	spushs
	push $5
	spushs
	push $14
	spop $a
	call [$a],nameofaction
	spop $a
	call [$a],contains
	jmp l685
l683:
	push 0
	jmp l685
l684:
	push 1
l685:
	cmp0
	je l686
	push $10
	spushs
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setz
	jmp l682
l686:
	push $10
	push $11
	push $12
	push $3
	cthis addbut
l682:
	jmp l670
l669:
	push $5
	spushs
	spop $a
	call [$a],hide
	end method
	method _buildfuncclick
	localstring $1
	pop $1
	new string,_sfunclick
	push $1
	pop _sfunclick
	end method
	method _stdbutclick
	push _sfunclick
	spushs
	cthis getbutname
	spop $d
	cthis [$d]
	end method
	method _buildfuncrel
	localstring $1
	pop $1
	new string,_sfuncrel
	push $1
	pop _sfuncrel
	end method
	method _stdbutrel
	push _sfuncrel
	spushs
	cthis getbutname
	spop $d
	cthis [$d]
	end method
	method _buildfuncmovon
	localstring $1
	pop $1
	new string,_sfunmovon
	push $1
	pop _sfunmovon
	end method
	method _stdbutmovon
	push sfxmon
	push "null"
	cmpjne
	cmp0
	je l688
	push sfxmon
	spushs
	spop $a
	call [$a],play
l688:
	push _sfunmovon
	spushs
	cthis getbutname
	spop $d
	cthis [$d]
	end method
	method _buildfuncmovoff
	localstring $1
	pop $1
	new string,_sfunmovoff
	push $1
	pop _sfunmovoff
	end method
	method _stdbutmovoff
	push _sfunmovoff
	spushs
	cthis getbutname
	spop $d
	cthis [$d]
	end method
	method butsigfun
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $2
	push "null"
	cmpje
	cmp0
	je l690
	ret
l690:
	push $1
	spushs
	push $4
	push $4
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push $4
	spushs
	push $2
	spop $d
	spop $a
	call [$a],[$d]
	push $1
	spushs
	push $3
	push $5
	spop $a
	call [$a],addmethod
	end method
	method sigfunc
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push 0
	pop $5
l691:
	push $5
	push iilebut
	cmpjl
	cmp0
	je l692
	jmp l694
l693:
	add $5,1
	pop $5
	jmp l691
l694:
	push sbut
	push $5
	pop $b
	popax
	add $a,$b
	push $1
	push $2
	push $3
	push $4
	cthis butsigfun
	jmp l693
l692:
	end method
	method print
	localint $1
	push 0
	pop $1
l695:
	push $1
	push iilebut
	cmpjl
	cmp0
	je l696
	jmp l698
l697:
	add $1,1
	pop $1
	jmp l695
l698:
	push sbut
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],getbutname
	call engine,print
	jmp l697
l696:
	end method
	method setrect
	localstring $1
	localint $2
	push 0
	pop $2
l699:
	push $2
	push iilebut
	cmpjl
	cmp0
	je l700
	jmp l702
l701:
	add $2,1
	pop $2
	jmp l699
l702:
	push sbut
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],getimg
	pop $1
	push sbut
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push $1
	spushs
	spop $a
	call [$a],getex
	push $1
	spushs
	spop $a
	call [$a],getey
	spop $a
	call [$a],setrect
	jmp l701
l700:
	end method
	method setflags
	localint $1
	localint $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l703:
	push $3
	push iilebut
	cmpjl
	cmp0
	je l704
	jmp l706
l705:
	add $3,1
	pop $3
	jmp l703
l706:
	push sbut
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	push $2
	spop $a
	call [$a],setflags
	jmp l705
l704:
	end method
	method sfxonmovon
	localstring $1
	pop $1
	push $1
	pop sfxmon
	end method
	method clickfunc
	localstring $1
	pop $1
	push $1
	push "onclick"
	push "_buildfuncclick"
	push "_stdbutclick"
	cthis sigfunc
	end method
	method relfunc
	localstring $1
	pop $1
	push $1
	push "onrel"
	push "_buildfuncrel"
	push "_stdbutrel"
	cthis sigfunc
	end method
	method movonfunc
	localstring $1
	pop $1
	push $1
	push "onmoveon"
	push "_buildfuncmovon"
	push "_stdbutmovon"
	cthis sigfunc
	end method
	method movofffunc
	localstring $1
	pop $1
	push $1
	push "onmoveoff"
	push "_buildfuncmovoff"
	push "_stdbutmovoff"
	cthis sigfunc
	end method
	method ilebuts
	push iilebut
	ret
	end method
	method ifind
	localstring $1
	pop $1
	push sbut
	push iilebut
	push $1
	push "getbutname"
	clparent clfindfunc,_stdfindfunc2
	ret
	end method
	method sfind
	localstring $1
	pop $1
	localint $2
	push sbut
	push iilebut
	push $1
	push "getbutname"
	clparent clfindfunc,_stdfindfunc2
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l708
	push sbut
	push $2
	pop $b
	popax
	add $a,$b
	jmp l707
l708:
	push "null"
l707:
	ret
	end method
	method _cbutfun
	localstring $1
	localstring $2
	pop $2
	pop $1
	push sbut
	cthis ilebuts
	push $1
	push "getbutname"
	push $2
	clparent clfindfunc,cfindandeval2
	end method
	method _callbutfunc
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l709:
	push $2
	push iilebut
	cmpjl
	cmp0
	je l710
	jmp l712
l711:
	add $2,1
	pop $2
	jmp l709
l712:
	push sbut
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	jmp l711
l710:
	end method
	method _cibutfunc
	localstring $1
	localint $2
	pop $2
	pop $1
	push $2
	push iilebut
	cmpja
	cmp0
	je l714
	push iilebut
	pop $2
l714:
	localint $3
	push 0
	pop $3
l715:
	push $3
	push $2
	cmpjl
	cmp0
	je l716
	jmp l718
l717:
	add $3,1
	pop $3
	jmp l715
l718:
	push sbut
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	jmp l717
l716:
	end method
	method ienable
	localint $1
	pop $1
	push "enable"
	push $1
	cthis _cibutfunc
	end method
	method benableall
	cthis resumeall
	cthis enableall
	end method
	method pauseall
	push "pause"
	cthis _callbutfunc
	end method
	method resumeall
	push "resume"
	cthis _callbutfunc
	end method
	method enableall
	push "enable"
	cthis _callbutfunc
	end method
	method disableall
	push "disable"
	cthis _callbutfunc
	end method
	method disabled
	push sbut
	push 0
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],disabled
	end method
	method benable
	localstring $1
	pop $1
	push $1
	cthis resume
	push $1
	cthis enable
	end method
	method disable
	localstring $1
	pop $1
	push $1
	push "disable"
	cthis _cbutfun
	end method
	method enable
	localstring $1
	pop $1
	push $1
	push "enable"
	cthis _cbutfun
	end method
	method pause
	localstring $1
	pop $1
	push $1
	push "pause"
	cthis _cbutfun
	end method
	method resume
	localstring $1
	pop $1
	push $1
	push "resume"
	cthis _cbutfun
	end method
	method resetall
	localint $1
	push 0
	pop $1
l719:
	push $1
	push iilebut
	cmpjl
	cmp0
	je l720
	jmp l722
l721:
	add $1,1
	pop $1
	jmp l719
l722:
	push sbut
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	push 0
	push 0
	spop $a
	call [$a],setcursorpos
	jmp l721
l720:
	end method
	method setcursorpos
	localint $1
	localint $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l723:
	push $3
	push iilebut
	cmpjl
	cmp0
	je l724
	jmp l726
l725:
	add $3,1
	pop $3
	jmp l723
l726:
	push sbut
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	push $2
	spop $a
	call [$a],setcursorpos
	jmp l725
l724:
	end method
	method getimg
	localstring $1
	pop $1
	localstring $2
	push $1
	cthis sfind
	pop $2
	push $2
	push "null"
	cmpjne
	cmp0
	je l728
	push $2
	spushs
	spop $a
	call [$a],getimg
	jmp l727
l728:
	push "null"
l727:
	ret
	end method
	method callimgfun
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis getimg
	spushs
	push $2
	spushs
	spop $d
	spop $a
	call [$a],[$d]
	end method
	method newmouse
	localstring $1
	localstring $2
	pop $2
	pop $1
	localstring $3
	push $1
	cthis sfind
	pop $3
	push $3
	push "null"
	cmpjne
	cmp0
	je l730
	push $3
	spushs
	push $2
	spop $a
	call [$a],setmouse
l730:
	end method
	method addbut
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $5
	push sbut
	push iilebut
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	push $1
	push $2
	push $3
	push $4
	clparent newvars,newbutan
	push $5
	spushs
	push "getbutname"
	push "cgetbutname"
	spop $a
	call [$a],addmethod
	push $5
	spushs
	push $1
	spushs
	spop $a
	call [$a],actionname
	spop $a
	call [$a],_cbuildbutname
	add iilebut,1
	pop iilebut
	end method
	method _addfunc
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push "null"
	cmpje
	cmp0
	je l732
	ret
l732:
	push $1
	push $2
	push "onclick"
	push "_buildfuncclick"
	push "_stdbutclick"
	cthis butsigfun
	push $1
	push $3
	push "onrel"
	push "_buildfuncrel"
	push "_stdbutrel"
	cthis butsigfun
	push $1
	push $4
	push "onmoveon"
	push "_buildfuncmovon"
	push "_stdbutmovon"
	cthis butsigfun
	push $1
	push $5
	push "onmoveoff"
	push "_buildfuncmovoff"
	push "_stdbutmovoff"
	cthis butsigfun
	end method
	method addfuncto
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	cthis sfind
	push $2
	push $3
	push $4
	push $5
	cthis _addfunc
	end method
	method addfunctolast
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push sbut
	push iilebut
	push 1
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	push $1
	push $2
	push $3
	push $4
	cthis _addfunc
	end method
	method _transmet
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "_sob"
	push $4
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	new string,[$e]
	push $1
	pop [$e]
	push "_sf"
	push $4
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	new string,[$e]
	push $2
	pop [$e]
	push $3
	spushs
	push "_trf"
	push $4
	pop $b
	popax
	add $a,$b
	spop $d
	cthis [$d]
	end method
	method transclickfunc
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "clickfunc"
	push "cl"
	cthis _transmet
	end method
	method transrelfunc
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "relfunc"
	push "rl"
	cthis _transmet
	end method
	method transmovonfunc
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "movonfunc"
	push "mn"
	cthis _transmet
	end method
	method transmovofffunc
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "movofffunc"
	push "mf"
	cthis _transmet
	end method
	method _trfcl
	localstring $1
	pop $1
	push _sobcl
	spushs
	push _sfcl
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	end method
	method _trfrl
	localstring $1
	pop $1
	push _sobrl
	spushs
	push _sfrl
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	end method
	method _trfmn
	localstring $1
	pop $1
	push sfxmon
	push "null"
	cmpjne
	cmp0
	je l734
	push sfxmon
	spushs
	spop $a
	call [$a],play
l734:
	push _sobmn
	spushs
	push _sfmn
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	end method
	method _trfmf
	localstring $1
	pop $1
	push _sobmf
	spushs
	push _sfmf
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	end method
	end class

	class classsimplebutton
	method init
	new string,simgob
	push "null"
	pop simgob
	new gmimgvec,grbut
	end method
	method stdbuild
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	cthis getgraphpath
	push $1
	pop $b
	popax
	add $a,$b
	push $2
	push 0
	push 0
	push $3
	push 0
	cthis build
	end method
	method getimgfunc
	localstring $1
	pop $1
	push simgob
	push "null"
	cmpje
	cmp0
	je l736
	push 0
	jmp l735
l736:
	push simgob
	spushs
	push $1
	spushs
	spop $d
	spop $a
	call [$a],[$d]
l735:
	end method
	method setbutpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call grbut,setpos
	end method
	method build
	localstring $1
	localstring $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	new button,but1
	cthis getname
	call but1,classsimplebutton0
	push "onclick"
	push "classsimplebutton1"
	call but1,addmethod
	push "onrel"
	push "classsimplebutton2"
	call but1,addmethod
	push "onmoveon"
	push "classsimplebutton3"
	call but1,addmethod
	push "onmoveoff"
	push "classsimplebutton4"
	call but1,addmethod
	push ".pyz"
	call $1,contains
	cmp0
	je l738
	new anima,anbut0
	push $1
	call anbut0,load
	push $3
	push $4
	call anbut0,setpos
	push $5
	call anbut0,setz
	push $6
	push 0
	call anbut0,setframe
	push "anbut0"
	pop simgob
	push simgob
	call grbut,add
	localstring $7
	push "anbut0"
	pop $7
	localstring $8
	push "null"
	pop $8
	localstring $9
	push "null"
	pop $9
	localint $10
	push $6
	call anbut0,nofframes
	pop $10
	push $10
	push 1
	cmpja
	cmp0
	je l740
	new anima,anbut1
	push "anbut0"
	call anbut1,copy
	push $6
	push 1
	call anbut1,setframe
	push "anbut1"
	pop $8
	push $8
	call grbut,add
l740:
	push $10
	push 2
	cmpja
	cmp0
	je l742
	new anima,anbut2
	push "anbut0"
	call anbut2,copy
	push $6
	push 2
	call anbut2,setframe
	push "anbut2"
	pop $8
	push $8
	call grbut,add
l742:
	push $7
	push $8
	push $9
	call but1,setan
	jmp l737
l738:
	new img,imgbut
	push "imgbut"
	pop simgob
	push simgob
	call grbut,add
	push $1
	call imgbut,load
	push $3
	push $4
	call imgbut,setpos
	push $5
	call imgbut,setz
	push "imgbut"
	push "null"
	push "null"
	call but1,set
l737:
	push $2
	call but1,setmouse
	end method
	method classsimplebutton0
	localstring $1
	pop $1
	new string,sbut
	push $1
	pop sbut
	end method
	method classsimplebutton1
	push sbut
	push "_CLICK"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method classsimplebutton2
	push sbut
	push "_REL"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method classsimplebutton3
	push sbut
	push "_MOVEON"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method classsimplebutton4
	push sbut
	push "_MOVEOFF"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end class

	class classmask
	parent classbutton
	method init
	clparent classbutton,init
	end method
	method buildmask
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push 0
	push $2
	cthis build
	localint $3
	cthis ilebuts
	pop $3
	localint $4
	push 0
	pop $4
l743:
	push $4
	push $3
	cmpjl
	cmp0
	je l744
	jmp l746
l745:
	add $4,1
	pop $4
	jmp l743
l746:
	push sbut
	push $4
	pop $b
	popax
	add $a,$b
	spushs
	push 0
	push 0
	spop $a
	call [$a],setflags
	push sbut
	push $4
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],hide
	jmp l745
l744:
	end method
	method buildmaskfunc
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis buildmask
	push $3
	cthis clickfunc
	end method
	method addmask
	localstring $1
	localstring $2
	localstring $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $5
	push sbut
	push iilebut
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	push $1
	push "null"
	push "null"
	push $3
	clparent newvars,newbutan
	push $5
	spushs
	push "getbutname"
	push "cgetbutname"
	spop $a
	call [$a],addmethod
	push $2
	push "null"
	cmpje
	cmp0
	je l748
	push $5
	spushs
	push $1
	spushs
	spop $a
	call [$a],actionname
	spop $a
	call [$a],_cbuildbutname
	jmp l747
l748:
	push $5
	spushs
	push $2
	spop $a
	call [$a],_cbuildbutname
l747:
	push $4
	cmp0
	je l750
	push $5
	spushs
	push 0
	push 0
	spop $a
	call [$a],setflags
	push $5
	spushs
	spop $a
	call [$a],hide
l750:
	add iilebut,1
	pop iilebut
	end method
	method addadvmask
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push 0
	cthis addmask
	push $4
	push "null"
	push "null"
	push "null"
	cthis addfunctolast
	end method
	end class

	method callfun
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $2
	push "null"
	cmpjne
	cmp0
	je l752
	push $1
	push "null"
	cmpje
	cmp0
	je l754
	push $2
	spushs
	spop $d
	cthis [$d]
	jmp l753
l754:
	push $1
	spushs
	push $2
	spushs
	spop $d
	spop $a
	call [$a],[$d]
l753:
l752:
	end method
	method _stdanloop
	push 1
	popax
	sub 0,$a
	cthis play
	end method
	method _stdanhide
	cthis hide
	end method
	method _stdsndloop
	cthis play
	end method
	method __std_finish
	cthis getname
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method looponfinish
	localstring $1
	pop $1
	push $1
	spushs
	push "onfinish"
	push "_stdanloop"
	spop $a
	call [$a],addmethod
	end method
	method hideonfinish
	localstring $1
	pop $1
	push $1
	spushs
	push "onfinish"
	push "_stdanhide"
	spop $a
	call [$a],addmethod
	end method
	method strsube
	localint $1
	pop $1
	push 0
	cthis length
	push $1
	pop $b
	popax
	sub $a,$b
	cthis getb
	ret
	end method
	method strsubb
	localint $1
	pop $1
	push $1
	cthis length
	push $1
	pop $b
	popax
	sub $a,$b
	cthis getb
	ret
	end method
	method strsubbs
	localstring $1
	pop $1
	call $1,length
	cthis strsubb
	ret
	end method
	method strsubes
	localstring $1
	pop $1
	call $1,length
	cthis strsube
	ret
	end method
	method strgetto
	localstring $1
	pop $1
	localdef $2
	push $1
	cthis find
	pop $2
	push $2
	push 0
	cmpjl
	cmp0
	je l756
	cthis get
	jmp l755
l756:
	push 0
	push $2
	cthis getb
l755:
	end method
	method strgetfromto
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis find
	cthis getb
	ret
	end method
	method strgetfrom
	localstring $1
	pop $1
	push $1
	cthis find
	call $1,length
	pop $b
	popax
	add $a,$b
	cthis length
	cthis getb
	ret
	end method
	method strremove
	localstring $1
	pop $1
	push $1
	cthis strgetto
	push $1
	cthis strgetfrom
	pop $b
	popax
	add $a,$b
	cthis set
	end method
	method strisbetween
	localint $1
	localint $2
	pop $2
	pop $1
	localint $3
	localint $4
	push 0
	pop $4
l757:
	push $4
	cthis length
	cmpjl
	cmp0
	je l758
	jmp l760
l759:
	add $4,1
	pop $4
	jmp l757
l760:
	push $4
	cthis getbyte
	pop $3
	push $3
	push $1
	cmpjl
	cmp0
	jne l763
	push $3
	push $2
	cmpja
	jmp l764
l762:
	push 0
	jmp l764
l763:
	push 1
l764:
	cmp0
	je l765
	push 0
	ret
l765:
	jmp l759
l758:
	push 1
	end method
	method strisint
	push BYTE0
	push BYTE9
	cthis strisbetween
	end method
	method strisbin
	push BYTE0
	push BYTE0
	push 1
	pop $b
	popax
	add $a,$b
	cthis strisbetween
	end method
	method strisalpha
	push BYTEa
	push BYTEz
	cthis strisbetween
	end method
	method streach
	localstring $1
	pop $1
	localstring $2
	localint $3
	push 0
	pop $3
l766:
	push $3
	cthis length
	cmpjl
	cmp0
	je l767
	jmp l769
l768:
	add $3,1
	pop $3
	jmp l766
l769:
	push $3
	push 1
	cthis getb
	pop $2
	push $2
	spushs
	push $1
	spushs
	push $3
	spop $d
	spop $a
	call [$a],[$d]
	jmp l768
l767:
	end method
	method strdotpos
	localint $1
	pop $1
	push "."
	cthis strgetto
	push "."
	pop $b
	popax
	add $a,$b
	push "."
	cthis strgetfrom
	spushs
	push 0
	push $1
	spop $h
	call $h,getb
	pop $b
	popax
	add $a,$b
	end method
	method swap
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	popax
	mov $a,[$a]
	psax
	push $1
	spushs
	push $2
	popax
	mov $a,[$a]
	psax
	spop $b
	popax
	mov [$b],$a
	push $2
	spushs
	spop $b
	popax
	mov [$b],$a
	end method
	method stats
	localint $1
	pop $1
	push $1
	push 0
	cmpjle
	cmp0
	je l771
	push 0
	jmp l770
l771:
	push 100
	spushs
	spop $h
	call $h,rand
	push $1
	cmpjle
l770:
	end method
	method between
	localdef $1
	localdef $2
	localdef $3
	pop $3
	pop $2
	pop $1
	push $2
	push $1
	cmpjl
	cmp0
	je l773
	push $1
	jmp l772
l773:
	push $2
	push $3
	cmpja
	cmp0
	je l775
	push $3
	jmp l774
l775:
	push $2
l774:
l772:
	end method
	method max
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push $2
	cmpja
	cmp0
	je l777
	push $1
	jmp l776
l777:
	push $2
l776:
	end method
	method min
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push $2
	cmpjl
	cmp0
	je l779
	push $1
	jmp l778
l779:
	push $2
l778:
	end method
	method imgborders
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	push "1111"
	cthis imgborderss
	end method
	method imgborderss
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	new img,_img_bor
	cthis getw
	push $1
	push $2
	push $3
	push $4
	push $5
	call _img_bor,create
	cthis getpx
	cthis getpy
	call _img_bor,setpos
	push 3
	push 1
	call $6,getb
	push "1"
	cmpje
	cmp0
	je l781
	push "_img_bor"
	cthis blit
l781:
	push 0
	cthis geth
	push $1
	pop $b
	popax
	sub $a,$b
	call _img_bor,move
	push 1
	push 1
	call $6,getb
	push "1"
	cmpje
	cmp0
	je l783
	push "_img_bor"
	cthis blit
l783:
	push $1
	cthis geth
	push $2
	push $3
	push $4
	push $5
	call _img_bor,create
	cthis getpx
	cthis getpy
	call _img_bor,setpos
	push 0
	push 1
	call $6,getb
	push "1"
	cmpje
	cmp0
	je l785
	push "_img_bor"
	cthis blit
l785:
	cthis getw
	push $1
	pop $b
	popax
	sub $a,$b
	push 0
	call _img_bor,move
	push 2
	push 1
	call $6,getb
	push "1"
	cmpje
	cmp0
	je l787
	push "_img_bor"
	cthis blit
l787:
	delete _img_bor
	end method
	method imgroundborder
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis imgborders
	cthis imgerasecorners
	end method
	method imgerasecorners
	localdef $1
	cthis getpx
	pop $1
	localdef $2
	cthis getpy
	pop $2
	push $1
	push $2
	cthis transparent
	cthis putrgba
	cthis getex
	push 1
	pop $b
	popax
	sub $a,$b
	push $2
	cthis transparent
	cthis putrgba
	cthis getex
	push 1
	pop $b
	popax
	sub $a,$b
	cthis getey
	push 1
	pop $b
	popax
	sub $a,$b
	cthis transparent
	cthis putrgba
	push $1
	cthis getey
	push 1
	pop $b
	popax
	sub $a,$b
	cthis transparent
	cthis putrgba
	end method
	method imgdrawline
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localreal $6
	localreal $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push "blit"
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	cthis imgfuncline
	end method
	method imgeraseline
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localreal $6
	localreal $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push "erase"
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	cthis imgfuncline
	end method
	method imgputoncenter
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getcy
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	cthis setpos
	end method
	method imgfuncline
	localstring $1
	localstring $2
	localint $3
	localint $4
	localint $5
	localint $6
	localreal $7
	localreal $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localdef $9
	push $5
	push $3
	pop $b
	popax
	sub $a,$b
	pop $9
	localdef $10
	push $6
	push $4
	pop $b
	popax
	sub $a,$b
	pop $10
	localreal $11
	push $9
	push 0
	cmpje
	cmp0
	je l789
	push $10
	push 0
	cmpjl
	cmp0
	je l791
	push $8
	push $4
	pop $b
	popax
	add $a,$b
	pop $11
l792:
	push $11
	push $6
	cmpjae
	cmp0
	je l793
	push $2
	spushs
	push $3
	push $11
	spop $a
	call [$a],setpos
	push $1
	spushs
	push $2
	spop $d
	cthis [$d]
	push $7
	popax
	sub $11,$a
	pop $11
	jmp l792
l793:
	push $6
	push $11
	pop $b
	popax
	sub $a,$b
	jmp l790
l791:
	push $10
	push 0
	cmpja
	cmp0
	je l795
	push $8
	push $4
	pop $b
	popax
	add $a,$b
	pop $11
l796:
	push $11
	push $6
	cmpjle
	cmp0
	je l797
	push $2
	spushs
	push $3
	push $11
	spop $a
	call [$a],setpos
	push $1
	spushs
	push $2
	spop $d
	cthis [$d]
	push $7
	popax
	add $11,$a
	pop $11
	jmp l796
l797:
	push $11
	push $6
	pop $b
	popax
	sub $a,$b
	jmp l794
l795:
	push $8
l794:
l790:
	jmp l788
l789:
	push $9
	push $10
	call $8,length
	pop $11
	localreal $12
l798:
	push $8
	push $11
	cmpjle
	cmp0
	je l799
	push 1.0
	push $11
	push $8
	pop $b
	popax
	sub $a,$b
	push $11
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	pop $12
	push $2
	spushs
	push $12
	push $9
	pop $b
	popax
	mul $a,$b
	push $3
	pop $b
	popax
	add $a,$b
	push $12
	push $10
	pop $b
	popax
	mul $a,$b
	push $4
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	push $1
	spushs
	push $2
	spop $d
	cthis [$d]
	push $7
	popax
	add $8,$a
	pop $8
	jmp l798
l799:
	push $8
	push $11
	pop $b
	popax
	sub $a,$b
l788:
	end method
	method anresizemets
	cthis getname
	clparent anima_pack,resizemethods
	end method
	method anfirstnontr
	cthis getname
	cthis getpx
	cthis getpy
	push 1
	push 0
	clparent classansearcher,_findnotr
	end method
	method anloopfin
	push "onfinish"
	push "_stdanloop"
	cthis addmethod
	end method
	method anloopplay
	localint $1
	pop $1
	cthis anloopfin
	push $1
	cthis play
	end method
	method anloopsplay
	localstring $1
	pop $1
	cthis anloopfin
	push $1
	cthis play
	end method
	method anhidefin
	push "onfinish"
	push "_stdanhide"
	cthis addmethod
	end method
	method anputgr
	cthis getey
	cthis setz
	end method
	method anputy
	localint $1
	pop $1
	push 0
	push $1
	cthis geth
	pop $b
	popax
	sub $a,$b
	cthis getpy
	pop $b
	popax
	sub $a,$b
	cthis move
	end method
	method anputx
	localint $1
	pop $1
	push 0
	push $1
	cthis geth
	pop $b
	popax
	sub $a,$b
	cthis getpy
	pop $b
	popax
	sub $a,$b
	cthis move
	end method
	method ansetposgr
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cthis setpos
	cthis anputgr
	end method
	method anplayz
	localint $1
	localint $2
	pop $2
	pop $1
	push $2
	cthis setz
	push $1
	cthis play
	end method
	method anplaygr
	localint $1
	pop $1
	push $1
	cthis play
	cthis anputgr
	end method
	method anplayzpos
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $3
	push $4
	cthis setpos
	push $1
	push $2
	cthis anplayz
	end method
	method anplaypos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cthis setpos
	push 1
	popax
	sub 0,$a
	cthis play
	end method
	method anplayposgr
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cthis ansetposgr
	push 1
	popax
	sub 0,$a
	cthis play
	end method
	method anplaypos2
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis setpos
	push $3
	cthis play
	end method
	method anplaypos3
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis setpos
	push $3
	cthis play
	end method
	method anhide
	push 0
	cthis stop
	cthis hide
	end method
	method andownpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cthis geth
	pop $b
	popax
	sub $a,$b
	cthis setpos
	end method
	method ansetbpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push $2
	cthis lody
	pop $b
	popax
	sub $a,$b
	cthis setpos
	end method
	method ansetcpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $2
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	cthis ansetbpos
	end method
	method ancenterscreen
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push iResY
	push 2
	pop $b
	popax
	div $a,$b
	psax
	cthis ansetcpos
	end method
	method ansetframe
	localint $1
	pop $1
	push 1
	popax
	sub 0,$a
	cthis actionnr
	push $1
	cthis setframe
	end method
	method ansetsframe
	localdef $1
	localstring $2
	pop $2
	pop $1
	push $1
	push 0
	cthis setframe
	localint $3
	push 0
	pop $3
l800:
	push $3
	push 1
	popax
	sub 0,$a
	cthis nofframes
	cmpjl
	cmp0
	je l801
	cthis framename
	push $2
	cmpjne
	jmp l803
l801:
	push 0
	jmp l803
l802:
	push 1
l803:
	cmp0
	je l804
	add $3,1
	pop $3
	push 1
	popax
	sub 0,$a
	push $3
	cthis setframe
	jmp l800
l804:
	end method
	method anonscreen
	cthis getcx
	cthis getcy
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	call clsurf,inscreen
	ret
	end method
	method objplayfin
	localstring $1
	pop $1
	push "onfinish"
	push $1
	cthis addmethod
	cthis play
	end method
	method objloop
	push "onfinish"
	push "_stdsndloop"
	cthis addmethod
	end method
	method objplayloop
	cthis objloop
	cthis play
	end method
	method anplayfin
	localint $1
	localstring $2
	pop $2
	pop $1
	push "onfinish"
	push $2
	cthis addmethod
	push $1
	cthis play
	end method
	method anytoz
	cthis getposy
	cthis setz
	end method
	method anposz
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis setpos
	push $3
	cthis setz
	end method
	method annextaction
	localstring $1
	pop $1
	push $1
	cthis actionnr
	push 1
	pop $b
	popax
	add $a,$b
	cthis nofactions
	pop $b
	popax
	div $a,$b
	push $d
	cthis nameofaction
	ret
	end method
	method ansetnextact
	push 1
	popax
	sub 0,$a
	cthis actionnr
	push 1
	pop $b
	popax
	add $a,$b
	cthis nofactions
	pop $b
	popax
	div $a,$b
	push $d
	push 0
	cthis setframe
	end method
	method ansetnextfr
	push 1
	popax
	sub 0,$a
	cthis framenr
	push 1
	pop $b
	popax
	add $a,$b
	push 1
	popax
	sub 0,$a
	cthis nofframes
	pop $b
	popax
	div $a,$b
	push $d
	cthis setframe
	end method
	method anaddfilter
	cthis getname
	clparent classanfilter,build
	end method
	method anaddfx
	cthis getname
	clparent AnimaFx,build
	end method
	method anputc
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis ansetbpos
	push $3
	push $1
	pop $b
	popax
	sub $a,$b
	cthis getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push $4
	push $2
	pop $b
	popax
	sub $a,$b
	cthis geth
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	cthis move
	end method
	method aninlod
	localint $1
	pop $1
	cthis getpx
	cthis lodx
	pop $b
	popax
	sub $a,$b
	cthis getpy
	cthis lody
	pop $b
	popax
	sub $a,$b
	call $1,length
	push $1
	cmpjle
	end method
	method angetcpos
	cthis getcx
	cthis getcy
	ret
	end method
	method angetcrgba
	cthis getcx
	cthis getcy
	cthis getrgba
	end method
	method anisin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push 0
	pop $5
l805:
	push $5
	cthis nofactions
	cmpjl
	cmp0
	je l806
	jmp l808
l807:
	add $5,1
	pop $5
	jmp l805
l808:
	push $5
	push 0
	cthis setframe
	push $1
	push $2
	push $3
	push $4
	cthis isin
	cmp0
	je l810
	push $5
	ret
l810:
	jmp l807
l806:
	push 1
	popax
	sub 0,$a
	end method
	method anreload
	localstring $1
	pop $1
	localint $2
	push 1
	popax
	sub 0,$a
	cthis actionnr
	pop $2
	localint $3
	cthis framenr
	pop $3
	localint $4
	push 1
	popax
	sub 0,$a
	cthis isplaying
	push 0
	cmpjne
	pop $4
	localint $5
	localint $6
	cthis getpos
	pop $6
	pop $5
	localint $7
	cthis getz
	pop $7
	push $1
	cthis getpath
	cthis load
	push $5
	push $6
	cthis setpos
	push $7
	cthis setz
	push $2
	cthis nofactions
	cmpjl
	cmp0
	je l812
	push $4
	cmp0
	je l814
	push $2
	cthis play
l814:
	push $2
	push $3
	cthis setframe
	jmp l811
l812:
	push 0
	push 0
	cthis setframe
l811:
	end method
	method anclipob
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push $1
	spushs
	spop $a
	call [$a],getex
	push $1
	spushs
	spop $a
	call [$a],getey
	cthis clip
	end method
	method ancopyan
	localstring $1
	pop $1
	push $1
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],actionnr
	push $1
	spushs
	spop $a
	call [$a],framenr
	cthis setframe
	push $1
	spushs
	spop $a
	call [$a],isvisible
	cmp0
	je l816
	cthis show
	jmp l815
l816:
	cthis hide
l815:
	push $1
	spushs
	spop $a
	call [$a],getpos
	cthis setpos
	end method
	method anconstmove
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push A
	push "mvx"
	push $2
	push "mvy"
	push $3
	cthis vars2
	push $1
	cthis setdelay
	push 1
	popax
	sub 0,$a
	push "global3"
	cthis anplayfin
	end method
	method global3
	push 1
	popax
	sub 0,$a
	cthis play
	push mvx
	push mvy
	cthis move
	end method
	method txtset
	localstring $1
	pop $1
	push $1
	cthis set
	cthis create
	end method
	method txtsetcol
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	cthis set
	push $2
	push $3
	push $4
	cthis createtxt
	end method
	method txtshadow
	localint $1
	localstring $2
	pop $2
	pop $1
	push "txts"
	cthis hasvar
	neg
	cmp0
	je l818
	new text,txts
	push $2
	call txts,setfont
l818:
	cthis get
	call txts,set
	cthis getpx
	push $1
	pop $b
	popax
	add $a,$b
	cthis getpy
	push $1
	pop $b
	popax
	add $a,$b
	call txts,setpos
	cthis getz
	push 1
	pop $b
	popax
	sub $a,$b
	call txts,setz
	call txts,show
	push 0
	push 0
	push 0
	call txts,createtxt
	end method
	method txthides
	cthis hide
	push "txts"
	cthis hasvar
	cmp0
	je l820
	call txts,hide
l820:
	end method
	method txtisin
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis getpx
	cmpjae
	cmp0
	je l821
	push $1
	cthis getpx
	cthis getw
	pop $b
	popax
	add $a,$b
	cmpjl
	cmp0
	je l821
	push $2
	cthis getpy
	cmpjae
	cmp0
	je l821
	push $2
	cthis getpy
	cthis geth
	pop $b
	popax
	add $a,$b
	cmpjle
	jmp l823
l821:
	push 0
	jmp l823
l822:
	push 1
l823:
	end method
	method txtcenter
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getcy
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	cthis setpos
	end method
	method txtright
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getex
	cthis getw
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getcy
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	cthis setpos
	end method
	method vecinc
	localint $1
	pop $1
	push $1
	push $1
	cthis get
	push 1
	pop $b
	popax
	add $a,$b
	cthis set
	end method
	method vecdec
	localint $1
	pop $1
	push $1
	push $1
	cthis get
	push 1
	pop $b
	popax
	sub $a,$b
	cthis set
	end method
	method vecnewint
	localint $1
	pop $1
	cthis free
	push $1
	push 0
	cmpja
	cmp0
	je l825
	localint $2
	push 0
	pop $2
l826:
	push $2
	push $1
	cmpjl
	cmp0
	je l827
	jmp l829
l828:
	add $2,1
	pop $2
	jmp l826
l829:
	push $2
	cthis add
	jmp l828
l827:
l825:
	end method
	method veccopy
	localstring $1
	pop $1
	cthis free
	localint $2
	push 0
	pop $2
l830:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l831
	jmp l833
l832:
	add $2,1
	pop $2
	jmp l830
l833:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis add
	jmp l832
l831:
	end method
	method vecnextid
	localdef $1
	pop $1
	localint $2
	push $1
	cthis find
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l835
	push $2
	push 1
	pop $b
	popax
	add $a,$b
	cthis size
	pop $b
	popax
	div $a,$b
	push $d
	pop $2
l835:
	push $2
	end method
	method vecprevid
	localdef $1
	pop $1
	localint $2
	push $1
	cthis find
	pop $2
	push $2
	push 0
	cmpja
	cmp0
	je l837
	sub $2,1
	pop $2
	jmp l836
l837:
	push $2
	push 0
	cmpje
	cmp0
	je l839
	cthis size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $2
l839:
l836:
	push $2
	end method
	method vecget
	localint $1
	pop $1
	push $1
	push 0
	cmpjae
	cmp0
	je l840
	push $1
	cthis size
	cmpjl
	jmp l842
l840:
	push 0
	jmp l842
l841:
	push 1
l842:
	cmp0
	je l844
	push $1
	cthis get
	jmp l843
l844:
	push "null"
l843:
	end method
	method vecnext
	localdef $1
	pop $1
	push $1
	cthis vecnextid
	cthis vecget
	end method
	method vecprev
	localdef $1
	pop $1
	push $1
	cthis vecprevid
	cthis vecget
	end method
	method veclast
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpja
	cmp0
	je l846
	push $1
	push 1
	pop $b
	popax
	sub $a,$b
	cthis get
	jmp l845
l846:
	push "null"
l845:
	end method
	method vecpop
	localdef $1
	cthis last
	pop $1
	cthis size
	push 1
	pop $b
	popax
	sub $a,$b
	cthis removeat
	push $1
	end method
	method veclimes
	localint $1
	pop $1
l847:
	cthis size
	push $1
	cmpja
	cmp0
	je l848
	cthis vecpop
	popax
	jmp l847
l848:
	end method
	method vecpopfront
	localdef $1
	push 0
	cthis get
	pop $1
	push 0
	cthis removeat
	push $1
	ret
	end method
	method vecreplace
	localdef $1
	localdef $2
	pop $2
	pop $1
	localdef $3
	push $1
	cthis find
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l850
	push $3
	push $2
	cthis set
l850:
	end method
	method insertsort
	localint $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push 1
	cmpjle
	cmp0
	je l852
	ret
l852:
	localdef $5
	localdef $6
	localint $7
	localint $8
	localint $9
	push 0
	pop $8
l853:
	push $8
	push $1
	cmpjl
	cmp0
	je l854
	jmp l856
l855:
	add $8,1
	pop $8
	jmp l853
l856:
	push $2
	spushs
	push $8
	spop $d
	cthis [$d]
	pop $5
	push $8
	pop $7
	push $8
	push 1
	pop $b
	popax
	add $a,$b
	pop $9
l857:
	push $9
	push $1
	cmpjl
	cmp0
	je l858
	jmp l860
l859:
	add $9,1
	pop $9
	jmp l857
l860:
	push $2
	spushs
	push $9
	spop $d
	cthis [$d]
	pop $6
	push $3
	spushs
	push $6
	push $5
	spop $d
	cthis [$d]
	cmp0
	je l862
	push $6
	pop $5
	push $9
	pop $7
l862:
	jmp l859
l858:
	push $4
	spushs
	push $8
	push $7
	spop $d
	cthis [$d]
	jmp l855
l854:
	end method
	method obbuildfromstring
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $2
	call $1,find
	pop $4
l863:
	push $4
	push 1
	popax
	sub 0,$a
	cmpja
	cmp0
	je l864
	push $3
	spushs
	push 0
	push $4
	call $1,getb
	spop $d
	cthis [$d]
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	call $1,strsubb
	pop $1
	push $2
	call $1,find
	pop $4
	jmp l863
l864:
	call $1,length
	push 0
	cmpja
	cmp0
	je l866
	push $3
	spushs
	push $1
	spop $d
	cthis [$d]
l866:
	end method
	method obbuildfromstring2
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $2
	call $1,find
	pop $4
l867:
	push $4
	push 1
	popax
	sub 0,$a
	cmpja
	cmp0
	je l868
	push $4
	push 0
	cmpja
	cmp0
	je l870
	push $3
	spushs
	push 0
	push $4
	call $1,getb
	spop $d
	cthis [$d]
l870:
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	call $1,strsubb
	pop $1
	push $2
	call $1,find
	pop $4
	jmp l867
l868:
	call $1,length
	push 0
	cmpja
	cmp0
	je l872
	push $3
	spushs
	push $1
	spop $d
	cthis [$d]
l872:
	end method
	method vecsort
	localstring $1
	pop $1
	cthis size
	push "get"
	push $1
	push "swap"
	cthis insertsort
	end method
	method vecbuildfromstring
	localstring $1
	localstring $2
	pop $2
	pop $1
	cthis free
	push $1
	push $2
	push "add"
	cthis obbuildfromstring
	end method
	method vecbuildfromstring2
	localstring $1
	localstring $2
	pop $2
	pop $1
	cthis free
	push $1
	push $2
	push "add"
	cthis obbuildfromstring2
	end method
	method vecremoveto
	localint $1
	pop $1
	localint $2
	push 0
	pop $2
l873:
	push $2
	push $1
	cmpjl
	cmp0
	je l874
	jmp l876
l875:
	add $2,1
	pop $2
	jmp l873
l876:
	push 0
	cthis removeat
	jmp l875
l874:
	end method
	method vecremovefrom
	localint $1
	pop $1
l877:
	push $1
	cthis size
	cmpjl
	cmp0
	je l878
	push $1
	cthis removeat
	jmp l877
l878:
	end method
	method vecfindfrom
	localint $1
	localdef $2
	pop $2
	pop $1
l879:
	push $1
	cthis size
	cmpjl
	cmp0
	je l880
	push $1
	cthis get
	push $2
	cmpje
	cmp0
	je l882
	push $1
	ret
	jmp l881
l882:
	add $1,1
	pop $1
l881:
	jmp l879
l880:
	push 1
	popax
	sub 0,$a
	ret
	end method
	method vecposfromto
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cmpje
	cmp0
	jne l885
	cthis size
	push 0
	cmpje
	jmp l886
l884:
	push 0
	jmp l886
l885:
	push 1
l886:
	cmp0
	je l887
	ret
l887:
	localdef $3
	push $1
	cthis get
	pop $3
	push $1
	push $2
	cmpja
	cmp0
	je l889
	localint $4
	push $1
	pop $4
l890:
	push $4
	push $2
	cmpja
	cmp0
	je l891
	jmp l893
l892:
	sub $4,1
	pop $4
	jmp l890
l893:
	push $4
	push $4
	push 1
	pop $b
	popax
	sub $a,$b
	cthis get
	cthis set
	jmp l892
l891:
	jmp l888
l889:
	push $1
	push $2
	cmpjl
	cmp0
	je l895
	localint $4
	push $1
	pop $4
l896:
	push $4
	push $2
	cmpjl
	cmp0
	je l897
	jmp l899
l898:
	add $4,1
	pop $4
	jmp l896
l899:
	push $4
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	cthis get
	cthis set
	jmp l898
l897:
l895:
l888:
	push $2
	push $3
	cthis set
	end method
	method vecposfirst
	localdef $1
	pop $1
	localint $2
	push $1
	cthis find
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l901
	push $2
	push 0
	cthis vecposfromto
	jmp l900
l901:
	push $1
	cthis addbegin
l900:
	end method
	method vecposlast
	localdef $1
	pop $1
	localint $2
	push $1
	cthis find
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l903
	push $2
	cthis size
	push 1
	pop $b
	popax
	sub $a,$b
	cthis vecposfromto
	jmp l902
l903:
	push $1
	cthis addbegin
l902:
	end method
	method vecset
	localdef $1
	localdef $2
	pop $2
	pop $1
	localint $3
	push $1
	cthis find
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l905
	push $3
	push $2
	cthis set
l905:
	end method
	method veceq
	localstring $1
	pop $1
	localint $2
	cthis size
	pop $2
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjne
	cmp0
	je l907
	push 0
	ret
l907:
	localint $3
	push 0
	pop $3
l908:
	push $3
	push $2
	cmpjl
	cmp0
	je l909
	jmp l911
l910:
	add $3,1
	pop $3
	jmp l908
l911:
	push $3
	cthis get
	push $1
	spushs
	push $3
	spop $a
	call [$a],get
	cmpjne
	cmp0
	je l913
	push 0
	ret
l913:
	jmp l910
l909:
	push 1
	end method
	method vecbuild
	push "addbegin"
	cthis withlist
	end method
	method veceq2
	new vector,___v
	cthis getvectype
	call ___v,type
	call ___v,vecbuild
	localint $1
	push "___v"
	cthis veceq
	pop $1
	delete ___v
	push $1
	end method
	method veccopydbrow
	localstring $1
	localint $2
	pop $2
	pop $1
	cthis free
	push $1
	push $2
	cthis vecadddbrow
	end method
	method vecadddbrow
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l914:
	push $3
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l915
	jmp l917
l916:
	add $3,1
	pop $3
	jmp l914
l917:
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	cthis add
	jmp l916
l915:
	end method
	method vecchecknext
	localint $1
	pop $1
	add $1,1
	pop $1
	push $1
	cthis size
	cmpjl
	cmp0
	je l919
	push $1
	cthis get
	jmp l918
l919:
	push "null"
l918:
	end method
	method vecsum
	cthis size
	cmp0
	je l921
	localdef $1
	push 0
	cthis get
	pop $1
	localint $2
	push 1
	pop $2
l922:
	push $2
	cthis size
	cmpjl
	cmp0
	je l923
	jmp l925
l924:
	add $2,1
	pop $2
	jmp l922
l925:
	push $2
	cthis get
	popax
	add $1,$a
	pop $1
	jmp l924
l923:
	push $1
	jmp l920
l921:
	push 0
l920:
	end method
	method dbbuild
	localint $1
	pop $1
	push $1
	push 0
	cmpjle
	cmp0
	je l927
	ret
l927:
	sub $1,1
	pop $1
	cthis free
	localstring $2
	pop $2
	localint $3
	localint $4
	push 0
	pop $4
l928:
	push $2
	push A
	cmpjne
	cmp0
	je l929
	jmp l931
l930:
	jmp l928
l931:
	push $4
	push 0
	cmpje
	cmp0
	je l933
	cthis addbeginrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $3
l933:
	push 0
	push $2
	cthis addbegin
	pop $2
	push $4
	push $1
	cmpjl
	cmp0
	je l935
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	jmp l934
l935:
	push 0
l934:
	pop $4
	jmp l930
l929:
	end method
	method dbbuild2
	cthis free
	localstring $1
	pop $1
l936:
	push $1
	push A
	cmpjne
	cmp0
	je l937
	push $1
	push "null"
	cmpje
	cmp0
	je l939
	cthis addbeginrow
	popax
	jmp l938
l939:
	push 0
	push $1
	cthis addbegin
l938:
	pop $1
	jmp l936
l937:
	end method
	method dbaddvec
	localstring $1
	pop $1
	localdef $2
	cthis addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $2
	localint $3
	push 0
	pop $3
l940:
	push $3
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l941
	jmp l943
l942:
	add $3,1
	pop $3
	jmp l940
l943:
	push $2
	push $1
	spushs
	push $3
	spop $a
	call [$a],get
	cthis add
	jmp l942
l941:
	end method
	method dbcopy
	localstring $1
	pop $1
	push $1
	push 0
	push $1
	spushs
	spop $a
	call [$a],getrowsno
	cthis dbcopyfromto
	end method
	method dbcopyrow
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	push $2
	push 1
	pop $b
	popax
	add $a,$b
	cthis dbcopyfromto
	end method
	method dbcopyfromto
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	cthis free
	localint $4
	localint $5
	localint $6
	push $2
	pop $4
l944:
	push $4
	push $3
	cmpjl
	cmp0
	je l945
	jmp l947
l946:
	add $4,1
	pop $4
	jmp l944
l947:
	cthis addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $6
	push 0
	pop $5
l948:
	push $5
	push $1
	spushs
	push $4
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l949
	jmp l951
l950:
	add $5,1
	pop $5
	jmp l948
l951:
	push $6
	push $1
	spushs
	push $4
	push $5
	spop $a
	call [$a],get
	cthis add
	jmp l950
l949:
	jmp l946
l945:
	end method
	method dbadddbrowtorow
	localint $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	localint $4
	push 0
	pop $4
l952:
	push $4
	push $2
	spushs
	push $3
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l953
	jmp l955
l954:
	add $4,1
	pop $4
	jmp l952
l955:
	push $1
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	cthis add
	jmp l954
l953:
	end method
	method dbremovecol
	localint $1
	pop $1
	localint $2
	push 0
	pop $2
l956:
	push $2
	cthis getrowsno
	cmpjl
	cmp0
	je l957
	jmp l959
l958:
	add $2,1
	pop $2
	jmp l956
l959:
	push $2
	cthis getcolsno
	push $1
	cmpja
	cmp0
	je l961
	push $2
	push $1
	cthis removeat
l961:
	jmp l958
l957:
	end method
	method dbcopyfromtos
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $1
	spushs
	push $2
	spop $a
	call [$a],findbyrow
	push 1
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	push $3
	spop $a
	call [$a],findbyrow
	cthis dbcopyfromto
	end method
	method dbremovelast
	cthis getrowsno
	push 1
	pop $b
	popax
	sub $a,$b
	cthis removerow
	end method
	method dbcuttosize
	localint $1
	pop $1
	push $1
	push 0
	cmpja
	cmp0
	je l963
l964:
	cthis getrowsno
	push $1
	cmpja
	cmp0
	je l965
	cthis dbremovelast
	jmp l964
l965:
	jmp l962
l963:
	cthis free
l962:
	end method
	method dbaddlast
	localstring $1
	pop $1
	cthis getrowsno
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	cthis add
	end method
	method dbaddstringrow
	localstring $1
	localstring $2
	pop $2
	pop $1
	cthis addrow
	popax
	push $1
	push $2
	push "dbaddlast"
	cthis obbuildfromstring
	end method
	method dbgetstringrow
	localint $1
	pop $1
	localstring $2
	push ""
	pop $2
	localint $3
	push $1
	cthis getcolsno
	pop $3
	localint $4
	push 0
	pop $4
l966:
	push $4
	push $3
	cmpjl
	cmp0
	je l967
	jmp l969
l968:
	add $4,1
	pop $4
	jmp l966
l969:
	push $1
	push $4
	cthis get
	popax
	add $2,$a
	pop $2
	jmp l968
l967:
	push $2
	end method
	method dbaddrow
	localdef $1
	cthis addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $1
	localdef $2
	pop $2
l970:
	push A
	push $2
	cmpjne
	cmp0
	je l971
	push $1
	push $2
	cthis addbegin
	localdef $2
	pop $2
	jmp l970
l971:
	end method
	method dbaddrowfrom
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	push $2
	spop $a
	call [$a],rowinrange
	cmp0
	je l973
	push $3
	push 0
	cmpjae
	jmp l975
l973:
	push 0
	jmp l975
l974:
	push 1
l975:
	cmp0
	je l976
	localint $4
	cthis addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $4
	localint $5
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	pop $5
l977:
	push $3
	push $5
	cmpjl
	cmp0
	je l978
	push $4
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	cthis add
	add $3,1
	pop $3
	jmp l977
l978:
l976:
	end method
	method dbchecknext
	localint $1
	localint $2
	pop $2
	pop $1
	add $2,1
	pop $2
	push $2
	push $1
	cthis getcolsno
	cmpjl
	cmp0
	je l980
	push $1
	push $2
	cthis get
	jmp l979
l980:
	push "null"
l979:
	end method
	method dbgets
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis findbyrow
	push $2
	cthis get
	ret
	end method
	method dbinsertless
	localint $1
	pop $1
	localint $2
	cthis addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $2
	push $2
	push $1
	cthis add
	push "cmpless"
	cthis dbsort
l981:
	push $2
	push 0
	cmpjae
	cmp0
	je l982
	push $1
	push $2
	push 0
	cthis get
	cmpje
	cmp0
	je l984
	push $2
	ret
l984:
	sub $2,1
	pop $2
	jmp l981
l982:
	push 1
	popax
	sub 0,$a
	ret
	end method
	method dbdelvar
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push 1
	cthis dbdelvarn
	ret
	end method
	method dbdelvarn
	localint $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $1
	push $2
	cthis dbfindinrow
	pop $4
	push $4
	push 0
	cmpjae
	cmp0
	je l986
	push $1
	push $4
	push $3
	cthis removen
	push 1
	ret
l986:
	push 0
	ret
	end method
	method dbfindinrow
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis rowinrange
	cmp0
	je l988
	localint $3
	push 0
	pop $3
l989:
	push $3
	push $1
	cthis getcolsno
	cmpjl
	cmp0
	je l990
	jmp l992
l991:
	add $3,1
	pop $3
	jmp l989
l992:
	push $1
	push $3
	cthis get
	push $2
	cmpje
	cmp0
	je l994
	push $3
	ret
l994:
	jmp l991
l990:
l988:
	push 1
	popax
	sub 0,$a
	ret
	end method
	method dbfindbycol
	localint $1
	localstring $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
l995:
	push $3
	cthis getrowsno
	cmpjl
	cmp0
	je l996
	jmp l998
l997:
	add $3,1
	pop $3
	jmp l995
l998:
	push $3
	push $1
	cthis get
	push $2
	cmpje
	cmp0
	je l1000
	push $3
	ret
l1000:
	jmp l997
l996:
	push 1
	popax
	sub 0,$a
	ret
	end method
	method dbrowcontains
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis dbfindinrow
	push 1
	popax
	sub 0,$a
	cmpjne
	ret
	end method
	method dbfirst
	localint $1
	pop $1
	push $1
	push 0
	cthis get
	ret
	end method
	method cmpless
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cmpjl
	ret
	end method
	method cmpabove
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cmpja
	end method
	method dbfirstless
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push 0
	cthis get
	push $2
	push 0
	cthis get
	cmpjl
	end method
	method dbsort
	localstring $1
	pop $1
	cthis getrowsno
	push "dbfirst"
	push $1
	push "swap"
	cthis insertsort
	end method
	method dbsetall
	localstring $1
	pop $1
	localdef $2
	push 0
	pop $2
l1001:
	push $2
	cthis getrowsno
	cmpjl
	cmp0
	je l1002
	jmp l1004
l1003:
	add $2,1
	pop $2
	jmp l1001
l1004:
	localdef $3
	push 0
	pop $3
l1005:
	push $3
	push $2
	cthis getcolsno
	cmpjl
	cmp0
	je l1006
	jmp l1008
l1007:
	add $3,1
	pop $3
	jmp l1005
l1008:
	push $2
	push $3
	push $1
	cthis set
	jmp l1007
l1006:
	jmp l1003
l1002:
	end method
	method dbeach_row
	localstring $1
	pop $1
	localdef $2
	push 0
	pop $2
l1009:
	push $2
	cthis getrowsno
	cmpjl
	cmp0
	je l1010
	jmp l1012
l1011:
	add $2,1
	pop $2
	jmp l1009
l1012:
	push $1
	spushs
	push $2
	spop $d
	cthis [$d]
	jmp l1011
l1010:
	end method
	method dbeq
	localstring $1
	pop $1
	cthis getrowsno
	push $1
	spushs
	spop $a
	call [$a],getrowsno
	cmpjne
	cmp0
	je l1014
	push 0
	ret
l1014:
	localint $2
	localint $3
	localint $4
	push 0
	pop $4
l1015:
	push $4
	cthis getrowsno
	cmpjl
	cmp0
	je l1016
	jmp l1018
l1017:
	add $4,1
	pop $4
	jmp l1015
l1018:
	push $4
	cthis getcolsno
	pop $2
	push $2
	push $1
	spushs
	push $4
	spop $a
	call [$a],getcolsno
	cmpjne
	cmp0
	je l1020
	push 0
	ret
l1020:
	push 0
	pop $3
l1021:
	push $3
	push $2
	cmpjl
	cmp0
	je l1022
	jmp l1024
l1023:
	add $3,1
	pop $3
	jmp l1021
l1024:
	push $4
	push $3
	cthis get
	push $1
	spushs
	push $4
	push $3
	spop $a
	call [$a],get
	cmpjne
	cmp0
	je l1026
	push 0
	ret
l1026:
	jmp l1023
l1022:
	jmp l1017
l1016:
	push 1
	end method
	method randdiff
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push 1
	cmpjle
	cmp0
	je l1028
	push 1
	popax
	sub 0,$a
	ret
l1028:
	localint $3
	call $1,rand
	pop $3
l1029:
	push $3
	push $2
	cmpje
	cmp0
	je l1030
	jmp l1032
l1031:
	call $1,rand
	pop $3
	jmp l1029
l1032:
	jmp l1031
l1030:
	push $3
	ret
	end method
	method bin_to_i
	localstring $1
	cthis get
	pop $1
	localint $2
	push 1
	pop $2
	localint $3
	push 0
	pop $3
	localint $4
	call $1,length
	push 1
	pop $b
	popax
	sub $a,$b
	pop $4
l1033:
	push $4
	push 0
	cmpjae
	cmp0
	je l1034
	jmp l1036
l1035:
	sub $4,1
	pop $4
	jmp l1033
l1036:
	push $4
	push 1
	call $1,getb
	push "1"
	cmpje
	cmp0
	je l1038
	push $2
	popax
	add $3,$a
	pop $3
l1038:
	push 2
	popax
	mul $2,$a
	pop $2
	jmp l1035
l1034:
	push $3
	end method
	class classgamepause
	method init
	new button,butpause
	push 0
	push 0
	push 800
	push 600
	call butpause,setrect
	push "onclick"
	push "resume"
	call butpause,addmethod
	call butpause,disable
	end method
	method resume
	call butpause,disable
	call gameapi,resume
	end method
	method pause
	call gameapi,pause
	call butpause,enable
	call butpause,resume
	end method
	end class

	class TicksCounter
	method init
	new int,istart
	end method
	method start
	call engine,getticks
	pop istart
	end method
	method stop
	call engine,getticks
	push istart
	pop $b
	popax
	sub $a,$b
	pop istart
	end method
	method get
	push istart
	ret
	end method
	method stopget
	cthis stop
	cthis get
	ret
	end method
	method print
	localstring $1
	pop $1
	push $1
	push " delay: "
	pop $b
	popax
	add $a,$b
	cthis stopget
	pop $b
	popax
	add $a,$b
	push " ms"
	pop $b
	popax
	add $a,$b
	call engine,print
	end method
	method put
	push ""
	cthis print
	end method
	end class

	class ObjController
	method init
	new string,_sme
	cthis getname
	pop _sme
	push GAME
	spushs
	push _sme
	spop $a
	call [$a],addgmobj
	end method
	method removefromgame
	push GAME
	spushs
	push _sme
	spop $a
	call [$a],removegmobj
	end method
	end class

	class LObjController
	parent ObjController
	parent classlocker
	method init
	clparent ObjController,init
	clparent classlocker,init
	end method
	end class

	class gmbankvec
	parent gmobjvec
	method init
	clparent gmobjvec,init
	push "iid"
	push 1
	popax
	sub 0,$a
	cthis var2
	end method
	method startrand
	cthis size
	push 0
	cmpja
	cmp0
	je l1040
	cthis size
	spushs
	spop $h
	call $h,rand
	pop iid
l1040:
	end method
	method play
	push 0
	cthis stop
	localint $1
	cthis size
	pop $1
	push $1
	push 0
	cmpje
	cmp0
	je l1042
	ret
l1042:
	push iid
	push 1
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	div $a,$b
	push $d
	pop iid
	push iid
	cthis get
	spushs
	spop $a
	call [$a],play
	end method
	method onfinish
	end method
	method stop
	localint $1
	pop $1
	cthis isplaying
	cmp0
	je l1044
	cthis getplay
	spushs
	push $1
	spop $a
	call [$a],stop
	push $1
	cmp0
	je l1046
	cthis onfinish
l1046:
l1044:
	end method
	method isplaying
	push iid
	push 0
	cmpjae
	cmp0
	je l1048
	cthis getplay
	spushs
	spop $a
	call [$a],isplaying
	jmp l1047
l1048:
	push 0
l1047:
	end method
	method getplay
	push iid
	cthis get
	ret
	end method
	end class

	class GameController
	parent classlocker
	method init
	localstring $1
	pop $1
	clparent classlocker,init
	new gmobjvec,__grobj
	new db,_dbsnd
	push "|"
	call _dbsnd,setseparator
	new string,_sndbase
	push $1
	pop _sndbase
	new string,GAME
	cthis getname
	pop GAME
	new timer,__dblclick
	push 250
	call __dblclick,delay
	push 1
	call __dblclick,settick
	end method
	method game_exit
	end method
	method setsndbase
	localstring $1
	pop $1
	push $1
	pop _sndbase
	end method
	method say
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "null"
	cthis sayf
	end method
	method sayf
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localstring $4
	push $2
	cthis getsndtxt
	pop $4
	push $4
	spushs
	push 0
	push 1
	spop $a
	call [$a],setstartstopflag
	push $1
	push $4
	push $3
	cthis cplayf
	end method
	method getsndtxt
	localstring $1
	pop $1
	localstring $2
	push "snd"
	push _sndbase
	pop $b
	popax
	add $a,$b
	call _dbsnd,getrowsno
	pop $b
	popax
	add $a,$b
	pop $2
	push $2
	push $1
	cthis addsnd
	push $2
	ret
	end method
	method _sndtimerstart
	localint $1
	push 1
	cthis getname
	call _dbsnd,dbfindbycol
	pop $1
	push $1
	push 0
	cmpjae
	cmp0
	je l1050
	push $1
	push 2
	call _dbsnd,get
	call engine,print
	jmp l1049
l1050:
	cthis getname
	push " not in _dbsnd"
	pop $b
	popax
	add $a,$b
	call engine,print
l1049:
	push ""
	call engine,print
	end method
	method addsndf
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	cthis addsnd
	push $3
	push "null"
	cmpjne
	cmp0
	je l1052
	push 0
	push 1
	call $1,getb
	push ":"
	cmpje
	cmp0
	je l1054
	push 1
	call $1,strsubb
	pop $1
l1054:
	push $1
	spushs
	push "onfinish"
	push $3
	spop $a
	call [$a],addmethod
l1052:
	end method
	method asf
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "snd"
	push $1
	pop $b
	popax
	add $a,$b
	push $2
	push "end"
	push $1
	pop $b
	popax
	add $a,$b
	cthis addsndff
	end method
	method addsndff
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis addsndf
	end method
	method gmconsnd
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new snd,[$e]
	push $1
	spushs
	push 0
	push 1
	spop $a
	call [$a],setstartstopflag
	push $1
	spushs
	cthis getsndpath
	push $2
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],load
	push igmsubtitle
	cmp0
	je l1056
	push $1
	cthis getsndpath
	push $2
	pop $b
	popax
	add $a,$b
	call subtitle,register
l1056:
	end method
	method addsnd
	localstring $1
	localstring $2
	pop $2
	pop $1
	localint $3
	call _dbsnd,addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $3
	localstring $4
	push 0
	push 1
	call $1,getb
	push ":"
	cmpje
	cmp0
	je l1058
	push 1
	call $1,strsubb
	pop $1
	push _sndbase
	push "_"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push $3
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	pop $4
	jmp l1057
l1058:
	push _sndbase
	push $3
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	pop $4
l1057:
	localstring $5
	call gameapi,getgamename
	pop $5
	cthis getsndpath
	push $4
	pop $b
	popax
	add $a,$b
	call engine,fileexist
	cmp0
	je l1060
	push $5
	spushs
	push $1
	push $4
	spop $a
	call [$a],gmconsnd
	jmp l1059
l1060:
	push $5
	spushs
	push $1
	call $2,length
	push 40
	pop $b
	popax
	mul $a,$b
	push 1
	spop $a
	call [$a],newtimer
	push $1
	spushs
	push "onstart"
	push "_sndtimerstart"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setstartstopflag"
	push "GameController0"
	spop $a
	call [$a],addmethod
l1059:
	push $3
	push $4
	call _dbsnd,add
	push $3
	push $1
	call _dbsnd,add
	push $3
	push $2
	call _dbsnd,add
	end method
	method GameController0
	localint $1
	localint $2
	pop $2
	pop $1
	end method
	method addbank
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new gmbankvec,[$e]
	localstring $3
	pop $3
	localstring $4
l1061:
	push $3
	push A
	cmpjne
	cmp0
	je l1062
	push $3
	cthis getsndtxt
	pop $4
	push $1
	spushs
	push $4
	spop $a
	call [$a],addbegin
	push $2
	push "null"
	cmpjne
	cmp0
	je l1064
	push $4
	spushs
	push "onfinish"
	push $2
	spop $a
	call [$a],addmethod
l1064:
	pop $3
	jmp l1061
l1062:
	end method
	method exportbank
	localstring $1
	pop $1
	push "__db"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spop $e
	new db,[$e]
	call [$e],GameController1
	push "__db"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	delete [$d]
	end method
	method GameController1
	localdef $1
	pop $1
	push 1
	cthis dbbuild
	push "|"
	cthis setseparator
	push "GameController2"
	cthis dbeach_row
	push igmdebug
	cmp0
	je l1066
	push "exports/"
	push $1
	pop $b
	popax
	add $a,$b
	push ".dlg"
	pop $b
	popax
	add $a,$b
	cthis save
l1066:
	end method
	method GameController2
	localdef $1
	pop $1
	localdef $2
	cthis getname
	spushs
	push "__db"
	spop $h
	call $h,strsubbs
	pop $2
	push $1
	push "snd"
	push $2
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	cthis addbegin
	push $1
	push $2
	push $1
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	cthis addbegin
	end method
	method importbank
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new gmbankvec,[$e]
	push $2
	push $3
	push "null"
	push $1
	cthis importgroupto
	end method
	method exportsnd
	localstring $1
	pop $1
	push igmdebug
	cmp0
	je l1068
	push $1
	call _dbsnd,save
l1068:
	end method
	method stdexportsnd
	push "exports/"
	push _sndbase
	pop $b
	popax
	add $a,$b
	push ".dlg"
	pop $b
	popax
	add $a,$b
	cthis exportsnd
	end method
	method sounds=
	cthis buildsnds
	end method
	method sounds_from
	localstring $1
	pop $1
	new db,__tmpdb
	localdef $2
	push _sndbase
	pop $2
	push $1
	cthis setsndbase
	push "exports/"
	push $1
	pop $b
	popax
	add $a,$b
	push ".dlg"
	pop $b
	popax
	add $a,$b
	call __tmpdb,load
	call _dbsnd,free
	localdef $3
	pop $3
	localint $4
	localstring $5
l1069:
	push A
	push $3
	cmpjne
	cmp0
	je l1070
	localdef $6
	pop $6
	push 1
	push $6
	call __tmpdb,dbfindbycol
	pop $4
	push $4
	push 0
	cmpjae
	cmp0
	je l1072
	cthis getsndpath
	push $4
	push 0
	call __tmpdb,get
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	call engine,fileexist
	cmp0
	je l1074
	push GAME
	spushs
	push $6
	push $4
	push 0
	call __tmpdb,get
	spop $a
	call [$a],gmconsnd
	push $6
	spushs
	push "onfinish"
	push $3
	spop $a
	call [$a],addmethod
	jmp l1073
l1074:
	push $6
	push $4
	push 1
	call __tmpdb,get
	push $3
	cthis addsndf
l1073:
l1072:
	localdef $3
	pop $3
	jmp l1069
l1070:
	call _dbsnd,free
	delete __tmpdb
	push $2
	cthis setsndbase
	end method
	method buildsnds
	call _dbsnd,free
	new db,__dbsnd
	push 3
	call __dbsnd,dbbuild
	push "__dbsnd"
	cthis buildfromdb
	delete __dbsnd
	end method
	method buildfromdb
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l1075:
	push $2
	push $1
	spushs
	spop $a
	call [$a],getrowsno
	cmpjl
	cmp0
	je l1076
	jmp l1078
l1077:
	add $2,1
	pop $2
	jmp l1075
l1078:
	push $1
	spushs
	push $2
	push 0
	spop $a
	call [$a],get
	push $1
	spushs
	push $2
	push 1
	spop $a
	call [$a],get
	push $1
	spushs
	push $2
	push 2
	spop $a
	call [$a],get
	cthis addsndf
	jmp l1077
l1076:
	cthis stdexportsnd
	end method
	method importsnd
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "null"
	cthis importgroup
	end method
	method importgroup
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "null"
	cthis importgroupto
	end method
	method importgroupto
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	new db,__tmpdb
	localdef $5
	push _sndbase
	pop $5
	push $1
	cthis setsndbase
	push "exports/"
	push $1
	pop $b
	popax
	add $a,$b
	push ".dlg"
	pop $b
	popax
	add $a,$b
	call __tmpdb,load
	call _dbsnd,free
	localstring $6
	localint $7
	push 0
	pop $7
l1079:
	push $7
	call __tmpdb,getrowsno
	cmpjl
	cmp0
	je l1080
	jmp l1082
l1081:
	add $7,1
	pop $7
	jmp l1079
l1082:
	push $7
	push 1
	call __tmpdb,get
	pop $6
	push $3
	push "null"
	cmpje
	cmp0
	jne l1085
	push $3
	spushs
	push $6
	spop $a
	call [$a],contains
	jmp l1086
l1084:
	push 0
	jmp l1086
l1085:
	push 1
l1086:
	cmp0
	je l1087
	push $6
	push $7
	push 2
	call __tmpdb,get
	push $2
	cthis addsndf
	push $4
	push "null"
	cmpjne
	cmp0
	je l1089
	push $4
	spushs
	push $6
	spop $a
	call [$a],add
l1089:
l1087:
	jmp l1081
l1080:
	call _dbsnd,free
	call __tmpdb,free
	delete __tmpdb
	push $5
	cthis setsndbase
	end method
	method freesnd
	call _dbsnd,free
	end method
	method addgmobj
	localstring $1
	pop $1
	push $1
	call __grobj,add
	end method
	method removegmobj
	localstring $1
	pop $1
	push $1
	call __grobj,remove
	end method
	method isgmobj
	localstring $1
	pop $1
	push $1
	call __grobj,contains
	end method
	method deletegmobj
	localstring $1
	pop $1
	push $1
	cthis hasvar
	cmp0
	je l1091
	push $1
	cthis removegmobj
	push $1
	spushs
	spop $d
	delete [$d]
l1091:
	end method
	method lockall
	push "lock"
	call __grobj,eval
	cthis lock
	end method
	method unlockall
	push "unlock"
	call __grobj,eval
	cthis unlock
	end method
	method gmunlockall
	push GAME
	spushs
	spop $a
	call [$a],unlockall
	end method
	method gmlockall
	push GAME
	spushs
	spop $a
	call [$a],lockall
	end method
	method lock=
	localint $1
	pop $1
	push $1
	cmp0
	je l1093
	cthis gmlockall
	jmp l1092
l1093:
	cthis gmunlockall
l1092:
	end method
	method mousemove
	push "onmousemove"
	call __grobj,eval
	cthis mouse_move
	end method
	method mouselclick
	push "onmouselclick"
	call __grobj,eval
	cthis mouse_lclick
	call __dblclick,isplaying
	cmp0
	je l1095
	cthis mouse_dblclick
	jmp l1094
l1095:
	call __dblclick,play
l1094:
	end method
	method mouserclick
	push "onmouserclick"
	call __grobj,eval
	cthis mouse_rclick
	end method
	method mouselrel
	push "onmouselrel"
	call __grobj,eval
	cthis mouse_lrel
	end method
	method mouserrel
	push "onmouserrel"
	call __grobj,eval
	cthis mouse_rrel
	end method
	method keydown
	push "onkeydown"
	call __grobj,eval
	cthis key_down
	end method
	end class

	class classadv
	parent classgame
	method init
	clparent classgame,init
	end method
	method newclpathf
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localreal $6
	localint $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new classpathf,[$e]
	push $1
	spushs
	push $2
	cthis getgraphpath
	push $3
	pop $b
	popax
	add $a,$b
	push $4
	push $5
	push $6
	push $7
	spop $a
	call [$a],build
	end method
	method newclpathfcopy
	localstring $1
	localstring $2
	localstring $3
	localreal $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new classpathf,[$e]
	push $1
	spushs
	push $2
	push $3
	push $4
	spop $a
	call [$a],buildfrom
	end method
	method newpathf
	localstring $1
	localstring $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new path,[$e]
	push $1
	spushs
	cthis getgraphpath
	push $2
	pop $b
	popax
	add $a,$b
	push $3
	push $4
	push 2.0
	push 1
	spop $a
	call [$a],build
	end method
	method newclbut
	localstring $1
	localstring $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new classbutton,[$e]
	push $1
	spushs
	cthis getgraphpath
	push $2
	pop $b
	popax
	add $a,$b
	push $3
	push $4
	spop $a
	call [$a],build
	end method
	method newclmask
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new classmask,[$e]
	push $1
	spushs
	cthis getgraphpath
	push $2
	pop $b
	popax
	add $a,$b
	push $3
	spop $a
	call [$a],buildmask
	end method
	method newclmaskfunc
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new classmask,[$e]
	push $1
	spushs
	cthis getgraphpath
	push $2
	pop $b
	popax
	add $a,$b
	push $3
	push $4
	spop $a
	call [$a],buildmaskfunc
	end method
	end class

	class classquest
	method init
	new vector,vqst
	push "string"
	call vqst,type
	end method
	method isdone
	localstring $1
	pop $1
	push $1
	call vqst,contains
	ret
	end method
	method notdone
	localstring $1
	pop $1
	push $1
	call vqst,contains
	neg
	ret
	end method
	method done
	localstring $1
	pop $1
	push $1
	call vqst,contains
	neg
	cmp0
	je l1097
	push $1
	call vqst,add
l1097:
	end method
	method reset
	call vqst,free
	end method
	method save
	localstring $1
	pop $1
	push $1
	call vqst,save
	end method
	method load
	localstring $1
	pop $1
	push $1
	call vqst,load
	end method
	end class

	new classquest,clqs
	method winsave
	localstring $1
	pop $1
	new db,_db_win
	push "output.db"
	call _db_win,load
	localdef $2
	call _db_win,addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $2
	push $2
	push $1
	call _db_win,add
	push "output.db"
	call _db_win,save
	delete _db_win
	end method
	method saveexist
	localstring $1
	pop $1
	cthis getsavepath
	push $1
	pop $b
	popax
	add $a,$b
	call engine,fileexist
	end method
	method vecsave
	localstring $1
	pop $1
	cthis getsavepath
	push $1
	pop $b
	popax
	add $a,$b
	cthis save
	end method
	method vecload
	localstring $1
	pop $1
	cthis getsavepath
	push $1
	pop $b
	popax
	add $a,$b
	cthis load
	end method
	class classfullsave
	method init
	localstring $1
	pop $1
	new db,dbsav
	new string,sstdfile
	push $1
	cthis setfile
	end method
	method save
	localstring $1
	pop $1
	push igmwinlocal
	cmp0
	je l1099
	push $1
	cthis getwinpath
	call dbsav,save
	jmp l1098
l1099:
	push $1
	call dbsav,save
l1098:
	end method
	method _load
	localstring $1
	pop $1
	push $1
	call engine,fileexist
	cmp0
	je l1101
	call dbsav,free
	push $1
	call dbsav,load
l1101:
	end method
	method load
	localstring $1
	pop $1
	push igmwinlocal
	cmp0
	je l1103
	push $1
	cthis getwinpath
	cthis _load
	jmp l1102
l1103:
	push $1
	cthis _load
l1102:
	end method
	method print
	call dbsav,print
	end method
	method setfile
	localstring $1
	pop $1
	push $1
	pop sstdfile
	end method
	method stdload
	push sstdfile
	cthis load
	end method
	method stdsave
	push sstdfile
	cthis save
	end method
	method free
	call dbsav,free
	end method
	method set
	localstring $1
	localstring $2
	pop $2
	pop $1
	localint $3
	push $1
	call dbsav,findbyrow
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l1105
	push $3
	push 1
	push $2
	call dbsav,set
	jmp l1104
l1105:
	call dbsav,addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push $1
	call dbsav,add
	push $3
	push $2
	call dbsav,add
l1104:
	cthis stdsave
	end method
	method bset
	localstring $1
	pop $1
	push $1
	push 1
	cthis set
	end method
	method get
	localstring $1
	pop $1
	localint $2
	push $1
	call dbsav,findbyrow
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l1107
	push $2
	push 1
	call dbsav,get
	jmp l1106
l1107:
	push "null"
l1106:
	ret
	end method
	method is
	localstring $1
	localstring $2
	pop $2
	pop $1
	localint $3
	push $1
	call dbsav,findbyrow
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l1109
	push $3
	push 1
	call dbsav,get
	push $2
	cmpje
	jmp l1108
l1109:
	push 0
l1108:
	ret
	end method
	method bis
	localstring $1
	pop $1
	localint $2
	push $1
	call dbsav,findbyrow
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l1111
	push $2
	push 1
	call dbsav,get
	push 0
	cmpjne
	jmp l1110
l1111:
	push 0
l1110:
	ret
	end method
	end class

	class StringChecker
	method init
	end method
	method isdigit
	localstring $1
	pop $1
	call $1,to_i
	push 0
	cmpjne
	cmp0
	jne l1113
	push 0
	push 1
	call $1,getb
	push "0"
	cmpje
	jmp l1114
l1112:
	push 0
	jmp l1114
l1113:
	push 1
l1114:
	ret
	end method
	method getint
	localstring $1
	pop $1
	call $1,to_i
	ret
	end method
	method getreal
	localstring $1
	pop $1
	call $1,to_r
	ret
	end method
	method isreal
	localstring $1
	pop $1
	push $1
	cthis isdigit
	cmp0
	je l1115
	push "."
	call $1,contains
	jmp l1117
l1115:
	push 0
	jmp l1117
l1116:
	push 1
l1117:
	ret
	end method
	method isstring
	localstring $1
	pop $1
	push 0
	push 1
	call $1,getb
	push "\""
	cmpje
	ret
	end method
	method getstring
	localstring $1
	pop $1
	push 1
	call $1,strsubb
	ret
	end method
	end class

	class Script
	method init
	localstring $1
	pop $1
	new db,__dbcode
	new string,__sdb
	new int,__irow
	new int,__icol
	new string,__sreads
	new vector,__vec
	push "string"
	call __vec,type
	new string,__sarg
	new int,__iarg
	new real,__rarg
	new StringChecker,__csc
	push "int"
	new map2,__mp
	localint $2
	push 0
	pop $2
l1118:
	push $2
	push 10
	cmpjl
	cmp0
	je l1119
	jmp l1121
l1120:
	add $2,1
	pop $2
	jmp l1118
l1121:
	push "ARG"
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	new string,[$e]
	jmp l1120
l1119:
	push $1
	cthis load
	end method
	method ARG=
	localint $1
	localstring $2
	pop $2
	pop $1
	push "ARG"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	push $2
	spop $b
	popax
	mov [$b],$a
	end method
	method ARG
	localint $1
	pop $1
	push "ARG"
	push $1
	pop $b
	popax
	add $a,$b
	popax
	mov $a,[$a]
	psax
	end method
	method load
	localstring $1
	pop $1
	push $1
	push "null"
	cmpje
	cmp0
	je l1123
	ret
l1123:
	push "."
	call $1,contains
	cmp0
	je l1125
	push "__dbcode"
	pop __sdb
	push $1
	call __dbcode,loadbeh
	jmp l1124
l1125:
	push $1
	pop __sdb
l1124:
	call __mp,free
	localint $2
	push 0
	pop $2
l1126:
	push $2
	push __sdb
	spushs
	spop $a
	call [$a],getrowsno
	cmpjl
	cmp0
	je l1127
	jmp l1129
l1128:
	add $2,1
	pop $2
	jmp l1126
l1129:
	push __sdb
	spushs
	push $2
	push 0
	spop $a
	call [$a],get
	push "func"
	cmpje
	cmp0
	je l1131
	push __sdb
	spushs
	push $2
	push 1
	spop $a
	call [$a],get
	push $2
	call __mp,add
l1131:
	jmp l1128
l1127:
	push "init"
	cthis call
	end method
	method get
	localstring $1
	pop $1
	push $1
	popax
	mov $a,[$a]
	psax
	ret
	end method
	method isvar
	localstring $1
	pop $1
	push "$"
	call $1,contains
	ret
	end method
	method getvar
	localstring $1
	pop $1
	push 1
	call $1,strsubb
	pop $1
	push $1
	call engine,varexist
	neg
	cmp0
	je l1133
	push $1
	spushs
	spop $e
	new def,[$e]
l1133:
	push $1
	ret
	end method
	method isfunc
	localstring $1
	pop $1
	push "."
	call $1,contains
	cmp0
	je l1134
	push $1
	call __csc,isreal
	neg
	jmp l1136
l1134:
	push 0
	jmp l1136
l1135:
	push 1
l1136:
	ret
	end method
	method getfunc
	localstring $1
	pop $1
	call __vec,free
	push "."
	call $1,strgetto
	call __vec,add
	push "."
	call $1,strgetfrom
	call __vec,add
	end method
	method _get
	add __icol,1
	pop __icol
	push __sdb
	spushs
	push __irow
	push __icol
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],get
	ret
	end method
	method isnext
	push __icol
	push __sdb
	spushs
	push __irow
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l1138
	push __sdb
	spushs
	push __irow
	push __icol
	spop $a
	call [$a],get
	pop __sreads
	push 1
	ret
l1138:
	push 0
	ret
	end method
	method perror
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	cmp0
	je l1140
	push "error: "
	push $2
	pop $b
	popax
	add $a,$b
	call engine,print
l1140:
	end method
	method interpcall
	localstring $1
	pop $1
	push $1
	cthis getfunc
	localstring $2
	push 0
	call __vec,get
	pop $2
	push 0
	push 1
	call $2,getb
	push "*"
	cmpje
	cmp0
	je l1142
	push 1
	call $2,strsubb
	popax
	mov $a,[$a]
	psax
	pop $2
l1142:
	localstring $3
	push 1
	call __vec,get
	pop $3
	push 0
	push 1
	call $3,getb
	push "*"
	cmpje
	cmp0
	je l1144
	push 1
	call $3,strsubb
	popax
	mov $a,[$a]
	psax
	pop $2
l1144:
	call __vec,free
	add __icol,1
	pop __icol
	localstring $4
	cthis _get
	pop $4
l1145:
	push $4
	push ")"
	cmpjne
	cmp0
	je l1146
	push $4
	cthis getexpr
	cthis _get
	pop $4
	jmp l1145
l1146:
	push $2
	push "this"
	cmpje
	cmp0
	je l1148
	push "null"
	pop $2
l1148:
	push $2
	push $3
	cthis callfun
	end method
	method getvname
	localstring $1
	pop $1
	push $1
	cthis isvar
	cmp0
	je l1150
	push $1
	cthis getvar
	pop $1
	jmp l1149
l1150:
	push $1
	call __csc,isdigit
	cmp0
	je l1152
	push $1
	pop __iarg
	push "__iarg"
	pop $1
	jmp l1151
l1152:
	push $1
	call __csc,isstring
	cmp0
	je l1154
	push $1
	call __csc,getstring
	pop __sarg
	push "__sarg"
	pop $1
	jmp l1153
l1154:
	push $1
	call __csc,isreal
	cmp0
	je l1156
	call $1,to_r
	pop __rarg
	push "__rarg"
	pop $1
l1156:
l1153:
l1151:
l1149:
	push $1
	ret
	end method
	method isscriptfun
	localstring $1
	pop $1
	push "->"
	call $1,contains
	ret
	end method
	method getscriptfun
	localstring $1
	pop $1
	push 2
	call $1,strsubb
	ret
	end method
	method getexpr
	localstring $1
	pop $1
	push $1
	call __csc,isstring
	cmp0
	je l1158
	push $1
	cthis getvname
	spushs
	spop $a
	call [$a],get
	jmp l1157
l1158:
	push $1
	cthis isfunc
	cmp0
	je l1160
	push $1
	cthis interpcall
	jmp l1159
l1160:
	push $1
	cthis isscriptfun
	cmp0
	je l1162
	localint $2
	push __irow
	pop $2
	localint $3
	push __icol
	pop $3
	push $1
	cthis getscriptfun
	cthis call
	push $2
	pop __irow
	push $3
	pop __icol
	jmp l1161
l1162:
	push $1
	cthis getvname
	spushs
	spop $a
	call [$a],get
l1161:
l1159:
l1157:
	end method
	method cmp
	localint $1
	push 0
	pop $1
	localdef $2
	cthis _get
	cthis getexpr
	pop $2
	localstring $3
	cthis _get
	pop $3
	localdef $4
	cthis _get
	cthis getexpr
	pop $4
	push $3
	spushs
	push "=="
	cmpst
	jne l1164
	spop $a
	push $2
	push $4
	cmpje
	pop $1
	jmp l1163
l1164:
	push "!="
	cmpst
	jne l1165
	spop $a
	push $2
	push $4
	cmpjne
	pop $1
	jmp l1163
l1165:
	push "<"
	cmpst
	jne l1166
	spop $a
	push $2
	push $4
	cmpjl
	pop $1
	jmp l1163
l1166:
	push ">"
	cmpst
	jne l1167
	spop $a
	push $2
	push $4
	cmpja
	pop $1
	jmp l1163
l1167:
	push "<="
	cmpst
	jne l1168
	spop $a
	push $2
	push $4
	cmpjle
	pop $1
	jmp l1163
l1168:
	push ">="
	cmpst
	jne l1169
	spop $a
	push $2
	push $4
	cmpjae
	pop $1
	jmp l1163
l1169:
	spop $a
l1163:
	cthis _get
	pop $3
	push $3
	push "||"
	cmpje
	cmp0
	je l1171
	push $1
	cmp0
	jne l1173
	cthis cmp
	jmp l1174
l1172:
	push 0
	jmp l1174
l1173:
	push 1
l1174:
	ret
	jmp l1170
l1171:
	push $3
	push "&&"
	cmpje
	cmp0
	je l1176
	push $1
	cmp0
	je l1177
	cthis cmp
	jmp l1179
l1177:
	push 0
	jmp l1179
l1178:
	push 1
l1179:
	ret
	jmp l1175
l1176:
	push $1
	ret
l1175:
l1170:
	end method
	method containsfun
	localstring $1
	pop $1
	push $1
	call __mp,contains
	end method
	method call
	localstring $1
	pop $1
	push $1
	call __mp,contains
	neg
	cmp0
	je l1181
	ret
l1181:
	push $1
	call __mp,get
	pop __irow
	add __irow,1
	pop __irow
	push 0
	pop __icol
	localint $2
	push 1
	pop $2
	localint $3
	push 0
	pop $3
	localint $4
	localint $5
	push 0
	pop $5
	localint $6
	push 0
	pop $6
	localint $7
	localstring $8
	localstring $9
	localstring $10
	localint $11
	localint $12
	localint $13
l1182:
	push $2
	cmp0
	je l1183
	push 0
	pop __icol
	cthis _get
	pop $8
	push $8
	spushs
	push "new"
	cmpst
	jne l1185
	spop $a
	cthis _get
	pop $8
	cthis _get
	pop $9
	push 1
	call $9,strsubb
	pop $9
	cthis isnext
	cmp0
	je l1187
	push __sreads
	push "["
	cmpje
	cmp0
	je l1189
	add __icol,1
	pop __icol
	cthis _get
	pop $11
	push 0
	pop $12
l1190:
	push $12
	push $11
	cmpjl
	cmp0
	je l1191
	jmp l1193
l1192:
	add $12,1
	pop $12
	jmp l1190
l1193:
	push $8
	spushs
	push $9
	push $12
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	spop $d
	new [$d],[$e]
	jmp l1192
l1191:
	jmp l1188
l1189:
	add __icol,1
	pop __icol
l1194:
	cthis isnext
	cmp0
	je l1195
	push __sreads
	push ")"
	cmpjne
	jmp l1197
l1195:
	push 0
	jmp l1197
l1196:
	push 1
l1197:
	cmp0
	je l1198
	cthis _get
	cthis getexpr
	jmp l1194
l1198:
	push $8
	spushs
	push $9
	spushs
	spop $e
	spop $d
	new [$d],[$e]
l1188:
	jmp l1186
l1187:
	push $8
	spushs
	push $9
	spushs
	spop $e
	spop $d
	new [$d],[$e]
l1186:
	add __irow,1
	pop __irow
	jmp l1184
l1185:
	push "delete"
	cmpst
	jne l1199
	spop $a
	cthis _get
	cthis getvar
	spushs
	spop $d
	delete [$d]
	add __irow,1
	pop __irow
	jmp l1184
l1199:
	push $8
	push "if"
	cmpje
	cmp0
	jne l1201
	push $6
	cmp0
	jne l1201
	push $5
	jmp l1202
l1200:
	push 0
	jmp l1202
l1201:
	push 1
l1202:
	cmp0
	je l1204
	push $8
	jmp l1203
l1204:
	push ""
l1203:
	cmpst
	jne l1205
	spop $a
	add __icol,1
	pop __icol
	cthis cmp
	pop $4
	push $8
	push "if"
	cmpje
	cmp0
	je l1207
	push 1
	pop $3
l1207:
	push 0
	pop $6
	push 0
	pop $5
	add __irow,1
	pop __irow
	push $4
	neg
	cmp0
	je l1209
	push 1
	pop $12
l1210:
	push $12
	cmp0
	je l1211
	push __sdb
	spushs
	push __irow
	push 0
	spop $a
	call [$a],get
	pop $8
	push $8
	push "else"
	cmpje
	cmp0
	jne l1214
	push $8
	push "elif"
	cmpje
	cmp0
	jne l1214
	push $8
	push "fi"
	cmpje
	cmp0
	jne l1214
	push $8
	push "done"
	cmpje
	jmp l1215
l1213:
	push 0
	jmp l1215
l1214:
	push 1
l1215:
	cmp0
	je l1216
	push 0
	pop $12
	jmp l1212
l1216:
	add __irow,1
	pop __irow
l1212:
	jmp l1210
l1211:
l1209:
	jmp l1184
l1205:
	push "else"
	cmpst
	jne l1217
	spop $a
	push $3
	neg
	push "else without if"
	cthis perror
	add __irow,1
	pop __irow
	push $4
	cmp0
	je l1219
l1220:
	push __sdb
	spushs
	push __irow
	push 0
	spop $a
	call [$a],get
	push "fi"
	cmpjne
	cmp0
	je l1221
	add __irow,1
	pop __irow
	jmp l1220
l1221:
l1219:
	jmp l1184
l1217:
	push "fi"
	cmpst
	jne l1222
	spop $a
	push $3
	neg
	push "fi without if"
	cthis perror
	push 0
	pop $3
	push 0
	pop $4
	push 0
	pop $6
	add __irow,1
	pop __irow
	jmp l1184
l1222:
	push "elif"
	cmpst
	jne l1223
	spop $a
	push $4
	cmp0
	je l1225
	add __irow,1
	pop __irow
l1226:
	push __sdb
	spushs
	push __irow
	push 0
	spop $a
	call [$a],get
	push "fi"
	cmpjne
	cmp0
	je l1227
	add __irow,1
	pop __irow
	jmp l1226
l1227:
	jmp l1224
l1225:
	push 1
	pop $6
l1224:
	jmp l1184
l1223:
	push "end"
	cmpst
	jne l1228
	spop $a
	push 0
	pop $2
	jmp l1184
l1228:
	push "while"
	cmpst
	jne l1229
	spop $a
	push __irow
	pop $7
	push 1
	pop $5
	jmp l1184
l1229:
	push "done"
	cmpst
	jne l1230
	spop $a
	push $4
	cmp0
	je l1232
	push $7
	pop __irow
	jmp l1231
l1232:
	add __irow,1
	pop __irow
l1231:
	jmp l1184
l1230:
	push "print"
	cmpst
	jne l1233
	spop $a
	push ""
	pop $8
l1234:
	cthis isnext
	cmp0
	je l1235
	cthis _get
	cthis getexpr
	popax
	add $8,$a
	pop $8
	jmp l1234
l1235:
	push $8
	call engine,print
	add __irow,1
	pop __irow
	jmp l1184
l1233:
	push "return"
	cmpst
	jne l1236
	spop $a
	cthis isnext
	cmp0
	je l1238
	push __sreads
	cthis getexpr
l1238:
	ret
	jmp l1184
l1236:
	spop $a
	push "$"
	call $8,contains
	cmp0
	je l1240
	push $8
	cthis getvar
	pop $8
	add __icol,1
	pop __icol
	push $8
	spushs
	cthis _get
	cthis getexpr
	spop $b
	popax
	mov [$b],$a
l1241:
	cthis isnext
	cmp0
	je l1242
	add __icol,1
	pop __icol
	localdef $14
	cthis _get
	cthis getexpr
	pop $14
	push __sreads
	spushs
	push "+"
	cmpst
	jne l1244
	spop $a
	push $8
	spushs
	push $14
	popax
	spop $b
	add [$b],$a
	pop [$b]
	jmp l1243
l1244:
	push "-"
	cmpst
	jne l1245
	spop $a
	push $8
	spushs
	push $14
	popax
	spop $b
	sub [$b],$a
	pop [$b]
	jmp l1243
l1245:
	push "*"
	cmpst
	jne l1246
	spop $a
	push $8
	spushs
	push $14
	popax
	spop $b
	mul [$b],$a
	pop [$b]
	jmp l1243
l1246:
	push "/"
	cmpst
	jne l1247
	spop $a
	push $8
	spushs
	push $14
	popax
	spop $b
	div [$b],$a
	mov [$b],$a
	jmp l1243
l1247:
	push "%"
	cmpst
	jne l1248
	spop $a
	push $8
	spushs
	push $14
	popax
	spop $b
	div [$b],$a
	mov [$b],$d
	jmp l1243
l1248:
	spop $a
l1243:
	jmp l1241
l1242:
	jmp l1239
l1240:
	push $8
	cthis getexpr
l1239:
	add __irow,1
	pop __irow
l1184:
	push __irow
	push __sdb
	spushs
	spop $a
	call [$a],getrowsno
	cmpjae
	cmp0
	je l1250
	push 1
	push "function "
	push $1
	pop $b
	popax
	add $a,$b
	push " not finished!"
	pop $b
	popax
	add $a,$b
	cthis perror
	push 0
	pop $2
l1250:
	jmp l1182
l1183:
	end method
	end class

	method transparent
	push 0
	push 0
	push 0
	push 0
	ret
	end method
	method red
	push 255
	push 0
	push 0
	ret
	end method
	method green
	push 0
	push 255
	push 0
	ret
	end method
	method blue
	push 0
	push 0
	push 255
	ret
	end method
	method white
	push 255
	push 255
	push 255
	ret
	end method
	method black
	push 0
	push 0
	push 0
	ret
	end method
	method grey
	localint $1
	pop $1
	push $1
	push $1
	push $1
	ret
	end method
	method yellow
	push 255
	push 255
	push 0
	ret
	end method
	class Color
	method init
	push A
	push "r"
	push "g"
	push "b"
	push "a"
	cthis vars
	end method
	method operator=
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],get
	cthis set
	end method
	method img=
	localdef $1
	pop $1
	push $1
	spushs
	push $1
	clparent classansearcher,firstnotrx1y
	spop $a
	call [$a],getrgba
	pop a
	pop b
	pop g
	pop r
	end method
	method get
	push r
	push g
	push b
	push a
	ret
	end method
	method set
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	pop a
	pop b
	pop g
	pop r
	end method
	method rgb=
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	pop b
	pop g
	pop r
	end method
	method rgb
	push r
	push g
	push b
	ret
	end method
	method print
	push "Color::"
	cthis getname
	pop $b
	popax
	add $a,$b
	push " (r,g,b,a) = ("
	pop $b
	popax
	add $a,$b
	push r
	pop $b
	popax
	add $a,$b
	push ","
	pop $b
	popax
	add $a,$b
	push g
	pop $b
	popax
	add $a,$b
	push ","
	pop $b
	popax
	add $a,$b
	push b
	pop $b
	popax
	add $a,$b
	push ","
	pop $b
	popax
	add $a,$b
	push a
	pop $b
	popax
	add $a,$b
	push ")"
	pop $b
	popax
	add $a,$b
	call engine,print
	end method
	end class

	class classasker
	parent newvars
	method init
	clparent newvars,init
	new string,sfuncyes
	push "null"
	pop sfuncyes
	new string,sfuncno
	push "null"
	pop sfuncno
	new string,ssndask
	new string,ssndyes
	new string,ssndno
	new classsound,clsnd
	end method
	method reset
	push "null"
	pop sfuncyes
	push "null"
	pop sfuncno
	call buts,resetall
	end method
	method setfuncs
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop sfuncyes
	push $2
	pop sfuncno
	end method
	method fxonmovon
	localstring $1
	pop $1
	push $1
	call buts,sfxonmovon
	end method
	method setmouse
	localstring $1
	pop $1
	push "yes"
	push $1
	call buts,newmouse
	push "no"
	push $1
	call buts,newmouse
	end method
	method load
	localstring $1
	localint $2
	pop $2
	pop $1
	new classbutton,buts
	push $1
	push $2
	push "null"
	call buts,build
	call engine,actclassname
	push "butclick"
	call buts,transclickfunc
	call engine,actclassname
	push "butmovon"
	call buts,transmovonfunc
	call buts,disableall
	end method
	method ask
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $4
	push $5
	cthis setfuncs
	push $1
	push $2
	push $3
	cthis ask2
	end method
	method ask2
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	pop ssndask
	push $2
	pop ssndyes
	push $3
	pop ssndno
	call gameapi,pause
	call buts,benableall
	push "bkg"
	call buts,pause
	call clsnd,creset
	push $1
	call clsnd,cbplay
	cthis getname
	push "_ask"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method butmovon
	localstring $1
	pop $1
	push $1
	push "yes"
	cmpje
	cmp0
	je l1252
	push ssndask
	spushs
	push 0
	spop $a
	call [$a],stop
	push ssndyes
	call clsnd,cbplay
	jmp l1251
l1252:
	push $1
	push "no"
	cmpje
	cmp0
	je l1254
	push ssndask
	spushs
	push 0
	spop $a
	call [$a],stop
	push ssndno
	call clsnd,cbplay
l1254:
l1251:
	end method
	method butclick
	localstring $1
	pop $1
	push $1
	push "bkg"
	cmpje
	cmp0
	je l1256
	ret
l1256:
	call gameapi,resume
	call buts,disableall
	push 0
	call clsnd,cactsndstop
	push $1
	push "yes"
	cmpje
	cmp0
	je l1258
	push sfuncyes
	push "null"
	cmpjne
	jmp l1260
l1258:
	push 0
	jmp l1260
l1259:
	push 1
l1260:
	cmp0
	je l1261
	push sfuncyes
	spushs
	spop $d
	cthis [$d]
	cthis getname
	push "_yes"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	jmp l1257
l1261:
	push $1
	push "no"
	cmpje
	cmp0
	je l1263
	push sfuncno
	push "null"
	cmpjne
	jmp l1265
l1263:
	push 0
	jmp l1265
l1264:
	push 1
l1265:
	cmp0
	je l1266
	push sfuncno
	spushs
	spop $d
	cthis [$d]
	cthis getname
	push "_no"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1266:
l1257:
	end method
	method disabled
	call buts,disabled
	end method
	method setcursorpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call buts,setcursorpos
	end method
	end class

	class classplacepointer
	method init
	new anima,anpointer
	push "onfinish"
	push "classplacepointer0"
	call anpointer,addmethod
	new int,_iz
	push 1000
	pop _iz
	end method
	method classplacepointer0
	push 1
	popax
	sub 0,$a
	cthis play
	end method
	method load
	localstring $1
	pop $1
	push $1
	call anpointer,load
	push _iz
	cthis setz
	call anpointer,hide
	end method
	method setz
	localint $1
	pop $1
	push $1
	pop _iz
	push $1
	call anpointer,setz
	end method
	method stop
	push 0
	call anpointer,stop
	end method
	method stoph
	push 0
	call anpointer,stop
	call anpointer,hide
	end method
	method show
	localint $1
	localint $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	call anpointer,setpos
	push $3
	call anpointer,play
	end method
	method move
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push $2
	call anpointer,move
	end method
	method showob
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	push $1
	spushs
	spop $a
	call [$a],getcy
	push $2
	cthis show
	end method
	method showpob
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	push $2
	cthis show
	end method
	end class

	class SimpleCounter
	method init
	localint $1
	pop $1
	push "length"
	push $1
	cthis var2
	new int,iid
	push 0
	pop iid
	end method
	method next
	push iid
	push 1
	pop $b
	popax
	add $a,$b
	push length
	pop $b
	popax
	div $a,$b
	push $d
	pop iid
	push iid
	end method
	method set
	localint $1
	pop $1
	push $1
	pop iid
	end method
	method reset
	push 0
	pop iid
	end method
	method get
	push iid
	end method
	end class

	module clstrdigit
	method init
	end method
	method getdigit
	localint $1
	localint $2
	pop $2
	pop $1
	localstring $3
	push $1
	pop $3
l1267:
	call $3,length
	push $2
	cmpjl
	cmp0
	je l1268
	push "0"
	push $3
	pop $b
	popax
	add $a,$b
	pop $3
	jmp l1267
l1268:
	push $3
	ret
	end method
	method gettime
	localint $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis geth
	push $1
	cthis getm
	push $1
	cthis gets
	push "h"
	call $2,contains
	push "m"
	call $2,contains
	push "s"
	call $2,contains
	cthis getstime
	ret
	end method
	method getstime
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $7
	push ""
	pop $7
	push $4
	cmp0
	je l1270
	push $1
	popax
	add $7,$a
	pop $7
l1270:
	push $5
	cmp0
	je l1272
	push $4
	cmp0
	je l1274
	push ":"
	jmp l1273
l1274:
	push ""
l1273:
	push $2
	push 2
	cthis getdigit
	pop $b
	popax
	add $a,$b
	popax
	add $7,$a
	pop $7
l1272:
	push $6
	cmp0
	je l1276
	push $4
	cmp0
	jne l1278
	push $5
	jmp l1279
l1277:
	push 0
	jmp l1279
l1278:
	push 1
l1279:
	cmp0
	je l1281
	push ":"
	jmp l1280
l1281:
	push ""
l1280:
	push $3
	push 2
	cthis getdigit
	pop $b
	popax
	add $a,$b
	popax
	add $7,$a
	pop $7
l1276:
	push $7
	ret
	end method
	method geth
	localint $1
	pop $1
	push $1
	push 3600
	pop $b
	popax
	div $a,$b
	psax
	ret
	end method
	method getm
	localint $1
	pop $1
	push $1
	push 60
	pop $b
	popax
	div $a,$b
	psax
	push 60
	pop $b
	popax
	div $a,$b
	push $d
	ret
	end method
	method gets
	localint $1
	pop $1
	push $1
	push 60
	pop $b
	popax
	div $a,$b
	push $d
	ret
	end method
	method getns
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis gets
	push $2
	cthis getdigit
	ret
	end method
	method getnm
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis getm
	push $2
	cthis getdigit
	ret
	end method
	method getbinary
	localint $1
	pop $1
	localstring $2
	push ""
	pop $2
l1282:
	push $1
	push 0
	cmpja
	cmp0
	je l1283
	push ""
	push $1
	push 2
	pop $b
	popax
	div $a,$b
	push $d
	pop $b
	popax
	add $a,$b
	push $2
	pop $b
	popax
	add $a,$b
	pop $2
	push 2
	popax
	div $1,$a
	mov $1,$a
	jmp l1282
l1283:
	push $2
	ret
	end method
	method bintohex
	localstring $1
	pop $1
	localstring $2
	call $1,length
	push 4
	pop $b
	popax
	div $a,$b
	push $d
	spushs
	push 3
	cmpst
	jne l1285
	spop $a
	push "0"
	jmp l1284
l1285:
	push 2
	cmpst
	jne l1286
	spop $a
	push "00"
	jmp l1284
l1286:
	push 1
	cmpst
	jne l1287
	spop $a
	push "000"
	jmp l1284
l1287:
	spop $a
	push ""
l1284:
	pop $2
	push $2
	push $1
	pop $b
	popax
	add $a,$b
	pop $1
	push ""
	pop $2
	localint $3
	push 0
	pop $3
l1288:
	push $3
	call $1,length
	cmpjl
	cmp0
	je l1289
	jmp l1291
l1290:
	push 4
	popax
	add $3,$a
	pop $3
	jmp l1288
l1291:
	push $3
	push 4
	call $1,getb
	spushs
	push "0000"
	cmpst
	jne l1293
	spop $a
	push "0"
	jmp l1292
l1293:
	push "0001"
	cmpst
	jne l1294
	spop $a
	push "1"
	jmp l1292
l1294:
	push "0010"
	cmpst
	jne l1295
	spop $a
	push "2"
	jmp l1292
l1295:
	push "0011"
	cmpst
	jne l1296
	spop $a
	push "3"
	jmp l1292
l1296:
	push "0100"
	cmpst
	jne l1297
	spop $a
	push "4"
	jmp l1292
l1297:
	push "0101"
	cmpst
	jne l1298
	spop $a
	push "5"
	jmp l1292
l1298:
	push "0110"
	cmpst
	jne l1299
	spop $a
	push "6"
	jmp l1292
l1299:
	push "0111"
	cmpst
	jne l1300
	spop $a
	push "7"
	jmp l1292
l1300:
	push "1000"
	cmpst
	jne l1301
	spop $a
	push "8"
	jmp l1292
l1301:
	push "1001"
	cmpst
	jne l1302
	spop $a
	push "9"
	jmp l1292
l1302:
	push "1010"
	cmpst
	jne l1303
	spop $a
	push "A"
	jmp l1292
l1303:
	push "1011"
	cmpst
	jne l1304
	spop $a
	push "B"
	jmp l1292
l1304:
	push "1100"
	cmpst
	jne l1305
	spop $a
	push "C"
	jmp l1292
l1305:
	push "1101"
	cmpst
	jne l1306
	spop $a
	push "D"
	jmp l1292
l1306:
	push "1110"
	cmpst
	jne l1307
	spop $a
	push "E"
	jmp l1292
l1307:
	push "1111"
	cmpst
	jne l1308
	spop $a
	push "F"
	jmp l1292
l1308:
	spop $a
l1292:
	popax
	add $2,$a
	pop $2
	jmp l1290
l1289:
	push $2
	end method
	end module

	method getbinary
	cthis get
	clparent clstrdigit,getbinary
	end method
	method getdigit
	localint $1
	pop $1
	cthis get
	push $1
	clparent clstrdigit,getdigit
	end method
	method getbindigit
	localint $1
	pop $1
	cthis getbinary
	push $1
	clparent clstrdigit,getdigit
	end method
	class Text
	method init
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push "null"
	cmpje
	cmp0
	je l1310
	push sgmfontfile
	pop $1
l1310:
	push ".ttf"
	call $1,contains
	cmp0
	je l1312
	new font,_fnt
	push $1
	push $2
	call _fnt,load
	push "_fnt"
	pop $1
l1312:
	new int,iR
	push $3
	pop iR
	new int,iG
	push $4
	pop iG
	new int,iB
	push $5
	pop iB
	new int,iFontSize
	push $2
	pop iFontSize
	new text,txt
	push $1
	call txt,setfont
	push $8
	call txt,setz
	push $6
	push $7
	call txt,setpos
	call txt,show
	new text,txtbg
	call txtbg,hide
	end method
	method hide
	call txt,hide
	end method
	method show
	call txt,show
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call txt,setpos
	end method
	method set
	localstring $1
	pop $1
	push $1
	call txt,set
	push iR
	push iG
	push iB
	call txt,createtxt
	end method
	method get
	call txt,get
	ret
	end method
	method setbg
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	call txt,getpx
	push iFontSize
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call txt,getpy
	push iFontSize
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call txt,getw
	push iFontSize
	pop $b
	popax
	add $a,$b
	push iFontSize
	push 2
	pop $b
	popax
	mul $a,$b
	push $1
	push $2
	push $3
	push $4
	call txtbg,setbkg
	push 1
	push 255
	push 255
	push 255
	push 128
	call txtbg,setborders
	call txtbg,show
	end method
	method operator=
	localstring $1
	pop $1
	push $1
	cthis set
	end method
	end class

	class Cypher
	parent Text
	method init
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	push $8
	clparent Text,init
	push 0
	cthis set
	end method
	method add
	localint $1
	pop $1
	push $1
	cthis get
	pop $b
	popax
	add $a,$b
	cthis set
	end method
	method iget
	cthis get
	spushs
	spop $h
	call $h,to_i
	end method
	method operator+
	localint $1
	pop $1
	push $1
	cthis add
	end method
	method operator++
	push 1
	cthis add
	end method
	method operator--
	push 1
	popax
	sub 0,$a
	cthis add
	end method
	method operator-
	localint $1
	pop $1
	push $1
	popax
	sub 0,$a
	cthis add
	end method
	method operator=
	localint $1
	pop $1
	push $1
	cthis set
	end method
	method operator==
	localint $1
	pop $1
	cthis get
	push $1
	cmpje
	end method
	method operator!=
	localint $1
	pop $1
	cthis get
	push $1
	cmpjne
	end method
	method operator>
	localint $1
	pop $1
	cthis get
	push $1
	cmpja
	end method
	method operator<
	localint $1
	pop $1
	cthis get
	push $1
	cmpjl
	end method
	end class

	class SecCounter
	method init
	localstring $1
	pop $1
	new string,sdigit
	push $1
	pop sdigit
	new int,itime
	cthis reset
	push "timcyk"
	push 1000
	push 1
	push "SecCounter0"
	cthis cnewtimerfin
	end method
	method SecCounter0
	push 1
	cthis update
	cthis play
	end method
	method play
	call timcyk,play
	end method
	method stop
	push 0
	call timcyk,stop
	end method
	method sgettime
	push itime
	push sdigit
	call clstrdigit,gettime
	ret
	end method
	method gettime
	push itime
	ret
	end method
	method reset
	push itime
	popax
	sub 0,$a
	cthis update
	end method
	method update
	localint $1
	pop $1
	push $1
	popax
	add itime,$a
	pop itime
	end method
	end class

	class TextTimeCounter
	parent Text
	parent SecCounter
	method init
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	localstring $9
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	push $8
	clparent Text,init
	push $9
	clparent SecCounter,init
	cthis reset
	end method
	method update
	localint $1
	pop $1
	push $1
	clparent SecCounter,update
	cthis sgettime
	cthis set
	end method
	end class

	class gfxObject
	method init
	localstring $1
	pop $1
	new string,sgfxobj
	push $1
	pop sgfxobj
	end method
	method setpos
	push sgfxobj
	spushs
	spop $a
	call [$a],setpos
	end method
	method move
	push sgfxobj
	spushs
	spop $a
	call [$a],move
	end method
	method getpos
	push sgfxobj
	spushs
	spop $a
	call [$a],getpos
	end method
	method getposx
	push sgfxobj
	spushs
	spop $a
	call [$a],getposx
	end method
	method getposy
	push sgfxobj
	spushs
	spop $a
	call [$a],getposy
	end method
	method getpx
	push sgfxobj
	spushs
	spop $a
	call [$a],getpx
	end method
	method getpy
	push sgfxobj
	spushs
	spop $a
	call [$a],getpy
	end method
	method getw
	push sgfxobj
	spushs
	spop $a
	call [$a],getw
	end method
	method geth
	push sgfxobj
	spushs
	spop $a
	call [$a],geth
	end method
	method getcx
	push sgfxobj
	spushs
	spop $a
	call [$a],getcx
	end method
	method getcy
	push sgfxobj
	spushs
	spop $a
	call [$a],getcy
	end method
	method getex
	push sgfxobj
	spushs
	spop $a
	call [$a],getex
	end method
	method getey
	push sgfxobj
	spushs
	spop $a
	call [$a],getey
	end method
	method lodx
	push sgfxobj
	spushs
	spop $a
	call [$a],lodx
	end method
	method lody
	push sgfxobj
	spushs
	spop $a
	call [$a],lody
	end method
	method setz
	push sgfxobj
	spushs
	spop $a
	call [$a],setz
	end method
	method getz
	push sgfxobj
	spushs
	spop $a
	call [$a],getz
	end method
	method show
	push sgfxobj
	spushs
	spop $a
	call [$a],show
	end method
	method hide
	push sgfxobj
	spushs
	spop $a
	call [$a],hide
	end method
	method isvisible
	push sgfxobj
	spushs
	spop $a
	call [$a],isvisible
	end method
	method isin
	push sgfxobj
	spushs
	spop $a
	call [$a],isin
	end method
	end class

	class gfxSquare
	parent Color
	parent gfxObject
	method init
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	clparent Color,init
	push A
	push "w"
	push "h"
	cthis vars
	push $3
	pop w
	push $4
	pop h
	new img,imggfx
	push $1
	push $2
	call imggfx,setpos
	push "imggfx"
	clparent gfxObject,init
	end method
	method build
	push w
	push h
	push r
	push g
	push b
	push a
	call imggfx,create
	end method
	method shadow
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	localdef $4
	localdef $5
	call imggfx,getpos
	pop $5
	pop $4
	push 0
	push 0
	call imggfx,setpos
	new img,_img1
	new img,_img2
	call imggfx,getw
	push 0
	cmpja
	cmp0
	je l1314
	push w
	push h
	cthis transparent
	call _img1,create
	push "imggfx"
	call _img1,blit
	jmp l1313
l1314:
	push w
	push h
	cthis get
	call _img1,create
l1313:
	push w
	push h
	cthis black
	push $3
	call _img2,create
	push $1
	push 0
	cmpjl
	cmp0
	je l1316
	push $1
	popax
	sub 0,$a
	push 0
	call _img1,move
	push $1
	popax
	add $4,$a
	pop $4
	jmp l1315
l1316:
	push $1
	push 0
	call _img2,move
l1315:
	push $2
	push 0
	cmpjl
	cmp0
	je l1318
	push 0
	push $2
	popax
	sub 0,$a
	call _img1,move
	push $2
	popax
	add $5,$a
	pop $5
	jmp l1317
l1318:
	push 0
	push $2
	call _img2,move
l1317:
	call $1,abs
	popax
	add w,$a
	pop w
	call $2,abs
	popax
	add h,$a
	pop h
	push w
	push h
	cthis transparent
	call imggfx,create
	push "_img2"
	call imggfx,blit
	push "_img1"
	call imggfx,blit
	delete _img1
	delete _img2
	push $4
	push $5
	call imggfx,move
	end method
	method blackborder
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $1
	cthis black
	push $2
	cthis border
	end method
	method border
	localint $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localdef $7
	localdef $8
	call imggfx,getpos
	pop $8
	pop $7
	push 0
	push 0
	call imggfx,setpos
	new img,_img
	call imggfx,getw
	push 0
	cmpja
	cmp0
	je l1320
	push w
	push h
	cthis transparent
	call _img,create
	push "imggfx"
	call _img,blit
	jmp l1319
l1320:
	push w
	push h
	cthis get
	call _img,create
l1319:
	push $1
	push $2
	call _img,move
	push 2
	push $1
	pop $b
	popax
	mul $a,$b
	popax
	add w,$a
	pop w
	push 2
	push $1
	pop $b
	popax
	mul $a,$b
	popax
	add h,$a
	pop h
	push w
	push h
	push $3
	push $4
	push $5
	push $6
	call imggfx,create
	push "_img"
	call imggfx,blit
	delete _img
	push $7
	push $8
	call imggfx,move
	end method
	end class

	class Rect
	method init
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push A
	push "x"
	push "y"
	push "w"
	push "h"
	cthis vars
	push $1
	push $2
	push $3
	push $4
	cthis set
	end method
	method x2
	push x
	push w
	pop $b
	popax
	add $a,$b
	end method
	method y2
	push y
	push h
	pop $b
	popax
	add $a,$b
	end method
	method set
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	pop x
	push $2
	pop y
	push $3
	pop w
	push $4
	pop h
	end method
	method fit
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "gmimgvec"
	cmpje
	cmp0
	je l1322
	localdef $2
	push x
	push $1
	spushs
	spop $a
	call [$a],_getpx
	pop $b
	popax
	sub $a,$b
	pop $2
	push $2
	push 0
	cmpja
	cmp0
	je l1324
	push $1
	spushs
	push $2
	push 0
	spop $a
	call [$a],move
l1324:
	localdef $3
	push y
	push $1
	spushs
	spop $a
	call [$a],_getpy
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpja
	cmp0
	je l1326
	push $1
	spushs
	push 0
	push $3
	spop $a
	call [$a],move
l1326:
	jmp l1321
l1322:
	localdef $2
	push x
	push $1
	spushs
	spop $a
	call [$a],getpx
	pop $b
	popax
	sub $a,$b
	pop $2
	push $2
	push 0
	cmpja
	cmp0
	je l1328
	push $1
	spushs
	push $2
	push 0
	spop $a
	call [$a],move
l1328:
	localdef $3
	push y
	push $1
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpja
	cmp0
	je l1330
	push $1
	spushs
	push 0
	push $3
	spop $a
	call [$a],move
l1330:
l1321:
	cthis x2
	push $1
	spushs
	spop $a
	call [$a],getex
	pop $b
	popax
	sub $a,$b
	pop $2
	push $2
	push 0
	cmpjl
	cmp0
	je l1332
	push $1
	spushs
	push $2
	push 0
	spop $a
	call [$a],move
l1332:
	cthis y2
	push $1
	spushs
	spop $a
	call [$a],getey
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpjl
	cmp0
	je l1334
	push $1
	spushs
	push 0
	push $3
	spop $a
	call [$a],move
l1334:
	end method
	method fitrand
	localstring $1
	pop $1
	push $1
	spushs
	push x
	push w
	push $1
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push y
	push h
	push $1
	spushs
	spop $a
	call [$a],geth
	pop $b
	popax
	sub $a,$b
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],ansetbpos
	end method
	method fitgrouprand
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l1335:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l1336
	jmp l1338
l1337:
	add $2,1
	pop $2
	jmp l1335
l1338:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis fitrand
	jmp l1337
l1336:
	end method
	method fitgroup
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l1339:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l1340
	jmp l1342
l1341:
	add $2,1
	pop $2
	jmp l1339
l1342:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis fit
	jmp l1341
l1340:
	end method
	end class

	class classfadeinout
	method init
	new timer,timf
	new string,_sob
	new int,_istep
	new int,_ival
	new int,_ib1
	new int,_ib2
	new string,_sfun
	new string,_sfunfin
	new string,_sobfin
	push "onfinish"
	push "_ctimffin"
	call timf,addmethod
	end method
	method _cfinito
	localint $1
	pop $1
	push _sob
	spushs
	push _sfun
	spushs
	push $1
	spop $d
	spop $a
	call [$a],[$d]
	push _sfunfin
	push "null"
	cmpjne
	cmp0
	je l1344
	push _sobfin
	push "null"
	cmpje
	cmp0
	je l1346
	push _sfunfin
	spushs
	spop $d
	cthis [$d]
	jmp l1345
l1346:
	push _sobfin
	spushs
	push _sfunfin
	spushs
	spop $d
	spop $a
	call [$a],[$d]
l1345:
l1344:
	end method
	method _ctimffin
	push _istep
	popax
	add _ival,$a
	pop _ival
	push _ival
	push _ib2
	cmpjae
	cmp0
	je l1348
	push _ib2
	cthis _cfinito
	jmp l1347
l1348:
	push _ival
	push _ib1
	cmpjle
	cmp0
	je l1350
	push _ib1
	cthis _cfinito
	jmp l1349
l1350:
	push _sob
	spushs
	push _sfun
	spushs
	push _ival
	spop $d
	spop $a
	call [$a],[$d]
	cthis play
l1349:
l1347:
	end method
	method _play
	localint $1
	localint $2
	localstring $3
	localstring $4
	localint $5
	localint $6
	localstring $7
	localstring $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $7
	pop _sobfin
	push $8
	pop _sfunfin
	push $5
	pop _ib1
	push $6
	pop _ib2
	localint $9
	call $2,abs
	pop $9
	push $1
	push 0
	cmpjle
	cmp0
	jne l1353
	push $9
	push $5
	cmpje
	cmp0
	jne l1353
	push $9
	push $6
	cmpja
	jmp l1354
l1352:
	push 0
	jmp l1354
l1353:
	push 1
l1354:
	cmp0
	je l1355
	ret
l1355:
	push $4
	pop _sfun
	push $1
	call timf,setcycle
	push $3
	pop _sob
	push $2
	push 0
	cmpja
	cmp0
	je l1357
	push _ib1
	pop _ival
	jmp l1356
l1357:
	push $2
	push 0
	cmpjl
	cmp0
	je l1359
	push _ib2
	pop _ival
	jmp l1358
l1359:
	ret
l1358:
l1356:
	push $3
	spushs
	push $4
	spushs
	push _ival
	spop $d
	spop $a
	call [$a],[$d]
	push $2
	pop _istep
	call timf,play
	end method
	method imgtransparency
	localint $1
	localint $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "transparency"
	push 0
	push 255
	push "null"
	push $4
	cthis _play
	end method
	method setopacity
	localint $1
	localint $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "setopacity"
	push 0
	push 255
	push "null"
	push $4
	cthis _play
	end method
	method sndvolume
	localint $1
	localint $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "setvol"
	push 0
	push 100
	push "null"
	push $4
	cthis _play
	end method
	method isplaying
	call timf,isplaying
	end method
	end class

	class CutScene
	parent gfxObject
	method init
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	new int,X1
	new int,Y1
	new int,X2
	new int,Y2
	new img,_gsq
	push $1
	push $2
	push $3
	push $4
	cthis build
	push "_gsq"
	clparent gfxObject,init
	new string,_sfunc1
	new string,_sob1
	new string,_sfunc2
	new string,_sob2
	new int,_idelay
	push 10
	pop _idelay
	new classfadeinout,_clfio
	end method
	method build
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	pop Y2
	pop X2
	pop Y1
	pop X1
	push X2
	push X1
	pop $b
	popax
	sub $a,$b
	push Y2
	push Y1
	pop $b
	popax
	sub $a,$b
	cthis black
	push 255
	call _gsq,create
	push X1
	push Y1
	call _gsq,setpos
	call _gsq,hide
	push 0
	call _gsq,transparency
	end method
	method delay
	localint $1
	pop $1
	push $1
	pop _idelay
	end method
	method transparency
	localint $1
	pop $1
	push $1
	call _gsq,transparency
	end method
	method playfin
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "null"
	push $1
	push "null"
	push $2
	cthis playobfin
	end method
	method playobfin
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push "null"
	cmpje
	cmp0
	je l1361
	call gameapi,getgamename
	jmp l1360
l1361:
	push $1
l1360:
	pop _sob1
	push $2
	pop _sfunc1
	push $3
	push "null"
	cmpje
	cmp0
	je l1363
	call gameapi,getgamename
	jmp l1362
l1363:
	push $3
l1362:
	pop _sob2
	push $4
	pop _sfunc2
	call _gsq,show
	push 0
	call _gsq,transparency
	push 1
	push _idelay
	cthis getname
	push "transparency"
	push 0
	push 255
	cthis getname
	push "CutScene0"
	call _clfio,_play
	end method
	method CutScene0
	push _sob1
	push _sfunc1
	cthis callfun
	call _gsq,show
	push 1
	push _idelay
	popax
	sub 0,$a
	cthis getname
	push "transparency"
	push 0
	push 255
	cthis getname
	push "_callfun2"
	call _clfio,_play
	end method
	method close
	localstring $1
	pop $1
	call gameapi,getgamename
	push $1
	cthis obclose
	end method
	method obclose
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop _sob1
	push $2
	pop _sfunc1
	push 0
	call _gsq,transparency
	call _gsq,show
	push 1
	push _idelay
	cthis getname
	push "transparency"
	push 0
	push 255
	cthis getname
	push "CutScene1"
	call _clfio,_play
	end method
	method CutScene1
	call _gsq,hide
	push _sob1
	push _sfunc1
	cthis callfun
	end method
	method enter
	localstring $1
	pop $1
	call gameapi,getgamename
	push $1
	cthis obenter
	end method
	method obenter
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop _sob2
	push $2
	pop _sfunc2
	push 255
	call _gsq,transparency
	call _gsq,show
	push 1
	push _idelay
	popax
	sub 0,$a
	cthis getname
	push "transparency"
	push 0
	push 255
	cthis getname
	push "_callfun2"
	call _clfio,_play
	end method
	method _callfun2
	call _gsq,hide
	push _sob2
	push _sfunc2
	cthis callfun
	end method
	method isplaying
	call _clfio,isplaying
	end method
	end class

	method allchars
	push "a0 t_!@#$%^&*()_+-=[]\\|}{;':\",./<>?`~"
	end method
	class TextTyper
	parent classlocker
	parent gfxObject
	method init
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localstring $6
	localint $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	clparent classlocker,init
	push $1
	push $2
	cthis checkfont
	pop $1
	new int,iR
	push $3
	pop iR
	new int,iG
	push $4
	pop iG
	new int,iB
	push $5
	pop iB
	new string,sChars
	push $6
	pop sChars
	new int,iLimit
	push $7
	pop iLimit
	push A
	push "Sdir"
	push "left"
	push "W"
	push 0
	push "iFontSize"
	push $2
	push "X"
	push 0
	push "Y"
	push 0
	cthis vars2
	new text,txt1
	push $1
	call txt1,setfont
	push ""
	call txt1,set
	new text,txt2
	push $1
	call txt2,setfont
	push "_"
	call txt2,set
	push iR
	push iG
	push iB
	call txt2,createtxt
	call txt2,hide
	new text,txtpass
	push $1
	call txtpass,setfont
	call txtpass,hide
	new int,bpass
	push 0
	pop bpass
	new string,_sob
	push "null"
	pop _sob
	new string,_sfun
	push "null"
	pop _sfun
	push "timcyk"
	push 300
	push 1
	push "fintimcyk"
	cthis cnewtimerfin
	push "txt1"
	clparent gfxObject,init
	end method
	method setaspasswd
	push 1
	pop bpass
	call txt1,hide
	call txt1,getz
	call txtpass,setz
	call txtpass,show
	cthis copytopass
	end method
	method copytopass
	localdef $1
	call txt1,get
	spushs
	spop $h
	call $h,length
	pop $1
	localstring $2
	push ""
	pop $2
	localint $3
	push 0
	pop $3
l1364:
	push $3
	push $1
	cmpjl
	cmp0
	je l1365
	jmp l1367
l1366:
	add $3,1
	pop $3
	jmp l1364
l1367:
	push "*"
	popax
	add $2,$a
	pop $2
	jmp l1366
l1365:
	push $2
	call txtpass,txtset
	call txt1,getpx
	call txt1,getpy
	call txtpass,setpos
	end method
	method setastext
	push 0
	pop bpass
	call txt1,show
	call txtpass,hide
	end method
	method isin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	call txt1,isin
	end method
	method getcol
	push iR
	push iG
	push iB
	ret
	end method
	method fintimcyk
	cthis getlock
	cmp0
	je l1369
	ret
l1369:
	cthis updatecyk
	cthis play
	end method
	method updatecyk
	call txt2,isvisible
	cmp0
	je l1371
	call txt2,hide
	jmp l1370
l1371:
	call txt1,getex
	call txt1,getpy
	call txt2,setpos
	call txt2,show
l1370:
	end method
	method enable
	cthis unlock
	cthis updatecyk
	call timcyk,play
	end method
	method disable
	call txt2,hide
	push 0
	call timcyk,stop
	cthis lock
	end method
	method onenter
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop _sob
	push $2
	pop _sfun
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	pop X
	push $2
	pop Y
	cthis get
	cthis updatetxt
	end method
	method move
	localint $1
	localint $2
	pop $2
	pop $1
	push X
	push $1
	pop $b
	popax
	add $a,$b
	push Y
	push $2
	pop $b
	popax
	add $a,$b
	cthis setpos
	end method
	method setz
	localint $1
	pop $1
	push $1
	call txt1,setz
	push $1
	call txt2,setz
	end method
	method get
	localstring $1
	call txt1,get
	pop $1
	call $1,length
	push 0
	cmpja
	cmp0
	je l1373
	push $1
	jmp l1372
l1373:
	push ""
l1372:
	end method
	method getpx
	call txt1,getpx
	end method
	method getpy
	call txt1,getpy
	end method
	method getcx
	call txt1,getcx
	end method
	method getcy
	call txt1,getcy
	end method
	method geth
	call txt1,geth
	end method
	method getey
	call txt1,getpy
	push iFontSize
	pop $b
	popax
	add $a,$b
	end method
	method clip
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	call txt1,clip
	push $1
	push $2
	push $3
	push $4
	call txt2,clip
	end method
	method length
	call txt1,get
	spushs
	spop $h
	call $h,length
	end method
	method set
	localstring $1
	pop $1
	push $1
	call txt1,set
	end method
	method txtset
	localstring $1
	pop $1
	push $1
	cthis getcol
	call txt1,txtsetcol
	end method
	method limit=
	localint $1
	pop $1
	push $1
	pop iLimit
	end method
	method onkeydown
	cthis getlock
	cmp0
	je l1375
	ret
l1375:
	cthis getname
	push "_ontype"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push "enter"
	call keyboard,iskeydown
	cmp0
	je l1377
	cthis disable
	push _sob
	push _sfun
	cthis callfun
	cthis getname
	push "_onenter"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	ret
l1377:
	localstring $1
	push "t"
	call sChars,contains
	cmp0
	je l1379
	push "tab"
	call keyboard,iskey
	jmp l1381
l1379:
	push 0
	jmp l1381
l1380:
	push 1
l1381:
	cmp0
	je l1382
	push " "
	pop $1
	jmp l1378
l1382:
	call keyboard,getkey
	pop $1
l1378:
	localstring $2
	call txt1,get
	pop $2
	call keyboard,isalpha
	cmp0
	je l1384
	push "a"
	call sChars,contains
	jmp l1386
l1384:
	push 0
	jmp l1386
l1385:
	push 1
l1386:
	cmp0
	jne l1388
	call keyboard,isdigit
	cmp0
	je l1389
	push "0"
	call sChars,contains
	jmp l1391
l1389:
	push 0
	jmp l1391
l1390:
	push 1
l1391:
	cmp0
	jne l1388
	push $1
	call sChars,contains
	jmp l1392
l1387:
	push 0
	jmp l1392
l1388:
	push 1
l1392:
	cmp0
	je l1393
	push iLimit
	push 0
	cmpjle
	cmp0
	jne l1396
	push iLimit
	call $2,length
	cmpja
	jmp l1397
l1395:
	push 0
	jmp l1397
l1396:
	push 1
l1397:
	jmp l1398
l1393:
	push 0
	jmp l1398
l1394:
	push 1
l1398:
	cmp0
	je l1399
	push $2
	push $1
	pop $b
	popax
	add $a,$b
	cthis updatetxt
	cthis updatecyk
	jmp l1383
l1399:
	push "backspace"
	call keyboard,iskey
	cmp0
	je l1401
	call $2,length
	push 0
	cmpja
	jmp l1403
l1401:
	push 0
	jmp l1403
l1402:
	push 1
l1403:
	cmp0
	je l1404
	push 1
	call $2,strsube
	cthis updatetxt
	cthis updatecyk
l1404:
l1383:
	end method
	method updatetxt
	localstring $1
	pop $1
	push $1
	call txt1,set
	push iR
	push iG
	push iB
	call txt1,createtxt
	push Sdir
	push "center"
	cmpje
	cmp0
	je l1406
	push X
	push W
	call txt1,getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	push Y
	call txt1,setpos
	jmp l1405
l1406:
	push Sdir
	push "right"
	cmpje
	cmp0
	je l1408
	push X
	push W
	pop $b
	popax
	add $a,$b
	call txt1,getw
	pop $b
	popax
	sub $a,$b
	push Y
	call txt1,setpos
	jmp l1407
l1408:
	push X
	push Y
	call txt1,setpos
l1407:
l1405:
	push bpass
	cmp0
	je l1410
	cthis copytopass
l1410:
	cthis getname
	push "_onwrite"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end class

	class ConTextTyper
	parent TextTyper
	parent ObjController
	method init
	clparent TextTyper,init
	clparent ObjController,init
	end method
	end class

	new string,sTextBoxTyperSys
	push "null"
	pop sTextBoxTyperSys
	class TextBoxTyper
	parent LObjController
	parent ImagePos
	method init
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localstring $7
	localint $8
	localint $9
	localint $10
	localint $11
	localint $12
	pop $12
	pop $11
	pop $10
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	clparent LObjController,init
	clparent ImagePos,init
	new def,Font
	push $1
	push $2
	cthis checkfont
	pop Font
	push A
	push "Cols"
	push $10
	push $3
	pop $b
	popax
	div $a,$b
	psax
	push "Rows"
	push $11
	push $2
	push $12
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	div $a,$b
	psax
	push "X"
	push $8
	push "Y"
	push $9
	push "Row"
	push 0
	push "enablemove"
	push 1
	push "W"
	push $10
	push "insystem"
	push 0
	push "H"
	push $11
	push "isvisible"
	push 1
	push "clipx1"
	push $8
	push "clipy1"
	push $9
	push "clipx2"
	push 0
	push "clipy2"
	push 0
	push "clipped"
	push 0
	cthis vars2
	new def,Size
	push $2
	pop Size
	new def,Dy
	push $12
	pop Dy
	new def,Z
	push 0
	pop Z
	localstring $13
	new gmimgvec,grtt
	new gmimgvec,gren
	localint $14
	push 0
	pop $14
l1411:
	push $14
	push Rows
	cmpjl
	cmp0
	je l1412
	jmp l1414
l1413:
	add $14,1
	pop $14
	jmp l1411
l1414:
	push "tt"
	push $14
	pop $b
	popax
	add $a,$b
	pop $13
	push $13
	spushs
	push Font
	push $2
	push $4
	push $5
	push $6
	push $7
	push Cols
	spop $e
	new TextTyper,[$e]
	push $13
	spushs
	push $10
	spop $a
	call [$a],W=
	push $13
	spushs
	push "left"
	spop $a
	call [$a],Sdir=
	push $13
	spushs
	push $8
	push $9
	push $14
	push $2
	push $12
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	mul $a,$b
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	push $13
	call grtt,add
	jmp l1413
l1412:
	end method
	method settyper
	localint $1
	localstring $2
	localint $3
	localint $4
	localint $5
	localint $6
	localint $7
	localstring $8
	localstring $9
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localint $10
	localint $11
	localstring $12
	localstring $13
	push ""
	pop $13
	push $1
	push 0
	cmpjl
	cmp0
	je l1416
	call grtt,last
	spushs
	spop $a
	call [$a],X
	pop $10
	call grtt,last
	spushs
	spop $a
	call [$a],getey
	push Dy
	pop $b
	popax
	add $a,$b
	pop $11
	call grtt,size
	pop $1
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	call grtt,add
	jmp l1415
l1416:
	push $1
	call grtt,get
	pop $12
	push $12
	spushs
	spop $a
	call [$a],X
	pop $10
	push $12
	spushs
	spop $a
	call [$a],getpy
	pop $11
	push $12
	spushs
	spop $a
	call [$a],get
	pop $13
	push $12
	push 0
	push $3
	push $12
	spushs
	spop $a
	call [$a],iFontSize
	pop $b
	popax
	sub $a,$b
	call grtt,movefrom
	push $12
	spushs
	spop $d
	delete [$d]
l1415:
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	pop $12
	push $12
	spushs
	push $2
	push $3
	push $5
	push $6
	push $7
	push $8
	push W
	push $4
	pop $b
	popax
	div $a,$b
	psax
	spop $e
	new TextTyper,[$e]
	push $12
	spushs
	push W
	spop $a
	call [$a],W=
	push $12
	spushs
	push $9
	spop $a
	call [$a],Sdir=
	push $12
	spushs
	push $13
	spop $a
	call [$a],updatetxt
	push $12
	spushs
	push Z
	spop $a
	call [$a],setz
	push $12
	spushs
	push $10
	push $11
	spop $a
	call [$a],setpos
	end method
	method move
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call grtt,move
	push $1
	push $2
	call gren,move
	push $1
	popax
	add X,$a
	pop X
	push $2
	popax
	add Y,$a
	pop Y
	end method
	method size
	call grtt,size
	end method
	method setz
	localint $1
	pop $1
	push $1
	pop Z
	push $1
	call grtt,setz
	push $1
	call gren,setz
	end method
	method getz
	push Z
	end method
	method show
	push 1
	pop isvisible
	call grtt,show
	end method
	method hide
	push 0
	pop isvisible
	call grtt,hide
	end method
	method clip
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push 1
	pop clipped
	push $1
	pop clipx1
	push $2
	pop clipy1
	push $3
	pop clipx2
	push $4
	pop clipy2
	localint $5
	push 0
	pop $5
l1417:
	push $5
	call grtt,size
	cmpjl
	cmp0
	je l1418
	jmp l1420
l1419:
	add $5,1
	pop $5
	jmp l1417
l1420:
	push $5
	call grtt,get
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],clip
	jmp l1419
l1418:
	end method
	method getw
	push W
	end method
	method geth
	push H
	end method
	method enumerate
	localint $1
	pop $1
	localstring $2
	localstring $3
	localint $4
	push 0
	pop $4
l1421:
	push $4
	call grtt,size
	cmpjl
	cmp0
	je l1422
	jmp l1424
l1423:
	add $4,1
	pop $4
	jmp l1421
l1424:
	push "txte"
	push $4
	pop $b
	popax
	add $a,$b
	pop $2
	push $2
	spushs
	spop $e
	new text,[$e]
	push $2
	call gren,add
	push $2
	spushs
	push Z
	spop $a
	call [$a],setz
	push $2
	spushs
	push Font
	spop $a
	call [$a],setfont
	push $2
	spushs
	push ""
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	push "."
	pop $b
	popax
	add $a,$b
	call tt0,getcol
	spop $a
	call [$a],txtsetcol
	push $2
	spushs
	push X
	push $2
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	push $1
	pop $b
	popax
	sub $a,$b
	push Y
	push $4
	push Size
	push Dy
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	mul $a,$b
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	jmp l1423
l1422:
	end method
	method cut
	localint $1
	pop $1
	push $1
	pop Rows
	end method
	method enable
	cthis unlock
	cthis activateact
	end method
	method disable
	cthis lock
	push "disable"
	call grtt,eval
	end method
	method actual
	push "tt"
	push Row
	pop $b
	popax
	add $a,$b
	end method
	method activate
	localint $1
	pop $1
	cthis unlock
	push $1
	push 0
	cmpjae
	cmp0
	je l1426
	push $1
	push Rows
	cmpjl
	jmp l1428
l1426:
	push 0
	jmp l1428
l1427:
	push 1
l1428:
	cmp0
	je l1429
	push insystem
	cmp0
	je l1431
	push GAME
	spushs
	push sTextBoxTyperSys
	spop $a
	call [$a],isgmobj
	cmp0
	je l1433
	push sTextBoxTyperSys
	cthis getname
	cmpjne
	jmp l1435
l1433:
	push 0
	jmp l1435
l1434:
	push 1
l1435:
	cmp0
	je l1436
	push sTextBoxTyperSys
	spushs
	spop $a
	call [$a],deactivate
l1436:
	cthis getname
	pop sTextBoxTyperSys
l1431:
	cthis deactivate
	push $1
	pop Row
	push "tt"
	push Row
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],enable
	cthis getname
	push "_activate"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1429:
	end method
	method activateact
	push Row
	cthis activate
	end method
	method deactivate
	push "tt"
	push Row
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],disable
	end method
	method onkeydown
	cthis getlock
	cmp0
	je l1438
	ret
l1438:
	cthis getname
	push "_boxontype"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push "enter"
	call keyboard,iskeydown
	cmp0
	je l1440
	localdef $1
	push Rows
	push 1
	pop $b
	popax
	sub $a,$b
	cthis getid
	pop $1
	call $1,clear
	call $1,length
	push 0
	cmpje
	cmp0
	je l1442
	push enablemove
	jmp l1444
l1442:
	push 0
	jmp l1444
l1443:
	push 1
l1444:
	cmp0
	je l1445
	localdef $2
	push Rows
	push 1
	pop $b
	popax
	sub $a,$b
	pop $2
l1446:
	push $2
	push Row
	push 1
	pop $b
	popax
	add $a,$b
	cmpja
	cmp0
	je l1447
	jmp l1449
l1448:
	sub $2,1
	pop $2
	jmp l1446
l1449:
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	cthis getid
	push $2
	cthis setid
	jmp l1448
l1447:
	push Row
	push 1
	pop $b
	popax
	add $a,$b
	push Rows
	cmpjl
	cmp0
	je l1451
	push ""
	push Row
	push 1
	pop $b
	popax
	add $a,$b
	cthis setid
l1451:
l1445:
	push Row
	push 1
	pop $b
	popax
	add $a,$b
	cthis activate
	jmp l1439
l1440:
	push "up"
	call keyboard,iskey
	cmp0
	je l1453
	push Row
	push 0
	cmpja
	jmp l1455
l1453:
	push 0
	jmp l1455
l1454:
	push 1
l1455:
	cmp0
	je l1456
	push Row
	push 1
	pop $b
	popax
	sub $a,$b
	cthis activate
	jmp l1452
l1456:
	push "down"
	call keyboard,iskey
	cmp0
	je l1458
	push Row
	push Rows
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	jmp l1460
l1458:
	push 0
	jmp l1460
l1459:
	push 1
l1460:
	cmp0
	je l1461
	push Row
	push 1
	pop $b
	popax
	add $a,$b
	cthis activate
	jmp l1457
l1461:
	push "pgdown"
	call keyboard,iskey
	cmp0
	je l1463
	push Row
	push Rows
	push 10
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l1465
	push Row
	push 10
	pop $b
	popax
	add $a,$b
	cthis activate
	jmp l1464
l1465:
	push Rows
	push 1
	pop $b
	popax
	sub $a,$b
	cthis activate
l1464:
	jmp l1462
l1463:
	push "pgup"
	call keyboard,iskey
	cmp0
	je l1467
	push Row
	push 9
	cmpja
	cmp0
	je l1469
	push Row
	push 10
	pop $b
	popax
	sub $a,$b
	cthis activate
	jmp l1468
l1469:
	push 0
	cthis activate
l1468:
	jmp l1466
l1467:
	push "backspace"
	call keyboard,iskey
	cmp0
	jne l1472
	push "delete"
	call keyboard,iskey
	jmp l1473
l1471:
	push 0
	jmp l1473
l1472:
	push 1
l1473:
	cmp0
	je l1474
	cthis actual
	spushs
	spop $a
	call [$a],length
	push 0
	cmpje
	jmp l1476
l1474:
	push 0
	jmp l1476
l1475:
	push 1
l1476:
	cmp0
	je l1477
	push enablemove
	cmp0
	je l1479
	localdef $2
	push Row
	pop $2
l1480:
	push $2
	push Rows
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l1481
	jmp l1483
l1482:
	add $2,1
	pop $2
	jmp l1480
l1483:
	push $2
	push 1
	pop $b
	popax
	add $a,$b
	cthis getid
	push $2
	cthis setid
	jmp l1482
l1481:
	push ""
	push Rows
	push 1
	pop $b
	popax
	sub $a,$b
	cthis setid
l1479:
	push "backspace"
	call keyboard,iskey
	cmp0
	je l1485
	push Row
	push 1
	pop $b
	popax
	sub $a,$b
	cthis activate
l1485:
	jmp l1470
l1477:
	push "onkeydown"
	call grtt,eval
l1470:
l1466:
l1462:
l1457:
l1452:
l1439:
	end method
	method onmouselclick
	cthis getlock
	cmp0
	je l1487
	ret
l1487:
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	push clipped
	cmp0
	je l1489
	push $1
	push $2
	push clipx1
	push clipy1
	push clipx2
	push clipy2
	call clsurf,isin
	jmp l1491
l1489:
	push 0
	jmp l1491
l1490:
	push 1
l1491:
	cmp0
	jne l1493
	push clipped
	neg
	cmp0
	je l1494
	push $1
	push $2
	push X
	push Y
	push W
	push H
	call clsurf,isin2
	jmp l1496
l1494:
	push 0
	jmp l1496
l1495:
	push 1
l1496:
	jmp l1497
l1492:
	push 0
	jmp l1497
l1493:
	push 1
l1497:
	cmp0
	je l1498
	cthis deactivate
	localint $3
	push 0
	pop $3
l1499:
	push $3
	cthis size
	cmpjl
	cmp0
	je l1500
	jmp l1502
l1501:
	add $3,1
	pop $3
	jmp l1499
l1502:
	push "tt"
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],getey
	push $2
	cmpja
	cmp0
	je l1504
	push $3
	cthis activate
	ret
l1504:
	jmp l1501
l1500:
	jmp l1488
l1498:
	cthis getname
	push "_OUTSIDE"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1488:
	end method
	method isin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $3
	cmp0
	je l1506
	push isvisible
	neg
	jmp l1508
l1506:
	push 0
	jmp l1508
l1507:
	push 1
l1508:
	cmp0
	je l1509
	push 0
	ret
l1509:
	push $1
	push $2
	push X
	push Y
	push W
	push H
	call clsurf,isin2
	end method
	method getid
	localint $1
	pop $1
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],get
	end method
	method getact
	push "tt"
	push Row
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],get
	end method
	method idpx
	localint $1
	pop $1
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],getpx
	end method
	method idpy
	localint $1
	pop $1
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],getpy
	end method
	method getpx
	push X
	end method
	method getpy
	push Y
	end method
	method get
	push 0
	cthis getfrom
	end method
	method getfrom
	localint $1
	pop $1
	push $1
	push ""
	cthis getlinesfrom
	end method
	method getlinesfrom
	localint $1
	localstring $2
	pop $2
	pop $1
	localstring $3
	push ""
	pop $3
	localint $4
	push $1
	pop $4
l1510:
	push $4
	call grtt,size
	cmpjl
	cmp0
	je l1511
	jmp l1513
l1512:
	add $4,1
	pop $4
	jmp l1510
l1513:
	push "tt"
	push $4
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],get
	push $2
	pop $b
	popax
	add $a,$b
	popax
	add $3,$a
	pop $3
	jmp l1512
l1511:
	push $3
	end method
	method getlines
	push 0
	push " "
	cthis getlinesfrom
	end method
	method nonempty
	localint $1
	pop $1
	localstring $2
l1514:
	push $1
	call grtt,size
	cmpjl
	cmp0
	je l1515
	jmp l1517
l1516:
	add $1,1
	pop $1
	jmp l1514
l1517:
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],get
	pop $2
	call $2,clear
	call $2,length
	push 0
	cmpja
	cmp0
	je l1519
	push $1
	ret
l1519:
	jmp l1516
l1515:
	push 1
	popax
	sub 0,$a
	end method
	method clear
	call grtt,txtreset
	end method
	method setid
	localstring $1
	localint $2
	pop $2
	pop $1
	call grtt,size
	push $2
	cmpjae
	cmp0
	je l1521
	push "tt"
	push $2
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spop $a
	call [$a],txtset
l1521:
	end method
	method settext
	localint $1
	pop $1
l1522:
	push $1
	push 0
	cmpja
	cmp0
	je l1523
	sub $1,1
	pop $1
	push $1
	cthis setid
	jmp l1522
l1523:
	end method
	method copytodb
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],free
	localint $2
	push 0
	pop $2
l1524:
	push $2
	call grtt,size
	cmpjl
	cmp0
	je l1525
	jmp l1527
l1526:
	add $2,1
	pop $2
	jmp l1524
l1527:
	push $1
	spushs
	push $1
	spushs
	spop $a
	call [$a],addrow
	push 1
	pop $b
	popax
	sub $a,$b
	push $2
	call grtt,get
	spushs
	spop $a
	call [$a],get
	spop $a
	call [$a],add
	jmp l1526
l1525:
	end method
	method copyfromdb
	localstring $1
	pop $1
	push $1
	push 0
	push $1
	spushs
	spop $a
	call [$a],getrowsno
	cthis copyfromdbii
	end method
	method copyfromdbss
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	push $1
	spushs
	push $2
	spop $a
	call [$a],findbyrow
	push 1
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	push $3
	spop $a
	call [$a],findbyrow
	cthis copyfromdbii
	end method
	method copyfromdbii
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $2
	push 1
	popax
	sub 0,$a
	cmpje
	cmp0
	jne l1530
	push $3
	push 1
	popax
	sub 0,$a
	cmpje
	jmp l1531
l1529:
	push 0
	jmp l1531
l1530:
	push 1
l1531:
	cmp0
	je l1532
	ret
l1532:
	cthis clear
	push $3
	push $2
	pop $b
	popax
	sub $a,$b
	cthis size
	cmpja
	cmp0
	je l1534
	push $2
	cthis size
	pop $b
	popax
	add $a,$b
	pop $3
l1534:
	localint $4
	push $2
	pop $4
l1535:
	push $4
	push $3
	cmpjl
	cmp0
	je l1536
	jmp l1538
l1537:
	add $4,1
	pop $4
	jmp l1535
l1538:
	push $1
	spushs
	push $4
	spop $a
	call [$a],getcolsno
	cmp0
	je l1540
	push $1
	spushs
	push $4
	push 0
	spop $a
	call [$a],get
	push $4
	push $2
	pop $b
	popax
	sub $a,$b
	cthis setid
l1540:
	jmp l1537
l1536:
	end method
	method copyfromdbrow
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	localint $4
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	pop $4
	push $4
	cthis size
	cmpja
	cmp0
	je l1542
	cthis size
	pop $4
l1542:
	localint $5
	push $3
	pop $5
l1543:
	push $5
	push $4
	cmpjl
	cmp0
	je l1544
	jmp l1546
l1545:
	add $5,1
	pop $5
	jmp l1543
l1546:
	push $1
	spushs
	push $2
	push $5
	spop $a
	call [$a],get
	push $5
	push $3
	pop $b
	popax
	sub $a,$b
	cthis setid
	jmp l1545
l1544:
	end method
	method save
	localstring $1
	pop $1
	new db,__tmpdb
	push "__tmpdb"
	cthis copytodb
	push "|"
	call __tmpdb,setseparator
	push $1
	call __tmpdb,save
	delete __tmpdb
	end method
	method load
	localstring $1
	pop $1
	new db,__tmpdb
	push $1
	call __tmpdb,load
	push "__tmpdb"
	cthis copyfromdb
	delete __tmpdb
	end method
	end class

	class GUITextBoxTyper
	parent TextBoxTyper
	method init
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localstring $7
	localint $8
	localint $9
	localint $10
	localint $11
	localint $12
	pop $12
	pop $11
	pop $10
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	push $6
	push $7
	push $8
	push $9
	push $10
	push $11
	push $12
	clparent TextBoxTyper,init
	push A
	push "rewinder"
	push "null"
	push "rewinderbg"
	push "null"
	cthis vars2
	end method
	method setrewinder
	localstring $1
	pop $1
	push $1
	pop rewinder
	push $1
	push "bg"
	pop $b
	popax
	add $a,$b
	pop rewinderbg
	end method
	method activate
	localint $1
	pop $1
	push $1
	clparent TextBoxTyper,activate
	cthis updaterewactual
	end method
	method updaterewactual
	push Row
	cthis updaterewpos
	end method
	method updaterewpos
	localint $1
	pop $1
	push rewinder
	push "null"
	cmpjne
	cmp0
	je l1548
	localdef $2
	push "tt"
	push $1
	pop $b
	popax
	add $a,$b
	pop $2
	push $2
	spushs
	spop $a
	call [$a],getpy
	push rewinderbg
	spushs
	spop $a
	call [$a],getpy
	cmpjl
	cmp0
	je l1550
	push rewinder
	spushs
	push 0
	push rewinderbg
	spushs
	spop $a
	call [$a],getpy
	push $2
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],rewind
	jmp l1549
l1550:
	push $2
	spushs
	spop $a
	call [$a],getey
	push rewinderbg
	spushs
	spop $a
	call [$a],getey
	cmpja
	cmp0
	je l1552
	push rewinder
	spushs
	push 0
	push rewinderbg
	spushs
	spop $a
	call [$a],getey
	push $2
	spushs
	spop $a
	call [$a],getey
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],rewind
l1552:
l1549:
l1548:
	end method
	end class

	class DelayTaker
	method init
	new int,bonrel
	push 0
	pop bonrel
	new int,bstart
	push 0
	pop bstart
	new int,bclickrel
	push 1
	pop bclickrel
	push "timwez"
	push 300
	push 1
	push "DelayTaker0"
	cthis cnewtimerfin
	end method
	method DelayTaker0
	push 1
	pop bonrel
	end method
	method setclickrel
	localint $1
	pop $1
	push $1
	pop bclickrel
	end method
	method setdelay
	localint $1
	pop $1
	push $1
	call timwez,delay
	end method
	method take
	push bclickrel
	cmp0
	je l1554
	call timwez,play
	push 0
	pop bonrel
	jmp l1553
l1554:
	push 1
	pop bonrel
l1553:
	push 1
	pop bstart
	end method
	method ret
	push 0
	pop bonrel
	push 0
	pop bstart
	push 0
	call timwez,stop
	end method
	method isonclick
	cthis stoptimer
	push bstart
	cmp0
	je l1555
	push bonrel
	neg
	jmp l1557
l1555:
	push 0
	jmp l1557
l1556:
	push 1
l1557:
	end method
	method isonrel
	cthis stoptimer
	push bstart
	cmp0
	je l1558
	push bonrel
	jmp l1560
l1558:
	push 0
	jmp l1560
l1559:
	push 1
l1560:
	end method
	method istaken
	push bstart
	end method
	method stoptimer
	push 0
	call timwez,stop
	end method
	end class

	class ImgMover
	method init
	new string,smoved
	push "null"
	pop smoved
	new int,ilastx
	new int,ilasty
	new int,irelx
	new int,irely
	end method
	method mssetobj
	localstring $1
	pop $1
	push $1
	call mouse,getpos
	cthis setobj
	end method
	method setobj
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push 0
	push 0
	cthis set
	end method
	method setcobj
	localstring $1
	pop $1
	push $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	push $1
	spushs
	spop $a
	call [$a],getcy
	cthis setobj
	end method
	method setpobj
	localstring $1
	pop $1
	push $1
	push $1
	spushs
	spop $a
	call [$a],getpx
	push $1
	spushs
	spop $a
	call [$a],getpy
	cthis setobj
	end method
	method set
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getposx
	push $4
	pop $b
	popax
	sub $a,$b
	pop ilastx
	push $1
	spushs
	spop $a
	call [$a],getposy
	push $5
	pop $b
	popax
	sub $a,$b
	pop ilasty
	push $2
	push $1
	spushs
	spop $a
	call [$a],getpx
	pop $b
	popax
	sub $a,$b
	pop irelx
	push $3
	push $1
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	pop irely
	push $1
	pop smoved
	end method
	method msmove
	call mouse,getpos
	cthis move
	end method
	method msftmove
	call mouse,getpos
	cthis ftmove
	end method
	method move
	localint $1
	localint $2
	pop $2
	pop $1
	push smoved
	push "null"
	cmpjne
	cmp0
	je l1562
	push smoved
	spushs
	push $1
	push smoved
	spushs
	spop $a
	call [$a],lodx
	pop $b
	popax
	sub $a,$b
	push irelx
	pop $b
	popax
	sub $a,$b
	push $2
	push smoved
	spushs
	spop $a
	call [$a],lody
	pop $b
	popax
	sub $a,$b
	push irely
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
l1562:
	end method
	method ftmove
	localint $1
	localint $2
	pop $2
	pop $1
	push smoved
	push "null"
	cmpjne
	cmp0
	je l1564
	push smoved
	spushs
	push $1
	push $2
	spop $a
	call [$a],setpos
l1564:
	end method
	method retobj
	push 0
	push 0
	cthis ret
	end method
	method ret
	localint $1
	localint $2
	pop $2
	pop $1
	push smoved
	spushs
	push ilastx
	push $1
	pop $b
	popax
	add $a,$b
	push ilasty
	push $2
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	cthis free
	end method
	method put
	localint $1
	localint $2
	pop $2
	pop $1
	push smoved
	spushs
	push $1
	push $2
	spop $a
	call [$a],setpos
	cthis free
	end method
	method free
	push "null"
	pop smoved
	end method
	method getmover
	push smoved
	ret
	end method
	method getfree
	localdef $1
	push smoved
	pop $1
	cthis free
	push $1
	end method
	method moving
	push smoved
	push "null"
	cmpjne
	ret
	end method
	end class

	class ConImgMover
	parent ImgMover
	parent ObjController
	method init
	clparent ImgMover,init
	clparent ObjController,init
	end method
	method onmousemove
	cthis msmove
	end method
	method onmouselclick
	push _sme
	push "_GET"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method onmouselrel
	push smoved
	push "null"
	cmpjne
	cmp0
	je l1566
	push _sme
	push "_PUT"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1566:
	end method
	end class

	class DelayMover
	parent ImgMover
	parent LObjController
	method init
	clparent ImgMover,init
	clparent LObjController,init
	new DelayTaker,cldt
	end method
	method setclickrel
	localint $1
	pop $1
	push $1
	call cldt,setclickrel
	end method
	method reset
	call cldt,ret
	end method
	method _put
	call cldt,ret
	push _sme
	push "_PUT"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method set
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	clparent ImgMover,set
	call cldt,take
	end method
	method onmousemove
	cthis msmove
	end method
	method onmouselclick
	cthis getlock
	cmp0
	je l1568
	ret
l1568:
	call cldt,isonclick
	cmp0
	je l1570
	cthis _put
	jmp l1569
l1570:
	call cldt,istaken
	neg
	cmp0
	je l1572
	push _sme
	push "_GET"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1572:
l1569:
	end method
	method onmouselrel
	cthis getlock
	cmp0
	je l1574
	ret
l1574:
	call cldt,isonrel
	cmp0
	je l1576
	cthis _put
l1576:
	end method
	end class

	class Rewinder
	parent classlocker
	method init
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	clparent classlocker,init
	new string,sarrowdir
	new int,ilenx
	new int,ileny
	new string,sgr
	new string,sorientation
	new int,bvertical
	new int,bfilteritem
	push 0
	pop bfilteritem
	new int,ibx1
	push 0
	pop ibx1
	new int,ibx2
	push iResX
	pop ibx2
	new int,iby1
	push 0
	pop iby1
	new int,iby2
	push iResY
	pop iby2
	new int,iodleg
	push 2
	pop iodleg
	new ImgMover,clmv
	push "timtick"
	push 1
	push 1
	push "timfin"
	cthis cnewtimercyclefin
	push A
	push "borx1"
	push $1
	push "bory1"
	push $2
	push "borx2"
	push $3
	push "bory2"
	push $4
	cthis vars2
	new snd,fxrew
	end method
	method movefilter
	push 1
	pop bfilteritem
	end method
	method movenormal
	push 0
	pop bfilteritem
	end method
	method setfxrew
	localstring $1
	pop $1
	cthis getsndpath
	push $1
	pop $b
	popax
	add $a,$b
	call fxrew,load
	end method
	method getitem
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	push $1
	spushs
	spop $a
	call [$a],getz
	push 1
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setz
	push $1
	push $2
	push $3
	push sgr
	spushs
	spop $a
	call [$a],getpx
	push sgr
	spushs
	spop $a
	call [$a],getpy
	call clmv,set
	push $1
	spushs
	push 0
	push 0
	push iResX
	push iResY
	spop $a
	call [$a],clip
	push sorientation
	push "up"
	cmpje
	cmp0
	jne l1579
	push sorientation
	push "down"
	cmpje
	jmp l1580
l1578:
	push 0
	jmp l1580
l1579:
	push 1
l1580:
	cmp0
	je l1581
	push sgr
	spushs
	push $1
	push $1
	spushs
	spop $a
	call [$a],getw
	push iodleg
	pop $b
	popax
	add $a,$b
	popax
	sub 0,$a
	push 0
	spop $a
	call [$a],movefrom
	push $1
	spushs
	push $1
	spushs
	spop $a
	call [$a],getw
	push 0
	spop $a
	call [$a],move
	jmp l1577
l1581:
	push sgr
	spushs
	push $1
	push 0
	push $1
	spushs
	spop $a
	call [$a],geth
	push iodleg
	pop $b
	popax
	add $a,$b
	popax
	sub 0,$a
	spop $a
	call [$a],movefrom
	push $1
	spushs
	push 0
	push $1
	spushs
	spop $a
	call [$a],geth
	spop $a
	call [$a],move
l1577:
	push sgr
	spushs
	push $1
	spop $a
	call [$a],remove
	end method
	method pickup
	localint $1
	localint $2
	pop $2
	pop $1
	push sgr
	spushs
	push $1
	push $2
	push 1
	push 1
	spop $a
	call [$a],isin
	cmp0
	je l1583
	push sgr
	spushs
	spop $a
	call [$a],getsfound
	push $1
	push $2
	cthis getitem
	push 1
	ret
l1583:
	push 0
	ret
	end method
	method mspickup
	call mouse,getpos
	cthis pickup
	ret
	end method
	method freeitem
	call clmv,free
	end method
	method moveitem
	push bfilteritem
	cmp0
	je l1585
	call clmv,msftmove
	jmp l1584
l1585:
	call clmv,msmove
l1584:
	end method
	method retitem
	localstring $1
	call clmv,getmover
	pop $1
	push sgr
	spushs
	spop $a
	call [$a],getpx
	push sgr
	spushs
	spop $a
	call [$a],getpy
	call clmv,ret
	push $1
	cthis putitem
	end method
	method putitem
	localstring $1
	pop $1
	push sorientation
	push "up"
	cmpje
	cmp0
	jne l1588
	push sorientation
	push "down"
	cmpje
	jmp l1589
l1587:
	push 0
	jmp l1589
l1588:
	push 1
l1589:
	cmp0
	je l1590
	push $1
	spushs
	push sgr
	spushs
	spop $a
	call [$a],getex
	push $1
	spushs
	spop $a
	call [$a],getpx
	pop $b
	popax
	sub $a,$b
	push iodleg
	pop $b
	popax
	add $a,$b
	push 0
	spop $a
	call [$a],move
	jmp l1586
l1590:
	push $1
	spushs
	push 0
	push sgr
	spushs
	spop $a
	call [$a],getey
	push $1
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	push iodleg
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],move
l1586:
	push sgr
	spushs
	push $1
	spop $a
	call [$a],add
	push $1
	spushs
	push $1
	spushs
	spop $a
	call [$a],getz
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setz
	push $1
	spushs
	push ibx1
	push iby1
	push ibx2
	push iby2
	spop $a
	call [$a],clip
	end method
	method getmoved
	call clmv,getmover
	ret
	end method
	method getbutw
	call anupstd,getw
	ret
	end method
	method getbuth
	call anupstd,geth
	ret
	end method
	method movearrows
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call grarrows,move
	end method
	method build
	localstring $1
	localint $2
	localstring $3
	localstring $4
	localint $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $6
	pop sgr
	new anima,anupstd
	push $1
	call anupstd,load
	push $2
	call anupstd,setz
	push "up"
	push 0
	call anupstd,setframe
	push "anupstd"
	push "anupact"
	cthis copyanima
	push "up"
	push 1
	call anupact,setframe
	push "anupstd"
	push "andownact"
	cthis copyanima
	push "down"
	push 1
	call andownact,setframe
	push "anupstd"
	push "andownstd"
	cthis copyanima
	push "down"
	push 0
	call andownstd,setframe
	push "butup"
	push "anupstd"
	push "anupact"
	push "null"
	push $3
	cthis newbutan
	push "butdown"
	push "andownstd"
	push "andownact"
	push "null"
	push $3
	cthis newbutan
	push "onmoveon"
	push "_rewbutmoveon"
	call butup,addmethod
	push "onmoveon"
	push "_rewbutmoveon"
	call butdown,addmethod
	push "onmoveoff"
	push "_rewstrzalkaoff"
	call butup,addmethod
	push "onmoveoff"
	push "_rewstrzalkaoff"
	call butdown,addmethod
	push "onclick"
	push "_rewbutclick"
	call butup,addmethod
	push "onclick"
	push "_rewbutclick"
	call butdown,addmethod
	push "onrel"
	push "_rewbutrel"
	call butup,addmethod
	push "onrel"
	push "_rewbutrel"
	call butdown,addmethod
	push $4
	pop sorientation
	new gmimgvec,grarrows
	push "grarrows"
	push "anupstd"
	popax
	pop $b
	psax
	call [$b],operator+
	push "anupact"
	popax
	pop $b
	psax
	call [$b],operator+
	push "andownact"
	popax
	pop $b
	psax
	call [$b],operator+
	push "andownstd"
	popax
	pop $b
	psax
	call [$b],operator+
	popax
	localint $7
	localint $8
	localint $9
	localint $10
	push sorientation
	push "up"
	cmpje
	cmp0
	jne l1593
	push sorientation
	push "down"
	cmpje
	jmp l1594
l1592:
	push 0
	jmp l1594
l1593:
	push 1
l1594:
	cmp0
	je l1595
	push 0
	pop bvertical
	push $5
	pop ilenx
	push sorientation
	push "down"
	cmpje
	cmp0
	je l1597
	push borx1
	push bory2
	call anupstd,geth
	pop $b
	popax
	sub $a,$b
	call anupstd,setpos
	push borx1
	push bory2
	call anupact,geth
	pop $b
	popax
	sub $a,$b
	call anupact,setpos
	push borx2
	call andownstd,getw
	pop $b
	popax
	sub $a,$b
	push bory2
	call andownstd,geth
	pop $b
	popax
	sub $a,$b
	call andownstd,setpos
	push borx2
	call andownact,getw
	pop $b
	popax
	sub $a,$b
	push bory2
	call andownact,geth
	pop $b
	popax
	sub $a,$b
	call andownact,setpos
	call andownstd,getey
	pop $7
	jmp l1596
l1597:
	push borx1
	push bory1
	call anupstd,setpos
	push borx1
	push bory1
	call anupact,setpos
	push borx2
	call andownstd,getw
	pop $b
	popax
	sub $a,$b
	push bory1
	call andownstd,setpos
	push borx2
	call andownact,getw
	pop $b
	popax
	sub $a,$b
	push bory1
	call andownact,setpos
	push bory1
	pop $7
l1596:
	call anupstd,getex
	push iodleg
	pop $b
	popax
	add $a,$b
	pop ibx1
	call andownstd,getpx
	push iodleg
	pop $b
	popax
	sub $a,$b
	pop ibx2
	push ibx1
	pop $8
	jmp l1591
l1595:
	push 1
	pop bvertical
	push $5
	pop ileny
	push sorientation
	push "right"
	cmpje
	cmp0
	je l1599
	push borx2
	call anupstd,getw
	pop $b
	popax
	sub $a,$b
	push bory1
	call anupstd,setpos
	push borx2
	call anupact,getw
	pop $b
	popax
	sub $a,$b
	push bory1
	call anupact,setpos
	push borx2
	call andownstd,getw
	pop $b
	popax
	sub $a,$b
	push bory2
	call andownstd,geth
	pop $b
	popax
	sub $a,$b
	call andownstd,setpos
	push borx2
	call andownact,getw
	pop $b
	popax
	sub $a,$b
	push bory2
	call andownact,geth
	pop $b
	popax
	sub $a,$b
	call andownact,setpos
	call anupstd,getex
	pop $8
	jmp l1598
l1599:
	push borx1
	push bory1
	call anupstd,setpos
	push borx1
	push bory1
	call anupact,setpos
	push borx1
	push bory2
	call andownstd,geth
	pop $b
	popax
	sub $a,$b
	call andownstd,setpos
	push borx1
	push bory2
	call andownact,geth
	pop $b
	popax
	sub $a,$b
	call andownact,setpos
	push borx1
	pop $8
l1598:
	call anupstd,getey
	push iodleg
	pop $b
	popax
	add $a,$b
	pop iby1
	call andownstd,getpy
	push iodleg
	pop $b
	popax
	sub $a,$b
	pop iby2
	push iby1
	pop $7
l1591:
	cthis getname
	push "up"
	call butup,_rewbuildbut
	cthis getname
	push "down"
	call butdown,_rewbuildbut
	localint $11
	push $6
	spushs
	spop $a
	call [$a],size
	pop $11
	push $6
	spushs
	push $8
	push $7
	spop $a
	call [$a],_setpos
	new int,ilimx
	push $8
	pop ilimx
	new int,ilimy
	push $7
	pop ilimy
	localstring $12
	localint $13
	push 0
	pop $13
l1600:
	push $13
	push $11
	cmpjl
	cmp0
	je l1601
	jmp l1603
l1602:
	add $13,1
	pop $13
	jmp l1600
l1603:
	push sgr
	spushs
	push $13
	spop $a
	call [$a],get
	pop $12
	push sorientation
	push "right"
	cmpje
	cmp0
	je l1605
	push $12
	spushs
	push $8
	push $12
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	push $12
	spushs
	spop $a
	call [$a],lodx
	pop $b
	popax
	sub $a,$b
	push $7
	push $12
	spushs
	spop $a
	call [$a],lody
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	push $12
	spushs
	spop $a
	call [$a],geth
	push iodleg
	pop $b
	popax
	add $a,$b
	popax
	add $7,$a
	pop $7
	jmp l1604
l1605:
	push sorientation
	push "left"
	cmpje
	cmp0
	je l1607
	push $12
	spushs
	push $8
	push $12
	spushs
	spop $a
	call [$a],lodx
	pop $b
	popax
	sub $a,$b
	push $7
	push $12
	spushs
	spop $a
	call [$a],lody
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	push $12
	spushs
	spop $a
	call [$a],geth
	push iodleg
	pop $b
	popax
	add $a,$b
	popax
	add $7,$a
	pop $7
	jmp l1606
l1607:
	push sorientation
	push "up"
	cmpje
	cmp0
	je l1609
	push $12
	spushs
	push $8
	push $12
	spushs
	spop $a
	call [$a],lodx
	pop $b
	popax
	sub $a,$b
	push $7
	push $12
	spushs
	spop $a
	call [$a],lody
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	push $12
	spushs
	spop $a
	call [$a],getw
	push iodleg
	pop $b
	popax
	add $a,$b
	popax
	add $8,$a
	pop $8
	jmp l1608
l1609:
	push sorientation
	push "down"
	cmpje
	cmp0
	je l1611
	push $12
	spushs
	push $8
	push $12
	spushs
	spop $a
	call [$a],lodx
	pop $b
	popax
	sub $a,$b
	push $7
	push $12
	spushs
	spop $a
	call [$a],geth
	pop $b
	popax
	sub $a,$b
	push $12
	spushs
	spop $a
	call [$a],lody
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	push $12
	spushs
	spop $a
	call [$a],getw
	push iodleg
	pop $b
	popax
	add $a,$b
	popax
	add $8,$a
	pop $8
l1611:
l1608:
l1606:
l1604:
	push $12
	spushs
	push ibx1
	push iby1
	push ibx2
	push iby2
	spop $a
	call [$a],clip
	jmp l1602
l1601:
	end method
	method _rewbuildbut
	localstring $1
	localstring $2
	pop $2
	pop $1
	new string,_sob
	push $1
	pop _sob
	new string,_sdir
	push $2
	push "up"
	cmpje
	cmp0
	je l1613
	push bvertical
	push 0
	cmpje
	cmp0
	je l1615
	push "left"
	pop _sdir
	jmp l1614
l1615:
	push "up"
	pop _sdir
l1614:
	jmp l1612
l1613:
	push $2
	push "down"
	cmpje
	cmp0
	je l1617
	push bvertical
	push 0
	cmpje
	cmp0
	je l1619
	push "right"
	pop _sdir
	jmp l1618
l1619:
	push "down"
	pop _sdir
l1618:
l1617:
l1612:
	end method
	method _rewbutmoveon
	push _sob
	push "_"
	pop $b
	popax
	add $a,$b
	push _sdir
	pop $b
	popax
	add $a,$b
	push "_MOVEON"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method _rewbutclick
	push _sdir
	cthis mstrzalkaon
	push _sob
	push "_"
	pop $b
	popax
	add $a,$b
	push _sdir
	pop $b
	popax
	add $a,$b
	push "_CLICK"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method mstrzalkaon
	localstring $1
	pop $1
	push $1
	pop sarrowdir
	call timtick,play
	end method
	method _rewbutrel
	push "null"
	pop sarrowdir
	push 0
	call timtick,stop
	push 0
	call fxrew,stop
	end method
	method _rewstrzalkaoff
	push "null"
	pop sarrowdir
	push 0
	call timtick,stop
	push 0
	call fxrew,stop
	push _sob
	push "_"
	pop $b
	popax
	add $a,$b
	push _sdir
	pop $b
	popax
	add $a,$b
	push "_MOVEOFF"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method timfin
	cthis getlock
	cmp0
	je l1621
	ret
l1621:
	localint $1
	push 0
	pop $1
	push sarrowdir
	push "null"
	cmpjne
	cmp0
	je l1623
	push sgr
	spushs
	spop $a
	call [$a],empty
	neg
	jmp l1625
l1623:
	push 0
	jmp l1625
l1624:
	push 1
l1625:
	cmp0
	je l1626
	push sarrowdir
	push "up"
	cmpje
	cmp0
	je l1628
	push sgr
	spushs
	spop $a
	call [$a],getey
	call andownstd,getpy
	push ileny
	pop $b
	popax
	sub $a,$b
	cmpja
	cmp0
	je l1630
	push sgr
	spushs
	push 0
	push ileny
	popax
	sub 0,$a
	spop $a
	call [$a],move
	push 1
	pop $1
l1630:
	jmp l1627
l1628:
	push sarrowdir
	push "down"
	cmpje
	cmp0
	je l1632
	push sgr
	spushs
	spop $a
	call [$a],getpy
	push ilimy
	cmpjl
	cmp0
	je l1634
	push sgr
	spushs
	push 0
	push ileny
	spop $a
	call [$a],move
	push 1
	pop $1
l1634:
	jmp l1631
l1632:
	push sarrowdir
	push "left"
	cmpje
	cmp0
	je l1636
	push sgr
	spushs
	spop $a
	call [$a],getex
	call andownstd,getpx
	push ilenx
	pop $b
	popax
	sub $a,$b
	cmpja
	cmp0
	je l1638
	push sgr
	spushs
	push ilenx
	popax
	sub 0,$a
	push 0
	spop $a
	call [$a],move
	push 1
	pop $1
l1638:
	jmp l1635
l1636:
	push sarrowdir
	push "right"
	cmpje
	cmp0
	je l1640
	push sgr
	spushs
	spop $a
	call [$a],getpx
	push ilimx
	cmpjl
	cmp0
	je l1642
	push sgr
	spushs
	push ilenx
	push 0
	spop $a
	call [$a],move
	push 1
	pop $1
l1642:
l1640:
l1635:
l1631:
l1627:
l1626:
	push $1
	cmp0
	je l1644
	call fxrew,isplaying
	neg
	cmp0
	je l1646
	call fxrew,play
l1646:
	jmp l1643
l1644:
	push 0
	call fxrew,stop
l1643:
	cthis play
	end method
	end class

	class ConRewinder
	parent Rewinder
	parent ObjController
	method init
	clparent Rewinder,init
	clparent ObjController,init
	new DelayTaker,cldt
	end method
	method getitem
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	clparent Rewinder,getitem
	call cldt,take
	end method
	method _put
	call cldt,ret
	push _sme
	push "_PUT"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method onmousemove
	cthis moveitem
	end method
	method onmouselrel
	cthis getlock
	cmp0
	je l1648
	ret
l1648:
	call cldt,isonrel
	cmp0
	je l1650
	cthis _put
l1650:
	end method
	method onmouselclick
	cthis getlock
	cmp0
	je l1652
	ret
l1652:
	call cldt,isonclick
	cmp0
	je l1654
	cthis _put
	jmp l1653
l1654:
	call cldt,istaken
	neg
	cmp0
	je l1656
	push _sme
	push "_GET"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1656:
l1653:
	end method
	end class

	class Button
	parent LObjController
	method init
	clparent LObjController,init
	cthis unlock
	new gmimgvec,grbuts
	push A
	push "sobject"
	push "null"
	push "sclicked"
	push "null"
	cthis vars2
	end method
	method sort
	call grbuts,sortimgs
	end method
	method addgroups
	call grbuts,addgroups
	call grbuts,sortimgs
	end method
	method addgroup
	localstring $1
	pop $1
	push $1
	call grbuts,addgr
	call grbuts,sortimgs
	end method
	method addlist
	call grbuts,addlist
	call grbuts,sortimgs
	end method
	method add
	localstring $1
	pop $1
	push $1
	call grbuts,add
	call grbuts,sortimgs
	end method
	method addlocker
	localstring $1
	pop $1
	push $1
	cthis add
	push $1
	clparent classlocker,setaslocker
	end method
	method removebutlist
	push "removebut"
	cthis withlist
	end method
	method removebut
	localstring $1
	pop $1
	push $1
	call grbuts,remove
	push $1
	push sobject
	cmpje
	cmp0
	je l1658
	push "null"
	pop sobject
l1658:
	push $1
	push sclicked
	cmpje
	cmp0
	je l1660
	push "null"
	pop sclicked
l1660:
	end method
	method load
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push GAME
	spushs
	push "gmimgvec"
	push $1
	spop $a
	call [$a],varnew
	push $1
	push $2
	popax
	pop $b
	psax
	call [$b],operator*
	push $1
	spushs
	push $3
	spop $a
	call [$a],each
	push $1
	cthis addgroup
	end method
	method remove
	localstring $1
	pop $1
	push GAME
	spushs
	push $1
	spop $a
	call [$a],hasvar
	cmp0
	je l1662
	push $1
	call grbuts,removegr
l1662:
	end method
	method loadfrom
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	localdef $5
	cthis getgraphpath
	pop $5
	push $2
	cthis setgraphpath
	push $1
	push $3
	push $4
	cthis load
	push $5
	cthis setgraphpath
	end method
	method onmouselclick
	cthis getlock
	cmp0
	je l1664
	ret
l1664:
	cthis getname
	push "_lclick"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push sobject
	push "null"
	cmpjne
	cmp0
	je l1666
	push sobject
	pop sclicked
	push sobject
	spushs
	push "butclick"
	spop $a
	call [$a],hasaddedmet
	cmp0
	je l1668
	push sobject
	spushs
	spop $a
	call [$a],butclick
l1668:
l1666:
	end method
	method onmouselrel
	cthis getlock
	cmp0
	je l1670
	ret
l1670:
	cthis getname
	push "_lrel"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push sclicked
	push "null"
	cmpjne
	cmp0
	je l1672
	push sclicked
	spushs
	push "butlrel"
	spop $a
	call [$a],hasaddedmet
	jmp l1674
l1672:
	push 0
	jmp l1674
l1673:
	push 1
l1674:
	cmp0
	je l1675
	push sclicked
	spushs
	spop $a
	call [$a],butlrel
	jmp l1671
l1675:
	push "null"
	pop sclicked
l1671:
	end method
	method onmousemove
	cthis getlock
	cmp0
	je l1677
	ret
l1677:
	push sclicked
	push "null"
	cmpjne
	cmp0
	je l1679
	push sclicked
	spushs
	push "butmoving"
	spop $a
	call [$a],hasaddedmet
	cmp0
	je l1681
	push sclicked
	spushs
	spop $a
	call [$a],butmoving
l1681:
l1679:
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	push $1
	push $2
	push "isbutin"
	call grbuts,isinfunc
	cmp0
	je l1683
	localdef $3
	call grbuts,getsfound
	pop $3
	push $3
	push sobject
	cmpjne
	cmp0
	je l1685
	cthis lastoff
	push $3
	pop sobject
	cthis getname
	push "_moveon"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push $3
	spushs
	push "butmoveon"
	spop $a
	call [$a],hasaddedmet
	cmp0
	je l1687
	push $3
	spushs
	spop $a
	call [$a],butmoveon
l1687:
l1685:
	jmp l1682
l1683:
	cthis lastoff
l1682:
	end method
	method lastoff
	push sobject
	push "null"
	cmpjne
	cmp0
	je l1689
	cthis getname
	push "_moveoff"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push sobject
	spushs
	push "butmoveoff"
	spop $a
	call [$a],hasaddedmet
	cmp0
	je l1691
	push sobject
	spushs
	spop $a
	call [$a],butmoveoff
l1691:
	push "null"
	pop sobject
l1689:
	end method
	end class

	method Button_isin
	push "isbutin"
	push "global4"
	cthis addmethod
	end method
	method global4
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push $2
	push 1
	push 0
	cthis isin
	end method
	method Button_isinvis
	push "isbutin"
	push "global5"
	cthis addmethod
	end method
	method global5
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push $2
	push 0
	push 0
	cthis isin
	end method
	method Button_isinalpha
	push "isbutin"
	push "global6"
	cthis addmethod
	end method
	method global6
	localdef $1
	localdef $2
	pop $2
	pop $1
	push $1
	push $2
	push 1
	push 1
	cthis isin
	end method
	method Button_moveon
	push "butmoveon"
	push "global7"
	cthis addmethod
	end method
	method global7
	call sndakskermovon,play
	call advmouse,setbut
	push 1
	popax
	sub 0,$a
	cthis nofframes
	push 1
	cmpja
	cmp0
	je l1693
	push 1
	popax
	sub 0,$a
	push 1
	cthis setframe
l1693:
	end method
	method Button_moveoff
	push "butmoveoff"
	push "global8"
	cthis addmethod
	end method
	method global8
	call advmouse,setstd
	push 1
	popax
	sub 0,$a
	push 0
	cthis setframe
	end method
	method Button_moveonms
	push "butmoveon"
	push "global9"
	cthis addmethod
	end method
	method global9
	call advmouse,setbut
	end method
	method Button_moveoffms
	push "butmoveoff"
	push "global10"
	cthis addmethod
	end method
	method global10
	call advmouse,setstd
	end method
	method Button_std
	cthis Button_isin
	cthis Button_moveon
	cthis Button_moveoff
	end method
	method Button_stdalpha
	cthis Button_isinalpha
	cthis Button_moveon
	cthis Button_moveoff
	end method
	class Buttons
	parent LObjController
	method init
	localstring $1
	pop $1
	clparent LObjController,init
	cthis unlock
	new gmimgvec,grbuts
	new int,__id
	push 0
	pop __id
	new string,sanbut
	push "anbut"
	pop sanbut
	push sanbut
	push $1
	push 10
	cthis newanima
	push sanbut
	push sanbut
	push "grbuts"
	cthis newanactionsgr
	popax
	call anbut,hide
	push 10
	call grbuts,setz
	push "Buttons0"
	call grbuts,removeif
	new string,slastb
	push "null"
	pop slastb
	push A
	push "sobject"
	push "null"
	push "bvisible"
	push 1
	push "balpha"
	push 1
	cthis vars2
	end method
	method Buttons0
	cthis actionname
	push "bkg"
	cmpje
	cmp0
	je l1695
	cthis getz
	push 1
	pop $b
	popax
	sub $a,$b
	cthis setz
	push 1
	jmp l1694
l1695:
	push 0
l1694:
	end method
	method _release
	push slastb
	spushs
	push 1
	popax
	sub 0,$a
	push 0
	spop $a
	call [$a],setframe
	cthis copyobj
	cthis getname
	push "_moveoff"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push "null"
	pop slastb
	call bsms,setstd
	end method
	method getbut
	call grbuts,getsfound
	end method
	method onmousemove
	cthis getlock
	cmp0
	je l1697
	ret
l1697:
	push 1
	popax
	sub 0,$a
	push 0
	call grbuts,setframe
	localdef $1
	call mouse,getpos
	push bvisible
	push balpha
	call grbuts,isin
	pop $1
	push slastb
	push "null"
	cmpjne
	cmp0
	je l1699
	push slastb
	spushs
	push 1
	popax
	sub 0,$a
	push 1
	spop $a
	call [$a],setframe
l1699:
	push $1
	cmp0
	je l1701
	localstring $2
	call grbuts,getsfound
	pop $2
	push $2
	push slastb
	cmpjne
	cmp0
	je l1703
	push slastb
	push "null"
	cmpjne
	cmp0
	je l1705
	cthis _release
l1705:
	push $2
	pop slastb
	push $2
	spushs
	push 1
	popax
	sub 0,$a
	push 1
	spop $a
	call [$a],setframe
	cthis copyobj
	call bsms,setact
	cthis getname
	push "_moveon"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1703:
	jmp l1700
l1701:
	push slastb
	push "null"
	cmpjne
	cmp0
	je l1707
	cthis _release
l1707:
l1700:
	end method
	method copyobj
	push slastb
	spushs
	spop $a
	call [$a],actionname
	pop sobject
	end method
	method onmouselclick
	cthis getlock
	cmp0
	je l1709
	ret
l1709:
	push slastb
	push "null"
	cmpjne
	cmp0
	je l1711
	cthis copyobj
	cthis getname
	push "_lclick"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1711:
	end method
	method onmouselrel
	cthis getlock
	cmp0
	je l1713
	ret
l1713:
	push slastb
	push "null"
	cmpjne
	cmp0
	je l1715
	cthis copyobj
	cthis getname
	push "_lrel"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1715:
	end method
	method disable
	cthis lock
	call grbuts,hide
	push slastb
	push "null"
	cmpjne
	cmp0
	je l1717
	call bsms,setstd
	push "null"
	pop slastb
l1717:
	end method
	method enable
	cthis unlock
	call grbuts,show
	end method
	end class

	class TextDb
	parent classlocker
	parent ObjController
	parent gfxObject
	method init
	localstring $1
	localint $2
	localstring $3
	localint $4
	localint $5
	localint $6
	localint $7
	localint $8
	localint $9
	localint $10
	localstring $11
	pop $11
	pop $10
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	clparent classlocker,init
	clparent ObjController,init
	new string,sFont
	push $1
	pop sFont
	push $1
	push $2
	cthis checkfont
	pop $1
	new int,iFontSize
	push $2
	pop iFontSize
	localstring $12
	localint $13
	localint $14
	push "Z"
	push $10
	cthis var2
	push ".db"
	call $3,contains
	cmp0
	je l1719
	push 0
	push 6
	call $3,getb
	push "$path:"
	cmpje
	cmp0
	je l1721
	new db,dbtxt
	push 6
	call $3,strsubb
	call dbtxt,load
	jmp l1720
l1721:
	push "dbtxt"
	push $3
	cthis newdb
l1720:
	jmp l1718
l1719:
	new db,dbtxt
	push 0
	push 5
	call $3,getb
	spushs
	push "$var:"
	cmpst
	jne l1723
	spop $a
	push 5
	call $3,strsubb
	call dbtxt,dbcopy
	jmp l1722
l1723:
	push "$row:"
	cmpst
	jne l1724
	spop $a
	push 5
	call $3,strsubb
	spushs
	push ","
	spop $h
	call $h,strgetto
	pop $12
	push ","
	call $3,strgetfrom
	pop $13
	push 0
	pop $14
l1725:
	push $14
	push $12
	spushs
	push $13
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l1726
	jmp l1728
l1727:
	add $14,1
	pop $14
	jmp l1725
l1728:
	call dbtxt,addrow
	popax
	push $14
	push $12
	spushs
	push $13
	push $14
	spop $a
	call [$a],get
	call dbtxt,add
	jmp l1727
l1726:
	jmp l1722
l1724:
	spop $a
	push $3
	call dbtxt,dbaddlast
l1722:
l1718:
	localint $15
	push 0
	pop $15
	localint $16
	call dbtxt,getrowsno
	pop $16
	new gmimgvec,grtxt
	push $7
	push $8
	call grtxt,_setpos
	push 0
	pop $14
l1729:
	push $14
	push $16
	cmpjl
	cmp0
	je l1730
	jmp l1732
l1731:
	add $14,1
	pop $14
	jmp l1729
l1732:
	push "txt"
	push $14
	pop $b
	popax
	add $a,$b
	pop $12
	push $12
	spushs
	spop $e
	new text,[$e]
	push $12
	spushs
	push $1
	spop $a
	call [$a],setfont
	push $12
	spushs
	push $14
	push 0
	call dbtxt,get
	spop $a
	call [$a],set
	push $12
	spushs
	push $7
	push $8
	spop $a
	call [$a],setpos
	push $2
	push $9
	pop $b
	popax
	add $a,$b
	popax
	add $8,$a
	pop $8
	push $12
	spushs
	push $10
	spop $a
	call [$a],setz
	push $12
	spushs
	push $4
	push $5
	push $6
	spop $a
	call [$a],createtxt
	push $12
	spushs
	spop $a
	call [$a],getw
	push $15
	cmpja
	cmp0
	je l1734
	push $12
	spushs
	spop $a
	call [$a],getw
	pop $15
l1734:
	push $12
	call grtxt,add
	jmp l1731
l1730:
	push "Rows"
	push $16
	cthis var2
	push $11
	push "right"
	cmpje
	cmp0
	jne l1737
	push $11
	push "center"
	cmpje
	jmp l1738
l1736:
	push 0
	jmp l1738
l1737:
	push 1
l1738:
	cmp0
	je l1739
	push 0
	pop $14
l1740:
	push $14
	push $16
	cmpjl
	cmp0
	je l1741
	jmp l1743
l1742:
	add $14,1
	pop $14
	jmp l1740
l1743:
	push "txt"
	push $14
	pop $b
	popax
	add $a,$b
	pop $12
	push $11
	push "center"
	cmpje
	cmp0
	je l1745
	push $12
	spushs
	push $15
	push $12
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 0
	spop $a
	call [$a],move
	jmp l1744
l1745:
	push $12
	spushs
	push $15
	push $12
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	push 0
	spop $a
	call [$a],move
l1744:
	jmp l1742
l1741:
l1739:
	push "W"
	push $15
	cthis var2
	push "grtxt"
	clparent gfxObject,init
	end method
	method stdshadow
	localint $1
	pop $1
	push 0
	push 0
	push 0
	push $1
	cthis setshadow
	end method
	method setshadow
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $5
	localstring $6
	localstring $7
	push sFont
	push iFontSize
	push "_fntbrd"
	cthis _checkfont
	pop $7
	localint $8
	push 0
	pop $8
l1746:
	push $8
	call dbtxt,getrowsno
	cmpjl
	cmp0
	je l1747
	jmp l1749
l1748:
	add $8,1
	pop $8
	jmp l1746
l1749:
	push "txt"
	push $8
	pop $b
	popax
	add $a,$b
	pop $5
	push "txts"
	push $8
	pop $b
	popax
	add $a,$b
	pop $6
	push $6
	spushs
	spop $e
	new text,[$e]
	push $6
	spushs
	push $5
	spushs
	spop $a
	call [$a],get
	spop $a
	call [$a],set
	push $6
	spushs
	push $7
	spop $a
	call [$a],setfont
	push $6
	spushs
	push $5
	spushs
	spop $a
	call [$a],getz
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setz
	push $6
	spushs
	push $5
	spushs
	spop $a
	call [$a],getpx
	push $4
	pop $b
	popax
	add $a,$b
	push $5
	spushs
	spop $a
	call [$a],getpy
	push $4
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
	push $6
	spushs
	push $1
	push $2
	push $3
	spop $a
	call [$a],createtxt
	push $6
	call grtxt,add
	jmp l1748
l1747:
	end method
	method setz
	localint $1
	pop $1
	push $1
	pop Z
	push $1
	call grtxt,setz
	end method
	method getz
	push Z
	end method
	method isin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	call grtxt,isin
	end method
	method view
	localdef $1
	pop $1
	localstring $2
l1750:
	push A
	push $1
	cmpjne
	cmp0
	je l1751
	push $1
	call grtxt,get
	pop $2
	push $2
	spushs
	spop $a
	call [$a],show
	push "txts"
	push "txt"
	call $2,strsubbs
	pop $b
	popax
	add $a,$b
	pop $2
	push $2
	call engine,varexist
	cmp0
	je l1753
	push $2
	spushs
	spop $a
	call [$a],show
l1753:
	localdef $1
	pop $1
	jmp l1750
l1751:
	end method
	method blitto
	localstring $1
	pop $1
	localstring $2
	localint $3
	push 0
	pop $3
l1754:
	push $3
	call grtxt,size
	cmpjl
	cmp0
	je l1755
	jmp l1757
l1756:
	add $3,1
	pop $3
	jmp l1754
l1757:
	push $3
	call grtxt,get
	pop $2
	push $2
	spushs
	spop $a
	call [$a],buildfullname
	push $1
	spushs
	push $2
	spushs
	spop $a
	call [$a],getfullname
	spop $a
	call [$a],blit
	push GAME
	spushs
	push $2
	spushs
	spop $a
	call [$a],getfullname
	spop $a
	call [$a],vardel
	jmp l1756
l1755:
	end method
	method setcol
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	localint $4
	push 0
	pop $4
l1758:
	push $4
	call grtxt,size
	cmpjl
	cmp0
	je l1759
	jmp l1761
l1760:
	add $4,1
	pop $4
	jmp l1758
l1761:
	push $4
	call grtxt,get
	spushs
	push $1
	push $2
	push $3
	spop $a
	call [$a],createtxt
	jmp l1760
l1759:
	end method
	end class

	class Lexer
	method init
	end method
	method buildlex
	push A
	push "id"
	push "found"
	cthis vars
	new vector,vconsts
	push "string"
	call vconsts,type
	new vector,vtmp1
	push "string"
	call vtmp1,type
	new vector,vtmp2
	push "string"
	call vtmp2,type
	new int,dot
	push "."
	spushs
	push 0
	spop $h
	call $h,getbyte
	pop dot
	new string,_literal_char
	push "\""
	pop _literal_char
	end method
	method setliteralchar
	localstring $1
	pop $1
	push $1
	pop _literal_char
	end method
	method getliteralchar
	push _literal_char
	end method
	method _isvar
	localint $1
	localint $2
	pop $2
	pop $1
	localint $3
	push id
	pop $3
	push ""
	pop found
	localint $4
l1762:
	push $3
	cthis length
	cmpjl
	cmp0
	je l1763
	push $3
	cthis getbyte
	pop $4
	push $4
	push $1
	cmpjae
	cmp0
	je l1765
	push $4
	push $2
	cmpjle
	jmp l1767
l1765:
	push 0
	jmp l1767
l1766:
	push 1
l1767:
	cmp0
	je l1768
	push $3
	push 1
	cthis getb
	popax
	add found,$a
	pop found
	add $3,1
	pop $3
	jmp l1764
l1768:
	push $4
	push BYTEa
	cmpjae
	cmp0
	je l1770
	push $4
	push BYTEz
	cmpjle
	jmp l1772
l1770:
	push 0
	jmp l1772
l1771:
	push 1
l1772:
	cmp0
	jne l1774
	push $4
	push BYTEA
	cmpjae
	cmp0
	je l1775
	push $4
	push BYTEZ
	cmpjle
	jmp l1777
l1775:
	push 0
	jmp l1777
l1776:
	push 1
l1777:
	cmp0
	jne l1774
	push $4
	push BYTE_
	cmpje
	jmp l1778
l1773:
	push 0
	jmp l1778
l1774:
	push 1
l1778:
	cmp0
	je l1779
	push ""
	pop found
l1779:
	cthis length
	pop $3
l1764:
	jmp l1762
l1763:
	call found,length
	end method
	method isreal
	localint $1
	push id
	pop $1
	push ""
	pop found
	localint $2
	localint $3
	push 1
	pop $3
l1780:
	push $1
	cthis length
	cmpjl
	cmp0
	je l1781
	push $1
	cthis getbyte
	pop $2
	push $2
	push BYTE0
	cmpjae
	cmp0
	je l1783
	push $2
	push BYTE9
	cmpjle
	jmp l1785
l1783:
	push 0
	jmp l1785
l1784:
	push 1
l1785:
	cmp0
	jne l1787
	push $2
	push dot
	cmpje
	cmp0
	je l1788
	push $3
	jmp l1790
l1788:
	push 0
	jmp l1790
l1789:
	push 1
l1790:
	jmp l1791
l1786:
	push 0
	jmp l1791
l1787:
	push 1
l1791:
	cmp0
	je l1792
	push $2
	push dot
	cmpje
	cmp0
	je l1794
	push 0
	pop $3
l1794:
	push $1
	push 1
	cthis getb
	popax
	add found,$a
	pop found
	add $1,1
	pop $1
	jmp l1782
l1792:
	cthis length
	pop $1
l1782:
	jmp l1780
l1781:
	push $3
	cmp0
	jne l1797
	push 0
	push 1
	call found,getb
	push "."
	cmpje
	cmp0
	jne l1797
	push 0
	push 1
	call found,gete
	push "."
	cmpje
	jmp l1798
l1796:
	push 0
	jmp l1798
l1797:
	push 1
l1798:
	cmp0
	je l1799
	push ""
	pop found
l1799:
	call found,length
	end method
	method isident
	localint $1
	push id
	pop $1
	push ""
	pop found
	localint $2
l1800:
	push $1
	cthis length
	cmpjl
	cmp0
	je l1801
	push $1
	cthis getbyte
	pop $2
	push $2
	push BYTEa
	cmpjae
	cmp0
	je l1803
	push $2
	push BYTEz
	cmpjle
	jmp l1805
l1803:
	push 0
	jmp l1805
l1804:
	push 1
l1805:
	cmp0
	jne l1807
	push $2
	push BYTEA
	cmpjae
	cmp0
	je l1808
	push $2
	push BYTEZ
	cmpjle
	jmp l1810
l1808:
	push 0
	jmp l1810
l1809:
	push 1
l1810:
	cmp0
	jne l1807
	push $2
	push BYTE_
	cmpje
	cmp0
	jne l1807
	push $1
	push id
	cmpja
	cmp0
	je l1811
	push $2
	push BYTE0
	cmpjae
	cmp0
	je l1811
	push $2
	push BYTE9
	cmpjle
	jmp l1813
l1811:
	push 0
	jmp l1813
l1812:
	push 1
l1813:
	jmp l1814
l1806:
	push 0
	jmp l1814
l1807:
	push 1
l1814:
	cmp0
	je l1815
	push $1
	push 1
	cthis getb
	popax
	add found,$a
	pop found
	add $1,1
	pop $1
	jmp l1802
l1815:
	cthis length
	pop $1
l1802:
	jmp l1800
l1801:
	call found,length
	end method
	method isliteral
	cthis check
	cthis getliteralchar
	cmpjne
	cmp0
	je l1817
	push 0
	ret
l1817:
	localint $1
	push id
	push 1
	pop $b
	popax
	add $a,$b
	pop $1
	push ""
	pop found
	localstring $2
l1818:
	push $1
	cthis length
	cmpjl
	cmp0
	je l1819
	push $1
	push 1
	cthis getb
	pop $2
	push $2
	cthis getliteralchar
	cmpje
	cmp0
	je l1821
	push 1
	ret
	jmp l1820
l1821:
	push $2
	popax
	add found,$a
	pop found
	add $1,1
	pop $1
l1820:
	jmp l1818
l1819:
	push 0
	end method
	method isconst
	localstring $1
	localint $2
	cthis isident
	pop $2
	localint $3
	push 0
	pop $3
l1822:
	push $3
	call vconsts,size
	cmpjl
	cmp0
	je l1823
	jmp l1825
l1824:
	add $3,1
	pop $3
	jmp l1822
l1825:
	push $3
	call vconsts,get
	pop $1
	push $2
	cmp0
	je l1827
	push $1
	push found
	cmpje
	cmp0
	je l1829
	push 1
	ret
l1829:
	jmp l1826
l1827:
	push id
	call $1,length
	cthis getb
	pop found
	push $1
	push found
	cmpje
	cmp0
	je l1831
	push 1
	ret
l1831:
l1826:
	jmp l1824
l1823:
	push 0
	end method
	method gettoken
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	spushs
	spop $a
	call [$a],free
l1832:
	cthis notend
	cmp0
	je l1833
	cthis check
	push " "
	cmpje
	cmp0
	je l1835
	add id,1
	pop id
	jmp l1834
l1835:
	cthis isconst
	cmp0
	je l1837
	push $1
	spushs
	push "$const"
	spop $a
	call [$a],add
	push $1
	spushs
	cthis read
	spop $a
	call [$a],add
	jmp l1836
l1837:
	cthis isreal
	cmp0
	je l1839
	push $1
	spushs
	push "$real"
	spop $a
	call [$a],add
	cthis next
	push $2
	cmp0
	je l1841
	push $1
	spushs
	push found
	spop $a
	call [$a],add
l1841:
	jmp l1838
l1839:
	cthis isint
	cmp0
	je l1843
	push $1
	spushs
	push "$int"
	spop $a
	call [$a],add
	cthis next
	push $2
	cmp0
	je l1845
	push $1
	spushs
	push found
	spop $a
	call [$a],add
l1845:
	jmp l1842
l1843:
	cthis isident
	cmp0
	je l1847
	push $1
	spushs
	push "$alpha"
	spop $a
	call [$a],add
	cthis next
	push $2
	cmp0
	je l1849
	push $1
	spushs
	push found
	spop $a
	call [$a],add
l1849:
	jmp l1846
l1847:
	cthis isliteral
	cmp0
	je l1851
	push $1
	spushs
	push "$literal"
	spop $a
	call [$a],add
	cthis next
	push 2
	popax
	add id,$a
	pop id
	push $2
	cmp0
	je l1853
	push $1
	spushs
	push found
	spop $a
	call [$a],add
l1853:
	jmp l1850
l1851:
	push $1
	spushs
	push "$error"
	spop $a
	call [$a],add
	add id,1
	pop id
l1850:
l1846:
l1842:
l1838:
l1836:
l1834:
	jmp l1832
l1833:
	end method
	method expectdb
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	localstring $4
	localint $5
	push 0
	pop $5
l1854:
	push $5
	push $1
	spushs
	spop $a
	call [$a],getrowsno
	cmpjl
	cmp0
	je l1855
	jmp l1857
l1856:
	add $5,1
	pop $5
	jmp l1854
l1857:
	call vtmp2,free
	push 0
	pop $3
l1858:
	push $3
	push $1
	spushs
	push $5
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l1859
	jmp l1861
l1860:
	add $3,1
	pop $3
	jmp l1858
l1861:
	push $1
	spushs
	push $5
	push $3
	spop $a
	call [$a],get
	pop $4
	call $4,clear
	push $4
	push ""
	cmpjne
	cmp0
	je l1863
	push $4
	call vtmp2,add
l1863:
	jmp l1860
l1859:
	push "vtmp2"
	push $2
	cthis expectvec
	cmp0
	je l1865
	push $5
	ret
l1865:
	jmp l1856
l1855:
	push 1
	popax
	sub 0,$a
	end method
	method expectvec
	localstring $1
	localint $2
	pop $2
	pop $1
	push 0
	pop id
	push "vtmp1"
	push $2
	cthis gettoken
	push $1
	call vtmp1,veceq
	end method
	method expects
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	call vtmp2,vecbuildfromstring
	push "vtmp2"
	push $3
	cthis expectvec
	end method
	method consts=
	push "addbegin"
	call vconsts,withlist
	end method
	method setas
	localstring $1
	pop $1
	push $1
	spushs
	push "buildlex"
	push "buildlex"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	spop $a
	call [$a],buildlex
	push $1
	spushs
	push "start"
	push "Lexer0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "notend"
	push "Lexer1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getnext"
	push "Lexer2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "next"
	push "Lexer3"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "check"
	push "Lexer4"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "ischar"
	push "Lexer5"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isint"
	push "Lexer6"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isreal"
	push "isreal"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isbinary"
	push "Lexer7"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isident"
	push "isident"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isconst"
	push "isconst"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "_isvar"
	push "_isvar"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "read"
	push "Lexer8"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "isliteral"
	push "isliteral"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "gettoken"
	push "gettoken"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "expects"
	push "expects"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "expectvec"
	push "expectvec"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "expectdb"
	push "expectdb"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "consts="
	push "consts="
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setliteralchar"
	push "setliteralchar"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getliteralchar"
	push "getliteralchar"
	spop $a
	call [$a],addmethod
	end method
	method Lexer0
	localstring $1
	pop $1
	push $1
	cthis set
	push 0
	pop id
	end method
	method Lexer1
	push id
	cthis length
	cmpjl
	end method
	method Lexer2
	push id
	cthis length
	cmpje
	cmp0
	je l1867
	push "null"
	ret
l1867:
	add id,1
	pop id
	push id
	push 1
	pop $b
	popax
	sub $a,$b
	push 1
	cthis getb
	end method
	method Lexer3
	call found,length
	popax
	add id,$a
	pop id
	end method
	method Lexer4
	push id
	cthis length
	cmpje
	cmp0
	je l1869
	push "null"
	ret
l1869:
	push id
	push 1
	cthis getb
	pop found
	push found
	end method
	method Lexer5
	localstring $1
	pop $1
	push id
	push 1
	cthis getb
	call $1,contains
	end method
	method Lexer6
	push BYTE0
	push BYTE9
	cthis _isvar
	end method
	method Lexer7
	push BYTE0
	push BYTE0
	push 1
	pop $b
	popax
	add $a,$b
	cthis _isvar
	end method
	method Lexer8
	cthis next
	push found
	end method
	end class

	class AnimaFx
	method init
	end method
	method build
	localstring $1
	pop $1
	push $1
	spushs
	push "_buildanfx"
	push "AnimaFx0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	spop $a
	call [$a],_buildanfx
	push $1
	spushs
	push "onsetframe"
	push "AnimaFx1"
	spop $a
	call [$a],addmethod
	end method
	method AnimaFx0
	new db,dbsnd
	push 3
	call dbsnd,dbbuild
	localint $1
	push 0
	pop $1
l1870:
	push $1
	call dbsnd,getrowsno
	cmpjl
	cmp0
	je l1871
	jmp l1873
l1872:
	add $1,1
	pop $1
	jmp l1870
l1873:
	push $1
	push 0
	push $1
	push 0
	call dbsnd,get
	push "_"
	pop $b
	popax
	add $a,$b
	push $1
	push 1
	call dbsnd,get
	pop $b
	popax
	add $a,$b
	call dbsnd,set
	jmp l1872
l1871:
	end method
	method AnimaFx1
	localdef $1
	cthis actionname
	push "_"
	pop $b
	popax
	add $a,$b
	cthis framenr
	pop $b
	popax
	add $a,$b
	call dbsnd,findbyrow
	pop $1
	push $1
	push 0
	cmpjae
	cmp0
	je l1875
	push "fx"
	push $1
	push 2
	call dbsnd,get
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],play
l1875:
	end method
	end class

	class Localize
	method init
	end method
	method _lang_db
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new db,[$e]
	push $1
	spushs
	push "load"
	push $3
	pop $b
	popax
	add $a,$b
	spushs
	push $2
	cthis lang_path
	push ".db"
	pop $b
	popax
	add $a,$b
	spop $d
	spop $a
	call [$a],[$d]
	end method
	method lang_db
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push ""
	cthis _lang_db
	end method
	method lang_dbscript
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "script"
	cthis _lang_db
	end method
	method lang_dbbeh
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "beh"
	cthis _lang_db
	end method
	method lang_path
	localstring $1
	pop $1
	push "lang/"
	call gameapi,getgamename
	pop $b
	popax
	add $a,$b
	push "_"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push LANG
	pop $b
	popax
	add $a,$b
	end method
	end class

	module advmouse
	method init
	new anima,anmsc
	end method
	method load
	localstring $1
	pop $1
	push $1
	call anmsc,load
	call anmsc,hide
	end method
	method set
	localstring $1
	pop $1
	call anmsc,show
	push $1
	push 0
	call anmsc,setframe
	push "anmsc"
	call mouse,setcursor
	call anmsc,hide
	end method
	method setstd
	push "normal"
	cthis set
	end method
	method setactive
	push "active"
	cthis set
	end method
	method setbut
	push "active"
	cthis set
	end method
	method setexit
	push "exit"
	cthis set
	end method
	method setwait
	push "wait"
	cthis set
	end method
	method get
	call anmsc,actionname
	ret
	end method
	end module

	class classadvobject
	method init
	cthis addasadvobject
	end method
	method addasadvobject
	push AdventureGame
	neg
	cmp0
	je l1877
	ret
l1877:
	localstring $1
	cthis getname
	pop $1
	push $1
	call grmsmove,add
	push $1
	call grmslrel,add
	push $1
	call grmslclick,add
	push $1
	call grmsrclick,add
	end method
	method removefromadvobjs
	push AdventureGame
	neg
	cmp0
	je l1879
	ret
l1879:
	localstring $1
	cthis getname
	pop $1
	push $1
	call grmsmove,remove
	push $1
	call grmslrel,remove
	push $1
	call grmslclick,remove
	push $1
	call grmsrclick,remove
	end method
	method onmousemove
	localint $1
	localint $2
	pop $2
	pop $1
	end method
	method onmouselclick
	localint $1
	localint $2
	pop $2
	pop $1
	end method
	method onmouselrel
	localint $1
	localint $2
	pop $2
	pop $1
	end method
	method onmouserclick
	localint $1
	localint $2
	pop $2
	pop $1
	end method
	end class

	class classadvanhero
	method init
	end method
	method setashero
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push "buildhero"
	push "buildhero"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "onendframe"
	push "heroendframe1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	spop $a
	call [$a],buildhero
	push $1
	spushs
	push "buildheroframe"
	push "buildheroframe"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "onfinish"
	push "herofinish"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getdir"
	push "getdir"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setdir"
	push "setdir"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "thisfinish"
	push "thisfinish"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "playspec"
	push "playspec"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "playspec2"
	push "playspec2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "herostop"
	push "herostop"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "herostart"
	push "herostart"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "herostand"
	push "herostand"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setstdfin"
	push "setstdfin"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getpocket"
	push "getpocket"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "haspocket"
	push "haspocket"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setstandbase"
	push "setstandbase"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push $2
	spop $a
	call [$a],setstdfin
	end method
	method buildheroframe
	localstring $1
	pop $1
	push $1
	spushs
	push "onendframe"
	push "heroendframe"
	spop $a
	call [$a],addmethod
	end method
	method setstdfin
	localstring $1
	pop $1
	push "onstdfinish"
	push $1
	cthis addmethod
	end method
	method setstandbase
	localstring $1
	pop $1
	push $1
	pop _sstandbase
	end method
	method buildhero
	new string,_sbase
	new int,_istate
	push 0
	pop _istate
	new string,_sfinfun
	new string,_sobfin
	new int,_bplaystop
	new int,_iiloscsek
	new int,_itypsort
	new int,idsort
	new string,_sobstart
	new string,_sfunfinstart
	new int,bthisfin
	push 0
	pop bthisfin
	new string,_sstandbase
	push "stand"
	pop _sstandbase
	end method
	method getpocket
	push _spocketpref
	cthis getname
	pop $b
	popax
	add $a,$b
	ret
	end method
	method haspocket
	push _spocketpref
	cthis getname
	pop $b
	popax
	add $a,$b
	call engine,varexist
	ret
	end method
	method thisfinish
	localint $1
	pop $1
	push $1
	pop bthisfin
	end method
	method getdir
	cthis actionname
	spushs
	push 0
	push 2
	spop $h
	call $h,gete
	ret
	end method
	method setdir
	localstring $1
	pop $1
	cthis actionname
	spushs
	push 2
	spop $h
	call $h,strsube
	push $1
	pop $b
	popax
	add $a,$b
	cthis framenr
	cthis setframe
	end method
	method playspec
	localstring $1
	localint $2
	localint $3
	localint $4
	localstring $5
	localstring $6
	localint $7
	localstring $8
	localstring $9
	localstring $10
	pop $10
	pop $9
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	pop _sbase
	push $2
	pop _iiloscsek
	push $3
	pop _itypsort
	push $7
	pop _bplaystop
	push $8
	pop _sobfin
	push $9
	pop _sfinfun
	push $5
	pop _sobstart
	push $6
	pop _sfunfinstart
	push $2
	push 0
	cmpja
	cmp0
	je l1881
	push $3
	push 0
	cmpje
	cmp0
	je l1883
	push 1
	pop idsort
	jmp l1882
l1883:
	push $3
	push 1
	cmpje
	cmp0
	je l1885
	call $2,rand
	push 1
	pop $b
	popax
	add $a,$b
	pop idsort
l1885:
l1882:
l1881:
	push $4
	cmp0
	je l1887
	push 1
	pop _istate
	push $1
	push "start"
	pop $b
	popax
	add $a,$b
	push $10
	pop $b
	popax
	add $a,$b
	cthis play
	jmp l1886
l1887:
	push $1
	push $2
	push 0
	cmpja
	cmp0
	je l1889
	push "1"
	push $10
	pop $b
	popax
	add $a,$b
	jmp l1888
l1889:
	push $10
l1888:
	pop $b
	popax
	add $a,$b
	push 0
	cthis setframe
	cthis herostart
l1886:
	end method
	method playspec2
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	localstring $4
	call $1,length
	push 2
	cmpjl
	cmp0
	je l1891
	push ""
	jmp l1890
l1891:
	push 2
	call $1,strsube
l1890:
	pop $4
	push $4
	push 0
	push 0
	push 0
	push "null"
	push "null"
	push 0
	push $2
	push $3
	push 0
	push 2
	call $1,gete
	cthis playspec
	end method
	method herostop
	push 3
	pop _istate
	push _bplaystop
	cmp0
	je l1893
	push 0
	pop _bplaystop
	push 1
	cthis thisfinish
	push _sbase
	push "stop"
	pop $b
	popax
	add $a,$b
	cthis getdir
	pop $b
	popax
	add $a,$b
	cthis play
	jmp l1892
l1893:
	push 1
	cthis stop
l1892:
	end method
	method herostart
	push 2
	pop _istate
	push _sbase
	push _iiloscsek
	push 0
	cmpja
	cmp0
	je l1895
	push idsort
	jmp l1894
l1895:
	push ""
l1894:
	pop $b
	popax
	add $a,$b
	cthis getdir
	pop $b
	popax
	add $a,$b
	cthis play
	end method
	method herofinish
	push _istate
	push 2
	cmpje
	cmp0
	je l1897
	push bthisfin
	jmp l1899
l1897:
	push 0
	jmp l1899
l1898:
	push 1
l1899:
	cmp0
	je l1900
	push 3
	pop _istate
l1900:
	push _istate
	push 0
	cmpje
	cmp0
	je l1902
	cthis herostand
	cthis onstdfinish
	localstring $1
	cthis getname
	pop $1
	localstring $2
	push $1
	spushs
	spop $a
	call [$a],actionname
	pop $2
	push $1
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push $1
	push "_ACTION_"
	pop $b
	popax
	add $a,$b
	push $2
	pop $b
	popax
	add $a,$b
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	jmp l1901
l1902:
	push _istate
	push 1
	cmpje
	cmp0
	je l1904
	cthis herostart
	push _sobstart
	push _sfunfinstart
	cthis callfun
	jmp l1903
l1904:
	push _istate
	push 2
	cmpje
	cmp0
	je l1906
	localstring $3
	push _iiloscsek
	push 0
	cmpja
	cmp0
	je l1908
	push _itypsort
	push 0
	cmpje
	cmp0
	je l1910
	push idsort
	push _iiloscsek
	pop $b
	popax
	div $a,$b
	push $d
	push 1
	pop $b
	popax
	add $a,$b
	pop idsort
	jmp l1909
l1910:
	push _itypsort
	push 1
	cmpje
	cmp0
	je l1912
	call _iiloscsek,rand
	push 1
	pop $b
	popax
	add $a,$b
	pop idsort
l1912:
l1909:
	push _sbase
	push idsort
	pop $b
	popax
	add $a,$b
	cthis getdir
	pop $b
	popax
	add $a,$b
	pop $3
	jmp l1907
l1908:
	cthis actionname
	pop $3
l1907:
	push $3
	cthis play
	jmp l1905
l1906:
	push _istate
	push 3
	cmpje
	cmp0
	je l1914
	push 0
	pop _istate
	cthis herostand
	push 1
	cthis thisfinish
	push _sobfin
	push _sfinfun
	cthis callfun
l1914:
l1905:
l1903:
l1901:
	end method
	method herostand
	localstring $1
	push _sstndpref
	cthis getname
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	call engine,varexist
	cmp0
	je l1916
	push _sstandbase
	cthis actionname
	spushs
	push 0
	push 2
	spop $h
	call $h,gete
	pop $b
	popax
	add $a,$b
	cthis play
	push $1
	spushs
	spop $a
	call [$a],play
l1916:
	end method
	method heroendframe1
	cthis getname
	push "_ENDFRAME"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method heroendframe
	cthis getposy
	call clcamera,getposy
	pop $b
	popax
	sub $a,$b
	cthis setz
	cthis haspocket
	cmp0
	je l1918
	cthis getpocket
	spushs
	cthis getposx
	cthis getposy
	cthis geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],pocketpos
l1918:
	cthis getname
	push "_ENDFRAME"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end class

	class classadvhero
	method init
	new string,_sanim
	new int,_bisvecile
	push 0
	pop _bisvecile
	new string,_sbase
	push "null"
	pop _sbase
	new string,_sbase2
	push "null"
	pop _sbase2
	new int,izakres
	push 0
	pop izakres
	new string,_sbs2
	new string,_sbutoper
	new string,_smetpart
	new string,_simgbut
	new string,_sptfname
	cthis getname
	pop _sptfname
	end method
	method getptfname
	push _sptfname
	ret
	end method
	method link
	localstring $1
	pop $1
	push $1
	pop _sanim
	end method
	method link2
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis link
	push $2
	cthis checkamounts
	end method
	method anstand
	push _sanim
	spushs
	push "stand"
	cthis getdir
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],play
	end method
	method ansay
	push _sanim
	spushs
	push "talk"
	cthis getdir
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],play
	end method
	method getdir
	push _sanim
	spushs
	spop $a
	call [$a],actionname
	spushs
	push 0
	push 2
	spop $h
	call $h,gete
	end method
	method nofpieces
	cthis getdir
	cthis nofpiecesdir
	ret
	end method
	method nofpiecesdir
	localstring $1
	pop $1
	push _bisvecile
	cmp0
	je l1920
	push $1
	call vecdirs,find
	call vecile,get
	jmp l1919
l1920:
	push 0
l1919:
	ret
	end method
	method setbase2
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis setbase
	push $2
	pop _sbase2
	end method
	method setbase
	localstring $1
	pop $1
	push $1
	pop _sbase
	call $1,length
	pop izakres
	end method
	method getpropdir
	localstring $1
	pop $1
	push $1
	push "auto"
	cmpje
	cmp0
	je l1922
	cthis getdir
	jmp l1921
l1922:
	push $1
l1921:
	ret
	end method
	method _buildamounts
	push _bisvecile
	neg
	cmp0
	je l1924
	push 1
	pop _bisvecile
	new vector,vecdirs
	push "string"
	call vecdirs,type
	push "begin"
	push "uu"
	push "ru"
	push "rr"
	push "rd"
	push "dd"
	push "ld"
	push "ll"
	push "lu"
	call vecdirs,beginadd
	new vector,vecile
l1924:
	end method
	method _clearvecile
	call vecile,free
	push 8
	push 0
	call vecile,resize
	end method
	method checkamounts
	localstring $1
	pop $1
	push $1
	cthis setbase
	cthis _buildamounts
	cthis _clearvecile
	push _sanim
	push "null"
	cmpje
	cmp0
	je l1926
	ret
l1926:
	localint $2
	push _sanim
	spushs
	spop $a
	call [$a],nofactions
	pop $2
	localstring $3
	localint $4
	localint $5
	push 0
	pop $5
l1927:
	push $5
	push $2
	cmpjl
	cmp0
	je l1928
	jmp l1930
l1929:
	add $5,1
	pop $5
	jmp l1927
l1930:
	push _sanim
	spushs
	push $5
	spop $a
	call [$a],nameofaction
	pop $3
	push 0
	push izakres
	call $3,getb
	push $1
	cmpje
	cmp0
	je l1932
	push izakres
	push 10
	call $3,getb
	pop $4
	push $4
	push 0
	cmpja
	cmp0
	je l1934
	push 0
	push 2
	call $3,gete
	call vecdirs,find
	call vecile,vecinc
l1934:
l1932:
	jmp l1929
l1928:
	end method
	method getanim
	push _sanim
	end method
	method calllastfun
	cthis getcallfin
	spushs
	spop $d
	cthis [$d]
	push _simgbut
	spushs
	spop $a
	call [$a],checkonce
	end method
	method _calllastfunfin
	cthis calllastfunfin
	cthis advmsunlock
	end method
	method calllastfunfin
	cthis getcallfin
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method getcallfin
	push _sanim
	push _smetpart
	pop $b
	popax
	add $a,$b
	push _sbutoper
	pop $b
	popax
	add $a,$b
	ret
	end method
	method _cplay
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	cthis advmslock
	push _sanim
	spushs
	push 1
	spop $a
	call [$a],thisfinish
	push $1
	push "null"
	cmpje
	cmp0
	je l1936
	push _sanim
	spushs
	push $3
	cthis getpropdir
	spop $a
	call [$a],setdir
	push $2
	push "null"
	cmpjne
	cmp0
	je l1938
	push $2
	spushs
	spop $d
	cthis [$d]
l1938:
	jmp l1935
l1936:
	push _sanim
	spushs
	push $1
	push 0
	push 0
	push 0
	push "null"
	push "null"
	push 0
	cthis getname
	push $2
	push $3
	cthis getpropdir
	spop $a
	call [$a],playspec
l1935:
	end method
	method _cplay1
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push "_cplay1_2"
	push $2
	cthis _cplay
	end method
	method _cplay1_2
	cthis calllastfun
	cthis _callbehs
	end method
	method _callbehs
	cthis advmsunlock
	cthis callbehs
	end method
	method callbehs
	localstring $1
	cthis getcallfin
	pop $1
	push "beh_"
	push $1
	pop $b
	popax
	add $a,$b
	cthis behexist
	cmp0
	je l1940
	push "beh_"
	push $1
	pop $b
	popax
	add $a,$b
	cthis getname
	push "_calllastfunfin"
	cthis playbehobfin
	jmp l1939
l1940:
	cthis _calllastfunfin
l1939:
	end method
	method _cplay2_2
	cthis calllastfun
	push _sbs2
	push "_callbehs"
	cthis getdir
	cthis _cplay
	end method
	method _cplay2
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $2
	pop _sbs2
	push $1
	push "_cplay2_2"
	push $3
	cthis _cplay
	end method
	method no_turn
	localstring $1
	pop $1
	localstring $2
	push _spathpref
	push _sanim
	pop $b
	popax
	add $a,$b
	pop $2
	localstring $3
	push _simgbut
	spushs
	spop $a
	call [$a],getbutdir
	cthis getpropdir
	pop $3
	push $2
	call engine,varexist
	cmp0
	je l1942
	cthis getdir
	push $3
	cmpjne
	jmp l1944
l1942:
	push 0
	jmp l1944
l1943:
	push 1
l1944:
	cmp0
	je l1945
	push $2
	spushs
	push $3
	cthis getname
	push $1
	spop $a
	call [$a],heroturn
	push 0
	jmp l1941
l1945:
	push 1
l1941:
	end method
	method _heroplay1
	push _simgbut
	cthis heroplay1
	end method
	method _heroplay2
	push _simgbut
	cthis heroplay2
	end method
	method heroplay1
	localstring $1
	pop $1
	push $1
	pop _simgbut
	push "_heroplay1"
	cthis no_turn
	cmp0
	je l1947
	push $1
	spushs
	spop $a
	call [$a],getbutname
	pop _sbutoper
	push $1
	spushs
	spop $a
	call [$a],getbase1
	push $1
	spushs
	spop $a
	call [$a],getbutdir
	cthis getpropdir
	cthis _cplay1
l1947:
	end method
	method heroplay2
	localstring $1
	pop $1
	push $1
	pop _simgbut
	push "_heroplay2"
	cthis no_turn
	cmp0
	je l1949
	push $1
	spushs
	spop $a
	call [$a],getbutname
	pop _sbutoper
	push $1
	spushs
	spop $a
	call [$a],getbase1
	push $1
	spushs
	spop $a
	call [$a],getbase2
	push $1
	spushs
	spop $a
	call [$a],getbutdir
	cthis getpropdir
	cthis _cplay2
l1949:
	end method
	method _setbase2
	localstring $1
	pop $1
	push $1
	push 1
	call modadv,get
	push $1
	push 2
	call modadv,get
	cthis setbase2
	end method
	method _setbase
	localstring $1
	pop $1
	push $1
	push 1
	call modadv,get
	cthis setbase
	end method
	method heroplay3
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push $2
	push 1
	call modadv,get
	spop $a
	call [$a],setbutbase1
	push $1
	spushs
	push $2
	push 2
	call modadv,get
	spop $a
	call [$a],setbutbase2
	push $1
	cthis heroplay2
	end method
	end class

	new snd,_fxtakeitem
	class classherotaker
	parent classadvhero
	method init
	clparent classadvhero,init
	push "_PICKUP_"
	pop _smetpart
	end method
	method herotake
	localstring $1
	pop $1
	push $1
	cthis heroplay2
	end method
	method calllastfun
	push _sanim
	spushs
	spop $a
	call [$a],haspocket
	cmp0
	je l1951
	call _fxtakeitem,play
	push _simgbut
	spushs
	spop $a
	call [$a],hideontake
	cmp0
	je l1953
	push _simgbut
	spushs
	spop $a
	call [$a],hide
	jmp l1952
l1953:
	push _simgbut
	spushs
	push "but"
	spop $a
	call [$a],setbuttyp
l1952:
	push _sanim
	spushs
	spop $a
	call [$a],getpocket
	spushs
	push _sbutoper
	push _simgbut
	spushs
	spop $a
	call [$a],getpocket
	spop $a
	call [$a],additem
l1951:
	clparent classadvhero,calllastfun
	end method
	end class

	class classherolooker
	parent classadvhero
	method init
	clparent classadvhero,init
	push "_OPERATE_"
	pop _smetpart
	end method
	method herolook
	localstring $1
	pop $1
	push $1
	cthis heroplay2
	end method
	method herooperate
	localstring $1
	pop $1
	push $1
	cthis heroplay2
	end method
	method heroopendoor
	localstring $1
	pop $1
	push $1
	push "open:"
	cthis heroplay3
	end method
	method heroclosedoor
	localstring $1
	pop $1
	push $1
	push "close:"
	cthis heroplay3
	end method
	end class

	class classherouser
	parent classadvhero
	method init
	clparent classadvhero,init
	new string,_stool
	end method
	method herouse
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop _stool
	push "_USE_"
	push _stool
	pop $b
	popax
	add $a,$b
	push "_ON_"
	pop $b
	popax
	add $a,$b
	pop _smetpart
	push _sanim
	spushs
	spop $a
	call [$a],getpocket
	spushs
	spop $a
	call [$a],itemhide
	push $2
	pop _simgbut
	push $2
	spushs
	spop $a
	call [$a],getbutname
	pop _sbutoper
	push $2
	spushs
	spop $a
	call [$a],baseuse1
	push $2
	spushs
	spop $a
	call [$a],baseuse2
	push $2
	spushs
	spop $a
	call [$a],getbutdir
	cthis getpropdir
	cthis _cplay2
	end method
	method calllastfun
	push _sanim
	push "_USE_"
	pop $b
	popax
	add $a,$b
	push _stool
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push _sanim
	push "_USE_ON_"
	pop $b
	popax
	add $a,$b
	push _sbutoper
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	cthis getcallfin
	spushs
	spop $d
	cthis [$d]
	end method
	method calllastfunfin
	push _sanim
	push "_USE_"
	pop $b
	popax
	add $a,$b
	push _stool
	pop $b
	popax
	add $a,$b
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push _sanim
	push "_USE_ON_"
	pop $b
	popax
	add $a,$b
	push _sbutoper
	pop $b
	popax
	add $a,$b
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	cthis getcallfin
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method callbehs
	localstring $1
	cthis getname
	pop $1
	push "beh_"
	cthis getcallfin
	pop $b
	popax
	add $a,$b
	cthis behexist
	cmp0
	je l1955
	push "beh_"
	cthis getcallfin
	pop $b
	popax
	add $a,$b
	push $1
	push "_calllastfunfin"
	cthis playbehobfin
	jmp l1954
l1955:
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE_ON_"
	pop $b
	popax
	add $a,$b
	push _sbutoper
	pop $b
	popax
	add $a,$b
	cthis behexist
	cmp0
	je l1957
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE_ON_"
	pop $b
	popax
	add $a,$b
	push _sbutoper
	pop $b
	popax
	add $a,$b
	push $1
	push "_calllastfunfin"
	cthis playbehobfin
	jmp l1956
l1957:
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE_"
	pop $b
	popax
	add $a,$b
	push _stool
	pop $b
	popax
	add $a,$b
	cthis behexist
	cmp0
	je l1959
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE_"
	pop $b
	popax
	add $a,$b
	push _stool
	pop $b
	popax
	add $a,$b
	push $1
	push "_calllastfunfin"
	cthis playbehobfin
	jmp l1958
l1959:
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE"
	pop $b
	popax
	add $a,$b
	cthis behexist
	cmp0
	je l1961
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE"
	pop $b
	popax
	add $a,$b
	push $1
	push "_calllastfunfin"
	cthis playbehobfin
	jmp l1960
l1961:
	cthis _calllastfunfin
l1960:
l1958:
l1956:
l1954:
	end method
	end class

	class classpathf
	parent classadvhero
	method init
	clparent classadvhero,init
	new path,ptf
	new string,swalkto
	push "null"
	pop swalkto
	new string,_sfunnopath
	push "null"
	pop _sfunnopath
	new string,_sfunvisit
	push "null"
	pop _sfunvisit
	new int,destx
	new int,desty
	new int,bzmien
	push 0
	pop bzmien
	new int,bzatrzym
	push 0
	pop bzatrzym
	new string,_sitem
	push "null"
	pop _sitem
	new string,_sobzmien
	push "null"
	pop _sobzmien
	new string,_sfunzmien
	push "null"
	pop _sfunzmien
	new int,_istep
	new int,_itmpspeed
	push A
	push "ispathto"
	push 1
	cthis vars2
	push "onfinish"
	push "_cptffin"
	call ptf,addmethod
	push "onvisit"
	push "_cptvisit"
	call ptf,addmethod
	push "_cptfstdreach"
	push "_cptfstdarrive"
	cthis addsigs
	push "go:"
	cthis _setbase
	end method
	method _buildan
	localstring $1
	pop $1
	push $1
	call ptf,linkanima
	push $1
	cthis link
	end method
	method build
	localstring $1
	localstring $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $5
	pop _istep
	push $2
	push $3
	push $4
	push $5
	push $6
	call ptf,build
	push $1
	cthis _buildan
	end method
	method buildfrom
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $3
	pop _istep
	push $2
	push $3
	call ptf,copy
	push $1
	cthis _buildan
	end method
	method addsigs
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push "null"
	cmpjne
	cmp0
	je l1963
	push "onreach"
	push $1
	call ptf,addmethod
l1963:
	push $2
	push "null"
	cmpjne
	cmp0
	je l1965
	push "onarrive"
	push $2
	call ptf,addmethod
l1965:
	end method
	method sigonnopath
	localstring $1
	pop $1
	push $1
	pop _sfunnopath
	end method
	method sigonvisit
	localstring $1
	pop $1
	push $1
	pop _sfunvisit
	end method
	method _cptfstdreach
	localstring $1
	pop $1
	end method
	method _cptfstdarrive
	end method
	method move
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,move
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,setpos
	end method
	method show
	call ptf,show
	end method
	method hide
	call ptf,hide
	end method
	method enable
	localint $1
	pop $1
	push $1
	call ptf,enable
	end method
	method disable
	localint $1
	pop $1
	push $1
	call ptf,disable
	end method
	method setanstep
	localint $1
	pop $1
	push $1
	pop _istep
	push $1
	call ptf,setanstep
	end method
	method mulspeed
	localint $1
	pop $1
	push $1
	push _istep
	pop $b
	popax
	mul $a,$b
	pop _itmpspeed
	push _itmpspeed
	call ptf,setanstep
	end method
	method retstep
	push _istep
	cthis setanstep
	end method
	method getanstep
	push _istep
	ret
	end method
	method getposx
	call ptf,getposx
	ret
	end method
	method getposy
	call ptf,getposy
	ret
	end method
	method getpx
	call ptf,getpx
	ret
	end method
	method getpy
	call ptf,getpy
	ret
	end method
	method getidan
	call ptf,getidan
	ret
	end method
	method getidan2
	call ptf,getidan2
	ret
	end method
	method getidgo
	call ptf,getidgo
	ret
	end method
	method getidanpath
	call ptf,getidanpath
	ret
	end method
	method getidan2path
	call ptf,getidan2path
	ret
	end method
	method getidgopath
	call ptf,getidgopath
	ret
	end method
	method excludev
	localint $1
	pop $1
	push $1
	call ptf,excludev
	end method
	method linkfilter
	call ptf,linkfilter
	end method
	method unlinkfilter
	call ptf,unlinkfilter
	end method
	method unlinkanima
	call ptf,unlinkanima
	end method
	method linkanima
	localstring $1
	pop $1
	push $1
	call ptf,linkanima
	end method
	method setscalepower
	localreal $1
	pop $1
	push $1
	call ptf,setscalepower
	end method
	method setzsize
	localreal $1
	pop $1
	push $1
	call ptf,setzsize
	end method
	method iswayto
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,iswayto
	ret
	end method
	method scalean
	call ptf,scalean
	end method
	method getfromver
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	call ptf,getfromver
	ret
	end method
	method getgover
	localint $1
	pop $1
	push $1
	call ptf,getgover
	ret
	end method
	method getanver
	localint $1
	pop $1
	push $1
	call ptf,getanver
	ret
	end method
	method getxver
	localint $1
	pop $1
	push $1
	call ptf,getxver
	ret
	end method
	method getyver
	localint $1
	pop $1
	push $1
	call ptf,getyver
	ret
	end method
	method getbyname
	localint $1
	pop $1
	push $1
	call ptf,getbyname
	ret
	end method
	method walkbase
	localstring $1
	pop $1
	push $1
	call ptf,setbase
	end method
	method letturn
	localint $1
	pop $1
	push $1
	call ptf,letturn
	end method
	method canturn
	call ptf,canturn
	end method
	method vecdir
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,vecdir
	end method
	method ptfgoto
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,goto
	end method
	method setmovetype
	localint $1
	pop $1
	push $1
	call ptf,setmovetype
	end method
	method walkto2
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	pop swalkto
	push $2
	push $3
	cthis cangoto
	cmp0
	je l1967
	push $2
	push $3
	call ptf,goto
	pop $2
	jmp l1966
l1967:
	push _sfunnopath
	push "null"
	cmpjne
	cmp0
	je l1969
	push _sfunnopath
	spushs
	spop $d
	cthis [$d]
l1969:
l1966:
	end method
	method walkto
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	pop swalkto
	push $1
	push "null"
	cmpje
	cthis letturn
	cthis iswalking
	cmp0
	je l1971
	push $2
	push $3
	call ptf,iswayto
	cmp0
	je l1973
	push 1
	pop bzmien
	push $2
	pop destx
	push $3
	pop desty
	push 0
	ret
	jmp l1972
l1973:
	push 1
	pop bzatrzym
	push 1
	popax
	sub 0,$a
	ret
l1972:
	jmp l1970
l1971:
	push $2
	push $3
	call ptf,goto
	ret
l1970:
	end method
	method iswaytover
	localint $1
	pop $1
	push slastpathf
	spushs
	push $1
	spop $a
	call [$a],getbyname
	pop $1
	push $1
	cthis getxver
	cthis getposx
	pop $b
	popax
	sub $a,$b
	push $1
	cthis getyver
	cthis getposy
	pop $b
	popax
	sub $a,$b
	call ptf,iswayto
	end method
	method length
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,length
	end method
	method lengthver
	localint $1
	pop $1
	push slastpathf
	spushs
	push $1
	spop $a
	call [$a],getbyname
	pop $1
	push $1
	cthis getxver
	cthis getposx
	pop $b
	popax
	sub $a,$b
	push $1
	cthis getyver
	cthis getposy
	pop $b
	popax
	sub $a,$b
	cthis length
	end method
	method goto
	localint $1
	localint $2
	pop $2
	pop $1
	push "null"
	push $1
	push $2
	cthis walkto
	ret
	end method
	method gotorel
	localint $1
	localint $2
	pop $2
	pop $1
	push _sanim
	spushs
	spop $a
	call [$a],getpx
	push $1
	pop $b
	popax
	add $a,$b
	push _sanim
	spushs
	spop $a
	call [$a],getey
	push $2
	pop $b
	popax
	add $a,$b
	cthis goto
	ret
	end method
	method turn
	localstring $1
	pop $1
	push $1
	call ptf,turn
	end method
	method iswalking
	call ptf,iswalking
	ret
	end method
	method stand
	call ptf,stand
	end method
	method stop
	localint $1
	pop $1
	push $1
	call ptf,stop
	end method
	method getidpath
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call ptf,getidpath
	ret
	end method
	method cangoto
	localint $1
	localint $2
	pop $2
	pop $1
	localint $3
	push $1
	push $2
	call ptf,getidpath
	pop $3
	push $3
	push 1
	popax
	sub 0,$a
	cmpje
	cmp0
	je l1975
	push 0
	jmp l1974
l1975:
	push $3
	call ptf,isenabled
l1974:
	ret
	end method
	method _cptfreachpocket
	cthis getptfname
	push "look"
	pop $b
	popax
	add $a,$b
	spushs
	push swalkto
	spop $a
	call [$a],herolook
	end method
	method _cptfreachbut
	cthis getptfname
	push "look"
	pop $b
	popax
	add $a,$b
	spushs
	push swalkto
	spop $a
	call [$a],herolook
	end method
	method _cptfreachdoors
	cthis getptfname
	push "look"
	pop $b
	popax
	add $a,$b
	spushs
	push swalkto
	spop $a
	call [$a],herooperate
	end method
	method _cptfreachitem
	cthis getptfname
	push "take"
	pop $b
	popax
	add $a,$b
	spushs
	push swalkto
	spop $a
	call [$a],herotake
	end method
	method _cptfherofin
	cthis herostand
	push swalkto
	push "null"
	cmpjne
	cmp0
	je l1977
	push _sanim
	push "_REACH_"
	pop $b
	popax
	add $a,$b
	push swalkto
	spushs
	spop $a
	call [$a],getbutname
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push _sanim
	cthis ismainhero
	cmp0
	je l1979
	localstring $1
	push "null"
	pop $1
	push _sanim
	spushs
	spop $a
	call [$a],haspocket
	cmp0
	je l1981
	push _sanim
	spushs
	spop $a
	call [$a],getpocket
	spushs
	spop $a
	call [$a],getitem
	pop $1
l1981:
	push $1
	push "null"
	cmpjne
	cmp0
	je l1983
	cthis getptfname
	push "use"
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	push swalkto
	spop $a
	call [$a],herouse
	jmp l1982
l1983:
	push "_cptfreach"
	push swalkto
	spushs
	spop $a
	call [$a],gettyp
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
l1982:
l1979:
	push "null"
	pop swalkto
	jmp l1976
l1977:
	push _sanim
	push "_ARRIVE"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	cthis _cptheroendpath
l1976:
	end method
	method sigonzmien
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop _sobzmien
	push $2
	pop _sfunzmien
	end method
	method _cptheroendpath
	push _sfinob
	push _sfinfun
	cthis callfun
	push _bylfin
	cmp0
	je l1985
	push 0
	pop _bylfin
	jmp l1984
l1985:
	push "null"
	pop _sfinfun
	push "null"
	pop _sfinob
l1984:
	end method
	method _cptfnopath
	push _sanim
	push "_NOPATH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method _cptfvisit
	push _sanim
	push "_VISIT"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method prepareforhero
	push "onfinish"
	push "_cptfherofin"
	call ptf,addmethod
	new string,_sfinob
	new string,_sfinfun
	new int,_bylfin
	push "_cptfnopath"
	cthis sigonnopath
	push "_cptfvisit"
	cthis sigonvisit
	end method
	method herowalkto2
	localint $1
	localint $2
	localstring $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "null"
	push $1
	push $2
	push $3
	push $4
	cthis herowalkto
	end method
	method herowalkto
	localstring $1
	localint $2
	localint $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push _sstndpref
	push _sanim
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],stop
	push $4
	pop _sfinob
	push $5
	pop _sfinfun
	push $5
	push "null"
	cmpjne
	cmp0
	je l1987
	push 1
	pop _bylfin
l1987:
	push $1
	push $2
	push $3
	cthis walkto
	push 1
	popax
	sub 0,$a
	cmpje
	cmp0
	je l1989
	push 0
	pop ispathto
	jmp l1988
l1989:
	push 1
	pop ispathto
l1988:
	end method
	method heroturn
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $2
	pop _sfinob
	push $3
	pop _sfinfun
	push $3
	push "null"
	cmpjne
	cmp0
	je l1991
	push 1
	pop _bylfin
l1991:
	push $1
	cthis turn
	end method
	method advgoto
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	push "null"
	push "null"
	cthis herowalkto2
	end method
	method advwalkto
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push "null"
	push "null"
	cthis herowalkto
	end method
	method advvisit
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],reachable
	cmp0
	je l1993
	push $1
	push $1
	spushs
	spop $a
	call [$a],getgox
	push $1
	spushs
	spop $a
	call [$a],getgoy
	cthis advwalkto
l1993:
	end method
	method herostand
	cthis retstep
	cthis stand
	push _sanim
	spushs
	spop $a
	call [$a],herostand
	end method
	method stophero
	cthis herostand
	push 1
	pop bzatrzym
	end method
	method _cptvisit
	push _sfunvisit
	spushs
	spop $d
	cthis [$d]
	push bzmien
	cmp0
	je l1995
	push 0
	pop bzmien
	push destx
	push desty
	cthis goto
	push 1
	popax
	sub 0,$a
	cmpje
	cmp0
	je l1997
	push _sfunnopath
	spushs
	spop $d
	cthis [$d]
	jmp l1996
l1997:
	push _sobzmien
	push _sfunzmien
	cthis callfun
l1996:
	jmp l1994
l1995:
	push bzatrzym
	cmp0
	je l1999
	push 0
	pop bzatrzym
	push 1
	cthis stop
l1999:
l1994:
	end method
	method _cptffin
	push swalkto
	push "null"
	cmpjne
	cmp0
	je l2001
	push swalkto
	call ptf,onreach
	push "null"
	pop swalkto
	jmp l2000
l2001:
	call ptf,onarrive
l2000:
	end method
	method anposx
	push _sanim
	spushs
	spop $a
	call [$a],getposx
	end method
	method anposy
	push _sanim
	spushs
	spop $a
	call [$a],getposy
	end method
	method bzmien
	push bzmien
	end method
	method bzmien=
	localint $1
	pop $1
	push $1
	pop bzmien
	end method
	method checkreach
	localstring $1
	pop $1
	push ispathto
	neg
	cmp0
	je l2003
	push $1
	push "null"
	cmpjne
	cmp0
	je l2003
	cthis behplaying
	neg
	jmp l2005
l2003:
	push 0
	jmp l2005
l2004:
	push 1
l2005:
	cmp0
	je l2006
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_NOPATH_"
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	spop $a
	call [$a],getbutname
	pop $b
	popax
	add $a,$b
	cthis playbehif
	neg
	pop _b_rewind
l2006:
	end method
	end class

	class classwalkerqueue
	method init
	new timer,timwq
	push 1
	call timwq,settick
	push 1
	call timwq,setcycle
	push "onfinish"
	push "_timwqfin"
	call timwq,addmethod
	new vector,vecpt
	push "string"
	call vecpt,type
	new int,iverlen
	push 1
	pop iverlen
	new int,igox
	new int,igoy
	new string,_simg
	new int,bniezmien
	push 1
	pop bniezmien
	end method
	method _timwqfin
	cthis checkqueue
	cthis play
	end method
	method start
	end method
	method ptpos
	localstring $1
	pop $1
	push $1
	call vecpt,find
	end method
	method remove
	localstring $1
	pop $1
	localint $2
	push $1
	cthis ptpos
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l2008
	push $2
	push 0
	cmpje
	cmp0
	je l2010
	call vecpt,first
	spushs
	push "null"
	push "null"
	spop $a
	call [$a],sigonzmien
	push 0
	call vecpt,removeat
	call vecpt,size
	cmp0
	je l2012
	call vecpt,first
	spushs
	cthis getname
	push "ptzmien"
	spop $a
	call [$a],sigonzmien
l2012:
	jmp l2009
l2010:
	push $2
	call vecpt,removeat
l2009:
l2008:
	end method
	method stop
	push 0
	call timwq,stop
	end method
	method add
	localstring $1
	pop $1
	push $1
	spushs
	push $1
	spushs
	spop $a
	call [$a],anposx
	push $1
	spushs
	spop $a
	call [$a],anposy
	spop $a
	call [$a],iswayto
	popax
	push $1
	call vecpt,add
	call vecpt,size
	push 1
	cmpje
	cmp0
	je l2014
	call vecpt,first
	spushs
	cthis getname
	push "ptzmien"
	spop $a
	call [$a],sigonzmien
l2014:
	end method
	method ptzmien
	push 0
	pop bniezmien
	push _simg
	push igox
	call clcamera,getposx
	pop $b
	popax
	add $a,$b
	push igoy
	call clcamera,getposy
	pop $b
	popax
	add $a,$b
	cthis walkto
	call vecpt,first
	spushs
	push 0
	spop $a
	call [$a],bzmien=
	push 1
	pop bniezmien
	end method
	method goto
	localint $1
	localint $2
	pop $2
	pop $1
	push "null"
	push $1
	push $2
	cthis walkto
	end method
	method visit
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],reachable
	cmp0
	je l2016
	call vecpt,first
	push "_WALKTO_"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	push $1
	push $1
	spushs
	spop $a
	call [$a],getgox
	push $1
	spushs
	spop $a
	call [$a],getgoy
	cthis walkto
l2016:
	end method
	method setverlen
	localint $1
	pop $1
	push $1
	pop iverlen
	end method
	method stand
	localint $1
	push 0
	pop $1
l2017:
	push $1
	call vecpt,size
	cmpjl
	cmp0
	je l2018
	jmp l2020
l2019:
	add $1,1
	pop $1
	jmp l2017
l2020:
	push $1
	call vecpt,get
	spushs
	push 0
	spop $a
	call [$a],stop
	push $1
	call vecpt,get
	spushs
	spop $a
	call [$a],herostand
	jmp l2019
l2018:
	end method
	method mulspeed
	localint $1
	pop $1
	localint $2
	push 0
	pop $2
l2021:
	push $2
	call vecpt,size
	cmpjl
	cmp0
	je l2022
	jmp l2024
l2023:
	add $2,1
	pop $2
	jmp l2021
l2024:
	push $2
	call vecpt,get
	spushs
	push $1
	spop $a
	call [$a],mulspeed
	jmp l2023
l2022:
	end method
	method walkto
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $2
	call clcamera,getposx
	pop $b
	popax
	sub $a,$b
	pop igox
	push $3
	call clcamera,getposy
	pop $b
	popax
	sub $a,$b
	pop igoy
	push $1
	pop _simg
	push 1
	pop iverlen
	localint $4
	call vecpt,size
	pop $4
	push $4
	push 0
	cmpjle
	cmp0
	je l2026
	ret
l2026:
	localstring $5
	call vecpt,first
	pop $5
	push $5
	spushs
	push $1
	push $2
	push $3
	spop $a
	call [$a],advwalkto
	localint $6
	localint $7
	localstring $8
	localint $9
	push 1
	pop $9
l2027:
	push $9
	push $4
	cmpjl
	cmp0
	je l2028
	jmp l2030
l2029:
	add $9,1
	pop $9
	jmp l2027
l2030:
	push $9
	call vecpt,get
	pop $8
	push $5
	spushs
	spop $a
	call [$a],getidgo
	pop $7
	push bniezmien
	cmp0
	je l2032
	push $5
	spushs
	push iverlen
	spop $a
	call [$a],getgover
	pop $6
	jmp l2031
l2032:
	push $8
	spushs
	push $1
	push $2
	push $3
	spop $a
	call [$a],advwalkto
	push $8
	spushs
	push $9
	push iverlen
	pop $b
	popax
	mul $a,$b
	spop $a
	call [$a],getgover
	pop $6
l2031:
	push $6
	push 0
	cmpjl
	cmp0
	je l2034
	push $5
	spushs
	push iverlen
	spop $a
	call [$a],getgover
	pop $6
	push $6
	push 0
	cmpjl
	cmp0
	je l2036
	push $5
	spushs
	spop $a
	call [$a],getidan
	pop $6
l2036:
l2034:
	push $6
	push $7
	cmpje
	cmp0
	je l2038
	push bniezmien
	jmp l2040
l2038:
	push 0
	jmp l2040
l2039:
	push 1
l2040:
	cmp0
	je l2041
	push 1
	popax
	sub 0,$a
	pop $6
l2041:
	push $8
	pop $5
	push $6
	push 0
	cmpjae
	cmp0
	je l2043
	push $8
	spushs
	push "null"
	push $8
	spushs
	push $6
	spop $a
	call [$a],getxver
	push $8
	spushs
	push $6
	spop $a
	call [$a],getyver
	spop $a
	call [$a],advwalkto
	jmp l2042
l2043:
	push $8
	spushs
	push 0
	spop $a
	call [$a],stop
	push $8
	spushs
	spop $a
	call [$a],herostand
l2042:
	jmp l2029
l2028:
	push $5
	spushs
	push $1
	spop $a
	call [$a],checkreach
	end method
	method checkqueue
	localint $1
	call vecpt,size
	pop $1
	push $1
	push 1
	cmpjle
	cmp0
	je l2045
	ret
l2045:
	localint $2
	localstring $3
	localstring $4
	localint $5
	localint $6
	localint $7
	push 0
	pop $7
l2046:
	push $7
	push $1
	cmpjl
	cmp0
	je l2047
	jmp l2049
l2048:
	add $7,1
	pop $7
	jmp l2046
l2049:
	push $7
	call vecpt,get
	pop $3
	push $3
	spushs
	spop $a
	call [$a],iswalking
	cmp0
	je l2051
	push $3
	spushs
	spop $a
	call [$a],getidan
	pop $5
	push $3
	spushs
	spop $a
	call [$a],getidan2
	pop $6
	push $7
	push 1
	pop $b
	popax
	add $a,$b
	pop $2
l2052:
	push $2
	push $1
	cmpjl
	cmp0
	je l2053
	jmp l2055
l2054:
	add $2,1
	pop $2
	jmp l2052
l2055:
	push $2
	call vecpt,get
	pop $4
	push $4
	spushs
	spop $a
	call [$a],iswalking
	cmp0
	je l2057
	push $4
	spushs
	push $5
	spop $a
	call [$a],excludev
	push $4
	spushs
	push $6
	spop $a
	call [$a],excludev
l2057:
	jmp l2054
l2053:
l2051:
	jmp l2048
l2047:
	end method
	end class

	class classstndgroup
	method init
	new gmobjvec,grstnd
	end method
	method pause
	push "lock"
	call grstnd,eval
	cthis stop
	end method
	method resume
	push igmstate
	push 0
	cmpje
	cmp0
	je l2059
	push "unlock"
	call grstnd,eval
	cthis play
l2059:
	end method
	method add
	localstring $1
	pop $1
	push $1
	call grstnd,add
	end method
	method remove
	localstring $1
	pop $1
	push $1
	call grstnd,remove
	end method
	method stop
	push "stop"
	call grstnd,eval
	end method
	method play
	push "play"
	call grstnd,eval
	end method
	method reset
	push "reset"
	call grstnd,eval
	end method
	end class

	class classadvstander
	parent classlocker
	method init
	clparent classlocker,init
	new timer,timstand
	push 1
	call timstand,settick
	push 20000
	call timstand,delay
	push "onfinish"
	push "_timstandfin"
	call timstand,addmethod
	new string,sanim
	cthis getname
	pop sanim
	push _sstndpref
	call sanim,strsubbs
	pop sanim
	new string,_sbeh
	push "beh_"
	push sanim
	pop $b
	popax
	add $a,$b
	push "_IDLE"
	pop $b
	popax
	add $a,$b
	pop _sbeh
	cthis getname
	call modstnd,add
	end method
	method _timstandfin
	localstring $1
	call gameapi,getgamename
	pop $1
	push $1
	spushs
	push _sbeh
	spop $a
	call [$a],behexist
	cmp0
	je l2061
	cthis getlock
	neg
	jmp l2063
l2061:
	push 0
	jmp l2063
l2062:
	push 1
l2063:
	cmp0
	je l2064
	push $1
	spushs
	push _sbeh
	spop $a
	call [$a],playbeh
l2064:
	end method
	method play
	cthis getlock
	neg
	cmp0
	je l2066
	call timstand,isplaying
	neg
	jmp l2068
l2066:
	push 0
	jmp l2068
l2067:
	push 1
l2068:
	cmp0
	je l2069
	call timstand,play
l2069:
	end method
	method stop
	push 0
	call timstand,stop
	end method
	method setdelay
	localint $1
	pop $1
	push $1
	call timstand,setdelay
	end method
	method reset
	cthis stop
	cthis play
	end method
	end class

	class classtalker
	parent classadvhero
	method init
	clparent classadvhero,init
	push "talk:"
	cthis _setbase
	new snd,sndtalk
	call sndtalk,buildfullname
	push 0
	push 1
	call sndtalk,setstartstopflag
	push "onfinish"
	push "_ctalkfin"
	call sndtalk,addmethod
	new timer,timtalk
	push 1
	call timtalk,settick
	new real,rdelay
	push 1.0
	pop rdelay
	push "onfinish"
	push "_ctalkfin"
	call timtalk,addmethod
	new gmimgvec,txttalk
	new int,_iletxt
	push 10
	pop _iletxt
	localstring $1
	localint $2
	push 0
	pop $2
l2070:
	push $2
	push _iletxt
	cmpjl
	cmp0
	je l2071
	jmp l2073
l2072:
	add $2,1
	pop $2
	jmp l2070
l2073:
	push "txttalk"
	push $2
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	spushs
	spop $e
	new text,[$e]
	push $1
	call txttalk,add
	jmp l2072
l2071:
	new font,fonttalk
	call txttalk,hide
	new vector,vecpom
	push "string"
	call vecpom,type
	new int,iTxtLim
	push 30
	pop iTxtLim
	new int,irtxt
	new int,igtxt
	new int,ibtxt
	new string,stextdb
	new string,_swav
	cthis buildfullname
	new string,stalktype
	push "snd"
	cthis settalktype
	end method
	method set
	localstring $1
	pop $1
	push $1
	cthis link
	end method
	method settextdb
	localstring $1
	pop $1
	push $1
	pop stextdb
	end method
	method setfont
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call fonttalk,load
	push "setfont"
	push "fonttalk"
	call txttalk,eval1
	end method
	method setsnd
	localstring $1
	pop $1
	push ".wav"
	call $1,contains
	neg
	cmp0
	je l2075
	push $1
	pop _swav
	push ".wav"
	popax
	add $1,$a
	pop $1
	jmp l2074
l2075:
	push ".wav"
	call $1,strsubes
	pop _swav
l2074:
	push $1
	call sndtalk,advloadsnd
	end method
	method herosay1
	localstring $1
	pop $1
	push 1
	push 1
	push 1
	push "null"
	push $1
	cthis herosay
	end method
	method herosay
	localint $1
	localint $2
	localint $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	push $4
	push $5
	cthis getdir
	cthis herosaydir
	end method
	method herosaydir
	localint $1
	localint $2
	localint $3
	localstring $4
	localstring $5
	localstring $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push _sanim
	spushs
	push 0
	spop $a
	call [$a],thisfinish
	push $2
	neg
	cmp0
	je l2077
	push _sanim
	spushs
	push _sbase
	push $6
	cthis nofpiecesdir
	push $1
	push $2
	push "null"
	push "null"
	push $3
	push $4
	push $5
	push $6
	spop $a
	call [$a],playspec
	push stalktype
	spushs
	spop $d
	cthis [$d]
	jmp l2076
l2077:
	push _sanim
	spushs
	push _sbase
	push $6
	cthis nofpiecesdir
	push $1
	push $2
	cthis getfullname
	push "_ctalkstart"
	push $3
	push $4
	push $5
	push $6
	spop $a
	call [$a],playspec
l2076:
	end method
	method thisfinish
	localint $1
	pop $1
	push _sanim
	spushs
	push $1
	spop $a
	call [$a],thisfinish
	end method
	method stop
	localint $1
	pop $1
	push "snd"
	call stalktype,contains
	cmp0
	je l2079
	push $1
	call sndtalk,stop
	push 0
	call timtalk,stop
	jmp l2078
l2079:
	push $1
	call timtalk,stop
l2078:
	end method
	method settalktype
	localstring $1
	pop $1
	push "_cplay"
	pop stalktype
	push "snd"
	call $1,contains
	cmp0
	je l2081
	push "snd"
	popax
	add stalktype,$a
	pop stalktype
l2081:
	push "txt"
	call $1,contains
	cmp0
	je l2083
	push "txt"
	popax
	add stalktype,$a
	pop stalktype
l2083:
	push "film"
	call $1,contains
	cmp0
	je l2085
	push "film"
	popax
	add stalktype,$a
	pop stalktype
l2085:
	end method
	method _csay
	push stextdb
	push "null"
	cmpjne
	cmp0
	je l2087
	localint $1
	push stextdb
	spushs
	push _swav
	spop $a
	call [$a],findbyrow
	pop $1
	push $1
	push 0
	cmpjl
	cmp0
	je l2089
	ret
l2089:
	push stextdb
	spushs
	push $1
	push 2
	spop $a
	call [$a],get
	push " "
	call vecpom,vecbuildfromstring
	localstring $2
	push ""
	pop $2
	localint $3
	push 0
	pop $3
	localint $4
	localint $5
	push "txt"
	call stalktype,contains
	cmp0
	je l2091
	push _sanim
	spushs
	spop $a
	call [$a],getcx
	pop $4
	push _sanim
	spushs
	spop $a
	call [$a],getpy
	pop $5
	jmp l2090
l2091:
	push 400
	pop $4
	push 590
	pop $5
l2090:
	localint $6
	push 0
	pop $6
	localint $7
	push iResX
	pop $7
	localint $8
	push 0
	pop $8
	localint $9
	push iResY
	pop $9
	localstring $10
	localint $11
	push 0
	pop $11
l2092:
	push $11
	call vecpom,size
	cmpjl
	cmp0
	je l2093
	jmp l2095
l2094:
	add $11,1
	pop $11
	jmp l2092
l2095:
	push $11
	call vecpom,get
	push " "
	pop $b
	popax
	add $a,$b
	popax
	add $2,$a
	pop $2
	call $2,length
	push iTxtLim
	cmpja
	cmp0
	je l2097
	push "txttalk"
	push $3
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	push $2
	push $4
	push $5
	push $3
	spop $a
	call [$a],_cprinttxt
	push $10
	spushs
	spop $a
	call [$a],getpx
	push $6
	cmpjl
	cmp0
	je l2099
	push $10
	spushs
	spop $a
	call [$a],getpx
	pop $6
l2099:
	push $10
	spushs
	spop $a
	call [$a],getex
	push $7
	cmpja
	cmp0
	je l2101
	push $10
	spushs
	spop $a
	call [$a],getex
	pop $7
l2101:
	push $10
	spushs
	spop $a
	call [$a],getpy
	push $8
	cmpjl
	cmp0
	je l2103
	push $10
	spushs
	spop $a
	call [$a],getpy
	pop $8
l2103:
	push $10
	spushs
	spop $a
	call [$a],getey
	push $9
	cmpja
	cmp0
	je l2105
	push $10
	spushs
	spop $a
	call [$a],getey
	pop $9
l2105:
	push ""
	pop $2
	add $3,1
	pop $3
l2097:
	jmp l2094
l2093:
	call $2,length
	push 0
	cmpja
	cmp0
	je l2107
	push "txttalk"
	push $3
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	push $2
	push $4
	push $5
	push $3
	spop $a
	call [$a],_cprinttxt
	push $10
	spushs
	spop $a
	call [$a],getpx
	push $6
	cmpjl
	cmp0
	je l2109
	push $10
	spushs
	spop $a
	call [$a],getpx
	pop $6
l2109:
	push $10
	spushs
	spop $a
	call [$a],getex
	push $7
	cmpja
	cmp0
	je l2111
	push $10
	spushs
	spop $a
	call [$a],getex
	pop $7
l2111:
	push $10
	spushs
	spop $a
	call [$a],getpy
	push $8
	cmpjl
	cmp0
	je l2113
	push $10
	spushs
	spop $a
	call [$a],getpy
	pop $8
l2113:
	push $10
	spushs
	spop $a
	call [$a],getey
	push $9
	cmpja
	cmp0
	je l2115
	push $10
	spushs
	spop $a
	call [$a],getey
	pop $9
l2115:
	add $3,1
	pop $3
l2107:
	push iResX
	popax
	sub $7,$a
	pop $7
	push iResY
	popax
	sub $9,$a
	pop $9
	push $6
	push 0
	cmpja
	cmp0
	je l2117
	push 0
	pop $6
l2117:
	push $8
	push 0
	cmpja
	cmp0
	je l2119
	push 0
	pop $6
l2119:
	push 0
	push $6
	pop $b
	popax
	sub $a,$b
	push $7
	pop $b
	popax
	add $a,$b
	push $3
	popax
	sub 0,$a
	call txttalk0,geth
	pop $b
	popax
	mul $a,$b
	push $8
	pop $b
	popax
	sub $a,$b
	push $9
	pop $b
	popax
	add $a,$b
	call txttalk,move
	call txttalk0,getpy
	push 0
	cmpjl
	cmp0
	je l2121
	push 0
	call txttalk0,getpy
	popax
	sub 0,$a
	call txttalk,move
l2121:
	push rdelay
	push 500
	pop $b
	popax
	mul $a,$b
	call vecpom,size
	pop $b
	popax
	mul $a,$b
	call timtalk,delay
l2087:
	end method
	method _cprinttxt
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	cthis set
	push irtxt
	push igtxt
	push ibtxt
	cthis createtxt
	push $2
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $3
	push $4
	cthis geth
	pop $b
	popax
	mul $a,$b
	pop $b
	popax
	add $a,$b
	cthis setpos
	push 2000
	cthis setz
	cthis show
	end method
	method _cplaysnd
	call sndtalk,getfullname
	cthis cbsplay
	end method
	method _cplaysndtxt
	cthis _cplaysnd
	cthis _csay
	end method
	method _cplaysndtxtfilm
	cthis _cplaysnd
	cthis _csay
	end method
	method _cplaysndfilm
	cthis _csay
	end method
	method _cplaytxt
	cthis _csay
	call timtalk,play
	end method
	method _cplaytxtfilm
	cthis _csay
	call timtalk,play
	end method
	method _cplayfilm
	cthis _csay
	call timtalk,play
	end method
	method setdelay
	localreal $1
	pop $1
	push $1
	pop rdelay
	end method
	method settxtcolor
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	pop irtxt
	push $2
	pop igtxt
	push $3
	pop ibtxt
	end method
	method _ctalkstart
	push stalktype
	spushs
	spop $d
	cthis [$d]
	end method
	method _ctalkfin
	call txttalk,hide
	push _sanim
	spushs
	spop $a
	call [$a],herostop
	end method
	end class

	class classtxttalker
	parent classadvhero
	method init
	clparent classadvhero,init
	push "talk:"
	cthis _setbase
	new int,iR
	new int,iG
	new int,iB
	new int,ibR
	new int,ibG
	new int,ibB
	new int,ibA
	new int,ibrr
	new int,ibrg
	new int,ibrb
	new int,ibra
	new int,ibw
	new db,dbtxt
	new int,iSize
	new gmimgvec,grtxt
	new gmimgvec,grtxt2
	localstring $1
	localint $2
	push 0
	pop $2
l2122:
	push $2
	push 25
	cmpjl
	cmp0
	je l2123
	jmp l2125
l2124:
	add $2,1
	pop $2
	jmp l2122
l2125:
	push "txt"
	push $2
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	spushs
	spop $e
	new text,[$e]
	push $1
	call grtxt,add
	push $1
	spushs
	spop $a
	call [$a],hide
	jmp l2124
l2123:
	new text,imgtxt
	call imgtxt,hide
	new int,bplaying
	push 0
	pop bplaying
	new string,slang
	push "pol"
	cthis setlang
	end method
	method setlang
	localstring $1
	pop $1
	push $1
	pop slang
	end method
	method isplaying
	push bplaying
	ret
	end method
	method setfont
	localstring $1
	pop $1
	push "setfont"
	push $1
	call grtxt,eval1
	push $1
	spushs
	spop $a
	call [$a],getsize
	pop iSize
	end method
	method setfontcolor
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	pop iR
	push $2
	pop iG
	push $3
	pop iB
	end method
	method setfontbg
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	pop ibR
	push $2
	pop ibG
	push $3
	pop ibB
	push $4
	pop ibA
	end method
	method setbgframe
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $2
	pop ibrr
	push $3
	pop ibrg
	push $4
	pop ibrb
	push 255
	pop ibra
	push $1
	pop ibw
	end method
	method set
	localstring $1
	localint $2
	pop $2
	pop $1
	push $1
	cthis link
	push $2
	call grtxt,setz
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	call imgtxt,setz
	end method
	method herosay
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push $3
	cthis getdir
	cthis herosaydir
	end method
	method herosaydir
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $4
	push "auto"
	cmpje
	cmp0
	je l2127
	cthis getdir
	pop $4
l2127:
	push 1
	pop bplaying
	cthis getgraphpath
	push $1
	pop $b
	popax
	add $a,$b
	push "."
	pop $b
	popax
	add $a,$b
	push slang
	pop $b
	popax
	add $a,$b
	call dbtxt,load
	localstring $5
	call grtxt2,free
	localint $6
	push 0
	pop $6
	localint $7
	call dbtxt,getrowsno
	pop $7
	localint $8
	push 0
	pop $8
l2128:
	push $8
	push $7
	cmpjl
	cmp0
	je l2129
	jmp l2131
l2130:
	add $8,1
	pop $8
	jmp l2128
l2131:
	push "txt"
	push $8
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	spushs
	push $8
	push 0
	call dbtxt,get
	spop $a
	call [$a],set
	push $5
	spushs
	push iR
	push iG
	push iB
	spop $a
	call [$a],createtxt
	push $5
	spushs
	push $2
	push $3
	spop $a
	call [$a],setpos
	push iSize
	popax
	add $3,$a
	pop $3
	push $5
	spushs
	spop $a
	call [$a],show
	push $5
	spushs
	spop $a
	call [$a],getw
	push $6
	cmpja
	cmp0
	je l2133
	push $5
	spushs
	spop $a
	call [$a],getw
	pop $6
l2133:
	push $5
	call grtxt2,add
	jmp l2130
l2129:
	call txt0,getpx
	push iSize
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call txt0,getpy
	push iSize
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $6
	push iSize
	pop $b
	popax
	add $a,$b
	push iSize
	push $7
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	mul $a,$b
	push ibR
	push ibG
	push ibB
	push ibA
	call imgtxt,setbkg
	push ibw
	push ibrr
	push ibrg
	push ibrb
	push ibra
	call imgtxt,setborders
	call imgtxt,show
	push _sanim
	push "null"
	cmpjne
	cmp0
	je l2135
	push _sanim
	spushs
	push 0
	spop $a
	call [$a],thisfinish
	push _sanim
	spushs
	push _sbase
	push 0
	push 0
	push 0
	push "null"
	push "null"
	push 0
	push "null"
	push "null"
	push $4
	spop $a
	call [$a],playspec
l2135:
	end method
	method stop
	push 0
	pop bplaying
	call grtxt2,hide
	call imgtxt,hide
	push _sanim
	push "null"
	cmpjne
	cmp0
	je l2137
	push _sanim
	spushs
	push 1
	spop $a
	call [$a],thisfinish
	push _sanim
	spushs
	push "stand"
	cthis getdir
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],play
l2137:
	end method
	end class

	class classbgplan
	parent gmobjvec
	method init
	clparent gmobjvec,init
	new real,rpx
	new real,rpy
	new real,scalex
	new real,scaley
	new int,_ix
	new int,_iy
	end method
	method setscale
	localreal $1
	localreal $2
	pop $2
	pop $1
	push $1
	push $2
	pop scaley
	pop scalex
	end method
	method move
	localreal $1
	localreal $2
	pop $2
	pop $1
	push $1
	popax
	add rpx,$a
	pop rpx
	push $2
	popax
	add rpy,$a
	pop rpy
	localint $3
	push rpx
	pop $3
	localint $4
	push rpy
	pop $4
	push $3
	popax
	sub rpx,$a
	pop rpx
	push $4
	popax
	sub rpy,$a
	pop rpy
	push $3
	cmp0
	jne l2140
	push $4
	jmp l2141
l2139:
	push 0
	jmp l2141
l2140:
	push 1
l2141:
	cmp0
	je l2142
	push $3
	popax
	add _ix,$a
	pop _ix
	push $4
	popax
	add _iy,$a
	pop _iy
	push $3
	push $4
	clparent gmobjvec,move
l2142:
	end method
	method movebgr
	localreal $1
	localreal $2
	pop $2
	pop $1
	push scalex
	push $1
	pop $b
	popax
	mul $a,$b
	push scaley
	push $2
	pop $b
	popax
	mul $a,$b
	cthis move
	end method
	method getpx
	push _ix
	end method
	method getpy
	push _iy
	end method
	end class

	class classgrplans
	parent gmobjvec
	method init
	clparent gmobjvec,init
	new real,_rxp
	new real,_ryp
	end method
	method move
	localreal $1
	localreal $2
	pop $2
	pop $1
	push $1
	popax
	add _rxp,$a
	pop _rxp
	push $2
	popax
	add _ryp,$a
	pop _ryp
	push "movebgr"
	push $1
	push $2
	cthis eval2
	end method
	method getposx
	push _rxp
	ret
	end method
	method getposy
	push _ryp
	ret
	end method
	method shift
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	popax
	add _rxp,$a
	pop _rxp
	push $2
	popax
	add _ryp,$a
	pop _ryp
	push "move"
	push $1
	push $2
	cthis eval2
	end method
	end class

	class CameraPos
	method init
	localint $1
	localint $2
	pop $2
	pop $1
	new int,_x
	new int,_y
	push $1
	push $2
	cthis setpos
	end method
	method setpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	pop _x
	push $2
	pop _y
	end method
	method getposx
	push _x
	end method
	method getposy
	push _y
	end method
	end class

	class classadvcamera
	method init
	new classgrplans,grbgrs
	new string,sancamera
	push "null"
	pop sancamera
	new string,smsmvfun
	push "null"
	pop smsmvfun
	new real,_rxmod
	new real,_rymod
	push 0.05
	push 0.05
	pop _rymod
	pop _rxmod
	new real,rleft
	new real,rtop
	new real,rright
	new real,rbottom
	push 0.0
	push 0.0
	push iResX
	push 1
	pop $b
	popax
	sub $a,$b
	push iResY
	push 1
	pop $b
	popax
	sub $a,$b
	pop rbottom
	pop rright
	pop rtop
	pop rleft
	new int,icamx
	new int,icamy
	push 400
	push 300
	pop icamy
	pop icamx
	new real,rborx
	new real,rbory
	push iResX
	push 1
	pop $b
	popax
	sub $a,$b
	push iResY
	push 1
	pop $b
	popax
	sub $a,$b
	pop rbory
	pop rborx
	new real,_lastx
	push 0
	pop _lastx
	new real,_lasty
	push 0
	pop _lasty
	new string,_sfunxedge
	push "null"
	pop _sfunxedge
	new string,_sfunyedge
	push "null"
	pop _sfunyedge
	push 0
	push 0
	new CameraPos,_campos
	new timer,timcamera
	push 1
	call timcamera,settick
	push 1
	call timcamera,setcycle
	push "onfinish"
	push "_camerafin"
	call timcamera,addmethod
	end method
	method _camerafin
	cthis checkcamera
	cthis play
	end method
	method setscreen
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	pop rleft
	push $2
	pop rtop
	push $3
	pop rright
	push $4
	pop rbottom
	push $3
	pop rborx
	push $4
	pop rbory
	push $1
	pop _lastx
	push $2
	pop _lasty
	push $1
	push $3
	pop $b
	popax
	add $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop icamx
	push $2
	push $4
	pop $b
	popax
	add $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop icamy
	end method
	method remove
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
l2143:
	push $2
	call grbgrs,size
	cmpjl
	cmp0
	je l2144
	jmp l2146
l2145:
	add $2,1
	pop $2
	jmp l2143
l2146:
	push $2
	call grbgrs,get
	spushs
	push $1
	spop $a
	call [$a],remove
	jmp l2145
l2144:
	end method
	method funxedge
	localstring $1
	pop $1
	push $1
	pop _sfunxedge
	end method
	method funyedge
	localstring $1
	pop $1
	push $1
	pop _sfunyedge
	end method
	method setcenter
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	pop icamy
	pop icamx
	end method
	method setborders
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	pop rbottom
	pop rright
	end method
	method countcenter
	push rleft
	push rright
	push rleft
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	push rtop
	push rbottom
	push rtop
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	cthis setcenter
	end method
	method getposx
	call grbgrs,getposx
	ret
	end method
	method getposy
	call grbgrs,getposy
	ret
	end method
	method setmetonmsmove
	localstring $1
	pop $1
	push $1
	pop smsmvfun
	end method
	method start
	call timcamera,play
	end method
	method stop
	push 0
	call timcamera,stop
	end method
	method setactor
	localstring $1
	pop $1
	push $1
	pop sancamera
	end method
	method setcampos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call _campos,setpos
	push "_campos"
	cthis setactor
	end method
	method isactor
	localstring $1
	pop $1
	push $1
	push sancamera
	cmpje
	ret
	end method
	method getactor
	push sancamera
	ret
	end method
	method scalemodifiers
	localreal $1
	localreal $2
	pop $2
	pop $1
	push $1
	push $2
	pop _rymod
	pop _rxmod
	end method
	method newbgr
	localstring $1
	localreal $2
	localreal $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	spop $e
	new classbgplan,[$e]
	push $1
	push $2
	push $3
	cthis addbgr
	end method
	method addbgr
	localstring $1
	localreal $2
	localreal $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],setscale
	push $1
	call grbgrs,add
	end method
	method addtobgr
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	spushs
	push $2
	spop $a
	call [$a],add
	end method
	method setscene
	push 1.0
	push 1.0
	cthis _setscene
	end method
	method _setscene
	localreal $1
	localreal $2
	pop $2
	pop $1
	push sancamera
	push "null"
	cmpje
	cmp0
	je l2148
	ret
l2148:
	localreal $3
	push icamx
	push sancamera
	spushs
	spop $a
	call [$a],getposx
	pop $b
	popax
	sub $a,$b
	pop $3
	push $1
	popax
	mul $3,$a
	pop $3
	localreal $4
	push icamy
	push sancamera
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	pop $4
	push $2
	popax
	mul $4,$a
	pop $4
	localreal $5
	cthis getposx
	push $3
	pop $b
	popax
	add $a,$b
	pop $5
	localreal $6
	cthis getposy
	push $4
	pop $b
	popax
	add $a,$b
	pop $6
	push $5
	push rleft
	cmpjae
	cmp0
	je l2150
	cthis getposx
	popax
	sub 0,$a
	pop $3
	jmp l2149
l2150:
	push $5
	push rright
	pop $b
	popax
	add $a,$b
	push rborx
	cmpjl
	cmp0
	je l2152
	push rborx
	cthis getposx
	push rright
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	sub $a,$b
	pop $3
l2152:
l2149:
	push $6
	push rtop
	cmpjae
	cmp0
	je l2154
	cthis getposy
	popax
	sub 0,$a
	pop $4
	jmp l2153
l2154:
	push $6
	push rbottom
	pop $b
	popax
	add $a,$b
	push rbory
	cmpjl
	cmp0
	je l2156
	push rbory
	cthis getposy
	push rbottom
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	sub $a,$b
	pop $4
l2156:
l2153:
	push $3
	cmp0
	jne l2159
	push $4
	jmp l2160
l2158:
	push 0
	jmp l2160
l2159:
	push 1
l2160:
	cmp0
	je l2161
	push $3
	push $4
	call grbgrs,move
	push smsmvfun
	push "null"
	cmpjne
	cmp0
	je l2163
	push smsmvfun
	spushs
	spop $d
	cthis [$d]
l2163:
l2161:
	push $3
	push 0
	cmpje
	cmp0
	je l2165
	push _lastx
	push 0
	cmpjne
	cmp0
	je l2165
	push _sfunxedge
	push "null"
	cmpjne
	jmp l2167
l2165:
	push 0
	jmp l2167
l2166:
	push 1
l2167:
	cmp0
	je l2168
	push _sfunxedge
	spushs
	spop $d
	cthis [$d]
l2168:
	push $4
	push 0
	cmpje
	cmp0
	je l2170
	push _lasty
	push 0
	cmpjne
	cmp0
	je l2170
	push _sfunyedge
	push "null"
	cmpjne
	jmp l2172
l2170:
	push 0
	jmp l2172
l2171:
	push 1
l2172:
	cmp0
	je l2173
	push _sfunyedge
	spushs
	spop $d
	cthis [$d]
l2173:
	push $3
	pop _lastx
	push $4
	pop _lasty
	end method
	method checkcamera
	push sancamera
	push "null"
	cmpje
	cmp0
	je l2175
	ret
l2175:
	push _rxmod
	push _rymod
	cthis _setscene
	end method
	method moveplans
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	popax
	add rleft,$a
	pop rleft
	push $1
	popax
	add rright,$a
	pop rright
	push $2
	popax
	add rtop,$a
	pop rtop
	push $2
	popax
	add rbottom,$a
	pop rbottom
	push $1
	popax
	add rborx,$a
	pop rborx
	push $2
	popax
	add rbory,$a
	pop rbory
	push $1
	popax
	add icamx,$a
	pop icamx
	push $2
	popax
	add icamy,$a
	pop icamy
	push $1
	push $2
	call grbgrs,shift
	end method
	end class

	class classadvbut
	method init
	localstring $1
	pop $1
	push $1
	push "but"
	cthis setadvbutmets
	end method
	method setasbutton
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "but"
	clparent classadvbut,setasbutton2
	end method
	method setasbutton2
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	push "setadvbutmets"
	push "setadvbutmets"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setbuttyp"
	push "setbuttyp"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setadvbutpos"
	push "setadvbutpos"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setbutdir"
	push "setbutdir"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setbutbase1"
	push "setbutbase1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setbutbase2"
	push "setbutbase2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setbutbase"
	push "setbutbase"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getbase1"
	push "getbase1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getbase2"
	push "getbase2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getbutdir"
	push "getbutdir"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getbutname"
	push "getbutname"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "gettyp"
	push "gettyp"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "reachable"
	push "reachable"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setreach"
	push "setreach"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getgox"
	push "getgox"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getgoy"
	push "getgoy"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "enable"
	push "enable"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "disable"
	push "disable"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "enabled"
	push "enabled"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setonce"
	push "setonce"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "checkonce"
	push "checkonce"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "setpocket"
	push "classadvbut0"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "getpocket"
	push "classadvbut1"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "moveon"
	push "moveon"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "moveoff"
	push "moveoff"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "clickon"
	push "clickon"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "lrel"
	push "lrel"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "becomebut"
	push "classadvbut2"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "becomeitem"
	push "classadvbut3"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "becomedoors"
	push "classadvbut4"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "copyposfrompt"
	push "classadvbut5"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "butisin"
	push "classadvbut6"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],setadvbutmets
	push $1
	spushs
	push 1
	spop $a
	call [$a],setreach
	end method
	method classadvbut0
	localstring $1
	pop $1
	push $1
	pop _spocket
	end method
	method classadvbut1
	push _spocket
	end method
	method classadvbut2
	cthis getname
	clparent classadvbut,setasbut
	end method
	method classadvbut3
	cthis getname
	clparent classadvbut,setasitem
	end method
	method classadvbut4
	cthis getname
	clparent classadvbut,setasdoors
	end method
	method classadvbut5
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	push $1
	spushs
	push $2
	spop $a
	call [$a],getbyname
	pop $3
	push $1
	spushs
	push $3
	spop $a
	call [$a],getxver
	push $1
	spushs
	spop $a
	call [$a],getposx
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	push $3
	spop $a
	call [$a],getyver
	push $1
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	cthis setadvbutpos
	end method
	method classadvbut6
	cthis isin
	end method
	method setonce
	localstring $1
	pop $1
	push $1
	pop _sonce
	end method
	method checkonce
	push _sonce
	push "null"
	cmpjne
	cmp0
	je l2177
	push _sonce
	call clsave,bis
	neg
	jmp l2179
l2177:
	push 0
	jmp l2179
l2178:
	push 1
l2179:
	cmp0
	je l2180
	push _sonce
	call clsave,bset
	cthis disable
l2180:
	end method
	method setadvbutmets
	localstring $1
	localstring $2
	pop $2
	pop $1
	new string,_styp
	push $2
	pop _styp
	new string,_sname
	push $1
	pop _sname
	new int,igox
	cthis getposx
	pop igox
	new int,igoy
	cthis getposy
	pop igoy
	new string,sgox
	push "null"
	pop sgox
	new string,sgoy
	push "null"
	pop sgoy
	new string,_sbutdir
	push "auto"
	pop _sbutdir
	new string,_sbase1
	push "look:"
	push 1
	call modadv,get
	pop _sbase1
	new string,_sbase2
	push "look:"
	push 2
	call modadv,get
	pop _sbase2
	new int,breachable
	push 0
	pop breachable
	new string,_spocket
	push $1
	pop _spocket
	new string,_sonce
	push "null"
	pop _sonce
	push A
	push "baseuse1"
	push _sbase1
	push "baseuse2"
	push _sbase2
	push "hideontake"
	push 1
	cthis vars2
	cthis enable
	end method
	method setasmask
	localstring $1
	pop $1
	push $1
	spushs
	push "butisin"
	push "classadvbut7"
	spop $a
	call [$a],addmethod
	end method
	method classadvbut7
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push $2
	push 0
	push $4
	cthis isin
	end method
	method enable
	push AdventureGame
	neg
	cmp0
	je l2182
	ret
l2182:
	cthis getname
	call grbuts,addonce
	end method
	method disable
	push AdventureGame
	neg
	cmp0
	je l2184
	ret
l2184:
	cthis getname
	call grbuts,remove
	end method
	method enabled
	push AdventureGame
	neg
	cmp0
	je l2186
	ret
l2186:
	cthis getname
	call grbuts,contains
	ret
	end method
	method setbutbase
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis setbutbase1
	push $2
	cthis setbutbase2
	end method
	method setreach
	localint $1
	pop $1
	push $1
	pop breachable
	end method
	method reachable
	push breachable
	ret
	end method
	method setbuttyp
	localstring $1
	pop $1
	push $1
	pop _styp
	end method
	method lrel
	end method
	method clickon
	cthis reachable
	cmp0
	je l2188
	cthis getname
	call clwalkq,visit
l2188:
	end method
	method moveon
	call advmouse,setactive
	end method
	method moveoff
	call advmouse,setstd
	end method
	method setadvbutpos
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop sgox
	push $2
	pop sgoy
	push $1
	pop igox
	push $2
	pop igoy
	end method
	method setbutdir
	localstring $1
	pop $1
	push $1
	pop _sbutdir
	end method
	method setbutbase1
	localstring $1
	pop $1
	push $1
	pop _sbase1
	push $1
	pop baseuse1
	end method
	method setbutbase2
	localstring $1
	pop $1
	push $1
	pop _sbase2
	push $1
	pop baseuse2
	end method
	method getbase1
	push _sbase1
	ret
	end method
	method getbase2
	push _sbase2
	ret
	end method
	method getbutdir
	push _sbutdir
	ret
	end method
	method getbutname
	push _sname
	ret
	end method
	method gettyp
	push _styp
	ret
	end method
	method getgox
	push sgox
	push "-hero"
	cmpje
	cmp0
	je l2190
	push sgoy
	push "-main"
	cmpje
	cmp0
	je l2192
	push smainhero
	spushs
	spop $a
	call [$a],getposx
	jmp l2191
l2192:
	push sgoy
	spushs
	spop $a
	call [$a],getposx
l2191:
	jmp l2189
l2190:
	push sgox
	push "-but"
	cmpje
	cmp0
	je l2194
	push sgoy
	spushs
	spop $a
	call [$a],getcx
	jmp l2193
l2194:
	push igox
	call clcamera,getposx
	pop $b
	popax
	add $a,$b
l2193:
l2189:
	end method
	method getgoy
	push sgox
	push "-hero"
	cmpje
	cmp0
	je l2196
	push sgoy
	push "-main"
	cmpje
	cmp0
	je l2198
	push smainhero
	spushs
	spop $a
	call [$a],getposy
	jmp l2197
l2198:
	push sgoy
	spushs
	spop $a
	call [$a],getposy
l2197:
	jmp l2195
l2196:
	push sgox
	push "-but"
	cmpje
	cmp0
	je l2200
	push sgoy
	spushs
	spop $a
	call [$a],getey
	jmp l2199
l2200:
	push igoy
	call clcamera,getposy
	pop $b
	popax
	add $a,$b
l2199:
l2195:
	end method
	method getposx
	push 0
	ret
	end method
	method getposy
	push 0
	ret
	end method
	method getz
	push 0
	ret
	end method
	method butisin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push 0
	ret
	end method
	method setasbut
	localstring $1
	pop $1
	push $1
	spushs
	push "moveon"
	push "moveon"
	spop $a
	call [$a],addmethod
	end method
	method setasitem
	localstring $1
	pop $1
	push $1
	spushs
	push "take:"
	push 1
	call modadv,get
	push "take:"
	push 2
	call modadv,get
	spop $a
	call [$a],setbutbase
	push $1
	spushs
	push "moveon"
	push "moveon"
	spop $a
	call [$a],addmethod
	end method
	method setasdoors
	localstring $1
	pop $1
	push $1
	spushs
	push "moveon"
	push "classadvbut8"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "doors:"
	push 1
	call modadv,get
	push "doors:"
	push 2
	call modadv,get
	spop $a
	call [$a],setbutbase
	end method
	method classadvbut8
	call advmouse,setexit
	end method
	end class

	class classadvitem
	parent classadvbut
	method init
	localstring $1
	pop $1
	push $1
	push "item"
	clparent classadvbut,init
	push "take:"
	push 1
	call modadv,get
	push "take:"
	push 2
	call modadv,get
	cthis setbutbase
	end method
	method setasbutton
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "item"
	clparent classadvbut,setasbutton2
	push $1
	spushs
	push "take:"
	push 1
	call modadv,get
	push "take:"
	push 2
	call modadv,get
	spop $a
	call [$a],setbutbase
	end method
	end class

	class classadvdoors
	parent classadvbut
	method init
	localstring $1
	pop $1
	push $1
	push "doors"
	clparent classadvbut,init
	push "doors:"
	push 1
	call modadv,get
	push "doors:"
	push 2
	call modadv,get
	cthis setbutbase
	end method
	method setasbutton
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	push "doors"
	clparent classadvbut,setasbutton2
	push $1
	spushs
	push "moveon"
	push "moveon"
	spop $a
	call [$a],addmethod
	push $1
	spushs
	push "doors:"
	push 1
	call modadv,get
	push "doors:"
	push 2
	call modadv,get
	spop $a
	call [$a],setbutbase
	end method
	method moveon
	call advmouse,setexit
	end method
	end class

	class classbehhero
	method init
	new string,_snextbeh
	push "null"
	pop _snextbeh
	new string,_stdfinfun
	push "null"
	pop _stdfinfun
	new string,_stdfinobj
	push "null"
	pop _stdfinobj
	new string,_stype
	push "null"
	pop _stype
	new string,_scaller
	new int,bblock
	push 1
	pop bblock
	new int,bparal
	push 0
	pop bparal
	end method
	method gonext
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
	push bparal
	cmp0
	je l2202
	push _sstarter
	spushs
	cthis getname
	spop $a
	call [$a],behret
	pop $2
	jmp l2201
l2202:
	push _sstarter
	spushs
	spop $a
	call [$a],isenumer
	cmp0
	je l2204
	push _sstarter
	cthis getname
	cmpjne
	jmp l2206
l2204:
	push 0
	jmp l2206
l2205:
	push 1
l2206:
	cmp0
	je l2207
	push 1
	pop $2
	jmp l2203
l2207:
	push _snextbeh
	push "null"
	cmpjne
	cmp0
	je l2209
	push _snextbeh
	spushs
	push $1
	spop $a
	call [$a],eval
	jmp l2208
l2209:
	push 1
	pop $2
l2208:
l2203:
l2201:
	push $2
	cmp0
	je l2211
	push $1
	cthis finishbeh
l2211:
	end method
	method finishbeh
	localstring $1
	pop $1
	push $1
	push "null"
	cmpjne
	cmp0
	je l2213
	push $1
	spushs
	spop $a
	call [$a],reteval
	jmp l2212
l2213:
	call modstnd,resume
	localstring $2
	cthis getactbeh
	pop $2
	push _sstarter
	spushs
	spop $a
	call [$a],callbehfin
	cthis getactbeh
	push $2
	cmpje
	cmp0
	je l2215
	push "null"
	cthis setactbeh
l2215:
l2212:
	end method
	method playfin
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push $2
	cthis setfinfun
	cthis advgetlock
	pop _bmslock
	push bblock
	cthis advmssetlock
	call modstnd,pause
	push "null"
	cthis eval
	end method
	method eval
	localstring $1
	pop $1
	cthis getname
	cthis setactbeh
	push $1
	pop _scaller
	cthis _eval
	end method
	method rewind
	push "_rew"
	cthis hasaddedmet
	cmp0
	je l2217
	cthis _rew
l2217:
	end method
	method reteval
	push _scaller
	cthis gonext
	end method
	method callbehfin
	push _bmslock
	cthis advmssetlock
	push _stdfinobj
	push _stdfinfun
	cthis callfun
	push "null"
	pop _stdfinobj
	push "null"
	pop _stdfinfun
	cthis getname
	spushs
	push _sbeh
	spop $a
	call $a,strsubbs
	push "_FINISH"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method _evalenter
	cthis getname
	push "reteval"
	call ccs,obenter
	end method
	method _evalclose
	cthis getname
	push "reteval"
	call ccs,obclose
	end method
	method _evalmusic
	call vmus,getfullname
	push 0
	call _music,playvec
	cthis reteval
	end method
	method _evalscript
	push _id
	push 0
	cmpjae
	cmp0
	je l2219
	localint $1
	push _id
	pop $1
	localdef $2
	push _sdb
	spushs
	push _row
	push $1
	spop $a
	call [$a],get
	pop $2
l2220:
	push $2
	push ")"
	cmpjne
	cmp0
	je l2221
	push _sscr
	spushs
	push $1
	push _id
	pop $b
	popax
	sub $a,$b
	push $2
	spop $a
	call [$a],ARG=
	add $1,1
	pop $1
	push _sdb
	spushs
	push _row
	push $1
	spop $a
	call [$a],get
	pop $2
	jmp l2220
l2221:
l2219:
	push _sscr
	spushs
	push _sfun2
	spop $a
	call [$a],call
	cthis reteval
	end method
	method _evalmet
	push _sob2
	push _sfun2
	cthis callfun
	cthis reteval
	end method
	method _evalsave
	push ssavvar
	push ssavval
	call clsave,set
	cthis reteval
	end method
	method _evalgame
	localstring $1
	call gameapi,getgamename
	pop $1
	push _styp
	spushs
	push "-def"
	cmpst
	jne l2223
	spop $a
	push $1
	spushs
	push _spath
	push _sgame
	spop $a
	call [$a],playfromscript
	jmp l2222
l2223:
	push "-adv"
	cmpst
	jne l2224
	spop $a
	push $1
	spushs
	push _sgame
	push _spath
	spop $a
	call [$a],playnewgamepath
	jmp l2222
l2224:
	spop $a
	push $1
	spushs
	push _sgame
	spop $a
	call [$a],playnewgame
l2222:
	cthis reteval
	end method
	method _evalread
	push _sread
	push _ix
	push _iy
	push _sdir
	call clhilarytxt,herosaydir
	end method
	method _rewread
	call clhilarytxt,stop
	cthis reteval
	end method
	method _evalwait
	call timwait,play
	end method
	method _evaltalk
	localstring $1
	push _spathpref
	push _san
	pop $b
	popax
	add $a,$b
	pop $1
	localstring $2
	push _stalkpref
	push _san
	pop $b
	popax
	add $a,$b
	pop $2
	push $1
	call engine,varexist
	cmp0
	je l2226
	push $2
	spushs
	spop $a
	call [$a],getdir
	push $2
	spushs
	push _sdir
	spop $a
	call [$a],getpropdir
	cmpjne
	jmp l2228
l2226:
	push 0
	jmp l2228
l2227:
	push 1
l2228:
	cmp0
	je l2229
	push $1
	spushs
	push _sdir
	cthis getname
	push "_evaltalk"
	spop $a
	call [$a],heroturn
	ret
l2229:
	push _san
	cthis advanstand
	push $2
	spushs
	call modadv,gettalktype
	spop $a
	call [$a],settalktype
	push $2
	spushs
	push __swav
	spop $a
	call [$a],setsnd
	push $2
	spushs
	push __sbase
	spop $a
	call [$a],checkamounts
	push $2
	spushs
	push isort
	push bstt
	push bstp
	cthis getname
	push "reteval"
	push $2
	spushs
	push _sdir
	spop $a
	call [$a],getpropdir
	spop $a
	call [$a],herosaydir
	end method
	method _rewtalk
	push _stalkpref
	push _san
	pop $b
	popax
	add $a,$b
	spushs
	push 1
	spop $a
	call [$a],stop
	end method
	method _evalsetpos
	localint $1
	localint $2
	localstring $3
	push _spathpref
	push _san
	pop $b
	popax
	add $a,$b
	pop $3
	push _idestx
	push "-id"
	cmpje
	cmp0
	je l2231
	push $3
	spushs
	push _idesty
	spop $a
	call [$a],getbyname
	pop $2
	push $3
	spushs
	push $2
	spop $a
	call [$a],getxver
	pop $1
	push $3
	spushs
	push $2
	spop $a
	call [$a],getyver
	pop $2
	push _san
	spushs
	push $1
	push $2
	spop $a
	call [$a],setpos
	jmp l2230
l2231:
	push _idestx
	pop $1
	push _idesty
	pop $2
	push _san
	spushs
	push $1
	call clcamera,getposx
	pop $b
	popax
	add $a,$b
	push $2
	call clcamera,getposy
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
l2230:
	push _bssc
	cmp0
	je l2233
	call clcamera,setscene
l2233:
	push $3
	call engine,varexist
	cmp0
	je l2235
	push $3
	spushs
	spop $a
	call [$a],scalean
l2235:
	push _san
	spushs
	push _san
	spushs
	spop $a
	call [$a],getposy
	spop $a
	call [$a],setz
	push _sdir
	push "auto"
	cmpjne
	cmp0
	je l2237
	push _san
	spushs
	push _sdir
	spop $a
	call [$a],setdir
l2237:
	cthis reteval
	end method
	method _evalwalk
	localint $1
	localint $2
	push _idestx
	push "-id"
	cmpje
	cmp0
	je l2239
	push _sptf
	spushs
	push _idesty
	spop $a
	call [$a],getbyname
	pop $2
	push _sptf
	spushs
	push $2
	spop $a
	call [$a],getxver
	push _sptf
	spushs
	spop $a
	call [$a],getposx
	pop $b
	popax
	sub $a,$b
	pop $1
	push _sptf
	spushs
	push $2
	spop $a
	call [$a],getyver
	push _sptf
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	pop $2
	jmp l2238
l2239:
	push _idestx
	push "-hero"
	cmpje
	cmp0
	je l2241
	push _idesty
	spushs
	spop $a
	call [$a],getposx
	pop $1
	push _idesty
	spushs
	spop $a
	call [$a],getposy
	pop $2
	localint $3
	push 1
	pop $3
	push _sptf
	spushs
	push $1
	push $2
	spop $a
	call [$a],ptfgoto
	push 0
	cmpjae
	cmp0
	je l2243
	push _sptf
	spushs
	push 1
	spop $a
	call [$a],getgover
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l2245
	push _sptf
	spushs
	push $2
	spop $a
	call [$a],getxver
	pop $1
	push _sptf
	spushs
	push $2
	spop $a
	call [$a],getyver
	pop $2
	push 0
	pop $3
l2245:
l2243:
	push _sptf
	spushs
	push 0
	spop $a
	call [$a],stop
	push $3
	cmp0
	je l2247
	localdef $4
	push _spathpref
	call _sptf,strsubbs
	pop $4
	push $4
	spushs
	spop $a
	call [$a],getposx
	pop $1
	push $4
	spushs
	spop $a
	call [$a],getposy
	pop $2
l2247:
	jmp l2240
l2241:
	push _idestx
	pop $1
	push _idesty
	pop $2
l2240:
l2238:
	push _sptf
	spushs
	push $1
	call clcamera,getposx
	pop $b
	popax
	add $a,$b
	push $2
	call clcamera,getposy
	pop $b
	popax
	add $a,$b
	cthis getname
	push "reteval"
	spop $a
	call [$a],herowalkto2
	end method
	method _evalturn
	localstring $1
	push _sdir
	pop $1
	push A
	push "uu"
	push "ru"
	push "rr"
	push "rd"
	push "dd"
	push "ld"
	push "ll"
	push "lu"
	call $1,in
	neg
	cmp0
	je l2249
	localstring $2
	push _sptf
	spushs
	spop $a
	call [$a],getanim
	pop $2
	push _sptf
	spushs
	push $1
	spushs
	spop $a
	call [$a],getposx
	push $2
	spushs
	spop $a
	call [$a],getposx
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getposy
	push $2
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],vecdir
	pop $1
l2249:
	push _sptf
	spushs
	push $1
	cthis getname
	push "reteval"
	spop $a
	call [$a],heroturn
	end method
	method _evalanorder
	push _san
	cthis advanstand
	push _sdb
	push _irow
	push _icol
	push _san
	cthis analizeaninstr
	popax
	cthis reteval
	end method
	method _evalanplay
	push _san
	spushs
	push "bthisfin"
	spop $a
	call [$a],hasvar
	neg
	cmp0
	je l2251
	push _san
	spushs
	spop $a
	call [$a],setasadvanima
l2251:
	push _san
	cthis advanstand
	push _san
	spushs
	push 1
	spop $a
	call [$a],thisfinish
	push _sact
	clparent StringChecker,isdigit
	cmp0
	je l2253
	push _san
	spushs
	push _sact
	spop $a
	call [$a],nameofaction
	pop _sact
l2253:
	push _san
	spushs
	push _sact
	cthis getname
	push "reteval"
	spop $a
	call [$a],playspec2
	end method
	method _rewanplay
	end method
	method _evalsndbg
	call _sndbg,getfullname
	cthis cbsplay
	cthis reteval
	end method
	method _evalsndplay
	call sndp,getfullname
	cthis cbsplay
	end method
	method _rewsndplay
	push 1
	call sndp,stop
	end method
	method _evalcall
	localstring $1
	push scallobj
	pop $1
	push "$"
	call $1,contains
	cmp0
	je l2255
	push 1
	call $1,strsubb
	pop $1
	push $1
	call engine,varexist
	cmp0
	je l2257
	push $1
	popax
	mov $a,[$a]
	psax
	jmp l2256
l2257:
	push sscript
	spushs
	push $1
	spop $a
	call [$a],get
l2256:
	pop $1
	push $1
	push "null"
	cmpje
	cmp0
	je l2259
	cthis reteval
	ret
l2259:
l2255:
	push $1
	cthis getbeh
	pop $1
	push $1
	spushs
	cthis getname
	spop $a
	call [$a],eval
	end method
	method _evalnull
	cthis reteval
	end method
	method _evalstart
	localint $1
	localstring $2
	call vbif,free
	push bonce
	push "null"
	cmpjne
	cmp0
	je l2261
	push bonce
	call clsave,bis
	neg
	cmp0
	je l2263
	push bonce
	call clsave,bset
	jmp l2262
l2263:
	push _scaller
	cthis finishbeh
	ret
l2262:
l2261:
	push iisifsave
	push 0
	cmpje
	cmp0
	je l2265
	push sisifsave
	push sisifvar
	call clsave,is
	jmp l2267
l2265:
	push 0
	jmp l2267
l2266:
	push 1
l2267:
	cmp0
	jne l2269
	push iisifsave
	push 1
	cmpje
	cmp0
	je l2270
	push sisifsave
	push sisifvar
	call clsave,is
	neg
	jmp l2272
l2270:
	push 0
	jmp l2272
l2271:
	push 1
l2272:
	jmp l2273
l2268:
	push 0
	jmp l2273
l2269:
	push 1
l2273:
	cmp0
	je l2274
	push _scaller
	cthis finishbeh
	ret
l2274:
	push brand
	cmp0
	je l2276
	call vecbehs,size
	pop $1
	push $1
	push 0
	cmpja
	cmp0
	je l2278
	call $1,rand
	call vecbehs,get
	spushs
	push _scaller
	spop $a
	call [$a],eval
	jmp l2277
l2278:
	cthis reteval
l2277:
	jmp l2275
l2276:
	push bparal
	cmp0
	je l2280
	push "vecbehs"
	call vecbehs2,veccopy
	push 0
	pop $1
l2281:
	push $1
	call vecbehs,size
	cmpjl
	cmp0
	je l2282
	jmp l2284
l2283:
	add $1,1
	pop $1
	jmp l2281
l2284:
	push $1
	call vecbehs,get
	spushs
	push _scaller
	spop $a
	call [$a],eval
	jmp l2283
l2282:
	jmp l2279
l2280:
	push ienumer
	push 0
	cmpja
	cmp0
	je l2286
	cthis nextenum
	push 1
	pop $b
	popax
	sub $a,$b
	call vecbehs,get
	spushs
	push _scaller
	spop $a
	call [$a],eval
	jmp l2285
l2286:
	cthis reteval
l2285:
l2279:
l2275:
	end method
	method _ifst
	localint $1
	localint $2
	pop $2
	pop $1
	push ifst
	spushs
	push 1
	cmpst
	jne l2288
	spop $a
	push $1
	cmp0
	je l2289
	push $2
	jmp l2291
l2289:
	push 0
	jmp l2291
l2290:
	push 1
l2291:
	jmp l2287
l2288:
	push 2
	cmpst
	jne l2292
	spop $a
	push $1
	cmp0
	jne l2294
	push $2
	jmp l2295
l2293:
	push 0
	jmp l2295
l2294:
	push 1
l2295:
	jmp l2287
l2292:
	spop $a
	push $1
l2287:
	end method
	method _oper_check
	localstring $1
	pop $1
	push $1
	spushs
	push "|"
	cmpst
	jne l2297
	spop $a
	push 2
	jmp l2296
l2297:
	push "&"
	cmpst
	jne l2298
	spop $a
	push 1
	jmp l2296
l2298:
	spop $a
	push 0
l2296:
	end method
	method _ifcheck
	localint $1
	localint $2
	localstring $3
	localstring $4
	localint $5
	push istart
	pop $5
	push 0
	pop ifst
l2299:
	push $5
	push istop
	cmpjl
	cmp0
	je l2300
	push _db
	spushs
	push irow
	push $5
	spop $a
	call [$a],get
	pop $3
	push _db
	spushs
	push irow
	push $5
	spop $a
	call [$a],dbchecknext
	pop $4
	push $4
	spushs
	push "="
	cmpst
	jne l2302
	spop $a
	push 2
	popax
	add $5,$a
	pop $5
	push $3
	push _db
	spushs
	push irow
	push $5
	spop $a
	call [$a],get
	call clsave,is
	pop $2
	push $2
	push $1
	cthis _ifst
	pop $1
	push _db
	spushs
	push irow
	push $5
	spop $a
	call [$a],dbchecknext
	cthis _oper_check
	pop ifst
	push ifst
	cmp0
	je l2304
	add $5,1
	pop $5
l2304:
	jmp l2301
l2302:
	push "!="
	cmpst
	jne l2305
	spop $a
	push 2
	popax
	add $5,$a
	pop $5
	push $3
	push _db
	spushs
	push irow
	push $5
	spop $a
	call [$a],get
	call clsave,is
	neg
	pop $2
	push $2
	push $1
	cthis _ifst
	pop $1
	push _db
	spushs
	push irow
	push $5
	spop $a
	call [$a],dbchecknext
	cthis _oper_check
	pop ifst
	push ifst
	cmp0
	je l2307
	add $5,1
	pop $5
l2307:
	jmp l2301
l2305:
	push "&"
	cmpst
	jne l2308
	spop $a
	add $5,1
	pop $5
	push 0
	push 1
	call $3,getb
	push "!"
	cmpje
	cmp0
	je l2310
	push 1
	call $3,strsubb
	call clsave,bis
	neg
	jmp l2309
l2310:
	push $3
	call clsave,bis
l2309:
	pop $2
	push $2
	push $1
	cthis _ifst
	pop $1
	push 1
	pop ifst
	jmp l2301
l2308:
	push "|"
	cmpst
	jne l2311
	spop $a
	add $5,1
	pop $5
	push 0
	push 1
	call $3,getb
	push "!"
	cmpje
	cmp0
	je l2313
	push 1
	call $3,strsubb
	call clsave,bis
	neg
	jmp l2312
l2313:
	push $3
	call clsave,bis
l2312:
	pop $2
	push $2
	push $1
	cthis _ifst
	pop $1
	push 2
	pop ifst
	jmp l2301
l2311:
	spop $a
	push 0
	push 1
	call $3,getb
	push "!"
	cmpje
	cmp0
	je l2315
	push 1
	call $3,strsubb
	call clsave,bis
	neg
	jmp l2314
l2315:
	push $3
	call clsave,bis
l2314:
	pop $2
	push $2
	push $1
	cthis _ifst
	pop $1
l2301:
	add $5,1
	pop $5
	jmp l2299
l2300:
	push _sstarter
	spushs
	push $1
	spop $a
	call [$a],bif=
	push $1
	end method
	method _checkif
	cthis _ifcheck
	cmp0
	je l2317
	cthis reteval
	jmp l2316
l2317:
	push _sstarter
	spushs
	cthis getname
	spop $a
	call [$a],classbehhero0
l2316:
	end method
	method classbehhero0
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
	localint $3
	call vecbehs,size
	pop $3
	localint $4
	push 0
	pop $4
	localint $5
	push $1
	call vecbehs,find
	push 1
	pop $b
	popax
	add $a,$b
	pop $5
l2318:
	push $5
	push $3
	cmpjl
	cmp0
	je l2319
	jmp l2321
l2320:
	add $5,1
	pop $5
	jmp l2318
l2321:
	push $5
	call vecbehs,get
	spushs
	spop $a
	call [$a],gettyp
	spushs
	push "IF"
	cmpst
	jne l2323
	spop $a
	add $2,1
	pop $2
	jmp l2322
l2323:
	push "FI"
	cmpst
	jne l2324
	spop $a
	push $2
	push 0
	cmpje
	cmp0
	je l2326
	push $5
	pop $4
	push $3
	pop $5
	jmp l2325
l2326:
	sub $2,1
	pop $2
l2325:
	jmp l2322
l2324:
	push "ELSE"
	cmpst
	je l2328
	push "ELIF"
	cmpst
	je l2328
	jmp l2327
l2328:
	spop $a
	push $2
	push 0
	cmpje
	cmp0
	je l2330
	push $5
	pop $4
	push $3
	pop $5
l2330:
	jmp l2322
l2327:
	spop $a
l2322:
	jmp l2320
l2319:
	push $4
	call vecbehs,get
	spushs
	push _scaller
	spop $a
	call [$a],eval
	end method
	method _evalIF
	push _sstarter
	spushs
	spop $a
	call [$a],ifpush
	cthis _checkif
	end method
	method _gotofi
	localstring $1
	pop $1
	localint $2
	push 0
	pop $2
	localint $3
	push $1
	call vecbehs,find
	push 1
	pop $b
	popax
	add $a,$b
	pop $3
l2331:
	push $3
	call vecbehs,size
	cmpjl
	cmp0
	je l2332
	jmp l2334
l2333:
	add $3,1
	pop $3
	jmp l2331
l2334:
	push $3
	call vecbehs,get
	spushs
	spop $a
	call [$a],gettyp
	spushs
	push "IF"
	cmpst
	jne l2336
	spop $a
	add $2,1
	pop $2
	jmp l2335
l2336:
	push "FI"
	cmpst
	jne l2337
	spop $a
	push $2
	push 0
	cmpje
	cmp0
	je l2339
	push $3
	call vecbehs,get
	spushs
	push _scaller
	spop $a
	call [$a],eval
	ret
	jmp l2338
l2339:
	sub $2,1
	pop $2
l2338:
	jmp l2335
l2337:
	spop $a
l2335:
	jmp l2333
l2332:
	end method
	method _evalELIF
	push _sstarter
	spushs
	spop $a
	call [$a],bif
	cmp0
	je l2341
	push _sstarter
	spushs
	cthis getname
	spop $a
	call [$a],_gotofi
	jmp l2340
l2341:
	cthis _checkif
l2340:
	end method
	method _evalELSE
	push _sstarter
	spushs
	spop $a
	call [$a],bif
	cmp0
	je l2343
	push _sstarter
	spushs
	cthis getname
	spop $a
	call [$a],_gotofi
	jmp l2342
l2343:
	cthis reteval
l2342:
	end method
	method _evalFI
	push _sstarter
	spushs
	spop $a
	call [$a],ifpop
	cthis reteval
	end method
	method gettyp
	push _stype
	end method
	method settype
	localstring $1
	pop $1
	push $1
	pop _stype
	push "_eval"
	push "_eval"
	push $1
	pop $b
	popax
	add $a,$b
	cthis addmethod
	push "_rew"
	push $1
	pop $b
	popax
	add $a,$b
	cthis hasmet
	cmp0
	je l2345
	push "_rew"
	push "_rew"
	push $1
	pop $b
	popax
	add $a,$b
	cthis addmethod
l2345:
	end method
	method setflags
	localstring $1
	pop $1
	push $1
	pop _snextbeh
	end method
	method setfinfun
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	pop _stdfinobj
	push $2
	pop _stdfinfun
	end method
	method setasstarter
	localstring $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	localstring $7
	localstring $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push "start"
	cthis settype
	new string,_sstarter
	cthis getname
	pop _sstarter
	new int,brand
	push $2
	pop brand
	new int,_bmslock
	new vector,vecbehs
	push $4
	pop bblock
	push "string"
	call vecbehs,type
	new string,bonce
	push $1
	pop bonce
	push $3
	pop bparal
	new int,ienumer
	push $5
	pop ienumer
	push $5
	push 0
	cmpja
	cmp0
	je l2347
	new int,_iencnt
	push 1
	pop _iencnt
	jmp l2346
l2347:
	push $3
	cmp0
	je l2349
	new vector,vecbehs2
	push "string"
	call vecbehs2,type
l2349:
l2346:
	new int,iisifsave
	push $6
	pop iisifsave
	push $6
	push 0
	cmpjae
	cmp0
	je l2351
	new string,sisifsave
	push $7
	pop sisifsave
	push $8
	push "null"
	cmpjne
	cmp0
	je l2353
	new string,sisifvar
	push $8
	pop sisifvar
l2353:
l2351:
	new vector,vbif
	end method
	method bif
	call vbif,last
	end method
	method bif=
	localint $1
	pop $1
	call vbif,size
	push 1
	pop $b
	popax
	sub $a,$b
	push $1
	call vbif,set
	end method
	method ifpush
	push 1
	call vbif,add
	end method
	method ifpop
	call vbif,pop
	popax
	end method
	method isenumer
	push ienumer
	ret
	end method
	method nextenum
	push _iencnt
	call vecbehs,size
	cmpja
	cmp0
	je l2355
	push ienumer
	push 1
	pop $b
	popax
	add $a,$b
	pop _iencnt
	jmp l2354
l2355:
	add _iencnt,1
	pop _iencnt
l2354:
	push _iencnt
	push 1
	pop $b
	popax
	sub $a,$b
	ret
	end method
	method addtostarter
	localstring $1
	pop $1
	push $1
	call vecbehs,add
	end method
	method getblock
	push bblock
	ret
	end method
	method addflags
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	new string,_sstarter
	push $1
	pop _sstarter
	push _stype
	push "read"
	cmpje
	cmp0
	je l2357
	push 0
	jmp l2356
l2357:
	push $2
l2356:
	pop bblock
	push $3
	pop bparal
	end method
	method behret
	localstring $1
	pop $1
	push $1
	call vecbehs2,remove
	call vecbehs2,size
	push 0
	cmpje
	ret
	end method
	method _setasif
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	new int,istart
	push $3
	pop istart
	new int,istop
	push $4
	pop istop
	new string,_db
	push $1
	pop _db
	new int,irow
	push $2
	pop irow
	new int,ifst
	push 0
	pop ifst
	end method
	method setasIF
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "IF"
	cthis settype
	push $1
	push $2
	push $3
	push $4
	cthis _setasif
	end method
	method setasELIF
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "ELIF"
	cthis settype
	push $1
	push $2
	push $3
	push $4
	cthis _setasif
	end method
	method setas
	localstring $1
	pop $1
	push $1
	cthis settype
	end method
	method setasscript
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push "script"
	cthis settype
	new string,_sscr
	push $1
	pop _sscr
	new string,_sfun2
	push $2
	pop _sfun2
	new int,_id
	push $5
	pop _id
	new string,_sdb
	push $3
	pop _sdb
	new int,_row
	push $4
	pop _row
	end method
	method setasuse
	localstring $1
	pop $1
	push "use"
	cthis settype
	new string,_sitem
	push $1
	pop _sitem
	end method
	method _evaluse
	push _spocketpref
	cthis getmainhero
	pop $b
	popax
	add $a,$b
	spushs
	push _sitem
	spop $a
	call [$a],pckremove
	cthis reteval
	end method
	method _evaltopck
	push _spocketpref
	cthis getmainhero
	pop $b
	popax
	add $a,$b
	spushs
	push _sitem
	push _sfile
	spop $a
	call [$a],additem
	cthis reteval
	end method
	method setastopck
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "topck"
	cthis settype
	new string,_sitem
	push $1
	pop _sitem
	new string,_sfile
	push $2
	pop _sfile
	end method
	method setasmet
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "met"
	cthis settype
	new string,_sob2
	push $1
	pop _sob2
	new string,_sfun2
	push $2
	pop _sfun2
	end method
	method setassaver
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "save"
	cthis settype
	new string,ssavvar
	push $1
	pop ssavvar
	new string,ssavval
	push $2
	pop ssavval
	end method
	method setasnewgamer
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push "game"
	cthis settype
	new string,_sgame
	push $3
	pop _sgame
	new string,_styp
	push $1
	pop _styp
	new string,_spath
	push $2
	pop _spath
	end method
	method setasreader
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "read"
	cthis settype
	new string,_sread
	push $1
	pop _sread
	new int,_ix
	push $2
	pop _ix
	new int,_iy
	push $3
	pop _iy
	new string,_sdir
	push $4
	pop _sdir
	end method
	method setaswaiter
	localint $1
	pop $1
	push "wait"
	cthis settype
	new timer,timwait
	push 1
	call timwait,settick
	push $1
	call timwait,delay
	cthis getname
	push "reteval"
	call timwait,_csplbuild
	push "onfinish"
	push "_csplfinish"
	call timwait,addmethod
	end method
	method setassndbg
	localstring $1
	localint $2
	pop $2
	pop $1
	push "sndbg"
	cthis settype
	new snd,_sndbg
	call _sndbg,buildfullname
	push 0
	push 1
	call _sndbg,setstartstopflag
	push $1
	push ".wav"
	pop $b
	popax
	add $a,$b
	call _sndbg,advloadsnd
	push $2
	call _sndbg,setvol
	end method
	method _loadsnd
	end method
	method setasanorder
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "anorder"
	cthis settype
	new string,_sdb
	push $1
	pop _sdb
	new int,_irow
	push $2
	pop _irow
	new int,_icol
	push $3
	pop _icol
	new string,_san
	push $4
	pop _san
	end method
	method setascaller
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "call"
	cthis settype
	new string,scallobj
	push $1
	pop scallobj
	new string,sscript
	push $2
	pop sscript
	end method
	method _csplbuild
	localstring $1
	localstring $2
	pop $2
	pop $1
	new string,_sobj
	push $1
	pop _sobj
	new string,_sfinfun
	push $2
	pop _sfinfun
	end method
	method _csplfinish
	push _sobj
	push _sfinfun
	cthis callfun
	end method
	method setassndplayer
	localstring $1
	localint $2
	pop $2
	pop $1
	push "sndplay"
	cthis settype
	new snd,sndp
	call sndp,buildfullname
	push 0
	push 1
	call sndp,setstartstopflag
	push $1
	push ".wav"
	pop $b
	popax
	add $a,$b
	call sndp,advloadsnd
	cthis getname
	push "reteval"
	call sndp,_csplbuild
	push "onfinish"
	push "_csplfinish"
	call sndp,addmethod
	push $2
	call sndp,setvol
	end method
	method setasposer
	localstring $1
	localstring $2
	localint $3
	localint $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push "setpos"
	cthis settype
	new string,_san
	push $1
	pop _san
	new string,_idestx
	push $2
	pop _idestx
	new int,_idesty
	push $3
	pop _idesty
	new int,_bssc
	push $4
	pop _bssc
	new string,_sdir
	push $5
	pop _sdir
	end method
	method setasturn
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "turn"
	cthis settype
	new string,_sptf
	push $1
	pop _sptf
	new string,_sdir
	push $2
	pop _sdir
	end method
	method setaswalker
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push "walk"
	cthis settype
	new string,_sptf
	push $1
	pop _sptf
	new string,_idestx
	push $2
	pop _idestx
	new string,_idesty
	push $3
	pop _idesty
	end method
	method setasanplayer
	localstring $1
	localstring $2
	pop $2
	pop $1
	push "anplay"
	cthis settype
	new string,_san
	push $1
	pop _san
	new string,_sact
	push $2
	pop _sact
	end method
	method setastalker
	localstring $1
	localstring $2
	localstring $3
	localint $4
	localint $5
	localint $6
	localstring $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push "talk"
	cthis settype
	new string,_san
	push $1
	pop _san
	new string,__swav
	push $2
	pop __swav
	new string,__sbase
	push $3
	pop __sbase
	new int,isort
	push $4
	pop isort
	new int,bstt
	push $5
	pop bstt
	new int,bstp
	push $6
	pop bstp
	new string,_sdir
	push $7
	pop _sdir
	end method
	method setasenter
	push "enter"
	cthis settype
	end method
	method setasclose
	push "close"
	cthis settype
	end method
	method setasmusic
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	push "music"
	cthis settype
	new vector,vmus
	push "string"
	call vmus,type
	call vmus,buildfullname
l2358:
	push $3
	push 0
	cmpjae
	cmp0
	je l2359
	push $3
	push $4
	cmpjl
	jmp l2361
l2359:
	push 0
	jmp l2361
l2360:
	push 1
l2361:
	cmp0
	je l2362
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	call vmus,add
	add $3,1
	pop $3
	jmp l2358
l2362:
	end method
	end class

	new snd,_fx_pocket
	push "sounds/sfx/harfa.wav"
	call _fx_pocket,load
	class classadvpocket
	parent classadvobject
	parent classadvbut
	parent gmimgvec
	method init
	localstring $1
	pop $1
	clparent classadvobject,init
	push $1
	clparent classadvbut,init
	clparent gmimgvec,init
	push "pocket"
	cthis setbuttyp
	push 1
	cthis setreach
	push "-hero"
	push "-main"
	cthis setadvbutpos
	new int,iX
	new int,iY
	new int,iNumItems
	push 0
	pop iNumItems
	new int,iMaxItems
	push 14
	pop iMaxItems
	new int,iScale
	new string,sState
	push "closed"
	pop sState
	new string,_sanim
	cthis getname
	pop _sanim
	push _spocketpref
	call _sanim,strsubbs
	pop _sanim
	new string,sItem
	push "null"
	pop sItem
	new string,sFocusItem
	push "null"
	pop sFocusItem
	new string,_sbase
	push "anpocket"
	pop _sbase
	new int,_ibase
	call _sbase,length
	pop _ibase
	push 1000
	cthis setz
	new string,sitempath
	new vector,arPocket
	push "string"
	call arPocket,type
	new vector,arPocketFile
	push "string"
	call arPocketFile,type
	push "tim"
	push 1
	push 1
	push "evalpocket"
	cthis cnewtimercyclefin
	push "itempath:"
	push 1
	call modadv,get
	pop sitempath
	localint $2
	cthis getz
	pop $2
	new anima,imitem
	call imitem,anloopfin
	push $2
	push 1
	pop $b
	popax
	add $a,$b
	call imitem,setz
	new img,immarker
	push sitempath
	push "itemmarker.png"
	pop $b
	popax
	add $a,$b
	call immarker,load
	push $2
	push 1
	pop $b
	popax
	sub $a,$b
	call immarker,setz
	call immarker,hide
	cthis hide
	new int,bskip
	push 0
	pop bskip
	end method
	method addtoadv
	cthis getname
	cthis addtogamevars
	cthis enable
	cthis addasadvobject
	end method
	method removefromadv
	cthis disable
	cthis removefromadvobjs
	end method
	method hidepocket
	push sState
	push "closed"
	cmpjne
	cmp0
	je l2364
	push sState
	push "close"
	cmpjne
	cmp0
	je l2366
	cthis pockettoggle
	push 0
	call tim,stop
l2366:
l2367:
	push sState
	push "closed"
	cmpjne
	cmp0
	je l2368
	call tim,evalpocket
	push 0
	call tim,stop
	jmp l2367
l2368:
l2364:
	end method
	method exitpocket
	push "closed"
	pop sState
	push 0
	call tim,stop
	cthis hide
	end method
	method skip
	push 1
	pop bskip
	end method
	method skipitem
	push sItem
	push "null"
	cmpjne
	cmp0
	je l2370
	push 1
	pop bskip
l2370:
	end method
	method additem
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	call arPocket,contains
	cmp0
	je l2372
	ret
l2372:
	push $1
	call arPocket,add
	push $2
	call arPocketFile,add
	localstring $3
	push _sbase
	push $1
	pop $b
	popax
	add $a,$b
	pop $3
	push $3
	spushs
	spop $e
	new anima,[$e]
	push $3
	cthis add
	push $3
	spushs
	push sitempath
	push $2
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],load
	push $3
	spushs
	push 0
	spop $a
	call [$a],play
	push $3
	spushs
	cthis getz
	spop $a
	call [$a],setz
	push $3
	spushs
	spop $a
	call [$a],hide
	add iNumItems,1
	pop iNumItems
	end method
	method savestate
	localstring $1
	pop $1
	push "saves/"
	cthis getname
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_name.txt"
	pop $b
	popax
	add $a,$b
	call arPocket,vecsave
	push "saves/"
	cthis getname
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_file.txt"
	pop $b
	popax
	add $a,$b
	call arPocketFile,vecsave
	end method
	method loadstate
	localstring $1
	pop $1
	new vector,vpcp
	push "string"
	call vpcp,type
	new vector,vpcf
	push "string"
	call vpcf,type
	push "saves/"
	cthis getname
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_name.txt"
	pop $b
	popax
	add $a,$b
	call vpcp,vecload
	push "saves/"
	cthis getname
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_file.txt"
	pop $b
	popax
	add $a,$b
	call vpcf,vecload
	localint $2
	push 0
	pop $2
l2373:
	push $2
	call vpcp,size
	cmpjl
	cmp0
	je l2374
	jmp l2376
l2375:
	add $2,1
	pop $2
	jmp l2373
l2376:
	push $2
	call vpcp,get
	push $2
	call vpcf,get
	cthis additem
	jmp l2375
l2374:
	delete vpcp
	delete vpcf
	end method
	method removeitem
	localstring $1
	pop $1
	localdef $2
	push _sbase
	call $1,strsubbs
	call arPocket,find
	pop $2
	push $2
	push 0
	cmpjl
	cmp0
	je l2378
	ret
l2378:
	push $2
	call arPocket,removeat
	push $2
	call arPocketFile,removeat
	push $1
	cthis remove
	push $1
	spushs
	spop $d
	delete [$d]
	sub iNumItems,1
	pop iNumItems
	push sState
	push "opened"
	cmpje
	cmp0
	je l2380
	cthis hide
l2380:
	end method
	method useitem
	push sItem
	push "null"
	cmpjne
	cmp0
	je l2382
	push sItem
	cthis removeitem
	cthis itemhide
l2382:
	end method
	method pckremove
	localstring $1
	pop $1
	push _sbase
	push $1
	pop $b
	popax
	add $a,$b
	cthis removeitem
	end method
	method evalpocket
	cthis play
	push sState
	push "open"
	cmpje
	cmp0
	je l2384
	push 16
	popax
	add iScale,$a
	pop iScale
	jmp l2383
l2384:
	push sState
	push "close"
	cmpje
	cmp0
	je l2386
	push 16
	popax
	sub iScale,$a
	pop iScale
l2386:
l2383:
	push iScale
	push 116
	cmpja
	cmp0
	je l2388
	push 0
	cthis stop
	push 116
	pop iScale
	push "opened"
	pop sState
	jmp l2387
l2388:
	push iScale
	push 0
	cmpjl
	cmp0
	je l2390
	push 0
	cthis stop
	push 0
	pop iScale
	push "closed"
	pop sState
l2390:
l2387:
	localreal $1
	push iScale
	push iScale
	pop $b
	popax
	mul $a,$b
	push 550
	pop $b
	popax
	div $a,$b
	psax
	pop $1
	localreal $2
	localstring $3
	localint $4
	push 0
	pop $4
l2391:
	push $4
	push iNumItems
	cmpjl
	cmp0
	je l2392
	jmp l2394
l2393:
	add $4,1
	pop $4
	jmp l2391
l2394:
	push $1
	push $4
	pop $b
	popax
	mul $a,$b
	push $1
	push iNumItems
	pop $b
	popax
	mul $a,$b
	push 2.0
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push 90.0
	pop $b
	popax
	sub $a,$b
	push $1
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	add $a,$b
	pop $2
	push $4
	cthis get
	pop $3
	push $3
	spushs
	call $2,cos
	push iScale
	pop $b
	popax
	mul $a,$b
	push iX
	pop $b
	popax
	add $a,$b
	push 76
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call $2,sin
	push iScale
	pop $b
	popax
	mul $a,$b
	push iY
	pop $b
	popax
	add $a,$b
	push 75
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	push $3
	spushs
	spop $a
	call [$a],isvisible
	cmp0
	je l2396
	push $3
	spushs
	push 0
	spop $a
	call [$a],play
l2396:
	jmp l2393
l2392:
	push sState
	push "closed"
	cmpje
	cmp0
	je l2398
	cthis hide
l2398:
	end method
	method pocketpos
	localint $1
	localint $2
	pop $2
	pop $1
	localint $3
	push $1
	push iX
	pop $b
	popax
	sub $a,$b
	pop $3
	localint $4
	push $2
	push iY
	pop $b
	popax
	sub $a,$b
	pop $4
	push $3
	push $4
	cthis move
	push $1
	pop iX
	push $2
	pop iY
	end method
	method pockettoggle
	push sState
	push "opened"
	cmpje
	cmp0
	je l2400
	push "close"
	pop sState
	call immarker,hide
	call tim,play
	jmp l2399
l2400:
	push sState
	push "closed"
	cmpje
	cmp0
	je l2402
	push "open"
	pop sState
	call _fx_pocket,play
	push _sanim
	spushs
	spop $a
	call [$a],getposx
	pop iX
	push _sanim
	spushs
	spop $a
	call [$a],getposy
	push _sanim
	spushs
	spop $a
	call [$a],geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	pop iY
	cthis itemhide
	cthis show
	call tim,evalpocket
	call tim,play
	jmp l2401
l2402:
	push sState
	push "open"
	cmpje
	cmp0
	je l2404
	push "close"
	pop sState
	jmp l2403
l2404:
	push sState
	push "close"
	cmpje
	cmp0
	je l2406
	push "open"
	pop sState
l2406:
l2403:
l2401:
l2399:
	end method
	method getitem
	push sItem
	push "null"
	cmpjne
	cmp0
	je l2408
	push _sbase
	call sItem,strsubbs
	jmp l2407
l2408:
	push "null"
l2407:
	ret
	end method
	method itemhide
	push "null"
	pop sFocusItem
	push "null"
	pop sItem
	push 0
	call imitem,stop
	call imitem,hide
	end method
	method itemclick
	cthis skip
	push sState
	push "closed"
	cmpje
	cmp0
	je l2410
	cthis pockettoggle
	jmp l2409
l2410:
	push sState
	push "opened"
	cmpje
	cmp0
	je l2412
	push sFocusItem
	push "null"
	cmpjne
	cmp0
	je l2414
	push sItem
	push "null"
	cmpjne
	cmp0
	je l2416
	cthis pockettoggle
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_USE_"
	pop $b
	popax
	add $a,$b
	push _sbase
	call sItem,strsubbs
	pop $b
	popax
	add $a,$b
	push "_ON_"
	pop $b
	popax
	add $a,$b
	push _sbase
	call sFocusItem,strsubbs
	pop $b
	popax
	add $a,$b
	cthis playbehif
	neg
	pop _b_rewind
	cthis itemhide
	jmp l2415
l2416:
	push sFocusItem
	pop sItem
	push sItem
	call imitem,copy
	push sFocusItem
	spushs
	spop $a
	call [$a],hide
	push 1
	call imitem,play
	cthis getz
	push 1
	pop $b
	popax
	add $a,$b
	call imitem,setz
	cthis setitempos
l2415:
	jmp l2413
l2414:
	cthis pockettoggle
l2413:
	jmp l2411
l2412:
	push sState
	push "open"
	cmpje
	cmp0
	je l2418
	cthis pockettoggle
	jmp l2417
l2418:
	push sState
	push "close"
	cmpje
	cmp0
	je l2420
	cthis pockettoggle
l2420:
l2417:
l2411:
l2409:
	end method
	method butisin
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push $1
	push $2
	push $3
	push $4
	clparent gmimgvec,isin
	pop $5
	push $5
	cmp0
	je l2422
	push $5
	push 1
	pop $b
	popax
	sub $a,$b
	cthis get
	pop sFocusItem
	jmp l2421
l2422:
	push "null"
	pop sFocusItem
	push _sanim
	spushs
	push $1
	push $2
	push $3
	push $4
	spop $a
	call [$a],isin
	pop $5
l2421:
	push $5
	ret
	end method
	method hide
	push "stop"
	push 0
	cthis eval1
	push "hide"
	cthis eval
	call immarker,hide
	end method
	method setitempos
	call mouse,getpx
	push 76
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call mouse,getpy
	push 75
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call imitem,setpos
	end method
	method itemmoveoff
	push sState
	push "opened"
	cmpje
	cmp0
	je l2424
	call immarker,hide
l2424:
	end method
	method itemmoveon
	push sState
	push "opened"
	cmpje
	cmp0
	je l2426
	push sFocusItem
	push "null"
	cmpjne
	cmp0
	je l2428
	call immarker,show
	push sFocusItem
	spushs
	spop $a
	call [$a],getcx
	call immarker,getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push sFocusItem
	spushs
	spop $a
	call [$a],getcy
	call immarker,geth
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call immarker,setpos
l2428:
l2426:
	end method
	method onmouselclick
	localint $1
	localint $2
	pop $2
	pop $1
	push bskip
	cmp0
	je l2430
	push 0
	pop bskip
	push sItem
	push "null"
	cmpjne
	cmp0
	je l2432
	push sState
	push "opened"
	cmpje
	cmp0
	je l2432
	push sFocusItem
	push "null"
	cmpje
	jmp l2434
l2432:
	push 0
	jmp l2434
l2433:
	push 1
l2434:
	cmp0
	je l2435
	cthis pockettoggle
l2435:
	jmp l2429
l2430:
	cthis getmainhero
	push _sanim
	cmpje
	cmp0
	je l2437
	push sState
	push "opened"
	cmpje
	cmp0
	jne l2439
	push sState
	push "open"
	cmpje
	jmp l2440
l2438:
	push 0
	jmp l2440
l2439:
	push 1
l2440:
	cmp0
	je l2442
	cthis pockettoggle
	jmp l2441
l2442:
	cthis itemhide
l2441:
l2437:
l2429:
	end method
	method onmouserclick
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	push 1
	push 1
	cthis butisin
	cmp0
	je l2444
	push sState
	push "opened"
	cmpje
	cmp0
	je l2446
	push sFocusItem
	push "null"
	cmpjne
	jmp l2448
l2446:
	push 0
	jmp l2448
l2447:
	push 1
l2448:
	cmp0
	je l2449
	push "beh_"
	push _sanim
	pop $b
	popax
	add $a,$b
	push "_ITEM_"
	pop $b
	popax
	add $a,$b
	push _sbase
	call sFocusItem,strsubbs
	pop $b
	popax
	add $a,$b
	cthis playbehif
	popax
	jmp l2445
l2449:
	push "beh_RCLICK_"
	push _sanim
	pop $b
	popax
	add $a,$b
	cthis playbehif
	popax
l2445:
l2444:
	end method
	method onmousemove
	localint $1
	localint $2
	pop $2
	pop $1
	push sItem
	push "null"
	cmpjne
	cmp0
	je l2451
	cthis setitempos
l2451:
	push sState
	push "opened"
	cmpje
	cmp0
	je l2453
	push $1
	push $2
	push 1
	push 1
	cthis butisin
	jmp l2455
l2453:
	push 0
	jmp l2455
l2454:
	push 1
l2455:
	cmp0
	je l2456
	cthis itemmoveon
l2456:
	end method
	method moveoff
	call advmouse,setstd
	cthis itemmoveoff
	end method
	method clickon
	cthis getmainhero
	push _sanim
	cmpje
	cmp0
	je l2458
	call clwalkq,stand
	cthis itemclick
	jmp l2457
l2458:
	cthis getname
	call clwalkq,visit
l2457:
	end method
	end class

	new string,sgmlastscene
	push "null"
	pop sgmlastscene
	new string,sgmglobpath
	push "null"
	pop sgmglobpath
	new string,sgmgame
	push "null"
	pop sgmgame
	new db,gdbsound
	push "saves/save.txt"
	new classfullsave,clsave
	new string,_slhpref
	push "cllh"
	pop _slhpref
	new string,_spathpref
	push "pt"
	pop _spathpref
	new string,_spocketpref
	push "pc"
	pop _spocketpref
	new string,_sstndpref
	push "stnd"
	pop _sstndpref
	new string,_stalkpref
	push "ctlk"
	pop _stalkpref
	new int,AdventureGame
	push 0
	push 0
	push iResX
	push iResY
	new CutScene,ccs
	push 2000
	call ccs,setz
	module modadv
	method init
	new db,dbload
	new string,stalktype
	push "snd"
	cthis settalktype
	push "null"
	new Script,scrl
	new string,_stalk
	end method
	method execute
	localstring $1
	pop $1
	push $1
	call scrl,call
	end method
	method loadscript
	localstring $1
	pop $1
	push $1
	call scrl,load
	end method
	method loadsounds
	localstring $1
	pop $1
	push $1
	call gdbsound,load
	push igmdebug
	cmp0
	je l2460
	push "exports/adv.dlg"
	call gdbsound,save
l2460:
	end method
	method gettalktype
	push stalktype
	ret
	end method
	method settalktype
	localstring $1
	pop $1
	push $1
	pop stalktype
	end method
	method load
	localstring $1
	pop $1
	push $1
	call dbload,loadscript
	push "talk:"
	push 1
	cthis get
	pop _stalk
	end method
	method get
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	push $1
	call dbload,findbyrow
	pop $3
	push $3
	push 0
	cmpjl
	cmp0
	je l2462
	push "modadv.dbload: can't find "
	push $1
	pop $b
	popax
	add $a,$b
	call engine,print
	push "null"
	ret
	jmp l2461
l2462:
	push $3
	push $2
	call dbload,get
	ret
l2461:
	end method
	end module

	module modadvglob
	method init
	new gmobjvec,grhero
	new gmobjvec,grfiles
	new gmobjvec,grpck
	end method
	method addhero
	localstring $1
	localstring $2
	localint $3
	pop $3
	pop $2
	pop $1
	push "hero_"
	push $1
	pop $b
	popax
	add $a,$b
	push "_active"
	pop $b
	popax
	add $a,$b
	push 1
	call clsave,set
	localint $4
	push $1
	call grhero,find
	pop $4
	push $4
	push 0
	cmpjae
	cmp0
	je l2464
	push $4
	call grfiles,get
	push $2
	cmpjne
	cmp0
	je l2466
	push $4
	push $2
	call grfiles,set
	push $1
	spushs
	push $2
	cthis getpath
	spop $a
	call [$a],load
l2466:
	push $1
	spushs
	push $1
	spop $a
	call [$a],addtogamevars
	push $3
	cmp0
	je l2468
	push _spocketpref
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],addtoadv
l2468:
	push 0
	ret
	jmp l2463
l2464:
	push $1
	push $2
	push 0
	cthis newanima
	push $1
	spushs
	push $1
	spop $a
	call [$a],addtogamevars
	push $1
	call grhero,add
	push $2
	call grfiles,add
	push $3
	cmp0
	je l2470
	localstring $5
	push _spocketpref
	push $1
	pop $b
	popax
	add $a,$b
	pop $5
	push $5
	cthis hasvar
	neg
	cmp0
	je l2472
	push $5
	spushs
	push $1
	spop $e
	new classadvpocket,[$e]
	push $5
	call grpck,add
	push $5
	spushs
	spop $a
	call [$a],addtoadv
	jmp l2471
l2472:
	push $5
	spushs
	spop $a
	call [$a],addtoadv
l2471:
l2470:
	push 1
	ret
l2463:
	end method
	method reloadhero
	localstring $1
	pop $1
	localint $2
	push $1
	call grhero,find
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l2474
	localstring $3
	push $2
	call grfiles,get
	pop $3
	push $1
	push 0
	cthis _delhero
	push $1
	push $3
	push 0
	cthis addhero
	popax
l2474:
	end method
	method delhero
	localstring $1
	pop $1
	push $1
	push 1
	cthis _delhero
	end method
	method delheros
l2475:
	call grhero,size
	cmp0
	je l2476
	call grhero,first
	cthis delhero
	jmp l2475
l2476:
	end method
	method _delhero
	localstring $1
	localint $2
	pop $2
	pop $1
	push "hero_"
	push $1
	pop $b
	popax
	add $a,$b
	push "_active"
	pop $b
	popax
	add $a,$b
	push 0
	call clsave,set
	localint $3
	push $1
	call grhero,find
	pop $3
	push $3
	push 0
	cmpjae
	cmp0
	je l2478
	push $1
	spushs
	spop $d
	delete [$d]
	push $3
	call grhero,removeat
	push $3
	call grfiles,removeat
	push _spocketpref
	push $1
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	cthis hasvar
	cmp0
	je l2480
	push $2
	jmp l2482
l2480:
	push 0
	jmp l2482
l2481:
	push 1
l2482:
	cmp0
	je l2483
	push $1
	spushs
	spop $d
	delete [$d]
	push $1
	call grpck,remove
l2483:
l2478:
	end method
	method savepck
	localstring $1
	pop $1
	push "saves/grpck_"
	push $1
	pop $b
	popax
	add $a,$b
	push ".txt"
	pop $b
	popax
	add $a,$b
	call grpck,vecsave
	localint $2
	push 0
	pop $2
l2484:
	push $2
	call grpck,size
	cmpjl
	cmp0
	je l2485
	jmp l2487
l2486:
	add $2,1
	pop $2
	jmp l2484
l2487:
	push $2
	call grpck,get
	spushs
	push $1
	spop $a
	call [$a],savestate
	jmp l2486
l2485:
	end method
	method loadpck
	localstring $1
	pop $1
	localdef $2
	localdef $3
	localint $4
	push 0
	pop $4
l2488:
	push $4
	call grpck,size
	cmpjl
	cmp0
	je l2489
	jmp l2491
l2490:
	add $4,1
	pop $4
	jmp l2488
l2491:
	push $4
	call grpck,get
	pop $2
	push $2
	spushs
	spop $a
	call [$a],removefromadv
	push $2
	spushs
	spop $d
	delete [$d]
	jmp l2490
l2489:
	push "saves/grpck_"
	push $1
	pop $b
	popax
	add $a,$b
	push ".txt"
	pop $b
	popax
	add $a,$b
	call grpck,vecload
	push 0
	pop $4
l2492:
	push $4
	call grpck,size
	cmpjl
	cmp0
	je l2493
	jmp l2495
l2494:
	add $4,1
	pop $4
	jmp l2492
l2495:
	push $4
	call grpck,get
	pop $2
	push $2
	spushs
	push _spocketpref
	call $2,strsubbs
	spop $e
	new classadvpocket,[$e]
	push $2
	spushs
	push $1
	spop $a
	call [$a],loadstate
	push $2
	spushs
	spop $a
	call [$a],removefromadv
	jmp l2494
l2493:
	end method
	method onexit
	localstring $1
	localint $2
	push 0
	pop $2
l2496:
	push $2
	call grhero,size
	cmpjl
	cmp0
	je l2497
	jmp l2499
l2498:
	add $2,1
	pop $2
	jmp l2496
l2499:
	push $2
	call grhero,get
	pop $1
	push $1
	spushs
	push 0
	spop $a
	call [$a],stop
	push $1
	spushs
	spop $a
	call [$a],hide
	push _spocketpref
	push $1
	pop $b
	popax
	add $a,$b
	cthis hasvar
	cmp0
	je l2501
	push _spocketpref
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $a
	call [$a],exitpocket
l2501:
	push _spathpref
	push $1
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	spushs
	spop $a
	call [$a],unlinkanima
	jmp l2498
l2497:
	end method
	end module

	class classloadedhero
	method init
	new string,sanhero
	new int,bplaystart
	push 0
	pop bplaystart
	new int,bplaystop
	push 0
	pop bplaystop
	end method
	method setplaystart
	localint $1
	pop $1
	push $1
	pop bplaystart
	end method
	method setplaystop
	localint $1
	pop $1
	push $1
	pop bplaystop
	end method
	method getstartstop
	push bplaystart
	push bplaystop
	ret
	end method
	end class

	class classadvcontroller
	parent classadv
	method init
	push 1
	pop AdventureGame
	clparent classadv,init
	push "sndpath:"
	push 1
	call modadv,get
	cthis setwavpath
	new snd,__sndplay
	call __sndplay,classadvcontroller0
	push 0
	pop igmstate
	new classstndgroup,modstnd
	new Music,_music
	new timer,_tim_dbclk
	push 200
	call _tim_dbclk,setdelay
	new int,_if_pos
	push 1
	popax
	sub 0,$a
	pop _if_pos
	push "_dbbh"
	new classobjcounter,clcbeh
	new string,_sbeh
	push "clbeh"
	pop _sbeh
	new int,iidbeh
	push "dbadv"
	new classobjcounter,clcadv
	new db,dbmacros
	new vector,_vecarg
	push "string"
	call _vecarg,type
	new classadvcamera,clcamera
	push "advmsmove"
	call clcamera,setmetonmsmove
	new classwalkerqueue,clwalkq
	new gmadvvec,grbuts
	new gmimgvec,grmsmove
	new gmimgvec,grmslclick
	new gmimgvec,grmsrclick
	new gmimgvec,grmslrel
	new string,_susetool
	push "null"
	pop _susetool
	new string,_slastms
	push "null"
	pop _slastms
	new int,bmslock
	push 0
	pop bmslock
	new int,_b_rewind
	push 1
	pop _b_rewind
	new string,sactbeh
	push "null"
	pop sactbeh
	new string,slastpathf
	new int,licznik
	push 0
	pop licznik
	new string,smainhero
	push "null"
	pop smainhero
	cthis advsaveonstart
	localstring $1
	localstring $2
	push sgmgame
	push "null"
	cmpje
	cmp0
	je l2503
	cthis getname
	pop sgmgame
l2503:
	new string,sprivgame
	push sgmgame
	pop sprivgame
	push "null"
	pop sgmgame
	push "game"
	call sprivgame,strsubbs
	pop $2
	push sgmglobpath
	push "null"
	cmpjne
	cmp0
	je l2505
	push sgmglobpath
	pop $1
	push "null"
	pop sgmglobpath
	jmp l2504
l2505:
	push $2
	pop $1
l2504:
	push "scripts/"
	push $1
	pop $b
	popax
	add $a,$b
	push "/"
	pop $b
	popax
	add $a,$b
	cthis setgraphpath
	push $2
	push ".adv"
	pop $b
	popax
	add $a,$b
	cthis loadadventure
	call grbuts,sortimgs
	push smainhero
	push "null"
	cmpje
	cmp0
	je l2507
	call clcamera,getactor
	pop smainhero
l2507:
	call clcamera,start
	call clcamera,setscene
	call clwalkq,start
	push 1
	call clwalkq,setverlen
	call advmouse,setstd
	push "preinit"
	cthis behexist
	cmp0
	je l2509
	push "preinit"
	cthis getname
	push "playbehinit"
	cthis playbehobfin
	jmp l2508
l2509:
	cthis playbehinit
l2508:
	call grbuts,sortimgs
	end method
	method classadvcontroller0
	push A
	push "sfun"
	push "null"
	push "sob"
	push "null"
	cthis vars2
	push 0
	push 1
	cthis setstartstopflag
	push "onfinish"
	push "classadvcontroller1"
	cthis addmethod
	end method
	method classadvcontroller1
	push sob
	push sfun
	cthis callfun
	end method
	method playbehinit
	push sprivgame
	push "visited"
	pop $b
	popax
	add $a,$b
	call clsave,bis
	cmp0
	je l2511
	push "behinit_FROM_"
	push sgmlastscene
	pop $b
	popax
	add $a,$b
	cthis playpostinit
	cmp0
	je l2513
	jmp l2512
l2513:
	push "behinit"
	cthis playpostinit
	cmp0
	je l2515
l2515:
l2512:
	jmp l2510
l2511:
	push sprivgame
	push "visited"
	pop $b
	popax
	add $a,$b
	call clsave,bset
	push "behinit0_FROM_"
	push sgmlastscene
	pop $b
	popax
	add $a,$b
	cthis playpostinit
	cmp0
	je l2517
	jmp l2516
l2517:
	push "behinit0"
	cthis playpostinit
	cmp0
	je l2519
	jmp l2518
l2519:
	push "behinit_FROM_"
	push sgmlastscene
	pop $b
	popax
	add $a,$b
	cthis playpostinit
	cmp0
	je l2521
	jmp l2520
l2521:
	push "behinit"
	cthis playpostinit
	cmp0
	je l2523
l2523:
l2520:
l2518:
l2516:
l2510:
	end method
	method getmainhero
	push smainhero
	ret
	end method
	method setmainhero
	localstring $1
	pop $1
	push $1
	pop smainhero
	end method
	method ismainhero
	localstring $1
	pop $1
	push smainhero
	push $1
	cmpje
	ret
	end method
	method setactbeh
	localstring $1
	pop $1
	push $1
	pop sactbeh
	end method
	method getactbeh
	push sactbeh
	ret
	end method
	method advgetlock
	push bmslock
	ret
	end method
	method advmslock
	push 1
	pop bmslock
	call advmouse,setwait
	end method
	method advmsunlock
	push 0
	pop bmslock
	call advmouse,setstd
	end method
	method advmssetlock
	localint $1
	pop $1
	push $1
	cmp0
	je l2525
	cthis advmslock
	jmp l2524
l2525:
	cthis advmsunlock
l2524:
	end method
	method setusetool
	localstring $1
	pop $1
	push $1
	pop _susetool
	end method
	method getusetool
	push _susetool
	ret
	end method
	method playpostinit
	localstring $1
	pop $1
	push $1
	call gameapi,getgamename
	push "postinit"
	cthis playbehobfinif
	ret
	end method
	method playbeh
	localstring $1
	pop $1
	push $1
	push "null"
	cthis playbehfin
	end method
	method playbehif
	localstring $1
	pop $1
	push $1
	cthis behexist
	cmp0
	je l2527
	push $1
	push "null"
	cthis playbehfin
	push 1
	ret
l2527:
	push 0
	ret
	end method
	method playbehfin
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push "null"
	push $2
	cthis playbehobfin
	end method
	method playbehfinif
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	cthis behexist
	cmp0
	je l2529
	push $1
	push $2
	cthis playbehfin
	push 1
	ret
l2529:
	push 0
	ret
	end method
	method playbehobfin
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	cthis getbeh
	spushs
	push $2
	push $3
	spop $a
	call [$a],playfin
	end method
	method playbehobfinif
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	cthis behexist
	cmp0
	je l2531
	push $1
	push $2
	push $3
	cthis playbehobfin
	push 1
	ret
l2531:
	push 0
	ret
	end method
	method playnewgamepath
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $2
	pop sgmglobpath
	push sprivgame
	pop sgmlastscene
	push "lastscene"
	push sgmlastscene
	call clsave,set
	push $1
	call gameapi,play
	end method
	method playnewgame
	localstring $1
	pop $1
	push $1
	push "null"
	cthis playnewgamepath
	end method
	method playfromscript
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $2
	pop sgmgame
	push "defaultadv:"
	push 1
	call modadv,get
	push $1
	cthis playnewgamepath
	end method
	method getheroloader
	localstring $1
	pop $1
	push _slhpref
	push $1
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	call engine,varexist
	cmp0
	je l2533
	push $1
	jmp l2532
l2533:
	push "null"
l2532:
	end method
	method advanstand
	localstring $1
	pop $1
	localstring $2
	push _spathpref
	push $1
	pop $b
	popax
	add $a,$b
	pop $2
	push $2
	call engine,varexist
	cmp0
	je l2535
	push $2
	spushs
	spop $a
	call [$a],iswalking
	jmp l2537
l2535:
	push 0
	jmp l2537
l2536:
	push 1
l2537:
	cmp0
	je l2538
	push $2
	spushs
	push 0
	spop $a
	call [$a],stop
	push $2
	spushs
	spop $a
	call [$a],stand
l2538:
	end method
	method reloadhero
	localstring $1
	pop $1
	push $1
	cthis _getheropath
	cthis anreload
	localstring $2
	push _spathpref
	cthis getname
	pop $b
	popax
	add $a,$b
	pop $2
	push $2
	spushs
	cthis getname
	spop $a
	call [$a],linkanima
	push $2
	spushs
	spop $a
	call [$a],linkfilter
	push $2
	spushs
	spop $a
	call [$a],scalean
	end method
	method analizeanopts
	localstring $1
	localint $2
	localint $3
	localint $4
	localstring $5
	localstring $6
	localstring $7
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localreal $8
	localreal $9
	localstring $10
	localstring $11
	localint $12
	push 0
	pop $12
	localint $13
	push 0
	pop $13
	localint $14
	localint $15
	localint $16
	localint $17
	push 0
	pop $17
l2539:
	push $3
	push $4
	cmpjl
	cmp0
	je l2540
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],get
	spushs
	push "-stt"
	cmpst
	jne l2542
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $12
	add $3,1
	pop $3
	jmp l2541
l2542:
	push "-stp"
	cmpst
	jne l2543
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $13
	add $3,1
	pop $3
	jmp l2541
l2543:
	push "-wav"
	cmpst
	jne l2544
	spop $a
	push _slhpref
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $b
	popax
	add $a,$b
	pop $10
	add $3,1
	pop $3
	push $10
	spushs
	spop $e
	new classloadedhero,[$e]
	push $10
	spushs
	push "sanhero"
	push $5
	spop $a
	call [$a],varset
	push $6
	spushs
	push $10
	spop $a
	call [$a],add
	jmp l2541
l2544:
	push "-path"
	cmpst
	jne l2545
	spop $a
	push $5
	clparent classadvanhero,buildheroframe
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $8
	add $3,1
	pop $3
	push _spathpref
	push $5
	pop $b
	popax
	add $a,$b
	pop $11
	push $11
	push $5
	push $10
	push $8
	cthis newclpathfcopy
	push $11
	spushs
	spop $a
	call [$a],prepareforhero
	push $11
	push "look"
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	spop $e
	new classherolooker,[$e]
	push $10
	spushs
	push $5
	spop $a
	call [$a],link
	push $11
	push "use"
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	spop $e
	new classherouser,[$e]
	push $10
	spushs
	push $5
	spop $a
	call [$a],link
	push $11
	push "take"
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	spop $e
	new classherotaker,[$e]
	push $10
	spushs
	push $5
	spop $a
	call [$a],link
	jmp l2541
l2545:
	push "-ft"
	cmpst
	jne l2546
	spop $a
	push _spathpref
	push $5
	pop $b
	popax
	add $a,$b
	pop $11
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $8
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $9
	add $3,1
	pop $3
	push $11
	spushs
	spop $a
	call [$a],linkfilter
	push $11
	spushs
	push $8
	spop $a
	call [$a],setzsize
	push $11
	spushs
	push $9
	spop $a
	call [$a],setscalepower
	jmp l2541
l2546:
	push "-stnd"
	cmpst
	jne l2547
	spop $a
	push _sstndpref
	push $5
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setdelay
	add $3,1
	pop $3
	jmp l2541
l2547:
	push "-txt"
	cmpst
	jne l2548
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $14
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $15
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $16
	add $3,1
	pop $3
	push _stalkpref
	push $5
	pop $b
	popax
	add $a,$b
	spushs
	push $14
	push $15
	push $16
	spop $a
	call [$a],settxtcolor
	jmp l2541
l2548:
	push "-font"
	cmpst
	jne l2549
	spop $a
	push 1
	pop $17
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $11
	add $3,1
	pop $3
	push $7
	push "hero:"
	cmpje
	cmp0
	je l2551
	push _stalkpref
	push $5
	pop $b
	popax
	add $a,$b
	spushs
	push $10
	push $11
	spop $a
	call [$a],setfont
l2551:
	jmp l2541
l2549:
	spop $a
	push $1
	push $2
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
	push $5
	cthis analizeaninstr
	pop $3
l2541:
	jmp l2539
l2540:
	push $17
	neg
	cmp0
	je l2553
	push $7
	push "hero:"
	cmpje
	jmp l2555
l2553:
	push 0
	jmp l2555
l2554:
	push 1
l2555:
	cmp0
	je l2556
	push _stalkpref
	push $5
	pop $b
	popax
	add $a,$b
	spushs
	push "font:"
	push 1
	call modadv,get
	push "font:"
	push 2
	call modadv,get
	spop $a
	call [$a],setfont
l2556:
	push $6
	spushs
	push "setplaystart"
	push $12
	spop $a
	call [$a],eval1
	push $6
	spushs
	push "setplaystop"
	push $13
	spop $a
	call [$a],eval1
	push $6
	spushs
	spop $a
	call [$a],free
	end method
	method setasadvanima
	cthis getname
	push "cadvherofinish"
	clparent classadvanhero,setashero
	end method
	method analizebut
	localstring $1
	localstring $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $5
	localstring $6
	localstring $7
	localint $8
	localint $9
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $5
	add $4,1
	pop $4
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $6
	add $4,1
	pop $4
	push ".pyz"
	call $6,contains
	cmp0
	je l2558
	push $6
	pop $7
	push "an"
	push 4
	call $6,strsube
	pop $b
	popax
	add $a,$b
	pop $6
	push $6
	push $7
	push 0
	cthis newanima
l2558:
	push 1
	call $1,strsube
	pop $1
	push $6
	push $5
	push $1
	clparent classadvbut,setasbutton2
	push "setas"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	push $6
	spop $d
	clparent classadvbut,[$d]
	push $6
	spushs
	push $6
	spushs
	spop $a
	call [$a],getcx
	push $6
	spushs
	spop $a
	call [$a],getcy
	spop $a
	call [$a],setadvbutpos
l2559:
	push $4
	push $2
	spushs
	push $3
	spop $a
	call [$a],getcolsno
	cmpjl
	cmp0
	je l2560
	add $4,1
	pop $4
	push $2
	spushs
	push $3
	push $4
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],get
	spushs
	push "-pos"
	cmpst
	jne l2562
	spop $a
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $5
	add $4,1
	pop $4
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $7
	add $4,1
	pop $4
	push $5
	push "-id"
	cmpje
	cmp0
	je l2564
	push slastpathf
	push "null"
	cmpjne
	jmp l2566
l2564:
	push 0
	jmp l2566
l2565:
	push 1
l2566:
	cmp0
	je l2567
	push slastpathf
	spushs
	push $7
	spop $a
	call [$a],getbyname
	pop $8
	push slastpathf
	spushs
	push $8
	spop $a
	call [$a],getxver
	push slastpathf
	spushs
	spop $a
	call [$a],getposx
	pop $b
	popax
	sub $a,$b
	pop $5
	push slastpathf
	spushs
	push $8
	spop $a
	call [$a],getyver
	push slastpathf
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	pop $7
l2567:
	push $6
	spushs
	push $5
	push $7
	spop $a
	call [$a],setadvbutpos
	jmp l2561
l2562:
	push "-bs1"
	cmpst
	jne l2568
	spop $a
	push $6
	spushs
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	spop $a
	call [$a],setbutbase1
	add $4,1
	pop $4
	jmp l2561
l2568:
	push "-bs2"
	cmpst
	jne l2569
	spop $a
	push $6
	spushs
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	spop $a
	call [$a],setbutbase2
	add $4,1
	pop $4
	jmp l2561
l2569:
	push "-us1"
	cmpst
	jne l2570
	spop $a
	push $6
	spushs
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	spop $a
	call [$a],baseuse1=
	add $4,1
	pop $4
	jmp l2561
l2570:
	push "-us2"
	cmpst
	jne l2571
	spop $a
	push $6
	spushs
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	spop $a
	call [$a],baseuse2=
	add $4,1
	pop $4
	jmp l2561
l2571:
	push "-useon"
	cmpst
	jne l2572
	spop $a
	push $6
	spushs
	push "use:"
	push 1
	call modadv,get
	spop $a
	call [$a],setbutbase1
	push $6
	spushs
	push "use:"
	push 2
	call modadv,get
	spop $a
	call [$a],setbutbase2
	jmp l2561
l2572:
	push "-dir"
	cmpst
	jne l2573
	spop $a
	push $6
	spushs
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	spop $a
	call [$a],setbutdir
	add $4,1
	pop $4
	jmp l2561
l2573:
	push "-noreach"
	cmpst
	jne l2574
	spop $a
	push $6
	spushs
	push 0
	spop $a
	call [$a],setreach
	jmp l2561
l2574:
	push "-nh"
	cmpst
	jne l2575
	spop $a
	push $6
	spushs
	push 0
	spop $a
	call [$a],hideontake=
	jmp l2561
l2575:
	push "-pck"
	cmpst
	jne l2576
	spop $a
	push $6
	spushs
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	spop $a
	call [$a],setpocket
	add $4,1
	pop $4
	jmp l2561
l2576:
	push "-mask"
	cmpst
	jne l2577
	spop $a
	push $6
	clparent classadvbut,setasmask
	push $6
	spushs
	spop $a
	call [$a],hide
	jmp l2561
l2577:
	push "-inpck"
	cmpst
	jne l2578
	spop $a
	push $6
	spushs
	spop $a
	call [$a],hideontake
	cmp0
	je l2580
	push $6
	spushs
	spop $a
	call [$a],hide
	jmp l2579
l2580:
	push $6
	spushs
	push "but"
	spop $a
	call [$a],setbuttyp
l2579:
	cthis getmainhero
	pop $5
	push $5
	push "null"
	cmpje
	cmp0
	je l2582
	call clcamera,getactor
	pop $5
l2582:
	push $5
	spushs
	spop $a
	call [$a],getpocket
	spushs
	push $6
	spushs
	spop $a
	call [$a],getbutname
	push $6
	spushs
	spop $a
	call [$a],getpocket
	spop $a
	call [$a],additem
	jmp l2561
l2578:
	push "-disable"
	cmpst
	jne l2583
	spop $a
	push $6
	spushs
	spop $a
	call [$a],disable
	jmp l2561
l2583:
	push "-once"
	cmpst
	jne l2584
	spop $a
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $5
	add $4,1
	pop $4
	push $6
	spushs
	push $5
	spop $a
	call [$a],setonce
	push $5
	call clsave,bis
	cmp0
	je l2586
	push $6
	spushs
	spop $a
	call [$a],disable
l2586:
	jmp l2561
l2584:
	spop $a
l2561:
	jmp l2559
l2560:
	end method
	method _getheropath
	localstring $1
	pop $1
	localstring $2
	push $1
	cthis getpath
	pop $2
	push $2
	call engine,fileexist
	cmp0
	je l2588
	push "$"
	push $2
	pop $b
	popax
	add $a,$b
	jmp l2587
l2588:
	push "$"
	push "heropath:"
	push 1
	call modadv,get
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
l2587:
	end method
	method loadadventure
	localstring $1
	pop $1
	localstring $2
	call clcadv,get
	pop $2
	localstring $3
	push "grpers"
	call clcadv,size
	pop $b
	popax
	add $a,$b
	pop $3
	push $2
	spushs
	spop $e
	new db,[$e]
	push $2
	spushs
	push $1
	cthis getpath
	spop $a
	call [$a],loadbeh
	localint $4
	push $2
	spushs
	spop $a
	call [$a],getrowsno
	pop $4
	localint $5
	localint $6
	localint $7
	localint $8
	localstring $9
	localstring $10
	localstring $11
	localint $12
	localint $13
	localint $14
	localreal $15
	localreal $16
	push $2
	push "script"
	pop $b
	popax
	add $a,$b
	pop $9
	push $9
	spushs
	push $2
	spop $e
	new Script,[$e]
	localstring $17
	push ""
	pop $17
	push $3
	spushs
	spop $e
	new gmobjvec,[$e]
	localint $18
	push 0
	pop $18
l2589:
	push $18
	push $4
	cmpjl
	cmp0
	je l2590
	jmp l2592
l2591:
	add $18,1
	pop $18
	jmp l2589
l2592:
	push 0
	pop $5
	push $2
	spushs
	push $18
	spop $a
	call [$a],getcolsno
	pop $6
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $9
	spushs
	push "setpath:"
	cmpst
	jne l2594
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $17
	add $5,1
	pop $5
	push $17
	cthis setgraphpath
	jmp l2593
l2594:
	push "nopath:"
	cmpst
	jne l2595
	spop $a
	push ""
	pop $17
	push $17
	cthis setgraphpath
	jmp l2593
l2595:
	push "func"
	cmpst
	jne l2596
	spop $a
l2597:
	push $2
	spushs
	push $18
	push 0
	spop $a
	call [$a],get
	push "end"
	cmpjne
	cmp0
	je l2598
	add $18,1
	pop $18
	jmp l2597
l2598:
	jmp l2593
l2596:
	push "sndpath:"
	cmpst
	jne l2599
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $9
	cthis setwavpath
	jmp l2593
l2599:
	push "hero:"
	cmpst
	je l2601
	push "an:"
	cmpst
	je l2601
	jmp l2600
l2601:
	spop $a
	push $2
	spushs
	push $18
	push "-global"
	spop $a
	call [$a],dbdelvar
	pop $7
	push $2
	spushs
	push $18
	push "-pck"
	spop $a
	call [$a],dbdelvar
	pop $8
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $11
	add $5,1
	pop $5
	push ".pyz"
	call $11,contains
	cmp0
	je l2603
	push $11
	pop $10
	push "an"
	push ".pyz"
	call $11,strsubes
	pop $b
	popax
	add $a,$b
	pop $11
	jmp l2602
l2603:
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
l2602:
	push $9
	push "hero:"
	cmpje
	cmp0
	je l2605
	push ".pyz"
	call $10,contains
	cmp0
	je l2607
	push $10
	cthis _getheropath
	pop $10
l2607:
l2605:
	push ".pyz"
	call $10,contains
	cmp0
	je l2609
	push $7
	cmp0
	je l2611
	push $11
	push $10
	push $8
	call modadvglob,addhero
	cmp0
	je l2613
	push $11
	spushs
	spop $a
	call [$a],setasadvanima
l2613:
	sub $6,1
	pop $6
	jmp l2610
l2611:
	push $11
	push $10
	push 0
	cthis newanima
	push $11
	spushs
	spop $a
	call [$a],setasadvanima
	push $9
	push "hero:"
	cmpje
	cmp0
	je l2615
	push $8
	jmp l2617
l2615:
	push 0
	jmp l2617
l2616:
	push 1
l2617:
	cmp0
	je l2618
	push _spocketpref
	push $11
	pop $b
	popax
	add $a,$b
	spushs
	push $11
	spop $e
	new classadvpocket,[$e]
l2618:
l2610:
	jmp l2608
l2609:
	push $10
	push $11
	cthis copyanima
	push $11
	spushs
	spop $a
	call [$a],setasadvanima
	push $9
	push "hero:"
	cmpje
	cmp0
	je l2620
	push $8
	jmp l2622
l2620:
	push 0
	jmp l2622
l2621:
	push 1
l2622:
	cmp0
	je l2623
	push _spocketpref
	push $11
	pop $b
	popax
	add $a,$b
	spushs
	push $11
	spop $e
	new classadvpocket,[$e]
l2623:
l2608:
	push $8
	cmp0
	je l2625
	sub $6,1
	pop $6
l2625:
	push $9
	push "hero:"
	cmpje
	cmp0
	je l2627
	push _sstndpref
	push $11
	pop $b
	popax
	add $a,$b
	spushs
	spop $e
	new classadvstander,[$e]
	push _stalkpref
	push $11
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	spop $e
	new classtalker,[$e]
	push $10
	spushs
	push $11
	spop $a
	call [$a],set
	push $10
	spushs
	push "gdbsound"
	spop $a
	call [$a],settextdb
l2627:
	push $2
	push $18
	push $5
	push $6
	push $11
	push $3
	push $9
	cthis analizeanopts
	jmp l2593
l2600:
	push "anaac:"
	cmpst
	jne l2628
	spop $a
	push $2
	spushs
	push $18
	push "-mask"
	spop $a
	call [$a],dbdelvar
	pop $7
	push 0
	pop $8
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push ".pyz"
	call $9,contains
	cmp0
	je l2630
	push $9
	pop $10
	push "an"
	push ".pyz"
	call $9,strsubes
	pop $b
	popax
	add $a,$b
	pop $9
	jmp l2629
l2630:
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
l2629:
	push $7
	cmp0
	je l2632
	sub $6,1
	pop $6
	push $9
	spushs
	spop $e
	new gmmaskvec,[$e]
	jmp l2631
l2632:
	push $9
	spushs
	spop $e
	new gmadvvec,[$e]
l2631:
	push ".pyz"
	call $10,contains
	cmp0
	je l2634
	push "_"
	push $9
	pop $b
	popax
	add $a,$b
	push $10
	push 0
	cthis newanima
	push "_"
	push $9
	pop $b
	popax
	add $a,$b
	pop $10
	push 1
	pop $8
l2634:
	push $10
	push $9
	push $9
	cthis newanactionsgr
	pop $7
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	push $8
	cmp0
	je l2636
	push $10
	spushs
	spop $a
	call [$a],hide
l2636:
	jmp l2593
l2628:
	push "anaf:"
	cmpst
	jne l2637
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push ".pyz"
	call $9,contains
	cmp0
	je l2639
	push $9
	pop $10
	push "an"
	push ".pyz"
	call $9,strsubes
	pop $b
	popax
	add $a,$b
	pop $9
	jmp l2638
l2639:
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
l2638:
	push $9
	spushs
	spop $e
	new gmimgvec,[$e]
	push ".pyz"
	call $10,contains
	cmp0
	je l2641
	push "_"
	push $9
	pop $b
	popax
	add $a,$b
	push $10
	push 0
	cthis newanima
	push "_"
	push $9
	pop $b
	popax
	add $a,$b
	pop $10
l2641:
	push $10
	push $9
	push $9
	cthis newanfrbyactgr
	pop $7
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	jmp l2593
l2637:
	push "anfac:"
	cmpst
	jne l2642
	spop $a
	push $2
	spushs
	push $18
	push "-mask"
	spop $a
	call [$a],dbdelvar
	pop $7
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $7
	cmp0
	je l2644
	sub $6,1
	pop $6
	push $9
	spushs
	spop $e
	new gmmaskvec,[$e]
	jmp l2643
l2644:
	push $9
	spushs
	spop $e
	new gmadvvec,[$e]
l2643:
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $11
	add $5,1
	pop $5
	push $10
	push $9
	push $10
	spushs
	push $11
	spop $a
	call [$a],actionnr
	push $9
	cthis newanframesgr
	pop $7
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	jmp l2593
l2642:
	push "anac:"
	cmpst
	jne l2645
	spop $a
	push $2
	spushs
	push $18
	push "-adv"
	spop $a
	call [$a],dbdelvar
	pop $7
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $11
	add $5,1
	pop $5
	push $11
	clparent StringChecker,isdigit
	cmp0
	je l2647
	push $10
	spushs
	push $11
	spop $a
	call [$a],nameofaction
	pop $11
l2647:
	push $10
	push $9
	push $11
	cthis copyanimaact
	push $7
	cmp0
	je l2649
	sub $6,1
	pop $6
	push $9
	spushs
	spop $a
	call [$a],setasadvanima
l2649:
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	jmp l2593
l2645:
	push "anf:"
	cmpst
	jne l2650
	spop $a
	push $2
	spushs
	push $18
	push "-mask"
	spop $a
	call [$a],dbdelvar
	pop $7
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $11
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $8
	add $5,1
	pop $5
	push $10
	push $9
	cthis copyanima
	push $9
	spushs
	push $11
	push $8
	spop $a
	call [$a],setframe
	push $7
	cmp0
	je l2652
	sub $6,1
	pop $6
	push $9
	spushs
	spop $a
	call [$a],setasadvanima
l2652:
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	jmp l2593
l2650:
	push "anorder:"
	cmpst
	jne l2653
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	jmp l2593
l2653:
	push "behfile:"
	cmpst
	jne l2654
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	cthis loadbehaviours
	add $5,1
	pop $5
	jmp l2593
l2654:
	push "include:"
	cmpst
	jne l2655
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	cthis loadadventure
	add $5,1
	pop $5
	jmp l2593
l2655:
	push "walkqueue:"
	cmpst
	jne l2656
	spop $a
l2657:
	push $5
	push $6
	cmpjl
	cmp0
	je l2658
	push _spathpref
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $b
	popax
	add $a,$b
	call clwalkq,add
	add $5,1
	pop $5
	jmp l2657
l2658:
	jmp l2593
l2656:
	push "font:"
	cmpst
	jne l2659
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $7
	add $5,1
	pop $5
	push $9
	spushs
	spop $e
	new font,[$e]
	push $9
	spushs
	push $10
	push $7
	spop $a
	call [$a],load
	jmp l2593
l2659:
	push "bkg:"
	cmpst
	jne l2660
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push ".pyz"
	call $9,contains
	cmp0
	je l2662
	push "imgbkg"
	push $9
	push 0
	cthis newanima
	jmp l2661
l2662:
	push "imgbkg"
	push $9
	push 0
	cthis newimg
l2661:
	push $2
	push $18
	push $5
	push "imgbkg"
	cthis analizeaninstr
	pop $5
	jmp l2593
l2660:
	push "img:"
	cmpst
	jne l2663
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push 0
	push 4
	call $9,gete
	spushs
	push A
	push ".jpg"
	push ".png"
	spop $h
	call $h,in
	cmp0
	je l2665
	push $9
	pop $10
	push "img"
	push 4
	call $9,strsube
	pop $b
	popax
	add $a,$b
	pop $9
	jmp l2664
l2665:
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
l2664:
	push $9
	push $10
	push 0
	cthis newimg
	push $2
	push $18
	push $5
	push $9
	cthis analizeaninstr
	pop $5
	jmp l2593
l2663:
	push "but:"
	cmpst
	je l2667
	push "doors:"
	cmpst
	je l2667
	push "item:"
	cmpst
	je l2667
	jmp l2666
l2667:
	spop $a
	push $9
	push $2
	push $18
	push $5
	cthis analizebut
	jmp l2593
l2666:
	push "camera:"
	cmpst
	jne l2668
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $15
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $16
	add $5,1
	pop $5
	push $15
	push $16
	call clcamera,scalemodifiers
l2669:
	push $5
	push $6
	cmpjl
	cmp0
	je l2670
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $9
	push "-size"
	cmpje
	cmp0
	je l2672
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $7
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $8
	add $5,1
	pop $5
	push $7
	push $8
	call clcamera,setborders
	jmp l2671
l2672:
	push $9
	push "-center"
	cmpje
	cmp0
	je l2674
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $7
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $8
	add $5,1
	pop $5
	push $7
	push $8
	call clcamera,setcenter
	jmp l2673
l2674:
	push $9
	push "-sizebg"
	cmpje
	cmp0
	je l2676
	call imgbkg,getw
	call imgbkg,geth
	call clcamera,setborders
l2676:
l2673:
l2671:
	jmp l2669
l2670:
	jmp l2593
l2668:
	push "actor:"
	cmpst
	jne l2677
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	call clcamera,setactor
	add $5,1
	pop $5
	jmp l2593
l2677:
	push "bgr:"
	cmpst
	jne l2678
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $15
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $16
	add $5,1
	pop $5
	push $9
	spushs
	spop $e
	new classbgplan,[$e]
	push $9
	push $15
	push $16
	call clcamera,addbgr
	jmp l2593
l2678:
	push "pathfinder:"
	cmpst
	jne l2679
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop slastpathf
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push ".ptf"
	call $10,contains
	cmp0
	je l2681
	push 20
	pop $7
	push 20
	pop $8
	jmp l2680
l2681:
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $7
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $8
	add $5,1
	pop $5
l2680:
	push slastpathf
	push $10
	push $7
	push $8
	cthis newpathf
	jmp l2593
l2679:
	push "script:"
	cmpst
	jne l2682
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push $9
	spushs
	push $10
	spop $e
	new Script,[$e]
	jmp l2593
l2682:
	push "func:"
	cmpst
	jne l2683
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	sub $6,1
	pop $6
	call clcadv,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $7
l2684:
	push $7
	push 0
	cmpjae
	cmp0
	je l2685
	jmp l2687
l2686:
	sub $7,1
	pop $7
	jmp l2684
l2687:
	push $7
	call clcadv,getid
	push "script"
	pop $b
	popax
	add $a,$b
	pop $9
	push $9
	spushs
	push $10
	spop $a
	call [$a],containsfun
	cmp0
	je l2689
	push 3
	pop $7
l2690:
	push $7
	push $6
	cmpjl
	cmp0
	je l2691
	jmp l2693
l2692:
	add $7,1
	pop $7
	jmp l2690
l2693:
	push $9
	spushs
	push $7
	push 3
	pop $b
	popax
	sub $a,$b
	push $2
	spushs
	push $18
	push $7
	spop $a
	call [$a],get
	spop $a
	call [$a],ARG=
	jmp l2692
l2691:
	push 1
	popax
	sub 0,$a
	pop $7
	push $9
	spushs
	push $10
	spop $a
	call [$a],call
l2689:
	jmp l2686
l2685:
	jmp l2593
l2683:
	push "IF"
	cmpst
	jne l2694
	spop $a
	add _if_pos,1
	pop _if_pos
	push $2
	push $18
	push $5
	push $6
	cthis _found_if
	pop $18
	jmp l2593
l2694:
	push "ELSE"
	cmpst
	jne l2695
	spop $a
	push $2
	push $18
	push 1
	pop $b
	popax
	add $a,$b
	cthis _goto_fi
	pop $18
	jmp l2593
l2695:
	push "FI"
	cmpst
	jne l2696
	spop $a
	sub _if_pos,1
	pop _if_pos
	push _if_pos
	push 1
	popax
	sub 0,$a
	cmpjl
	cmp0
	je l2698
	push "FI error! "
	cthis getname
	pop $b
	popax
	add $a,$b
	push "."
	pop $b
	popax
	add $a,$b
	cthis methodname
	pop $b
	popax
	add $a,$b
	spushs
	spop $h
	call $h,print
l2698:
	jmp l2593
l2696:
	push "bsave:"
	cmpst
	jne l2699
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	call clsave,bset
	add $5,1
	pop $5
	jmp l2593
l2699:
	push "save:"
	cmpst
	jne l2700
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	add $5,1
	pop $5
	push $9
	push $10
	call clsave,set
	jmp l2593
l2700:
	push "stdptf:"
	cmpst
	jne l2701
	spop $a
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop slastpathf
	add $5,1
	pop $5
	jmp l2593
l2701:
	push "sfxs:"
	cmpst
	jne l2702
	spop $a
l2703:
	push $5
	push $6
	cmpjl
	cmp0
	je l2704
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $9
	add $5,1
	pop $5
	push $9
	push ".wav"
	pop $b
	popax
	add $a,$b
	pop $11
	push 1
	pop $7
	push 100
	pop $8
	push 0
	pop $12
	push 0
	pop $13
	push 0.0
	pop $15
l2705:
	push $7
	cmp0
	je l2706
	push $5
	push $6
	cmpjl
	jmp l2708
l2706:
	push 0
	jmp l2708
l2707:
	push 1
l2708:
	cmp0
	je l2709
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $10
	push $10
	spushs
	push "-f"
	cmpst
	jne l2711
	spop $a
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	push ".wav"
	pop $b
	popax
	add $a,$b
	pop $11
	jmp l2710
l2711:
	push "-v"
	cmpst
	jne l2712
	spop $a
	add $5,1
	pop $5
	push $2
	spushs
	push $18
	push $5
	spop $a
	call [$a],get
	pop $8
	jmp l2710
l2712:
	push "-l"
	cmpst
	jne l2713
	spop $a
	push 1
	pop $12
	jmp l2710
l2713:
	push "-p"
	cmpst
	jne l2714
	spop $a
	push 1
	pop $13
	jmp l2710
l2714:
	push "-pl"
	cmpst
	jne l2715
	spop $a
	push 1.0
	pop $15
	jmp l2710
l2715:
	spop $a
	sub $5,1
	pop $5
	push 0
	pop $7
l2710:
	add $5,1
	pop $5
	jmp l2705
l2709:
	push $9
	push $11
	cthis newsfx
	push $9
	spushs
	push $8
	spop $a
	call [$a],setvol
	push $12
	cmp0
	je l2717
	push $9
	spushs
	push "onfinish"
	push "_stdsndloop"
	spop $a
	call [$a],addmethod
l2717:
	push $13
	cmp0
	je l2719
	push $9
	spushs
	spop $a
	call [$a],play
	jmp l2718
l2719:
	push $15
	cmp0
	je l2721
	push $9
	spushs
	spop $a
	call [$a],playloop
l2721:
l2718:
	jmp l2703
l2704:
	jmp l2593
l2702:
	spop $a
l2593:
	jmp l2591
l2590:
	push $2
	spushs
	spop $a
	call [$a],readonly
	end method
	method _found_if
	localstring $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	add $3,1
	pop $3
	localint $5
	push 0
	pop $5
	localint $6
	push 0
	pop $6
	sub $4,1
	pop $4
	localstring $7
	localstring $8
l2722:
	push $3
	push $4
	cmpjl
	cmp0
	je l2723
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $7
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],dbchecknext
	pop $8
	push $8
	spushs
	push ")"
	cmpst
	je l2726
	push "|"
	cmpst
	je l2726
	push "&"
	cmpst
	je l2726
	jmp l2725
l2726:
	spop $a
	push $5
	push $6
	push 0
	push 1
	call $7,getb
	push "!"
	cmpje
	cmp0
	je l2728
	push 1
	call $7,strsubb
	call clsave,bis
	neg
	jmp l2727
l2728:
	push $7
	call clsave,bis
l2727:
	cthis _check_if
	pop $6
	push $8
	push "|"
	cmpje
	cmp0
	je l2730
	push 1
	pop $5
	jmp l2729
l2730:
	push $8
	push "&"
	cmpje
	cmp0
	je l2732
	push 2
	pop $5
l2732:
l2729:
	jmp l2724
l2725:
	push "="
	cmpst
	jne l2733
	spop $a
	push 2
	popax
	add $3,$a
	pop $3
	push $5
	push $6
	push $7
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	call clsave,is
	cthis _check_if
	pop $6
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],dbchecknext
	cthis _check_if2
	pop $5
	jmp l2724
l2733:
	push "!="
	cmpst
	jne l2734
	spop $a
	push 2
	popax
	add $3,$a
	pop $3
	push $5
	push $6
	push $7
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	call clsave,is
	neg
	cthis _check_if
	pop $6
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],dbchecknext
	cthis _check_if2
	pop $5
	jmp l2724
l2734:
	spop $a
l2724:
	push 2
	popax
	add $3,$a
	pop $3
	jmp l2722
l2723:
	push $6
	neg
	cmp0
	je l2736
	push $1
	push $2
	push 1
	pop $b
	popax
	add $a,$b
	cthis _goto_fi
	jmp l2735
l2736:
	push $2
l2735:
	end method
	method _goto_fi
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	push _if_pos
	pop $3
l2737:
	push 1
	cmp0
	je l2738
	push $1
	spushs
	push $2
	push 0
	spop $a
	call [$a],get
	spushs
	push "IF"
	cmpst
	jne l2740
	spop $a
	add $3,1
	pop $3
	jmp l2739
l2740:
	push "ELSE"
	cmpst
	jne l2741
	spop $a
	push $3
	push _if_pos
	cmpje
	cmp0
	je l2743
	push $2
	ret
l2743:
	jmp l2739
l2741:
	push "FI"
	cmpst
	jne l2744
	spop $a
	push $3
	push _if_pos
	cmpje
	cmp0
	je l2746
	sub _if_pos,1
	pop _if_pos
	push $2
	ret
	jmp l2745
l2746:
	sub $3,1
	pop $3
l2745:
	jmp l2739
l2744:
	spop $a
l2739:
	add $2,1
	pop $2
	jmp l2737
l2738:
	end method
	method _check_if2
	localstring $1
	pop $1
	push $1
	spushs
	push "|"
	cmpst
	jne l2748
	spop $a
	push 1
	jmp l2747
l2748:
	push "&"
	cmpst
	jne l2749
	spop $a
	push 2
	jmp l2747
l2749:
	spop $a
	push 0
l2747:
	end method
	method _check_if
	localint $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	push 1
	cmpst
	jne l2751
	spop $a
	push $2
	cmp0
	jne l2753
	push $3
	jmp l2754
l2752:
	push 0
	jmp l2754
l2753:
	push 1
l2754:
	jmp l2750
l2751:
	push 2
	cmpst
	jne l2755
	spop $a
	push $2
	cmp0
	je l2756
	push $3
	jmp l2758
l2756:
	push 0
	jmp l2758
l2757:
	push 1
l2758:
	jmp l2750
l2755:
	spop $a
	push $3
l2750:
	end method
	method behrewind
	push sactbeh
	push "null"
	cmpjne
	cmp0
	je l2760
	push sactbeh
	spushs
	spop $a
	call [$a],rewind
l2760:
	end method
	method behplaying
	push sactbeh
	push "null"
	cmpjne
	ret
	end method
	method behexist
	localstring $1
	pop $1
	push $1
	cthis getbeh
	call engine,varexist
	ret
	end method
	method getbeh
	localstring $1
	pop $1
	push _sbeh
	push $1
	pop $b
	popax
	add $a,$b
	ret
	end method
	method newbehname
	localstring $1
	push _sbeh
	push "_"
	pop $b
	popax
	add $a,$b
	push iidbeh
	pop $b
	popax
	add $a,$b
	pop $1
	add iidbeh,1
	pop iidbeh
	push $1
	ret
	end method
	method newbeh
	localstring $1
	cthis newbehname
	pop $1
	push $1
	spushs
	spop $e
	new classbehhero,[$e]
	push $1
	ret
	end method
	method _checkvol
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],dbchecknext
	push "-v"
	cmpje
	cmp0
	je l2762
	push 2
	popax
	add $3,$a
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	push $3
	push 1
	pop $b
	popax
	add $a,$b
	ret
	jmp l2761
l2762:
	push 100
	push $3
	push 1
	pop $b
	popax
	add $a,$b
	ret
l2761:
	end method
	method loadbeh
	localstring $1
	localint $2
	localint $3
	localint $4
	localstring $5
	localstring $6
	localint $7
	localint $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	localstring $9
	localstring $10
	localstring $11
	localstring $12
	localint $13
	push $5
	spushs
	spop $a
	call [$a],getblock
	pop $13
	localint $14
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	cthis newbeh
	pop $10
	localint $15
	localint $16
	push $9
	spushs
	push "IF"
	cmpst
	je l2765
	push "ELIF"
	cmpst
	je l2765
	jmp l2764
l2765:
	spop $a
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	pop $15
l2766:
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	push ")"
	cmpjne
	cmp0
	je l2767
	add $4,1
	pop $4
	jmp l2766
l2767:
	push $10
	spushs
	push "setas"
	push $9
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	push $2
	push $15
	push $4
	spop $d
	spop $a
	call [$a],[$d]
	add $4,1
	pop $4
	jmp l2763
l2764:
	push "FI"
	cmpst
	je l2769
	push "ELSE"
	cmpst
	je l2769
	jmp l2768
l2769:
	spop $a
	push $10
	spushs
	push $9
	spop $a
	call [$a],setas
	jmp l2763
l2768:
	push "call:"
	cmpst
	jne l2770
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push $1
	push "script"
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setascaller
	jmp l2763
l2770:
	push "walk:"
	cmpst
	jne l2771
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $12
	add $4,1
	pop $4
	push $10
	spushs
	push _spathpref
	push $9
	pop $b
	popax
	add $a,$b
	push $11
	push $12
	spop $a
	call [$a],setaswalker
	jmp l2763
l2771:
	push "turn:"
	cmpst
	jne l2772
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $10
	spushs
	push _spathpref
	push $9
	pop $b
	popax
	add $a,$b
	push $11
	spop $a
	call [$a],setasturn
	jmp l2763
l2772:
	push "setpos:"
	cmpst
	jne l2773
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $16
	push 0
	pop $15
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],dbchecknext
	pop $12
	push $12
	push "-ssc"
	cmpje
	cmp0
	je l2775
	push 1
	pop $15
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],dbchecknext
	pop $12
l2775:
	push $12
	push "-dir"
	cmpje
	cmp0
	je l2777
	push 2
	popax
	add $4,$a
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $12
	jmp l2776
l2777:
	push "auto"
	pop $12
l2776:
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push $11
	push $16
	push $15
	push $12
	spop $a
	call [$a],setasposer
	jmp l2763
l2773:
	push "game:"
	cmpst
	jne l2778
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $9
	spushs
	push "-def"
	cmpst
	je l2781
	push "-adv"
	cmpst
	je l2781
	jmp l2780
l2781:
	spop $a
	push $10
	spushs
	push $9
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	push $1
	spushs
	push $2
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],get
	spop $a
	call [$a],setasnewgamer
	push 2
	popax
	add $4,$a
	pop $4
	jmp l2779
l2780:
	spop $a
	push $10
	spushs
	push "null"
	push "null"
	push $9
	spop $a
	call [$a],setasnewgamer
l2779:
	jmp l2763
l2778:
	push "ref:"
	cmpst
	jne l2782
	spop $a
	push "_"
	push iidbeh
	pop $b
	popax
	add $a,$b
	push $1
	push $2
	push $4
	cthis buildbeh
	pop $4
	cthis newbehname
	pop $9
	push $10
	spushs
	push _sbeh
	call $9,strsubbs
	push $1
	push "script"
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setascaller
	jmp l2763
l2782:
	push "anplay:"
	cmpst
	jne l2783
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push $11
	spop $a
	call [$a],setasanplayer
	jmp l2763
l2783:
	push "anorder:"
	cmpst
	jne l2784
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $10
	spushs
	push $1
	push $2
	push $4
	push $11
	spop $a
	call [$a],setasanorder
	push $1
	push $2
	push $4
	push "null"
	cthis analizeaninstr
	pop $4
	jmp l2763
l2784:
	push "sndbg:"
	cmpst
	jne l2785
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	push $1
	push $2
	push $4
	cthis _checkvol
	pop $4
	pop $15
	push $10
	spushs
	push $9
	push $15
	spop $a
	call [$a],setassndbg
	jmp l2763
l2785:
	push "sndplay:"
	cmpst
	jne l2786
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	push $1
	push $2
	push $4
	cthis _checkvol
	pop $4
	pop $15
	push $10
	spushs
	push $9
	push $15
	spop $a
	call [$a],setassndplayer
	jmp l2763
l2786:
	push "fxplay:"
	cmpst
	jne l2787
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	push $1
	push $2
	push $4
	cthis _checkvol
	pop $4
	pop $15
	push $10
	spushs
	push "sfx/"
	push $9
	pop $b
	popax
	add $a,$b
	push $15
	spop $a
	call [$a],setassndplayer
	jmp l2763
l2787:
	push "fxbg:"
	cmpst
	jne l2788
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	push $1
	push $2
	push $4
	cthis _checkvol
	pop $4
	pop $15
	push $10
	spushs
	push "sfx/"
	push $11
	pop $b
	popax
	add $a,$b
	push $15
	spop $a
	call [$a],setassndbg
	jmp l2763
l2788:
	push "wait:"
	cmpst
	jne l2789
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $15
	add $4,1
	pop $4
	push $10
	spushs
	push $15
	spop $a
	call [$a],setaswaiter
	jmp l2763
l2789:
	push "read:"
	cmpst
	jne l2790
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $15
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $16
	add $4,1
	pop $4
	push "auto"
	pop $11
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	push $4
	cmpja
	cmp0
	je l2792
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	push $11
	push "-dir"
	cmpje
	cmp0
	je l2794
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
l2794:
l2792:
	push $10
	spushs
	push $9
	push $15
	push $16
	push $11
	spop $a
	call [$a],setasreader
	jmp l2763
l2790:
	push "met:"
	cmpst
	jne l2795
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	call gameapi,getgamename
	pop $12
	push "."
	call $9,contains
	cmp0
	je l2797
	push "."
	call $9,strgetto
	pop $11
	push "."
	call $9,strgetfrom
	pop $9
	push $11
	push ""
	cmpje
	cmp0
	jne l2800
	push $11
	push "this"
	cmpje
	jmp l2801
l2799:
	push 0
	jmp l2801
l2800:
	push 1
l2801:
	cmp0
	je l2802
	push $12
	pop $11
l2802:
	jmp l2796
l2797:
	push $12
	pop $11
l2796:
	push $10
	spushs
	push $11
	push $9
	spop $a
	call [$a],setasmet
	jmp l2763
l2795:
	push "bsave:"
	cmpst
	jne l2803
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push "1"
	spop $a
	call [$a],setassaver
	jmp l2763
l2803:
	push "save:"
	cmpst
	jne l2804
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push $11
	spop $a
	call [$a],setassaver
	jmp l2763
l2804:
	push "script:"
	cmpst
	jne l2805
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push $11
	spop $a
	call [$a],setasscript
	jmp l2763
l2805:
	push "func:"
	cmpst
	jne l2806
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	call clcbeh,size
	push 1
	pop $b
	popax
	sub $a,$b
	pop $16
l2807:
	push $16
	push 0
	cmpjae
	cmp0
	je l2808
	jmp l2810
l2809:
	sub $16,1
	pop $16
	jmp l2807
l2810:
	push $16
	call clcbeh,getid
	push "script"
	pop $b
	popax
	add $a,$b
	pop $9
	push $9
	spushs
	push $11
	spop $a
	call [$a],containsfun
	cmp0
	je l2812
	push 1
	popax
	sub 0,$a
	pop $16
l2812:
	jmp l2809
l2808:
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],dbchecknext
	push "("
	cmpje
	cmp0
	je l2814
	push $4
	push 2
	pop $b
	popax
	add $a,$b
	pop $16
l2815:
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	push ")"
	cmpjne
	cmp0
	je l2816
	add $4,1
	pop $4
	jmp l2815
l2816:
	jmp l2813
l2814:
	push 1
	popax
	sub 0,$a
	pop $16
l2813:
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	push $11
	push $1
	push $2
	push $16
	spop $a
	call [$a],setasscript
	jmp l2763
l2806:
	push "use:"
	cmpst
	jne l2817
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $9
	add $4,1
	pop $4
	push $10
	spushs
	push $9
	spop $a
	call [$a],setasuse
	jmp l2763
l2817:
	push "topck:"
	cmpst
	jne l2818
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $11
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],dbchecknext
	push "-pck"
	cmpje
	cmp0
	je l2820
	push 2
	popax
	add $4,$a
	pop $4
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $12
	jmp l2819
l2820:
	push $11
	pop $12
l2819:
	add $4,1
	pop $4
	push $10
	spushs
	push $11
	push $12
	spop $a
	call [$a],setastopck
	jmp l2763
l2818:
	push "enter:"
	cmpst
	jne l2821
	spop $a
	push $10
	spushs
	spop $a
	call [$a],setasenter
	jmp l2763
l2821:
	push "close:"
	cmpst
	jne l2822
	spop $a
	push $10
	spushs
	spop $a
	call [$a],setasclose
	jmp l2763
l2822:
	push "music:"
	cmpst
	jne l2823
	spop $a
	push $4
	push 1
	pop $b
	popax
	add $a,$b
	pop $16
l2824:
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	push ")"
	cmpjne
	cmp0
	je l2825
	add $4,1
	pop $4
	jmp l2824
l2825:
	push $10
	spushs
	push $1
	push $2
	push $16
	push $4
	spop $a
	call [$a],setasmusic
	add $4,1
	pop $4
	jmp l2763
l2823:
	spop $a
	push "_"
	call $9,strgetto
	pop $12
	push $12
	cthis getheroloader
	pop $11
	push $11
	push "null"
	cmpje
	cmp0
	je l2827
	push igmdebug
	cmp0
	je l2829
	push $10
	push ": "
	pop $b
	popax
	add $a,$b
	push $9
	pop $b
	popax
	add $a,$b
	push " loadbeh error: no hero linked to "
	pop $b
	popax
	add $a,$b
	push $12
	pop $b
	popax
	add $a,$b
	call engine,print
l2829:
	push $10
	push $3
	ret
	jmp l2826
l2827:
	localint $17
	localint $18
	push $11
	spushs
	spop $a
	call [$a],getstartstop
	pop $18
	pop $17
	localstring $19
	push "auto"
	pop $19
	localstring $20
	push "_stalk"
	call modadv,varget
	pop $20
	localint $21
	push 1
	pop $21
	push $4
	push $3
	cmpjl
	pop $14
l2830:
	push $14
	cmp0
	je l2831
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $12
	add $4,1
	pop $4
	push $12
	spushs
	push "-stt"
	cmpst
	jne l2833
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $17
	add $4,1
	pop $4
	jmp l2832
l2833:
	push "-stp"
	cmpst
	jne l2834
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $18
	add $4,1
	pop $4
	jmp l2832
l2834:
	push "-base"
	cmpst
	jne l2835
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $20
	add $4,1
	pop $4
	jmp l2832
l2835:
	push "-r"
	cmpst
	jne l2836
	spop $a
	push 1
	pop $21
	jmp l2832
l2836:
	push "-nr"
	cmpst
	jne l2837
	spop $a
	push 0
	pop $21
	jmp l2832
l2837:
	push "-dir"
	cmpst
	jne l2838
	spop $a
	push $1
	spushs
	push $2
	push $4
	spop $a
	call [$a],get
	pop $19
	add $4,1
	pop $4
	jmp l2832
l2838:
	spop $a
	push 0
	pop $14
	sub $4,1
	pop $4
l2832:
	push $14
	cmp0
	je l2840
	push $4
	push $3
	cmpjae
	jmp l2842
l2840:
	push 0
	jmp l2842
l2841:
	push 1
l2842:
	cmp0
	je l2843
	push 0
	pop $14
l2843:
	jmp l2830
l2831:
	push $10
	spushs
	push $11
	spushs
	push "sanhero"
	spop $a
	call [$a],varget
	push $9
	push $20
	push $21
	push $17
	push $18
	push $19
	spop $a
	call [$a],setastalker
l2826:
l2763:
	push $5
	spushs
	push $10
	spop $a
	call [$a],addtostarter
	push $7
	push 0
	cmpje
	cmp0
	je l2845
	push $6
	spushs
	push $10
	spop $a
	call [$a],setflags
	push $10
	spushs
	push $5
	push $13
	push $8
	spop $a
	call [$a],addflags
	jmp l2844
l2845:
	push $6
	spushs
	push "null"
	spop $a
	call [$a],setflags
	push $10
	spushs
	push $5
	push $13
	push 0
	spop $a
	call [$a],addflags
l2844:
	push $10
	push $4
	ret
	end method
	method buildbeh
	localstring $1
	localstring $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	call dbmacros,findbyrow
	pop $5
	push $5
	push 0
	cmpjl
	cmp0
	je l2847
	push "no such macro: "
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $b
	popax
	add $a,$b
	call engine,print
	push 1
	popax
	sub 0,$a
	ret
l2847:
l2848:
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	push "("
	cmpjne
	cmp0
	je l2849
	add $4,1
	pop $4
	jmp l2848
l2849:
	add $4,1
	pop $4
	localint $6
	push $2
	spushs
	spop $a
	call [$a],addrow
	push 1
	pop $b
	popax
	sub $a,$b
	pop $6
	localstring $7
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $7
	add $4,1
	pop $4
	call _vecarg,free
l2850:
	push $7
	push ")"
	cmpjne
	cmp0
	je l2851
	push $7
	call _vecarg,add
	push $2
	spushs
	push $3
	push $4
	spop $a
	call [$a],get
	pop $7
	add $4,1
	pop $4
	jmp l2850
l2851:
	localint $8
	push $5
	call dbmacros,getcolsno
	pop $8
	localint $9
	push $2
	spushs
	push $6
	push $1
	spop $a
	call [$a],add
	localint $10
	push 1
	pop $10
l2852:
	push $10
	push $8
	cmpjl
	cmp0
	je l2853
	jmp l2855
l2854:
	add $10,1
	pop $10
	jmp l2852
l2855:
	push $5
	push $10
	call dbmacros,get
	pop $7
	push 0
	push 1
	call $7,getb
	push "$"
	cmpje
	cmp0
	je l2857
	push 1
	push 10
	call $7,getb
	pop $9
	push $2
	spushs
	push $6
	push $9
	push 1
	pop $b
	popax
	sub $a,$b
	call _vecarg,get
	spop $a
	call [$a],add
	jmp l2856
l2857:
	push $2
	spushs
	push $6
	push $7
	spop $a
	call [$a],add
l2856:
	jmp l2854
l2853:
	push $4
	ret
	end method
	method loadbehaviours
	localstring $1
	pop $1
	localstring $2
	call clcbeh,get
	pop $2
	push $2
	spushs
	spop $e
	new db,[$e]
	push $2
	spushs
	push $1
	cthis getpath
	spop $a
	call [$a],loadbeh
	localstring $3
	push $2
	push "script"
	pop $b
	popax
	add $a,$b
	pop $3
	push $3
	spushs
	push $2
	spop $e
	new Script,[$e]
	localint $4
	localint $5
	localstring $6
	localstring $7
	localstring $8
	localstring $9
	localint $10
	localint $11
	localstring $12
	localint $13
	localint $14
	localint $15
	localint $16
	localstring $17
	localstring $18
	localint $19
	push 0
	pop $19
l2858:
	push $19
	push $2
	spushs
	spop $a
	call [$a],getrowsno
	cmpjl
	cmp0
	je l2859
	jmp l2861
l2860:
	add $19,1
	pop $19
	jmp l2858
l2861:
	push 0
	pop $5
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $6
	add $5,1
	pop $5
	push $6
	spushs
	push "macro:"
	cmpst
	jne l2863
	spop $a
	push $2
	push $19
	push 1
	call dbmacros,dbaddrowfrom
	jmp l2862
l2863:
	push "include:"
	cmpst
	jne l2864
	spop $a
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	cthis loadbehaviours
	add $5,1
	pop $5
	jmp l2862
l2864:
	push "build:"
	cmpst
	jne l2865
	spop $a
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	push $2
	push $19
	push $5
	push 1
	pop $b
	popax
	add $a,$b
	cthis buildbeh
	pop $5
	jmp l2862
l2865:
	push "func"
	cmpst
	jne l2866
	spop $a
l2867:
	push $2
	spushs
	push $19
	push 0
	spop $a
	call [$a],get
	push "end"
	cmpjne
	cmp0
	je l2868
	add $19,1
	pop $19
	jmp l2867
l2868:
	jmp l2862
l2866:
	push "IF"
	cmpst
	jne l2869
	spop $a
	add _if_pos,1
	pop _if_pos
	push $2
	push $19
	push $5
	push $2
	spushs
	push $19
	spop $a
	call [$a],getcolsno
	cthis _found_if
	pop $19
	jmp l2862
l2869:
	push "ELSE"
	cmpst
	jne l2870
	spop $a
	push $2
	push $19
	push 1
	pop $b
	popax
	add $a,$b
	cthis _goto_fi
	pop $19
	jmp l2862
l2870:
	push "FI"
	cmpst
	jne l2871
	spop $a
	sub _if_pos,1
	pop _if_pos
	push _if_pos
	push 1
	popax
	sub 0,$a
	cmpjl
	cmp0
	je l2873
	push "FI error! "
	cthis getname
	pop $b
	popax
	add $a,$b
	push "."
	pop $b
	popax
	add $a,$b
	cthis methodname
	pop $b
	popax
	add $a,$b
	spushs
	spop $h
	call $h,print
l2873:
	jmp l2862
l2871:
	spop $a
	push $2
	spushs
	push $19
	spop $a
	call [$a],getcolsno
	pop $4
	push $6
	cthis getbeh
	pop $6
	push $6
	spushs
	spop $e
	new classbehhero,[$e]
	push 0
	pop $10
	push 1
	pop $11
	push "null"
	pop $12
	push 0
	pop $13
	push 1
	pop $14
	push "null"
	pop $18
	push 1
	popax
	sub 0,$a
	pop $16
	push 0
	pop $15
l2874:
	push $11
	cmp0
	je l2875
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $7
	add $5,1
	pop $5
	push $7
	spushs
	push "-nr"
	cmpst
	jne l2877
	spop $a
	push 0
	pop $10
	jmp l2876
l2877:
	push "-once"
	cmpst
	jne l2878
	spop $a
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $12
	add $5,1
	pop $5
	jmp l2876
l2878:
	push "-par"
	cmpst
	jne l2879
	spop $a
	push 1
	pop $13
	jmp l2876
l2879:
	push "-r"
	cmpst
	jne l2880
	spop $a
	push 1
	pop $10
	jmp l2876
l2880:
	push "-nb"
	cmpst
	jne l2881
	spop $a
	push 0
	pop $14
	jmp l2876
l2881:
	push "-b"
	cmpst
	jne l2882
	spop $a
	push 1
	pop $14
	jmp l2876
l2882:
	push "-en"
	cmpst
	jne l2883
	spop $a
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $15
	add $5,1
	pop $5
	jmp l2876
l2883:
	push "-bif"
	cmpst
	jne l2884
	spop $a
	push 1
	pop $16
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $17
	add $5,1
	pop $5
	push 1
	pop $18
	jmp l2876
l2884:
	push "-bnif"
	cmpst
	jne l2885
	spop $a
	push 0
	pop $16
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $17
	add $5,1
	pop $5
	push 1
	pop $18
	jmp l2876
l2885:
	push "-if"
	cmpst
	jne l2886
	spop $a
	push 1
	pop $16
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $17
	add $5,1
	pop $5
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $18
	add $5,1
	pop $5
	jmp l2876
l2886:
	push "-nif"
	cmpst
	jne l2887
	spop $a
	push 0
	pop $16
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $17
	add $5,1
	pop $5
	push $2
	spushs
	push $19
	push $5
	spop $a
	call [$a],get
	pop $18
	add $5,1
	pop $5
	jmp l2876
l2887:
	spop $a
	push 0
	pop $11
	push $6
	spushs
	push $12
	push $10
	push $13
	push $14
	push $15
	push $16
	push $17
	push $18
	spop $a
	call [$a],setasstarter
	sub $5,1
	pop $5
	push $6
	pop $7
l2888:
	push $5
	push $4
	cmpjl
	cmp0
	je l2889
	push $2
	push $19
	push $4
	push $5
	push $6
	push $7
	push $10
	push $13
	cthis loadbeh
	pop $5
	pop $7
	jmp l2888
l2889:
l2876:
	jmp l2874
l2875:
l2862:
	jmp l2860
l2859:
	push $2
	spushs
	spop $a
	call [$a],readonly
	end method
	method analizeaninstr
	localstring $1
	localint $2
	localint $3
	localstring $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push 1
	pop $5
	push $3
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	cmpjae
	cmp0
	je l2891
	push 0
	pop $5
l2891:
	localint $6
	push 0
	pop $6
	push $4
	push "null"
	cmpjne
	cmp0
	je l2893
	push 1
	pop $6
	push $4
	cthis advanstand
l2893:
	localint $7
	localint $8
	localint $9
	localstring $10
	localstring $11
l2894:
	push $5
	cmp0
	je l2895
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $11
	add $3,1
	pop $3
	push $11
	spushs
	push "-z"
	cmpst
	jne l2897
	spop $a
	push $6
	cmp0
	je l2899
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setz
l2899:
	add $3,1
	pop $3
	jmp l2896
l2897:
	push "-pos"
	cmpst
	jne l2900
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $9
	add $3,1
	pop $3
	push $6
	cmp0
	je l2902
	push $10
	push "-id"
	cmpje
	cmp0
	je l2904
	push _spathpref
	push $4
	pop $b
	popax
	add $a,$b
	pop $10
	push $10
	spushs
	push $9
	spop $a
	call [$a],getbyname
	pop $7
	push $10
	spushs
	push $7
	spop $a
	call [$a],getxver
	push $10
	spushs
	spop $a
	call [$a],getposx
	pop $b
	popax
	sub $a,$b
	pop $8
	push $10
	spushs
	push $7
	spop $a
	call [$a],getyver
	push $10
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	pop $9
	jmp l2903
l2904:
	push $10
	pop $8
l2903:
	push $4
	spushs
	push $8
	push $9
	spop $a
	call [$a],setpos
l2902:
	jmp l2896
l2900:
	push "-putgr"
	cmpst
	jne l2905
	spop $a
	push $6
	cmp0
	je l2907
	push $4
	spushs
	spop $a
	call [$a],anputgr
l2907:
	jmp l2896
l2905:
	push "-vis"
	cmpst
	jne l2908
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $7
	add $3,1
	pop $3
	push $6
	cmp0
	je l2910
	push $7
	push 0
	cmpje
	cmp0
	je l2912
	push $4
	spushs
	spop $a
	call [$a],hide
	jmp l2911
l2912:
	push $4
	spushs
	spop $a
	call [$a],show
l2911:
l2910:
	jmp l2896
l2908:
	push "-show"
	cmpst
	jne l2913
	spop $a
	push $6
	cmp0
	je l2915
	push $4
	spushs
	spop $a
	call [$a],show
l2915:
	jmp l2896
l2913:
	push "-hide"
	cmpst
	jne l2916
	spop $a
	push $6
	cmp0
	je l2918
	push $4
	spushs
	spop $a
	call [$a],hide
l2918:
	jmp l2896
l2916:
	push "-dir"
	cmpst
	jne l2919
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $6
	cmp0
	je l2921
	push $4
	spushs
	spop $a
	call [$a],actionname
	pop $11
	push $4
	spushs
	spop $a
	call [$a],framenr
	pop $7
	push $4
	spushs
	push 2
	call $11,strsube
	push $10
	pop $b
	popax
	add $a,$b
	push 0
	spop $a
	call [$a],setframe
l2921:
	jmp l2896
l2919:
	push "-play"
	cmpst
	jne l2922
	spop $a
	push $6
	cmp0
	je l2924
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],play
l2924:
	add $3,1
	pop $3
	jmp l2896
l2922:
	push "-nplay"
	cmpst
	jne l2925
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $7
	add $3,1
	pop $3
	push $6
	cmp0
	je l2927
	push $4
	spushs
	push $7
	spop $a
	call [$a],nplay
l2927:
	jmp l2896
l2925:
	push "-lplay"
	cmpst
	jne l2928
	spop $a
	push $6
	cmp0
	je l2930
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],anloopsplay
l2930:
	add $3,1
	pop $3
	jmp l2896
l2928:
	push "-bgr"
	cmpst
	jne l2931
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $11
	add $3,1
	pop $3
	push $6
	cmp0
	je l2933
	push $11
	spushs
	push $4
	spop $a
	call [$a],add
	push _spathpref
	push $4
	pop $b
	popax
	add $a,$b
	call engine,varexist
	cmp0
	je l2935
	push $11
	spushs
	push _spathpref
	push $4
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],add
l2935:
l2933:
	jmp l2896
l2931:
	push "-sc"
	cmpst
	jne l2936
	spop $a
	push $6
	cmp0
	je l2938
	push _spathpref
	push $4
	pop $b
	popax
	add $a,$b
	pop $11
	push $11
	call engine,varexist
	cmp0
	je l2940
	push $11
	spushs
	spop $a
	call [$a],scalean
l2940:
l2938:
	jmp l2896
l2936:
	push "-ssc"
	cmpst
	jne l2941
	spop $a
	push $6
	cmp0
	je l2943
	call clcamera,setscene
l2943:
	jmp l2896
l2941:
	push "-actor"
	cmpst
	jne l2944
	spop $a
	push $6
	cmp0
	je l2946
	push $4
	call clcamera,setactor
l2946:
	jmp l2896
l2944:
	push "-mhero"
	cmpst
	jne l2947
	spop $a
	push $6
	cmp0
	je l2949
	push $4
	cthis setmainhero
l2949:
	jmp l2896
l2947:
	push "-puty"
	cmpst
	jne l2950
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $6
	cmp0
	je l2952
	push $10
	push "resy"
	cmpje
	cmp0
	je l2954
	push $4
	spushs
	push iResY
	push 1
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],anputy
	jmp l2953
l2954:
	push $4
	spushs
	push $10
	spop $a
	call [$a],anputy
l2953:
l2952:
	jmp l2896
l2950:
	push "-stopf"
	cmpst
	jne l2955
	spop $a
	push $6
	cmp0
	je l2957
	push $4
	spushs
	push 0
	spop $a
	call [$a],stop
l2957:
	jmp l2896
l2955:
	push "-stoph"
	cmpst
	jne l2958
	spop $a
	push $6
	cmp0
	je l2960
	push $4
	spushs
	push 0
	spop $a
	call [$a],stop
	push $4
	spushs
	spop $a
	call [$a],hide
l2960:
	jmp l2896
l2958:
	push "-setaction"
	cmpst
	jne l2961
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $6
	cmp0
	je l2963
	push $10
	clparent StringChecker,isdigit
	cmp0
	je l2965
	push $4
	spushs
	call $10,to_i
	push 0
	spop $a
	call [$a],setframe
	jmp l2964
l2965:
	push $4
	spushs
	push $10
	push 0
	spop $a
	call [$a],setframe
l2964:
	push $4
	spushs
	push 0
	spop $a
	call [$a],stop
l2963:
	jmp l2896
l2961:
	push "-setframe"
	cmpst
	jne l2966
	spop $a
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $10
	add $3,1
	pop $3
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	pop $7
	add $3,1
	pop $3
	push $6
	cmp0
	je l2968
	push $10
	clparent StringChecker,isdigit
	cmp0
	je l2970
	push $4
	spushs
	call $10,to_i
	push $7
	spop $a
	call [$a],setframe
	jmp l2969
l2970:
	push $4
	spushs
	push $10
	push $7
	spop $a
	call [$a],setframe
l2969:
	push $4
	spushs
	push 0
	spop $a
	call [$a],stop
l2968:
	jmp l2896
l2966:
	push "-stand"
	cmpst
	jne l2971
	spop $a
	push $6
	cmp0
	je l2973
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setstandbase
l2973:
	add $3,1
	pop $3
	jmp l2896
l2971:
	push "-delay"
	cmpst
	jne l2974
	spop $a
	push $6
	cmp0
	je l2976
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setdelay
l2976:
	add $3,1
	pop $3
	jmp l2896
l2974:
	push "-step"
	cmpst
	jne l2977
	spop $a
	push $6
	cmp0
	je l2979
	push _spathpref
	push $4
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setanstep
l2979:
	add $3,1
	pop $3
	jmp l2896
l2977:
	push "-sb1"
	cmpst
	jne l2980
	spop $a
	push $6
	cmp0
	je l2982
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setbutbase1
l2982:
	add $3,1
	pop $3
	jmp l2896
l2980:
	push "-sb2"
	cmpst
	jne l2983
	spop $a
	push $6
	cmp0
	je l2985
	push $4
	spushs
	push $1
	spushs
	push $2
	push $3
	spop $a
	call [$a],get
	spop $a
	call [$a],setbutbase2
l2985:
	add $3,1
	pop $3
	jmp l2896
l2983:
	spop $a
	push 0
	pop $5
	sub $3,1
	pop $3
l2896:
	push $5
	cmp0
	je l2987
	push $3
	push $1
	spushs
	push $2
	spop $a
	call [$a],getcolsno
	cmpjae
	jmp l2989
l2987:
	push 0
	jmp l2989
l2988:
	push 1
l2989:
	cmp0
	je l2990
	push 0
	pop $5
l2990:
	jmp l2894
l2895:
	push $3
	ret
	end method
	method cadvherofinish
	end method
	method butmoveoff
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],moveoff
	push $1
	spushs
	spop $a
	call [$a],getbutname
	push "_MOVEOFF"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method butmoveon
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],moveon
	push $1
	spushs
	spop $a
	call [$a],getbutname
	push "_MOVEON"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method advmsmove
	cthis advgetlock
	neg
	cmp0
	je l2992
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	localint $3
	push $1
	push $2
	push 1
	push 1
	call grbuts,butisin
	pop $3
	push $3
	cmp0
	je l2994
	localstring $4
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
	call grbuts,get
	pop $4
	push $4
	push _slastms
	cmpjne
	cmp0
	je l2996
	push _slastms
	push "null"
	cmpjne
	cmp0
	je l2998
	push _slastms
	cthis butmoveoff
l2998:
	push $4
	pop _slastms
	push $4
	cthis butmoveon
l2996:
	jmp l2993
l2994:
	push _slastms
	push "null"
	cmpjne
	cmp0
	je l3000
	push _slastms
	cthis butmoveoff
	push "null"
	pop _slastms
l3000:
l2993:
	push "onmousemove"
	push $1
	push $2
	call grmsmove,eval2
	call moddbg,msmove
l2992:
	end method
	method butclickon
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],clickon
	cthis behplaying
	neg
	cmp0
	je l3002
	push "beh_"
	push $1
	spushs
	spop $a
	call [$a],getbutname
	pop $b
	popax
	add $a,$b
	push "_LCLICK"
	pop $b
	popax
	add $a,$b
	cthis playbehif
	neg
	pop _b_rewind
l3002:
	end method
	method butrelease
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],lrel
	end method
	method advmsclick
	call _tim_dbclk,isplaying
	cmp0
	je l3004
	push 2
	call clwalkq,mulspeed
	ret
	jmp l3003
l3004:
	call _tim_dbclk,play
l3003:
	push 1
	pop _b_rewind
	push bmslock
	neg
	cmp0
	je l3006
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	localint $3
	push $1
	push $2
	push 1
	push 1
	call grbuts,butisin
	pop $3
	push $3
	cmp0
	je l3008
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
	call grbuts,get
	cthis butclickon
	jmp l3007
l3008:
	localstring $4
	push _spocketpref
	cthis getmainhero
	pop $b
	popax
	add $a,$b
	pop $4
	push $4
	call engine,varexist
	cmp0
	je l3010
	push $4
	spushs
	spop $a
	call [$a],itemhide
l3010:
	push $1
	push $2
	call clwalkq,goto
l3007:
	push "onmouselclick"
	push $1
	push $2
	call grmslclick,eval2
l3006:
	push _b_rewind
	cmp0
	je l3012
	cthis behrewind
l3012:
	call moddbg,mslclick
	end method
	method advmsrclick
	push bmslock
	neg
	cmp0
	je l3014
	push "onmouserclick"
	call mouse,getpos
	call grmsrclick,eval2
l3014:
	end method
	method advmslrel
	push bmslock
	neg
	cmp0
	je l3016
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	localint $3
	push $1
	push $2
	push 1
	push 1
	call grbuts,butisin
	pop $3
	push $3
	cmp0
	je l3018
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
	call grbuts,get
	cthis butrelease
l3018:
	push "onmouselrel"
	push $1
	push $2
	call grmslrel,eval2
l3016:
	call moddbg,mslrel
	end method
	method mousemove
	push igmstate
	push 0
	cmpje
	cmp0
	je l3020
	cthis advmsmove
l3020:
	cthis mouse_MOVE
	end method
	method mouselclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3022
	cthis advmsclick
l3022:
	cthis mouse_LCLICK
	end method
	method mouselrel
	push igmstate
	push 0
	cmpje
	cmp0
	je l3024
	cthis advmslrel
l3024:
	cthis mouse_LREL
	end method
	method mouserclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3026
	cthis advmsrclick
l3026:
	cthis mouse_RCLICK
	end method
	method keydown
	call moddbg,dbkeydown
	cthis keyboard_KEYDOWN
	end method
	method exit
	call modadvglob,onexit
	push igmsubtitle
	cmp0
	je l3028
	call subtitle,reset
l3028:
	end method
	method onmusicfin
	call _music,play
	end method
	method sndplayobfin
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	cthis getsndpath
	push $1
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	call __sndplay,load
	push igmsubtitle
	cmp0
	je l3030
	push "__sndplay"
	cthis getsndpath
	push $1
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	call subtitle,register
l3030:
	push $2
	call __sndplay,sob=
	push $3
	call __sndplay,sfun=
	push "__sndplay"
	cthis cbsplay
	end method
	method sndplayfin
	localstring $1
	localstring $2
	pop $2
	pop $1
	push $1
	push "null"
	push $2
	cthis sndplayobfin
	end method
	method sndplay
	localstring $1
	pop $1
	push $1
	push "null"
	push "null"
	cthis sndplayobfin
	end method
	method advsaveonstart
	push "GAME_game"
	call gameapi,getgamename
	call clsave,set
	push "GAME_sgmgame"
	push sgmgame
	call clsave,set
	push "GAME_sgmglobpath"
	push sgmglobpath
	call clsave,set
	push "GAME_sgmlastscene"
	push sgmlastscene
	call clsave,set
	push "GAME_ccs"
	call ccs,isvisible
	call clsave,set
	cthis advautosave
	end method
	method advautosave
	push "saves/autosave.txt"
	call clsave,save
	push "autosave"
	call modadvglob,savepck
	end method
	method advautoload
	push "autosave"
	cthis _advload
	end method
	method advcacheload
	push "cache"
	cthis _advload
	end method
	method advcachesave
	push "cache"
	cthis _advsave
	end method
	method _advload
	localstring $1
	pop $1
	call modadvglob,delheros
	push $1
	call modadvglob,loadpck
	push "saves/"
	push $1
	pop $b
	popax
	add $a,$b
	push ".txt"
	pop $b
	popax
	add $a,$b
	call clsave,load
	push "GAME_sgmgame"
	call clsave,get
	pop sgmgame
	push "GAME_sgmglobpath"
	call clsave,get
	pop sgmglobpath
	push "GAME_sgmlastscene"
	call clsave,get
	pop sgmlastscene
	push "GAME_ccs"
	call clsave,bis
	cmp0
	je l3032
	call ccs,show
	jmp l3031
l3032:
	call ccs,hide
l3031:
	push "GAME_game"
	call clsave,get
	call gameapi,play
	end method
	method _advsave
	localstring $1
	pop $1
	push "saves/"
	push $1
	pop $b
	popax
	add $a,$b
	push ".txt"
	pop $b
	popax
	add $a,$b
	new classfullsave,_saver
	push "saves/autosave.txt"
	call _saver,load
	call _saver,stdsave
	delete _saver
	new vector,_vcsave
	push "string"
	call _vcsave,type
	new vector,_vcsv2
	push "string"
	call _vcsv2,type
	push "saves/grpck_autosave.txt"
	call _vcsave,vecload
	push "saves/grpck_"
	push $1
	pop $b
	popax
	add $a,$b
	push ".txt"
	pop $b
	popax
	add $a,$b
	call _vcsave,vecsave
	localdef $2
	localint $3
	push 0
	pop $3
l3033:
	push $3
	call _vcsave,size
	cmpjl
	cmp0
	je l3034
	jmp l3036
l3035:
	add $3,1
	pop $3
	jmp l3033
l3036:
	push $3
	call _vcsave,get
	pop $2
	push "saves/"
	push $2
	pop $b
	popax
	add $a,$b
	push "autosave_name.txt"
	pop $b
	popax
	add $a,$b
	call _vcsv2,vecload
	push "saves/"
	push $2
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_name.txt"
	pop $b
	popax
	add $a,$b
	call _vcsv2,vecsave
	push "saves/"
	push $2
	pop $b
	popax
	add $a,$b
	push "autosave_file.txt"
	pop $b
	popax
	add $a,$b
	call _vcsv2,vecload
	push "saves/"
	push $2
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_file.txt"
	pop $b
	popax
	add $a,$b
	call _vcsv2,vecsave
	jmp l3035
l3034:
	delete _vcsave
	delete _vcsv2
	end method
	method advloadsnd
	localstring $1
	pop $1
	cthis getsndpath
	push $1
	pop $b
	popax
	add $a,$b
	cthis load
	push igmsubtitle
	cmp0
	je l3038
	cthis getfullname
	cthis getsndpath
	push $1
	pop $b
	popax
	add $a,$b
	call subtitle,register
l3038:
	end method
	end class

	module moddbg
	parent classlocker
	method init
	clparent classlocker,init
	new string,sstate
	push "init"
	pop sstate
	new int,ilastx
	new int,ilasty
	new text,txtpos
	push 5000
	call txtpos,setz
	push 0
	push 0
	call txtpos,setpos
	push 0
	push 0
	push 64
	push 16
	push 0
	push 0
	push 0
	push 192
	call txtpos,setbkg
	new text,txtswin
	push 5000
	call txtswin,setz
	push 0
	push 0
	push 64
	push 16
	push 0
	push 0
	push 0
	push 192
	call txtswin,setbkg
	new text,txtpod
	push 5000
	call txtpod,setz
	push 0
	push 0
	push 128
	push 16
	push 0
	push 0
	push 0
	push 192
	call txtpod,setbkg
	cthis disable
	end method
	method enable
	cthis unlock
	call txtpos,show
	call txtswin,show
	call txtpod,show
	end method
	method disable
	cthis lock
	call txtpos,hide
	call txtswin,hide
	call txtpod,hide
	end method
	method updatetxtpos
	localint $1
	localint $2
	pop $2
	pop $1
	push ""
	push $1
	call clcamera,getposx
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	push ","
	pop $b
	popax
	add $a,$b
	push $2
	call clcamera,getposy
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	call txtpos,set
	push $1
	push 32
	pop $b
	popax
	sub $a,$b
	push $2
	push 46
	pop $b
	popax
	add $a,$b
	call txtpos,setpos
	push $1
	push 64
	pop $b
	popax
	sub $a,$b
	push $2
	push 30
	pop $b
	popax
	add $a,$b
	call txtpod,setpos
	push $1
	push $2
	push 1
	push 1
	push 1000
	popax
	sub 0,$a
	push 1000
	call engine,getimg
	call txtpod,set
	end method
	method updateswin
	push " "
	call swinka,getposx
	call clcamera,getposx
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	push ","
	pop $b
	popax
	add $a,$b
	call swinka,getposy
	call clcamera,getposy
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	add $a,$b
	call txtswin,set
	call swinka,getposx
	push 32
	pop $b
	popax
	sub $a,$b
	call swinka,getposy
	call txtswin,setpos
	end method
	method msminit
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	cthis updatetxtpos
	end method
	method msmmove
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push ilastx
	pop $b
	popax
	sub $a,$b
	push $2
	push ilasty
	pop $b
	popax
	sub $a,$b
	call clcamera,moveplans
	push $1
	push $2
	cthis updatetxtpos
	end method
	method msmove
	cthis getlock
	cmp0
	je l3040
	ret
l3040:
	localint $1
	call mouse,getpx
	pop $1
	localint $2
	call mouse,getpy
	pop $2
	push "msm"
	push sstate
	pop $b
	popax
	add $a,$b
	spushs
	push $1
	push $2
	spop $d
	cthis [$d]
	push $1
	pop ilastx
	push $2
	pop ilasty
	end method
	method mslclick
	cthis getlock
	cmp0
	je l3042
	ret
l3042:
	push "space"
	call keyboard,iskeydown
	push 1
	cmpje
	cmp0
	je l3044
	push "move"
	pop sstate
l3044:
	end method
	method mslrel
	cthis getlock
	push 1
	cmpje
	cmp0
	je l3046
	ret
l3046:
	push "init"
	pop sstate
	end method
	method msrclick
	localint $1
	call mouse,getpx
	pop $1
	localint $2
	call mouse,getpy
	pop $2
	localint $3
	push $1
	push $2
	push 1
	push 1
	call grbuts,isin
	pop $3
	push $3
	push 0
	cmpjne
	cmp0
	je l3048
	localstring $4
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
	call grbuts,get
	pop $4
	call $4,print
l3048:
	end method
	method dbkeydown
	push igmdebug
	neg
	cmp0
	je l3050
	ret
l3050:
	push "lctrl"
	call keyboard,iskeydown
	cmp0
	je l3052
	push "l"
	call keyboard,iskey
	cmp0
	je l3054
	call gameapi,getgamename
	spushs
	spop $a
	call [$a],advcacheload
	jmp l3053
l3054:
	push "s"
	call keyboard,iskey
	cmp0
	je l3056
	call gameapi,getgamename
	spushs
	spop $a
	call [$a],advcachesave
l3056:
l3053:
l3052:
	push "d"
	call keyboard,iskey
	cmp0
	je l3058
	cthis getlock
	cmp0
	je l3060
	cthis enable
	jmp l3059
l3060:
	cthis disable
l3059:
l3058:
	cthis getlock
	cmp0
	je l3062
	ret
l3062:
	push "s"
	call keyboard,iskey
	push 1
	cmpje
	cmp0
	je l3064
	cthis updateswin
l3064:
	end method
	end module

	game Tclassmenu
	method init
	new db,_dbl
	new gmobjvec,gr1
	push "bkg"
	call gr1,add
	end method
	method tload
	localstring $1
	localstring $2
	localstring $3
	pop $3
	pop $2
	pop $1
	push $1
	cthis setgraphpath
	push $3
	push "null"
	cmpjne
	cmp0
	je l3066
	cthis getgraphpath
	push $3
	pop $b
	popax
	add $a,$b
	call _dbl,loadscript
	localint $4
	push 0
	pop $4
l3067:
	push $4
	call _dbl,getrowsno
	cmpjl
	cmp0
	je l3068
	jmp l3070
l3069:
	add $4,1
	pop $4
	jmp l3067
l3070:
	push "snd"
	push $4
	push 0
	call _dbl,get
	pop $b
	popax
	add $a,$b
	push $4
	push 1
	call _dbl,get
	push ".wav"
	pop $b
	popax
	add $a,$b
	cthis newsnd
	jmp l3069
l3068:
l3066:
	new classbutton,_clb
	cthis getgraphpath
	push $2
	pop $b
	popax
	add $a,$b
	push 10
	push "imglobcurs"
	push "gr1"
	call _clb,build2
	push "_gmbutclick"
	call _clb,clickfunc
	push "_gmbutmove"
	call _clb,movonfunc
	push "sndintro"
	call engine,varexist
	cmp0
	je l3072
	push "sndintro"
	cthis cbplay
l3072:
	end method
	method mouselclick
	push 1
	cthis cactsndstop
	end method
	method _gmbutmove
	localstring $1
	pop $1
	call sndakskermovon,play
	push "sndintro"
	call engine,varexist
	cmp0
	je l3074
	call sndintro,isplaying
	jmp l3076
l3074:
	push 0
	jmp l3076
l3075:
	push 1
l3076:
	cmp0
	je l3077
	ret
l3077:
	push "snd"
	push $1
	pop $b
	popax
	add $a,$b
	call engine,varexist
	cmp0
	je l3079
	push "snd"
	push $1
	pop $b
	popax
	add $a,$b
	cthis crselfplay
l3079:
	end method
	method _gmbutclick
	localstring $1
	pop $1
	push $1
	push "_BUTCLICK"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end game

	class TMenu
	method init
	end method
	method tinit
	localstring $1
	pop $1
	push $1
	new Buttons,but1
	end method
	method mousel_click
	push 1
	cthis cactsndstop
	end method
	method but1_moveon
	localstring $1
	call but1,sobject
	pop $1
	call sndakskermovon,play
	push "sndintro"
	call engine,varexist
	cmp0
	je l3081
	call sndintro,isplaying
	jmp l3083
l3081:
	push 0
	jmp l3083
l3082:
	push 1
l3083:
	neg
	cmp0
	je l3084
	push "snd"
	push $1
	pop $b
	popax
	add $a,$b
	call engine,varexist
	cmp0
	je l3086
	push "snd"
	push $1
	pop $b
	popax
	add $a,$b
	cthis cbselfplay
l3086:
l3084:
	push $1
	push "_MOVEON"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method but1_moveoff
	call but1,sobject
	push "_MOVEOFF"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method but1_lclick
	call but1,sobject
	push "_BUTCLICK"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end class

	class TPainter
	method init
	end method
	method tinit
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	localstring $6
	localdef $7
	localstring $8
	pop $8
	pop $7
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	push $1
	push "null"
	cmpjne
	cmp0
	je l3088
	push $1
	clparent GameController,init
l3088:
	cthis unlock
	push $2
	push "null"
	cmpjne
	cmp0
	je l3090
	push $2
	cthis setgraphpath
l3090:
	push $3
	push "null"
	cmpjne
	cmp0
	je l3092
	push "anbkg"
	push $3
	push 0
	cthis newanima
l3092:
	push "anbrush1"
	push $4
	push 3000
	cthis newanima
	push "anbrush1"
	push "anbrush2"
	cthis copyanima
	push 0
	push 1
	call anbrush2,setframe
	call anbrush1,getz
	push 1
	pop $b
	popax
	sub $a,$b
	call anbrush2,setz
	push "anbrush1"
	clparent anima_pack,resizemethods
	push "anbrush2"
	clparent anima_pack,resizemethods
	localint $9
	localint $10
	push $7
	spushs
	push "ru"
	cmpst
	jne l3094
	spop $a
	call anbrush2,getex
	pop $9
	call anbrush2,getpy
	pop $10
	jmp l3093
l3094:
	push "rd"
	cmpst
	jne l3095
	spop $a
	call anbrush2,getex
	pop $9
	call anbrush2,getey
	pop $10
	jmp l3093
l3095:
	push "ld"
	cmpst
	jne l3096
	spop $a
	call anbrush2,getpx
	pop $9
	call anbrush2,getey
	pop $10
	jmp l3093
l3096:
	spop $a
	call anbrush2,getpx
	pop $9
	call anbrush2,getpy
	pop $10
l3093:
	push $9
	push $10
	call anbrush1,saverelpos
	push $9
	push $10
	call anbrush2,saverelpos
	call mouse,hide
	push "anfg"
	push $5
	push 100
	cthis newanima
	push "foreground"
	push 0
	call anfg,setframe
	new gmimgvec,grdraw
	push "anfg"
	push "andraw"
	push "draw"
	call anfg,actionnr
	push "grdraw"
	cthis newanframesgr
	popax
	push 10
	call grdraw,setz
	new gmimgvec,grpaleta
	push "grpaleta"
	push $6
	popax
	pop $b
	psax
	call [$b],operator<
	push 20
	call grpaleta,setz
	new int,_ibrx
	call anbrush2,getpx
	pop _ibrx
	new int,_ibry
	call anbrush2,getpy
	pop _ibry
l3097:
	push _ibrx
	push _ibry
	push 0
	push 1
	call anbrush2,isin
	neg
	cmp0
	je l3098
	add _ibrx,1
	pop _ibrx
	push _ibrx
	call anbrush2,getex
	cmpje
	cmp0
	je l3100
	call anbrush2,getpx
	pop _ibrx
	add _ibry,1
	pop _ibry
l3100:
	jmp l3097
l3098:
	call anbrush2,getpx
	popax
	sub _ibrx,$a
	pop _ibrx
	call anbrush2,getpy
	popax
	sub _ibry,$a
	pop _ibry
	clparent TPainter,tp_mouse_move
	push $8
	push "null"
	cmpjne
	cmp0
	je l3102
	new string,savefile
	push $8
	pop savefile
	new db,dbkolory
	localdef $11
	push $8
	pop $11
	push $11
	cthis saveexist
	cmp0
	je l3104
	push $11
	call dbkolory,vecload
	push "TPainter0"
	call grdraw,each
	jmp l3103
l3104:
	push "TPainter1"
	call grdraw,each
	cthis tp_savekols
l3103:
l3102:
	end method
	method TPainter0
	localdef $1
	pop $1
	push $1
	push 0
	call dbkolory,get
	push $1
	push 1
	call dbkolory,get
	push $1
	push 2
	call dbkolory,get
	push 255
	push 0
	cthis paint
	end method
	method TPainter1
	localdef $1
	pop $1
	cthis white
	push 255
	push 0
	cthis paint
	push "255 255 255"
	push " "
	call dbkolory,dbaddstringrow
	end method
	method game_exit
	call mouse,show
	clparent GameController,game_exit
	end method
	method tp_exit
	call mouse,show
	end method
	method tp_mouse_move
	call anbrush1,mssetrelpos
	call anbrush2,mssetrelpos
	end method
	method tp_mouse_lclick
	cthis getlock
	neg
	cmp0
	je l3106
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	push $1
	push $2
	push 1
	push 1
	call grdraw,isin
	cmp0
	je l3108
	call grdraw,getsfound
	spushs
	call anbrush2,getpx
	push _ibrx
	pop $b
	popax
	add $a,$b
	call anbrush2,getpy
	push _ibry
	pop $b
	popax
	add $a,$b
	call anbrush2,getrgba
	push 0
	spop $a
	call [$a],paint
	cthis onpaint
	jmp l3107
l3108:
	push $1
	push $2
	push 0
	push 1
	call grpaleta,isin
	cmp0
	je l3110
	localdef $3
	localdef $4
	localdef $5
	localdef $6
	call grpaleta,getsfound
	spushs
	push $1
	push $2
	spop $a
	call [$a],getrgba
	pop $6
	pop $5
	pop $4
	pop $3
	push 255
	pop $6
	push $3
	push $4
	push $5
	push $6
	push 0
	call anbrush2,paint
	cthis onsetbrush
l3110:
l3107:
l3106:
	end method
	method tp_savekols
	push GAME
	spushs
	push "dbkolory"
	spop $a
	call [$a],hasvar
	neg
	cmp0
	je l3112
	ret
l3112:
	push "TPainter2"
	call grdraw,each
	push savefile
	call dbkolory,vecsave
	end method
	method TPainter2
	localdef $1
	pop $1
	localint $2
	localint $3
	localint $4
	localint $5
	localint $6
	cthis getex
	pop $6
	localint $7
	cthis getey
	pop $7
	localint $8
	cthis getpx
	pop $8
	localint $9
	cthis getpy
	pop $9
l3113:
	push $8
	push $6
	cmpjne
	cmp0
	je l3114
	push $9
	push $7
	cmpjne
	jmp l3116
l3114:
	push 0
	jmp l3116
l3115:
	push 1
l3116:
	cmp0
	je l3117
	push $8
	push $9
	push 0
	push 1
	cthis isin
	cmp0
	je l3119
	push $8
	pop $2
	push $9
	pop $3
	push $6
	pop $8
	jmp l3118
l3119:
	add $8,1
	pop $8
l3118:
	jmp l3113
l3117:
	push $2
	push $3
	cthis getrgba
	popax
	pop $4
	pop $3
	pop $2
	push $1
	push 0
	push $2
	call dbkolory,set
	push $1
	push 1
	push $3
	call dbkolory,set
	push $1
	push 2
	push $4
	call dbkolory,set
	end method
	method tp_default_erase
	cthis white
	push 255
	cthis tp_erase
	end method
	method tp_erase
	localint $1
	localint $2
	localint $3
	localint $4
	pop $4
	pop $3
	pop $2
	pop $1
	localint $5
	push 0
	pop $5
l3120:
	push $5
	call grdraw,size
	cmpjl
	cmp0
	je l3121
	jmp l3123
l3122:
	add $5,1
	pop $5
	jmp l3120
l3123:
	push $5
	call grdraw,get
	spushs
	push $1
	push $2
	push $3
	push $4
	push 0
	spop $a
	call [$a],paint
	push $5
	push 0
	push 255
	call dbkolory,set
	push $5
	push 1
	push 255
	call dbkolory,set
	push $5
	push 2
	push 255
	call dbkolory,set
	jmp l3122
l3121:
	cthis tp_savekols
	end method
	end class

	class TPainterCon
	parent TPainter
	parent GameController
	method init
	end method
	end class

	module dzmouse
	method init
	new anima,anmsc
	end method
	method load
	localstring $1
	pop $1
	push $1
	call anmsc,load
	call anmsc,hide
	end method
	method set
	localstring $1
	pop $1
	call anmsc,show
	push $1
	push 0
	call anmsc,setframe
	push "anmsc"
	call mouse,setcursor
	call anmsc,hide
	end method
	method setstd
	push "std"
	cthis set
	end method
	method setact
	push "act"
	cthis set
	end method
	method setbut
	push "but"
	cthis set
	end method
	method get
	call anmsc,actionname
	ret
	end method
	method isact
	cthis get
	push "act"
	cmpje
	end method
	method isstd
	cthis get
	push "std"
	cmpje
	end method
	method isbut
	cthis get
	push "but"
	cmpje
	end method
	end module

	new int,iMusic
	push 1
	pop iMusic
	new int,iNutka
	push 1
	pop iNutka
	new string,sAskerGame
	class Dzieje
	parent classadv
	parent GameController
	parent Localize
	method init
	localstring $1
	pop $1
	push 0
	pop igmstate
	clparent classadv,init
	push $1
	clparent GameController,init
	clparent Localize,init
	push 0
	push 0
	call clbuts,setcursorpos
	push 0
	push 0
	call claskexit,setcursorpos
	new int,X1
	new int,Y1
	new int,X2
	new int,Y2
	push 117
	push 85
	push 916
	push 684
	pop Y2
	pop X2
	pop Y1
	pop X1
	push $1
	cthis path=
	push SNDPATH
	cthis setwavpath
	push A
	push "pop 50"
	push "pik1"
	cthis sfxs=
	call bsms,setstd
	call clmusic,play
	call clbuts,reset
	call dzmouse,setstd
	new Music,mus
	push igmdemo
	cmp0
	je l3125
	new anima,anpieczatka
	call anpieczatka,Dzieje0
l3125:
	end method
	method Dzieje0
	push "scripts/common/pieczatka.pyz"
	cthis load
	push 2000
	cthis setz
	cthis hide
	end method
	method cshowbut
	localdef $1
	pop $1
	push "getcx"
	call cbok,getimgfunc
	push "getcy"
	call cbok,getimgfunc
	push $1
	call clp,show
	end method
	method napisshow
	localint $1
	localint $2
	pop $2
	pop $1
	cthis show
	push $1
	push $2
	cthis move
	end method
	method napispod
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],getcx
	cthis getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],getey
	push 5
	pop $b
	popax
	add $a,$b
	cthis napisshow
	end method
	method crect
	push 600
	push 196
	push 403
	push 497
	new Rect,rec
	end method
	method crect2
	push 6
	push 174
	push 1012
	push 530
	new Rect,rec2
	end method
	method inpiecz
	localint $1
	localint $2
	pop $2
	pop $1
	push igmdemo
	cmp0
	je l3127
	push $1
	push $2
	call anpieczatka,setpos
	call anpieczatka,show
l3127:
	end method
	method askfor
	localdef $1
	pop $1
	push igmstate
	push 111
	cmpjne
	cmp0
	je l3129
	push $1
	pop sAskerGame
	call claskexit,askexittomenu
l3129:
	end method
	method outpiecz
	push igmdemo
	cmp0
	je l3131
	call anpieczatka,hide
l3131:
	end method
	method onmusicfin
	call mus,play
	end method
	method exit
	call bsms,setstd
	cthis game_exit
	push igmsubtitle
	cmp0
	je l3133
	call subtitle,reset
l3133:
	end method
	method askrestart
	call claskexit,askrestart
	end method
	method advclick
	push igmdebug
	cmp0
	je l3135
	push igmstate
	push 0
	cmpje
	cmp0
	jne l3138
	push igmstate
	push 5
	cmpje
	jmp l3139
l3137:
	push 0
	jmp l3139
l3138:
	push 1
l3139:
	jmp l3140
l3135:
	push 0
	jmp l3140
l3136:
	push 1
l3140:
	cmp0
	je l3141
	push 1
	cthis cactsndstop
l3141:
	end method
	method keyrestart
	end method
	end class

	class DziejeGame
	parent Dzieje
	method init
	localdef $1
	pop $1
	push $1
	clparent Dzieje,init
	new int,_idialvolume
	push 100
	pop _idialvolume
	call ccs,hide
	end method
	method advbg
	new img,imgtlo
	push "scripts/plansza/advbg.png"
	call imgtlo,load
	end method
	method gamebg
	new img,imgtlo
	push "scripts/common/advbg.png"
	call imgtlo,load
	end method
	method clogo
	push "$scripts/plansza/tytul.pyz 1"
	cthis img=
	end method
	method subgamebg
	push "$scripts/plansza/podklad.pyz"
	cthis img=
	end method
	method cvol=
	localint $1
	pop $1
	push 0
	push $1
	push 100
	cthis between
	pop _idialvolume
	end method
	method cvol
	push _idialvolume
	end method
	method cvplay
	localstring $1
	pop $1
	push $1
	cthis cbplay
	push $1
	spushs
	cthis cvol
	spop $a
	call [$a],setvol
	end method
	method gotoadv
	localstring $1
	localstring $2
	pop $2
	pop $1
	call gameapi,getgamename
	pop sgmlastscene
	push $1
	pop sgmglobpath
	push $2
	pop sgmgame
	push "gameadvdef"
	call gameapi,play
	end method
	method evalclip
	push "DziejeGame0"
	cthis eval
	end method
	method DziejeGame0
	push X1
	push Y1
	push X2
	push Y2
	cthis clip
	end method
	method advclip
	push X1
	push Y1
	push X2
	push Y2
	cthis clip
	end method
	end class

	class Epoka
	parent Dzieje
	method init
	localstring $1
	pop $1
	push $1
	clparent Dzieje,init
	new int,bStartPlay
	new int,iakplay
	new string,sakplay
	new int,iakid
	push A
	push "prehistoria"
	push "Prehistoria"
	push "egipt"
	push "EpokaEg"
	push "daleki"
	push "EpokaCh"
	push "europa"
	push "EpokaSr"
	push "afryka"
	push "EpokaAf"
	push "ameryka"
	push "EpokaAm"
	push "grecja"
	push "EpokaGr"
	push "rzym"
	push "EpokaRz"
	push "grgry"
	cthis list=
	push A
	push "Prehistoria"
	push "bgrlas"
	push "Sredniowiecze"
	push "bgrlas"
	push "lmusic"
	cthis list=
	cthis loadlekcja
	push iNutka
	neg
	cmp0
	je l3143
	call clmusic,reset
l3143:
	end method
	method blitwpodklad
	push 1
	popax
	sub 0,$a
	push 1
	cthis setframe
	cthis getname
	call imgpodklad2,blit
	push 1
	popax
	sub 0,$a
	push 0
	cthis setframe
	end method
	method loadlekcja
	push 12
	push 185
	push 500
	push 690
	pop Y2
	pop X2
	pop Y1
	pop X1
	push A
	push "kolo 10"
	push "putpuz 20"
	cthis sfxs=
	localdef $1
	cthis getgraphpath
	pop $1
	push "plansza"
	cthis path=
	push A
	push "podklad2.png"
	cthis imgs=
	new gmimgvec,grramka
	push "grramka"
	push "ramka.pyz"
	popax
	pop $b
	psax
	call [$b],operator<
	push 100
	call grramka,setz
	new gmimgvec,grprzyc
	push "grprzyc"
	push "przyciski.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push 110
	call grprzyc,setz
	push "Epoka0"
	call grprzyc,each
	push "help"
	call grprzyc,remove
	push $1
	cthis setgraphpath
	push "antytul"
	push "tytul"
	push LANG
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	push 0
	cthis newanima
	push "antytul"
	call imgpodklad2,blit
	delete antytul
	new gmimgvec,grludki
	push "grludki"
	push "ludki.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push "blitwpodklad"
	call grludki,eval
	push 105
	call grludki,setz
	push "Epoka3"
	call grludki,each
	new gmimgvec,grobs
	push "grobs"
	push "obiekty.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push "Epoka4"
	call grobs,each
	new gmimgvec,grmap
	push "anbgepo"
	push "$lang/Mezo2_bkg.pyz"
	push 0
	cthis newanima
	push X1
	push Y1
	push X2
	push Y2
	call anbgepo,clip
	push A
	push "anbgepo"
	push "grobs"
	call grmap,addlist
	push X1
	push X2
	pop $b
	popax
	add $a,$b
	call anbgepo,getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push Y1
	push Y2
	pop $b
	popax
	add $a,$b
	call anbgepo,geth
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	call grmap,move
	new anima,anmovon
	call anmovon,Epoka5
	new anima,anbutnutka
	call anbutnutka,Epoka7
	new int,bZoom
	push 0
	pop bZoom
	new anima,anbutzoom
	call anbutzoom,Epoka10
	new anima,anzoomer
	call anzoomer,hide
	new int,iilesfx
	push 0
	pop iilesfx
	new gmobjvec,sfxbg
	push "snd"
	push "sfxbg"
	push 20
	call sfxbg,buildarray
	push "Epoka13"
	call sfxbg,each
	new db,dbob
	cthis getgraphpath
	push "obiekty"
	pop $b
	popax
	add $a,$b
	push LANG
	pop $b
	popax
	add $a,$b
	push ".beh"
	pop $b
	popax
	add $a,$b
	call dbob,loadbeh
	push "-say"
	cthis adddzwieki
	push "-say2"
	cthis adddzwieki
	push "-say3"
	cthis adddzwieki
	cthis stdexportsnd
	new int,iFontSize
	push 25
	pop iFontSize
	new def,sfntopis
	push "configs/fonts/normal.ttf"
	push iFontSize
	cthis snewfont
	pop sfntopis
	new def,sfntopis2
	push "configs/fonts/normal.ttf"
	push iFontSize
	push 4
	pop $b
	popax
	add $a,$b
	cthis snewfont
	pop sfntopis2
	new text,txtobrazki
	push sfntopis
	call txtobrazki,setfont
	push "grtxtile"
	push "text"
	push "txtileo"
	push 16
	cthis newimgarray
	push "Epoka14"
	call grtxtile,each
	new anima,anobrazek
	call anobrazek,Epoka19
	new int,iileobrazow
	new string,sactobraz
	push "null"
	pop sactobraz
	new gmimgvec,grobrazki
	call grobrazki,Epoka21
	new gmimgvec,_grbuts
	push A
	push "grobs"
	push "grludki"
	push "grprzyc"
	push "grtxtile"
	call _grbuts,addgroups
	push A
	push "anbutzoom"
	push "anbutnutka"
	call _grbuts,addlist
	call _grbuts,sortimgs
	new def,_slastlek
	push "null"
	pop _slastlek
	new def,sclickedlek
	push "null"
	pop sclickedlek
	new def,_itoler
	push 50
	pop _itoler
	new def,_imover
	push 12
	pop _imover
	push "timbgcyk"
	push "Epoka22"
	cthis cycle=
	call timbgcyk,play
	push 1
	pop igmstate
	end method
	method Epoka0
	localdef $1
	pop $1
	cthis actionname
	push "help"
	cmpje
	cmp0
	je l3145
	cthis hide
	ret
l3145:
	push "_butmoveon"
	push "Epoka1"
	cthis addmethod
	push "_butmoveoff"
	push "Epoka2"
	cthis addmethod
	end method
	method Epoka1
	call fxpop,play
	push igmstate
	push 3
	cmpjne
	cmp0
	je l3147
	call dzmouse,setbut
	push 1
	popax
	sub 0,$a
	push 1
	cthis setframe
l3147:
	end method
	method Epoka2
	push igmstate
	push 3
	cmpjne
	cmp0
	je l3149
	call dzmouse,setstd
	push 1
	popax
	sub 0,$a
	push 0
	cthis setframe
l3149:
	end method
	method Epoka3
	localdef $1
	pop $1
	cthis hide
	push "_butmoveon"
	push "_lekmoveonact"
	cthis addmethod
	push "_butmoveoff"
	push "_lekmoveoffact"
	cthis addmethod
	end method
	method Epoka4
	localdef $1
	pop $1
	push "_butmoveon"
	push "_lekmoveonact"
	cthis addmethod
	push "_butmoveoff"
	push "_lekmoveoffact"
	cthis addmethod
	push 20
	cthis setz
	cthis hide
	push X1
	push Y1
	push X2
	push Y2
	cthis clip
	end method
	method Epoka5
	cthis getgraphpath
	push "moveon.pyz"
	pop $b
	popax
	add $a,$b
	cthis load
	cthis hide
	push 10
	cthis setz
	new vector,vecac
	push "string"
	call vecac,type
	localint $1
	push 0
	pop $1
l3150:
	push $1
	cthis nofactions
	cmpjl
	cmp0
	je l3151
	jmp l3153
l3152:
	add $1,1
	pop $1
	jmp l3150
l3153:
	push $1
	cthis nameofaction
	call vecac,add
	jmp l3152
l3151:
	push "contains"
	push "Epoka6"
	cthis addmethod
	end method
	method Epoka6
	localstring $1
	pop $1
	push $1
	call vecac,contains
	end method
	method Epoka7
	push "scripts/plansza/nutka.pyz"
	cthis load
	push 100
	cthis setz
	push 0
	push iNutka
	cthis setframe
	push "_butmoveon"
	push "Epoka8"
	cthis addmethod
	push "_butmoveoff"
	push "Epoka9"
	cthis addmethod
	end method
	method Epoka8
	call fxpop,play
	push igmstate
	push 3
	cmpjne
	cmp0
	je l3155
	call dzmouse,setbut
l3155:
	end method
	method Epoka9
	push igmstate
	push 3
	cmpjne
	cmp0
	je l3157
	call dzmouse,setstd
l3157:
	end method
	method Epoka10
	push "scripts/plansza/zoom.pyz"
	cthis load
	push 100
	cthis setz
	push "_butmoveon"
	push "Epoka11"
	cthis addmethod
	push "_butmoveoff"
	push "Epoka12"
	cthis addmethod
	end method
	method Epoka11
	push igmstate
	push 2
	cmpje
	cmp0
	je l3159
	push bZoom
	jmp l3161
l3159:
	push 0
	jmp l3161
l3160:
	push 1
l3161:
	cmp0
	je l3162
	call fxpop,play
	call dzmouse,setbut
	push 1
	popax
	sub 0,$a
	push 1
	cthis setframe
l3162:
	end method
	method Epoka12
	push igmstate
	push 2
	cmpje
	cmp0
	je l3164
	push bZoom
	cmp0
	je l3166
	push 1
	popax
	sub 0,$a
	push 0
	cthis setframe
l3166:
	call dzmouse,setstd
l3164:
	end method
	method Epoka13
	localdef $1
	pop $1
	push A
	push "iaction"
	push 1
	popax
	sub 0,$a
	push "iframe"
	push 1
	popax
	sub 0,$a
	push "vol"
	push 100
	cthis vars2
	end method
	method Epoka14
	localdef $1
	pop $1
	push sfntopis2
	cthis setfont
	push $1
	cthis txtset
	push "withincut"
	push "Epoka15"
	cthis addmethod
	push "actionname"
	push "Epoka16"
	cthis addmethod
	push "_butmoveon"
	push "Epoka17"
	cthis addmethod
	push "_butmoveoff"
	push "Epoka18"
	cthis addmethod
	end method
	method Epoka15
	localint $1
	localint $2
	pop $2
	pop $1
	push 1
	end method
	method Epoka16
	push "_number_"
	end method
	method Epoka17
	push igmstate
	push 2
	cmpje
	cmp0
	je l3168
	cthis isvisible
	cmp0
	je l3168
	cthis get
	spushs
	spop $h
	call $h,to_i
	push 0
	cmpja
	jmp l3170
l3168:
	push 0
	jmp l3170
l3169:
	push 1
l3170:
	cmp0
	je l3171
	call dzmouse,setact
l3171:
	end method
	method Epoka18
	push igmstate
	push 2
	cmpje
	cmp0
	je l3173
	cthis isvisible
	jmp l3175
l3173:
	push 0
	jmp l3175
l3174:
	push 1
l3175:
	cmp0
	je l3176
	call dzmouse,setstd
l3176:
	end method
	method Epoka19
	push "onsetframe"
	push "Epoka20"
	cthis addmethod
	push "onfinish"
	push "funfinsay"
	cthis addmethod
	end method
	method Epoka20
	localstring $1
	localint $2
	push 0
	pop $2
l3177:
	push $2
	call sfxbg,size
	cmpjl
	cmp0
	je l3178
	jmp l3180
l3179:
	add $2,1
	pop $2
	jmp l3177
l3180:
	push $2
	call sfxbg,get
	pop $1
	push $1
	spushs
	spop $a
	call [$a],iaction
	push 1
	popax
	sub 0,$a
	cthis actionnr
	cmpje
	cmp0
	je l3182
	push $1
	spushs
	spop $a
	call [$a],iframe
	cthis framenr
	cmpje
	jmp l3184
l3182:
	push 0
	jmp l3184
l3183:
	push 1
l3184:
	cmp0
	je l3185
	push $1
	spushs
	push $1
	spushs
	spop $a
	call [$a],vol
	spop $a
	call [$a],setvol
	push $1
	spushs
	spop $a
	call [$a],play
l3185:
	jmp l3179
l3178:
	end method
	method Epoka21
	push A
	push "txtobrazki"
	push "grtxtile"
	push "anobrazek"
	cthis addlist
	push 50
	cthis setz
	cthis hide
	end method
	method Epoka22
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	push $1
	push $2
	push X1
	push Y1
	push X2
	push Y2
	call clsurf,isin
	cmp0
	je l3187
	push igmstate
	push 1
	cmpje
	cmp0
	je l3189
	localint $3
	push $1
	push X1
	pop $b
	popax
	sub $a,$b
	push _itoler
	cmpjl
	cmp0
	je l3191
	push X1
	call anbgepo,getpx
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpja
	cmp0
	je l3193
	push $3
	push _imover
	cmpja
	cmp0
	je l3195
	push _imover
	pop $3
l3195:
	push $3
	push 0
	call grmap,move
l3193:
	jmp l3190
l3191:
	push X2
	push $1
	pop $b
	popax
	sub $a,$b
	push _itoler
	cmpjl
	cmp0
	je l3197
	call anbgepo,getex
	push X2
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpja
	cmp0
	je l3199
	push $3
	push _imover
	cmpja
	cmp0
	je l3201
	push _imover
	pop $3
l3201:
	push $3
	popax
	sub 0,$a
	push 0
	call grmap,move
l3199:
l3197:
l3190:
	push $2
	push Y1
	pop $b
	popax
	sub $a,$b
	push _itoler
	cmpjl
	cmp0
	je l3203
	push Y1
	call anbgepo,getpy
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpja
	cmp0
	je l3205
	push $3
	push _imover
	cmpja
	cmp0
	je l3207
	push _imover
	pop $3
l3207:
	push 0
	push $3
	call grmap,move
l3205:
	jmp l3202
l3203:
	push Y2
	push $2
	pop $b
	popax
	sub $a,$b
	push _itoler
	cmpjl
	cmp0
	je l3209
	call anbgepo,getey
	push Y2
	pop $b
	popax
	sub $a,$b
	pop $3
	push $3
	push 0
	cmpja
	cmp0
	je l3211
	push $3
	push _imover
	cmpja
	cmp0
	je l3213
	push _imover
	pop $3
l3213:
	push 0
	push $3
	popax
	sub 0,$a
	call grmap,move
l3211:
l3209:
l3202:
	push GAME
	spushs
	spop $a
	call [$a],lekcjamove
l3189:
l3187:
	cthis play
	end method
	method _lekmoveonact
	push igmstate
	push 1
	cmpje
	cmp0
	je l3215
	cthis getname
	spushs
	push "ludki"
	spop $h
	call $h,contains
	cmp0
	je l3217
	call fxpop,play
	cthis show
	jmp l3216
l3217:
	cthis getname
	spushs
	push "anobiekty"
	spop $h
	call $h,contains
	cmp0
	je l3219
	jmp l3218
l3219:
	push 1
	popax
	sub 0,$a
	cthis isplaying
	neg
	cmp0
	je l3221
	push 1
	popax
	sub 0,$a
	cthis play
l3221:
l3218:
l3216:
	call dzmouse,setact
	localdef $1
	cthis actionname
	pop $1
	push $1
	call anmovon,contains
	cmp0
	je l3223
	push $1
	push 0
	call anmovon,setframe
	call anmovon,show
	push igmdemo
	cmp0
	je l3225
	push $1
	call vblok,contains
	jmp l3227
l3225:
	push 0
	jmp l3227
l3226:
	push 1
l3227:
	cmp0
	je l3228
	call anmovon,getcx
	call anmovon,getey
	push 60
	pop $b
	popax
	sub $a,$b
	cthis inpiecz
l3228:
l3223:
l3215:
	end method
	method adddzwieki
	localstring $1
	pop $1
	localstring $2
	localint $3
	localint $4
	push 0
	pop $4
l3229:
	push $4
	call dbob,getrowsno
	cmpjl
	cmp0
	je l3230
	jmp l3232
l3231:
	add $4,1
	pop $4
	jmp l3229
l3232:
	push 0
	pop $3
l3233:
	push $3
	push $4
	call dbob,getcolsno
	cmpjl
	cmp0
	je l3234
	push $4
	push $3
	call dbob,get
	push $1
	cmpje
	cmp0
	je l3236
	push 2
	popax
	add $3,$a
	pop $3
	push ""
	pop $2
l3237:
	push $4
	push $3
	call dbob,get
	push ")"
	cmpjne
	cmp0
	je l3238
	push $4
	push $3
	call dbob,get
	push " "
	pop $b
	popax
	add $a,$b
	popax
	add $2,$a
	pop $2
	add $3,1
	pop $3
	jmp l3237
l3238:
	add $3,1
	pop $3
	push "snd"
	push $4
	pop $b
	popax
	add $a,$b
	push "_"
	pop $b
	popax
	add $a,$b
	push $3
	pop $b
	popax
	add $a,$b
	push $2
	cthis addsnd
	jmp l3235
l3236:
	add $3,1
	pop $3
l3235:
	jmp l3233
l3234:
	jmp l3231
l3230:
	end method
	method _restoresfx
	push 0
	pop iilesfx
	push 0
	call sfxbg,stop
	push "Epoka23"
	call sfxbg,each
	end method
	method Epoka23
	localdef $1
	pop $1
	push 1
	popax
	sub 0,$a
	pop iframe
	push 1
	popax
	sub 0,$a
	pop iaction
	end method
	method _lekmoveoffact
	push igmstate
	push 1
	cmpje
	cmp0
	je l3240
	cthis anhide
	call dzmouse,setstd
	call anmovon,hide
	cthis outpiecz
l3240:
	end method
	method lekcjamove
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	push $1
	push $2
	push 0
	push 1
	call _grbuts,isincut
	cmp0
	je l3242
	localdef $3
	call _grbuts,getsfound
	pop $3
	push $3
	push _slastlek
	cmpjne
	cmp0
	je l3244
	cthis leklastoff
	push $3
	pop _slastlek
	push $3
	spushs
	spop $a
	call [$a],_butmoveon
l3244:
	jmp l3241
l3242:
	cthis leklastoff
l3241:
	end method
	method leklastoff
	push _slastlek
	push "null"
	cmpjne
	cmp0
	je l3246
	push _slastlek
	spushs
	spop $a
	call [$a],_butmoveoff
	push "null"
	pop _slastlek
l3246:
	end method
	method lekcjaclick
	push igmstate
	push 3
	cmpje
	cmp0
	je l3248
	push 2
	pop igmstate
	call anzoomer,hide
	ret
	jmp l3247
l3248:
	push igmstate
	push 2
	cmpje
	cmp0
	je l3250
	call mouse,getpos
	push X1
	push Y1
	push X2
	push Y2
	call clsurf,isin
	cmp0
	jne l3253
	call mouse,getpos
	push 0
	push 0
	call grludki,isin
	jmp l3254
l3252:
	push 0
	jmp l3254
l3253:
	push 1
l3254:
	jmp l3255
l3250:
	push 0
	jmp l3255
l3251:
	push 1
l3255:
	cmp0
	je l3256
	cthis lekcjaret
	ret
l3256:
l3247:
	push _slastlek
	push "null"
	cmpjne
	cmp0
	je l3258
	localdef $1
	push _slastlek
	spushs
	spop $a
	call [$a],actionname
	pop $1
	push $1
	spushs
	push "nutka"
	cmpst
	jne l3260
	spop $a
	push iNutka
	neg
	pop iNutka
	push 0
	push iNutka
	call anbutnutka,setframe
	push iNutka
	cmp0
	je l3262
	call clmusic,play
	jmp l3261
l3262:
	call clmusic,reset
l3261:
	call fxpik1,play
	jmp l3259
l3260:
	push "prehistoria"
	cmpst
	je l3264
	push "egipt"
	cmpst
	je l3264
	push "grecja"
	cmpst
	je l3264
	push "daleki"
	cmpst
	je l3264
	push "rzym"
	cmpst
	je l3264
	push "europa"
	cmpst
	je l3264
	push "afryka"
	cmpst
	je l3264
	push "ameryka"
	cmpst
	je l3264
	jmp l3263
l3264:
	spop $a
	jmp l3259
l3263:
	push "Prehistoria"
	cmpst
	jne l3265
	spop $a
	jmp l3259
l3265:
	push "help"
	cmpst
	jne l3266
	spop $a
	jmp l3259
l3266:
	push "exit"
	cmpst
	jne l3267
	spop $a
	push "MainMenu"
	call gameapi,play
	jmp l3259
l3267:
	push "_number_"
	cmpst
	jne l3268
	spop $a
	push igmstate
	push 2
	cmpje
	cmp0
	je l3270
	call fxpik1,play
	push sactobraz
	push "txtileo"
	call _slastlek,strsubbs
	push 0
	cthis viewobraz
l3270:
	jmp l3259
l3268:
	push "nonzoom"
	cmpst
	jne l3271
	spop $a
	jmp l3259
l3271:
	push "yeszoom"
	cmpst
	jne l3272
	spop $a
	push igmstate
	push 2
	cmpje
	cmp0
	je l3274
	call fxpik1,play
	push 3
	pop igmstate
	call anzoomer,show
	call dzmouse,setstd
l3274:
	jmp l3259
l3272:
	spop $a
	push igmstate
	push 1
	cmpje
	cmp0
	je l3276
	push igmdemo
	cmp0
	je l3278
	push $1
	call vblok,contains
	jmp l3280
l3278:
	push 0
	jmp l3280
l3279:
	push 1
l3280:
	cmp0
	je l3281
	ret
l3281:
	push $1
	pop sactobraz
	localdef $2
	push $1
	call dbob,findbyrow
	pop $2
	push 0
	pop iileobrazow
	localdef $3
	push 0
	pop $3
l3282:
	push $3
	push $2
	call dbob,getcolsno
	cmpjl
	cmp0
	je l3283
	push $2
	push $3
	call dbob,get
	push "file:"
	cmpje
	cmp0
	je l3285
	add iileobrazow,1
	pop iileobrazow
l3285:
	add $3,1
	pop $3
	jmp l3282
l3283:
	push iileobrazow
	push 0
	cmpje
	cmp0
	je l3287
	ret
l3287:
	call dzmouse,setstd
	push 2
	pop igmstate
	push _slastlek
	pop sclickedlek
	call fxpik1,play
	push $1
	push 1
	push 0
	cthis viewobraz
l3276:
l3259:
	jmp l3257
l3258:
	push 1
	cthis cactsndstop
l3257:
	end method
	method lnapiscol
	push 117
	push 1
	push 1
	ret
	end method
	method lnapiscolact
	push 217
	push 1
	push 1
	ret
	end method
	method viewobraz
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	push 0
	cthis cactsndstop
	push $3
	pop iakplay
	push $1
	pop sakplay
	push $2
	pop iakid
	localdef $4
	push $1
	call dbob,findbyrow
	pop $4
	localstring $5
	localstring $6
	localdef $7
	push 776
	pop $7
	localdef $8
	push 194
	pop $8
	localdef $9
	push $7
	pop $9
	localdef $10
	push $8
	push iFontSize
	pop $b
	popax
	add $a,$b
	push 5
	pop $b
	popax
	add $a,$b
	pop $10
	localdef $11
	push 8
	pop $11
	push "- "
	cthis lnapiscol
	call txtileo0,txtsetcol
	push $9
	push $10
	call txtileo0,setpos
	call txtileo0,show
	call txtileo0,getw
	push $11
	pop $b
	popax
	add $a,$b
	popax
	add $9,$a
	pop $9
	localint $12
	push 1
	pop $12
l3288:
	push $12
	push iileobrazow
	cmpjle
	cmp0
	je l3289
	jmp l3291
l3290:
	add $12,1
	pop $12
	jmp l3288
l3291:
	push "txtileo"
	push $12
	pop $b
	popax
	add $a,$b
	pop $5
	push $12
	push $2
	cmpje
	cmp0
	je l3293
	push $5
	spushs
	push $12
	cthis lnapiscolact
	spop $a
	call [$a],txtsetcol
	jmp l3292
l3293:
	push $5
	spushs
	push $12
	cthis lnapiscol
	spop $a
	call [$a],txtsetcol
l3292:
	push $5
	spushs
	push $9
	push $10
	spop $a
	call [$a],setpos
	push $5
	spushs
	spop $a
	call [$a],show
	push $5
	spushs
	spop $a
	call [$a],getw
	push $11
	pop $b
	popax
	add $a,$b
	popax
	add $9,$a
	pop $9
	jmp l3290
l3289:
	push "txtileo"
	push iileobrazow
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	pop $6
	push $6
	spushs
	push " -"
	cthis lnapiscol
	spop $a
	call [$a],txtsetcol
	push $6
	spushs
	push $9
	push $10
	spop $a
	call [$a],setpos
	push $6
	spushs
	spop $a
	call [$a],show
	push $6
	spushs
	spop $a
	call [$a],getw
	popax
	add $9,$a
	pop $9
	push $7
	push $9
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 0
	call grtxtile,move
	cthis _restoresfx
	push $4
	push 0
	cmpjae
	cmp0
	je l3295
	localdef $13
	push 1
	pop $13
	localdef $14
	push 0
	pop $14
l3296:
	push $13
	push $4
	call dbob,getcolsno
	cmpjl
	cmp0
	je l3297
	push $4
	push $13
	call dbob,get
	spushs
	push "text:"
	cmpst
	jne l3299
	spop $a
	push $4
	push $13
	push 1
	pop $b
	popax
	add $a,$b
	call dbob,get
	pop $5
	push 2
	popax
	add $13,$a
	pop $13
	push "_"
	push " "
	call $5,change
	push "- "
	push $5
	pop $b
	popax
	add $a,$b
	push " -"
	pop $b
	popax
	add $a,$b
	cthis lnapiscol
	call txtobrazki,txtsetcol
	push $7
	call txtobrazki,getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push $8
	call txtobrazki,setpos
	call txtobrazki,show
	jmp l3298
l3299:
	push "file:"
	cmpst
	jne l3300
	spop $a
	add $14,1
	pop $14
	add $13,1
	pop $13
	push $14
	push $2
	cmpje
	cmp0
	je l3302
	push $4
	push $13
	call dbob,get
	pop $5
	add $13,1
	pop $13
	push iakplay
	push 0
	cmpje
	cmp0
	je l3304
	cthis getgraphpath
	push $5
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	call anobrazek,load
	push 190
	call anobrazek,setz
	call anmovon,hide
	push 0
	pop bZoom
	push 0
	push 0
	call anbutzoom,setframe
l3304:
	localint $15
	push 0
	pop $15
l3305:
	push $13
	push $4
	call dbob,getcolsno
	cmpjl
	cmp0
	je l3306
	push $4
	push $13
	call dbob,get
	push "file:"
	cmpjne
	jmp l3308
l3306:
	push 0
	jmp l3308
l3307:
	push 1
l3308:
	cmp0
	je l3309
	push $4
	push $13
	call dbob,get
	spushs
	push "-zoom"
	cmpst
	jne l3311
	spop $a
	add $13,1
	pop $13
	push iakplay
	push 0
	cmpje
	cmp0
	je l3313
	push 1
	pop bZoom
	push 1
	push 0
	call anbutzoom,setframe
	cthis getgraphpath
	push $4
	push $13
	call dbob,get
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	call anzoomer,load
	push 200
	call anzoomer,setz
	call anzoomer,hide
l3313:
	jmp l3310
l3311:
	push "-say"
	cmpst
	je l3315
	push "-say2"
	cmpst
	je l3315
	push "-say3"
	cmpst
	je l3315
	jmp l3314
l3315:
	spop $a
l3316:
	push $4
	push $13
	call dbob,get
	push ")"
	cmpjne
	cmp0
	je l3317
	add $13,1
	pop $13
	jmp l3316
l3317:
	push $15
	push iakplay
	cmpje
	cmp0
	je l3319
	push "snd"
	push $4
	pop $b
	popax
	add $a,$b
	push "_"
	pop $b
	popax
	add $a,$b
	push $13
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	push "funfinsay"
	cthis cbplayfin
	push 1
	pop bStartPlay
l3319:
	add $15,1
	pop $15
	jmp l3310
l3314:
	push "-sfx"
	cmpst
	jne l3320
	spop $a
	localint $16
	push $4
	push $13
	push 2
	pop $b
	popax
	add $a,$b
	call dbob,get
	pop $16
	push $16
	push iakplay
	cmpje
	cmp0
	je l3322
	push iilesfx
	call sfxbg,get
	pop $5
	add iilesfx,1
	pop iilesfx
	push $5
	spushs
	push SFXPATH
	push $4
	push $13
	push 1
	pop $b
	popax
	add $a,$b
	call dbob,get
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],load
	push 3
	popax
	add $13,$a
	pop $13
	push $5
	spushs
	push $16
	spop $a
	call [$a],iaction=
	push $5
	spushs
	push $4
	push $13
	call dbob,get
	spop $a
	call [$a],iframe=
	add $13,1
	pop $13
	push $5
	spushs
	push $4
	push $13
	call dbob,get
	spop $a
	call [$a],vol=
	jmp l3321
l3322:
	push 4
	popax
	add $13,$a
	pop $13
l3321:
	jmp l3310
l3320:
	spop $a
l3310:
	add $13,1
	pop $13
	jmp l3305
l3309:
	push $4
	call dbob,getcolsno
	pop $13
	push iakplay
	call anobrazek,play
	jmp l3301
l3302:
l3323:
	push $13
	push $4
	call dbob,getcolsno
	cmpjl
	cmp0
	je l3324
	push $4
	push $13
	call dbob,get
	push "file:"
	cmpjne
	jmp l3326
l3324:
	push 0
	jmp l3326
l3325:
	push 1
l3326:
	cmp0
	je l3327
	add $13,1
	pop $13
	jmp l3323
l3327:
l3301:
	jmp l3298
l3300:
	spop $a
	add $13,1
	pop $13
l3298:
	jmp l3296
l3297:
l3295:
	end method
	method funfinsay
	localint $1
	push 0
	pop $1
	cthis getname
	push "anobrazek"
	cmpje
	cmp0
	je l3329
	cthis cisplaying
	neg
	cmp0
	je l3331
	push 1
	pop $1
l3331:
	jmp l3328
l3329:
	push iakplay
	call anobrazek,isplaying
	push 0
	cmpje
	cmp0
	je l3333
	push 1
	pop $1
l3333:
l3328:
	push $1
	cmp0
	je l3335
	push iakplay
	call anobrazek,nofactions
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l3337
	push sakplay
	push iakid
	push iakplay
	push 1
	pop $b
	popax
	add $a,$b
	cthis viewobraz
l3337:
l3335:
	end method
	method lekcjaret
	push 1
	pop igmstate
	push 0
	cthis cactsndstop
	push 0
	call anobrazek,stop
	cthis _restoresfx
	call grobrazki,hide
	push 0
	push 0
	call anbutzoom,setframe
	push 0
	pop bZoom
	cthis leklastoff
	push sclickedlek
	push "null"
	cmpjne
	cmp0
	je l3339
	push sclickedlek
	spushs
	spop $a
	call [$a],_butmoveoff
	push "null"
	pop sclickedlek
l3339:
	cthis lekcjamove
	end method
	end class

	new classgamepause,clpause
	new classgamemusic,clmusic
	push "sounds/bgr/"
	call clmusic,sndbgrpath
	push "sounds/music/"
	call clmusic,musicpath
	push "sounds/music.db"
	call clmusic,load
	new snd,sndakskermovon
	push "sounds/sfx/butmovon.wav"
	call sndakskermovon,load
	push 50
	call sndakskermovon,setvol
	class classasker2
	parent classasker
	method init
	clparent classasker,init
	new snd,sndaskexit
	push 0
	push 1
	call sndaskexit,setstartstopflag
	new snd,sndaskexitgame
	push 0
	push 1
	call sndaskexitgame,setstartstopflag
	new snd,sndyes
	push 0
	push 1
	call sndyes,setstartstopflag
	new snd,sndno
	push 0
	push 1
	call sndno,setstartstopflag
	new snd,sndaskrestart
	push 0
	push 1
	call sndaskrestart,setstartstopflag
	new snd,sndaskrestart2
	push 0
	push 1
	call sndaskrestart2,setstartstopflag
	cthis reload
	push "scripts/common/asker.pyz"
	push 12000
	cthis load
	push "sndakskermovon"
	cthis fxonmovon
	end method
	method reload
	push SNDPATH
	cthis setwavpath
	localdef $1
	cthis getsndpath
	pop $1
	push $1
	push "nar07.wav"
	pop $b
	popax
	add $a,$b
	call sndaskexit,load
	push $1
	push "nar12.wav"
	pop $b
	popax
	add $a,$b
	call sndaskexitgame,load
	push $1
	push "nar08.wav"
	pop $b
	popax
	add $a,$b
	call sndyes,load
	push $1
	push "nar09.wav"
	pop $b
	popax
	add $a,$b
	call sndno,load
	push $1
	push "nar11.wav"
	pop $b
	popax
	add $a,$b
	call sndaskrestart,load
	push $1
	push "nar14.wav"
	pop $b
	popax
	add $a,$b
	call sndaskrestart2,load
	end method
	method askexittomenu
	push "sndaskexit"
	push "sndyes"
	push "sndno"
	push "myestomenu"
	push "mnotomenu"
	cthis ask
	end method
	method askexitgame
	push "sndaskexitgame"
	push "sndyes"
	push "sndno"
	push "myestomenu"
	push "mnotomenu"
	cthis ask
	end method
	method askrestart
	push "sndaskrestart"
	push "sndyes"
	push "sndno"
	push "myesrestart"
	push "mnorestart"
	cthis ask
	end method
	method askrestart2
	push "sndaskrestart2"
	push "sndyes"
	push "sndno"
	push "myesrestart"
	push "mnorestart"
	cthis ask
	end method
	method mnotomenu
	end method
	method myestomenu
	call modadvglob,delheros
	call clsave,free
	call gameapi,getgamename
	spushs
	push "Archeo"
	cmpst
	jne l3341
	spop $a
	push "SubMenu"
	jmp l3340
l3341:
	push "Bizuteria"
	cmpst
	jne l3342
	spop $a
	push "SubMenu"
	jmp l3340
l3342:
	push "Epoki"
	cmpst
	jne l3343
	spop $a
	push "SubMenu"
	jmp l3340
l3343:
	push "Puzzle"
	cmpst
	jne l3344
	spop $a
	push "SubMenu"
	jmp l3340
l3344:
	push "Puzzle2"
	cmpst
	jne l3345
	spop $a
	push "SubMenu"
	jmp l3340
l3345:
	push "Quiz"
	cmpst
	jne l3346
	spop $a
	push "SubMenu"
	jmp l3340
l3346:
	push "Muzeum"
	cmpst
	jne l3347
	spop $a
	push "MenuGry"
	jmp l3340
l3347:
	push "MainMenu"
	cmpst
	jne l3348
	spop $a
	push "Outro"
	jmp l3340
l3348:
	push "Bajka"
	cmpst
	jne l3349
	spop $a
	push "MainMenu"
	jmp l3340
l3349:
	spop $a
	push "SubMenu"
l3340:
	call gameapi,play
	end method
	method mnorestart
	call gameapi,getgamename
	spushs
	push "SubMenu"
	cmpst
	jne l3351
	spop $a
	push "MenuGry"
	jmp l3350
l3351:
	spop $a
	push "MainMenu"
l3350:
	call gameapi,play
	end method
	method myesrestart
	cthis crestart
	end method
	method ask
	localstring $1
	localstring $2
	localstring $3
	localstring $4
	localstring $5
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	call ccs,isplaying
	neg
	cmp0
	je l3353
	push $1
	push $2
	push $3
	push $4
	push $5
	clparent classasker,ask
l3353:
	end method
	end class

	new classasker2,claskexit
	method LANG=
	localdef $1
	pop $1
	push $1
	pop LANG
	push "sounds/"
	pop SNDPATH
	push LANG
	push "pl"
	cmpje
	cmp0
	je l3355
	push ""
	pop LANG
l3355:
	call LANG,length
	push 0
	cmpja
	cmp0
	je l3357
	push LANG
	push "/"
	pop $b
	popax
	add $a,$b
	popax
	add SNDPATH,$a
	pop SNDPATH
l3357:
	call claskexit,reload
	end method
	module clbuts
	method init
	end method
	method load
	new classbutton,buts
	push "scripts/common/buttons.pyz"
	push 4000
	push "imglobcurs"
	call buts,build
	call engine,actclassname
	push "butclick"
	call buts,transclickfunc
	call engine,actclassname
	push "butmovon"
	call buts,transmovonfunc
	call engine,actclassname
	push "butmovoff"
	call buts,transmovofffunc
	call buts,disableall
	new db,dbb
	push "scripts/common/buts.db"
	call dbb,load
	new snd,sndfxglobon
	push "sounds/sfx/globbutmovon.wav"
	call sndfxglobon,load
	push 50
	call sndfxglobon,setvol
	new def,bvisible
	push 1
	pop bvisible
	end method
	method reset
	call buts,disableall
	localdef $1
	call gameapi,getgamename
	pop $1
	localint $2
	push $1
	call dbb,findbyrow
	pop $2
	push $2
	push 0
	cmpjae
	cmp0
	je l3359
	localint $3
	push $2
	call dbb,getcolsno
	pop $3
	localint $4
	push 1
	pop $4
l3360:
	push $4
	push $3
	cmpjl
	cmp0
	je l3361
	jmp l3363
l3362:
	add $4,1
	pop $4
	jmp l3360
l3363:
	push $2
	push $4
	call dbb,get
	call buts,enable
	jmp l3362
l3361:
l3359:
	end method
	method setcursorpos
	localint $1
	localint $2
	pop $2
	pop $1
	push $1
	push $2
	call buts,setcursorpos
	end method
	method enable
	localstring $1
	pop $1
	push $1
	call buts,enable
	end method
	method butmovon
	localstring $1
	pop $1
	call sndfxglobon,play
	call mouse,isvisible
	pop bvisible
	call mouse,show
	cthis getname
	push "_"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_butmoveon"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method butmovoff
	localstring $1
	pop $1
	push bvisible
	neg
	cmp0
	je l3365
	call mouse,hide
l3365:
	cthis getname
	push "_"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_butmoveoff"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	method butclick
	localstring $1
	pop $1
	push $1
	push "pause"
	cmpje
	cmp0
	je l3367
	call clpause,pause
	jmp l3366
l3367:
	push $1
	push "exit"
	cmpje
	cmp0
	je l3369
	call gameapi,getgamename
	spushs
	push "MenuGry"
	cmpst
	je l3372
	push "MenuTest"
	cmpst
	je l3372
	push "MenuBaj"
	cmpst
	je l3372
	jmp l3371
l3372:
	spop $a
	push "MainMenu"
	call gameapi,play
	jmp l3370
l3371:
	push "SubMenu"
	cmpst
	jne l3373
	spop $a
	push sSubMenu
	push "quiz"
	cmpje
	cmp0
	je l3375
	push "MainMenu"
	call gameapi,play
	jmp l3374
l3375:
	push "MenuGry"
	call gameapi,play
l3374:
	jmp l3370
l3373:
	spop $a
	call claskexit,askexittomenu
l3370:
	jmp l3368
l3369:
	push $1
	push "restart"
	cmpje
	cmp0
	je l3377
	call claskexit,askrestart
l3377:
l3368:
l3366:
	cthis getname
	push "_"
	pop $b
	popax
	add $a,$b
	push $1
	pop $b
	popax
	add $a,$b
	push "_butclick"
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	cthis [$d]
	end method
	end module

	class classplacepointer2
	parent classplacepointer
	method init
	clparent classplacepointer,init
	push "scripts/common/strzalka.pyz"
	cthis load
	end method
	end class

	push 0
	pop igmstate
	push igmwinlocal
	cmp0
	je l3379
	localstring $1
	push "appdata"
	call engine,getspecialpath
	pop $1
	push $1
	push "null"
	cmpjne
	cmp0
	je l3381
	push $1
	push "/"
	pop $b
	popax
	add $a,$b
	push sgmproject
	pop $b
	popax
	add $a,$b
	call engine,mkdir
	push 0
	cmpje
	jmp l3383
l3381:
	push 0
	jmp l3383
l3382:
	push 1
l3383:
	cmp0
	je l3384
	push $1
	push "/"
	pop $b
	popax
	add $a,$b
	push sgmproject
	pop $b
	popax
	add $a,$b
	push "/saves"
	pop $b
	popax
	add $a,$b
	call engine,mkdir
l3384:
l3379:
	call bsms,setstd
	call clbuts,load
	push "scripts/plansza/kursory.pyz"
	call dzmouse,load
	push "MainLoader"
	call gameapi,play
	game MainLoader
	parent Dzieje
	method init
	push "mainloader"
	clparent Dzieje,init
	push "scripts/common/cursors.pyz"
	call advmouse,load
	push "scripts/common/defaults.adv"
	call modadv,load
	push "scripts/common/sounds.db"
	call modadv,loadsounds
	push "snd"
	call modadv,settalktype
	push "scripts/common/initscript.dsc"
	call modadv,loadscript
	push "saves/global.txt"
	call clsave,load
	cthis getname
	pop sgmlastscene
	push "startgame:"
	push 1
	call modadv,get
	call gameapi,play
	end method
	end game

	game Mezo
	method init
	new img,imgtlo
	push "scripts/plansza/podklad2.png"
	call imgtlo,load
	call engine,redraw
	push "Mezo2"
	call gameapi,play
	end method
	end game

	game Mezo2
	parent Epoka
	method init
	push igmdemo
	cmp0
	je l3386
	new vector,vblok
	push "string"
	call vblok,type
	push "begin"
	push "wielblad"
	push "sfinks"
	push "rydwan"
	push "bron"
	push "instrumenty"
	push "nemes"
	push "meble"
	push "nil"
	push "bogowie"
	push "faraon"
	push "swiatynie"
	push "nawadnianie"
	push "budowapiramidy"
	push "piramidy"
	push "nefretete"
	push "waga"
	push "hipo"
	push "krokodyl"
	push "sandaly"
	push "wino"
	push "swiatyniaskala"
	push "rolnictwo"
	push "maka"
	push "miary"
	push "obelisk"
	push "ciekawostki"
	push "uroda"
	push "ziemia"
	push "kamieniolom"
	push "hieroglify"
	push "mumia"
	push "budowaswiatyni"
	push "matematyka"
	push "bizuteria"
	call vblok,beginadd
l3386:
	push "mezo"
	clparent Epoka,init
	end method
	method mouse_move
	cthis lekcjamove
	end method
	method mouse_lclick
	cthis lekcjaclick
	end method
	end game

	new string,QuizMode
	push "l"
	pop QuizMode
	game Quiz
	parent DziejeGame
	method init
	push "quiz"
	clparent DziejeGame,init
	push A
	push "nasadza 80"
	cthis sfxs=
	push A
	push "sndl1"
	push "wskaz babiloskiego ucznika"
	push "mgo"
	push "sndl2"
	push "wskaz babilonskiego piechura z wlcznia"
	push "mgo"
	push "sndl3"
	push "wskaz wojownikow z bliskiego wschodu"
	push "mgo"
	push "sndl4"
	push "wskaz tarcze uzywana w starozytnej mezopotami"
	push "mgo"
	push "sndl5"
	push "wskaz najstarszy model bliskowschodniego rydwanu"
	push "mgo"
	push "sndl6"
	push "wskaz asyryjski rydwan"
	push "mgo"
	push "sndl7"
	push "wskaz sumeryjski rydwan"
	push "mgo"
	push "sndl8"
	push "wsakz helm uzywany przez armie na bliskim wschodzie"
	push "mgo"
	push "sndl9"
	push "jak wygladalo miasto na bliskim wschodzie?"
	push "mgo"
	push "sndl10"
	push "jak wygladaly sumeryjskie domy budowane z glinianych cegiel?"
	push "mgo"
	push "sndl11"
	push "na jakie zwierzeta polowali asyryjscy krolowie?"
	push "mgo"
	push "sndl12"
	push "wskaz muzykow z babilonu"
	push "mgo"
	push "sndl13"
	push "ktora korone krol zakladal w czasie wojny"
	push "mgo"
	push "sndl14"
	push "wskaz asyryjska ksiezniczke"
	push "mgo"
	push "sndl15"
	push "jakich przyrzadow do pisania uzywali pisarze w mezopotamii"
	push "mgo"
	push "sndl16"
	push "jak wygladaly bramy sumeryjskich miast"
	push "mgo"
	push "sndl17"
	push "ktory z krolow wladal sarozytna mezopotamia?"
	push "mgo"
	push "sndl18"
	push "wskaz tron wladcy znad eufratu"
	push "mgo"
	push "sndl19"
	push "pokaz palme daktylowa"
	push "mgo"
	push "sndl20"
	push "ktore owoce to daktyle?"
	push "mgo"
	push "sndl21"
	push "wkaz kolczan na straly przywiazywany do assyryjskiego rydwanu"
	push "mgo"
	push "sndl22"
	push "ktory instrument posiada pudlo rezonansowe?"
	push "mgo"
	push "sndl23"
	push "ktore zwierze pracowalo w kupieckich karawanach na bliskim wschodzie"
	push "mgo"
	push "sndl24"
	push "ktory dom do dzis budowany jest w delcie eufratu?"
	push "mgo"
	push "sndl25"
	push "wkaz glowice kolumny z palacu nad rzeka tygrys"
	push "mgo"
	push "sndl26"
	push "wskaz rekonstrukcje wiezy babel z miasta babilon"
	push "mgo"
	push "sndl27"
	push "wskaz zikkurat z miasta ur"
	push "mgo"
	push "sndl28"
	push "wkaz tekst napisany pismem klinowym"
	push "mgo"
	push "sndl29"
	push "ktory obrazek przedstawia soche z siewnikiem?"
	push "mgo"
	push "sndl30"
	push "ktorym przyrzadem wykonano pieczec widoczna na gorze ekranu?"
	push "mgo"
	push "sndt1"
	push "na ktorej mapie zaznaczono bialym kolorem starozytna mezopotamie?"
	push "mgo"
	push "sndt2"
	push "na ktorej mapie zaznaczono miasto babilon?"
	push "mgo"
	push "sndt3"
	push "wkaz jarzmo zakladane na czola wolow"
	push "mgo"
	push "sndt4"
	push "wskaz plan starozytnego miasta khorsabad"
	push "mgo"
	push "sndt5"
	push "wskaz zikkurat z miasta khorsabad"
	push "mgo"
	push "sndt6"
	push "wskaz lire"
	push "mgo"
	push "sndt7"
	push "wskaz lire"
	push "mgo"
	push "sndt8"
	push "wskaz krolewska lire odnaleziona w grobowcu w miescie ur"
	push "mgo"
	push "sndt9"
	push "na ktorym obrazku zaznaczono sale tronowa krola?"
	push "mgo"
	push "sndt10"
	push "ktory obrazek oznacza slowo ryba?"
	push "mgo"
	push "sndt11"
	push "wskaz monete szekel"
	push "mgo"
	push "sndgo"
	push "Witaj w tecie wiedzy o Staroytnej Mezopotamii; Kliknij na mnie jeli chcesz ebym powtrzy pytanie; Uwaaj moe si zdarzy e w pytaniu jest wicej ni jedna poprawna odpowied; Zaczynamy"
	push "Quiz0"
	push "sndno"
	push "Niee"
	push "null"
	push "sndyes"
	push "Tak "
	push "null"
	push "sndend"
	push "Twj wynik"
	push "null"
	cthis sounds=
	push A
	push "bkg.pyz"
	push "kolo.pyz 5"
	push "lapki.pyz 5"
	push "$lang/logo.pyz 5"
	push "prof.pyz 10"
	cthis imgs=
	new int,iwynik
	new Button,buts
	call anprof,Button_isinalpha
	call anprof,Button_moveonms
	call anprof,Button_moveoffms
	push "butclick"
	push "Quiz1"
	call anprof,addmethod
	push "anprof"
	call buts,add
	new gmimgvec,grok
	push "grok"
	push "okeje.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push 50
	call grok,setz
	call grok,hide
	new int,ifontpoint
	push 32
	pop ifontpoint
	new string,sfont
	push ifontpoint
	cthis stdfont
	pop sfont
	push "txtpyt"
	push ""
	push sfont
	push 255
	push 253
	push 178
	cthis newtext
	push "txtok"
	push ""
	push sfont
	push 255
	push 253
	push 178
	cthis newtext
	push "txtbad"
	push ""
	push sfont
	push 255
	push 253
	push 178
	cthis newtext
	new gmimgvec,grels
	new vector,vtmp
	new int,ilepyt
	new int,idpyt
	push 1
	popax
	sub 0,$a
	pop idpyt
	new string,sbgimg
	push "null"
	pop sbgimg
	new int,badodp
	push 0
	pop badodp
	new int,okodp
	push 0
	pop okodp
	push QuizMode
	spushs
	push "l"
	cmpst
	jne l3390
	spop $a
	push 30
	call vtmp,vecnewint
	push 30
	pop ilepyt
	jmp l3389
l3390:
	push "t"
	cmpst
	jne l3391
	spop $a
	push 11
	call vtmp,vecnewint
	push 11
	pop ilepyt
	jmp l3389
l3391:
	spop $a
l3389:
	call vtmp,hash
	localint $1
	push 0
	pop $1
l3392:
	push $1
	push ilepyt
	cmpjl
	cmp0
	je l3393
	jmp l3395
l3394:
	add $1,1
	pop $1
	jmp l3392
l3395:
	push QuizMode
	push $1
	call vtmp,get
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	call grels,add
	jmp l3394
l3393:
	new gmimgvec,grsq
	push "grsq"
	push "kwadraty.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	call grsq,hide
	push "Quiz2"
	call grsq,eval
	new gmimgvec,grodp
	push "grprzyc"
	push "przyciski.pyz"
	push "Quiz4"
	call buts,load
	call buts,unlock
	push "timwait"
	push 1000
	push "mfight"
	cthis timer=
	push "onfinish"
	push "Quiz6"
	call anprof,addmethod
	push "sndgo"
	cthis mprof
	push 5
	pop igmstate
	end method
	method Quiz0
	push 0
	pop igmstate
	cthis mfight
	end method
	method Quiz1
	push igmstate
	push 1
	cmpje
	cmp0
	je l3388
	cthis mpytaj
l3388:
	end method
	method Quiz2
	cthis Button_isinvis
	cthis Button_moveonms
	cthis Button_moveoffms
	push "butclick"
	push "Quiz3"
	cthis addmethod
	cthis getname
	call buts,add
	end method
	method Quiz3
	push igmstate
	push 1
	cmpje
	cmp0
	je l3397
	cthis isvisible
	cmp0
	je l3399
	push 1
	popax
	sub 0,$a
	cthis actionnr
	call grok,get
	spushs
	spop $a
	call [$a],hide
	cthis hide
	call fxnasadza,play
	jmp l3398
l3399:
	push 1
	popax
	sub 0,$a
	cthis actionnr
	call grok,get
	spushs
	spop $a
	call [$a],show
	cthis show
	call fxnasadza,play
l3398:
l3397:
	end method
	method Quiz4
	localdef $1
	pop $1
	cthis Button_stdalpha
	push "butclick"
	push "Quiz5"
	cthis addmethod
	end method
	method Quiz5
	push igmstate
	push 1
	cmpje
	cmp0
	je l3401
	localint $1
	push 1
	pop $1
	localint $2
	push 0
	pop $2
l3402:
	push $2
	push 3
	cmpjl
	cmp0
	je l3403
	jmp l3405
l3404:
	add $2,1
	pop $2
	jmp l3402
l3405:
	localdef $3
	push $2
	call grodp,get
	spushs
	spop $a
	call [$a],framename
	pop $3
	localdef $4
	push $2
	call grsq,get
	pop $4
	push $4
	spushs
	spop $a
	call [$a],isvisible
	cmp0
	je l3407
	push "ok"
	call $3,contains
	jmp l3409
l3407:
	push 0
	jmp l3409
l3408:
	push 1
l3409:
	cmp0
	jne l3411
	push $4
	spushs
	spop $a
	call [$a],isvisible
	neg
	cmp0
	je l3412
	push "ok"
	call $3,contains
	neg
	jmp l3414
l3412:
	push 0
	jmp l3414
l3413:
	push 1
l3414:
	jmp l3415
l3410:
	push 0
	jmp l3415
l3411:
	push 1
l3415:
	cmp0
	je l3416
	jmp l3406
l3416:
	push 0
	pop $1
l3406:
	jmp l3404
l3403:
	push 0
	pop igmstate
	push $1
	cmp0
	je l3418
	add okodp,1
	pop okodp
	push "yes"
	call anprof,play
	push "sndyes"
	cthis cbplay
	jmp l3417
l3418:
	add badodp,1
	pop badodp
	push "no"
	call anprof,play
	push "sndno"
	cthis cbplay
l3417:
l3401:
	end method
	method Quiz6
	cthis actionname
	push "yes"
	cmpje
	cmp0
	jne l3421
	cthis actionname
	push "no"
	cmpje
	jmp l3422
l3420:
	push 0
	jmp l3422
l3421:
	push 1
l3422:
	cmp0
	je l3423
	call timwait,play
l3423:
	end method
	method mlevelsav
	push QuizMode
	spushs
	push "l"
	cmpst
	jne l3425
	spop $a
	push "archeo"
	jmp l3424
l3425:
	push "s"
	cmpst
	jne l3426
	spop $a
	push "szkielety"
	jmp l3424
l3426:
	push "t"
	cmpst
	jne l3427
	spop $a
	push "konstruktor"
	jmp l3424
l3427:
	spop $a
l3424:
	end method
	method msave
	localstring $1
	pop $1
	push "enable_"
	push $1
	pop $b
	popax
	add $a,$b
	call csav,bset
	call csav,stdsave
	end method
	method mgetpyt
	push idpyt
	call grels,get
	end method
	method mpytaj
	push "snd"
	cthis mgetpyt
	pop $b
	popax
	add $a,$b
	cthis mprof
	end method
	method mprof
	localstring $1
	pop $1
	push "talk"
	call anprof,play
	push 0
	pop igmstate
	push $1
	cthis cbplay
	end method
	method mendpro
	push "stand"
	call anprof,play
	end method
	method mgo
	push 1
	pop igmstate
	cthis mendpro
	end method
	method mprepare
	push GAME
	spushs
	spop $a
	call [$a],Quiz7
	end method
	method Quiz7
	add idpyt,1
	pop idpyt
	call grok,hide
	call grodp,deleteallgm
	call grodp,free
	push sbgimg
	push "null"
	cmpjne
	cmp0
	je l3429
	push sbgimg
	spushs
	spop $d
	delete [$d]
	push "null"
	pop sbgimg
l3429:
	push "grodp"
	cthis mgetpyt
	push ".pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator<
	call grodp,size
	push 3
	cmpja
	cmp0
	je l3431
	call grodp,first
	pop sbgimg
	call grodp,removefirst
l3431:
	call grodp,hash
	call grsq,hide
	localdef $1
	call grsq,first
	spushs
	spop $a
	call [$a],getpx
	pop $1
	localint $2
	push 0
	pop $2
l3432:
	push $2
	push 3
	cmpjl
	cmp0
	je l3433
	jmp l3435
l3434:
	add $2,1
	pop $2
	jmp l3432
l3435:
	localdef $3
	push $2
	call grodp,get
	pop $3
	localdef $4
	push $2
	call grsq,get
	pop $4
	push $3
	spushs
	push $4
	spushs
	spop $a
	call [$a],getpx
	push $1
	pop $b
	popax
	sub $a,$b
	push 0
	spop $a
	call [$a],setpos
	jmp l3434
l3433:
	push ""
	push idpyt
	push 1
	pop $b
	popax
	add $a,$b
	pop $b
	popax
	add $a,$b
	push "/"
	pop $b
	popax
	add $a,$b
	call grels,size
	pop $b
	popax
	add $a,$b
	call txtpyt,txtset
	push 91
	call txtpyt,getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push 751
	call txtpyt,geth
	pop $b
	popax
	sub $a,$b
	call txtpyt,setpos
	cthis msetpoint
	end method
	method msetpoint
	push okodp
	call txtok,txtset
	push 256
	call txtok,getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push 751
	call txtok,geth
	pop $b
	popax
	sub $a,$b
	call txtok,setpos
	push badodp
	call txtbad,txtset
	push 406
	call txtbad,getw
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push 751
	call txtbad,geth
	pop $b
	popax
	sub $a,$b
	call txtbad,setpos
	end method
	method mfight
	push idpyt
	call grels,size
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjae
	cmp0
	je l3437
	push 2
	pop igmstate
	cthis msetpoint
	push GAME
	spushs
	spop $a
	call [$a],Quiz8
	jmp l3436
l3437:
	cthis mprepare
	cthis mpytaj
l3436:
	end method
	method Quiz8
	call grok,hide
	call grodp,hide
	call grsq,hide
	push sbgimg
	push "null"
	cmpjne
	cmp0
	je l3439
	push sbgimg
	spushs
	spop $a
	call [$a],hide
l3439:
	call okodp,to_r
	call ilepyt,to_r
	pop $b
	popax
	div $a,$b
	psax
	push 100.0
	pop $b
	popax
	mul $a,$b
	pop iwynik
	push "txtend"
	push ""
	push iwynik
	pop $b
	popax
	add $a,$b
	push "%"
	pop $b
	popax
	add $a,$b
	push 64
	cthis stdbold
	push 245
	push 245
	push 151
	cthis newtext
	new img,imgb
	call txtend,getw
	push 20
	pop $b
	popax
	add $a,$b
	call txtend,geth
	push 20
	pop $b
	popax
	add $a,$b
	push 248
	push 108
	push 0
	push 255
	call imgb,create
	push 500
	call imgb,setz
	call imgb,ancenterscreen
	push 0
	push 150
	popax
	sub 0,$a
	call imgb,move
	push 2
	push 0
	push 32
	push 224
	push 255
	call imgb,imgborders
	push 510
	call txtend,setz
	push iResX
	call txtend,getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push iResY
	call txtend,geth
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 150
	pop $b
	popax
	sub $a,$b
	call txtend,setpos
	push "sndend"
	cthis cbplay
	end method
	method mouse_lclick
	push igmstate
	push 5
	cmpje
	cmp0
	je l3441
	push 1
	cthis cactsndstop
l3441:
	end method
	method mouse_rclick
	push igmdebug
	cmp0
	je l3443
	push 1
	cthis cactsndstop
l3443:
	end method
	end game

	new int,EpokiLevel
	push 3
	pop EpokiLevel
	game Epoki
	parent DziejeGame
	method init
	push "epoki"
	clparent DziejeGame,init
	cthis gamebg
	push A
	push "getpuz 40"
	push "putpuz 40"
	cthis sfxs=
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	new gmimgvec,grpod
	push "grpod"
	push ""
	push EpokiLevel
	pop $b
	popax
	add $a,$b
	push "podklad.pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator*
	localstring $1
	new gmimgvec,grels
	new string,sgrfound
	new int,ileznalezc
	push 0
	pop ileznalezc
	localint $2
	push 0
	pop $2
l3444:
	push $2
	call grpod,size
	cmpjl
	cmp0
	je l3445
	jmp l3447
l3446:
	add $2,1
	pop $2
	jmp l3444
l3447:
	push "grel"
	push $2
	pop $b
	popax
	add $a,$b
	pop $1
	push $1
	spushs
	spop $e
	new gmimgvec,[$e]
	push $1
	call grels,add
	push $1
	push ""
	push EpokiLevel
	pop $b
	popax
	add $a,$b
	push $2
	call grpod,get
	spushs
	spop $a
	call [$a],actionname
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator<
	push $1
	spushs
	push 10
	spop $a
	call [$a],setz
	push $1
	spushs
	push "Epoki0"
	spop $a
	call [$a],eval
	jmp l3446
l3445:
	new int,inextsnd
	push 0
	pop inextsnd
	new DelayMover,cmov
	new classplacepointer2,clp
	push "txtpt"
	push 3
	push 50
	cthis stdfont
	push 248
	cthis grey
	cthis newtext
	push 50
	push iResY
	call txtpt,geth
	pop $b
	popax
	sub $a,$b
	push 5
	pop $b
	popax
	sub $a,$b
	call txtpt,setpos
	push A
	push "snd1_1"
	push "Przed tob trzech wojownikw"
	push "mnext"
	push "snd1_egipt"
	push "Egipski"
	push "mnext"
	push "snd1_mezo"
	push "Asyryjski"
	push "mnext"
	push "snd1_preh"
	push "Prehistoryczny"
	push "mnext"
	push "snd1_2"
	push "Dopasuj ich bronie i zbroje; Uwaaj"
	push "Epoki1"
	push "snd1_3"
	push "Moesz pomyli si tylko 3 razy"
	push "mstart"
	push "sndgood"
	push "Dobrze"
	push "mretstate"
	push "sndnon"
	push "Nie"
	push "mretstate"
	push "sndbadend"
	push "Niestety to by ostatni bd; Sprbuj zagra ponownie"
	push "null"
	push "snd1_end"
	push "wietnie wszyscy wojownicy gotowi do boju"
	push "Epoki2"
	push "snd2_1"
	push "Teraz przyporzdkuj mieszkacw do ich miast"
	push "mnext"
	push "snd2_egipt"
	push "Egipt"
	push "mnext"
	push "snd2_mezo"
	push "Mezopotamia"
	push "mnext"
	push "snd2_preh"
	push "Prehistoryczna osada"
	push "mnext"
	push "snd2_sred"
	push "redniowieczny zamek"
	push "mnext"
	push "snd2_2"
	push "Do dziea"
	push "mstart"
	push "snd2_end"
	push "Doskonale! Nauczye si bardzo duo o dawnych cywilizacjach"
	push "null"
	push "snd3_1"
	push "Na obrazkach widzisz 3 pikne ksiniczki"
	push "mnext"
	push "snd3_egipt"
	push "egipsk"
	push "mnext"
	push "snd3_preh"
	push "prehistoryczn"
	push "mnext"
	push "snd3_mezo"
	push "mezopotamsk"
	push "mnext"
	push "snd3_2"
	push "Dopasuj ich ozdoby; Uwaaj"
	push "Epoki3"
	push "snd3_end"
	push "Wspaniale; Wszystkie ksiniczki wygldaj cudownie w swoich oryginalnych ozdobach"
	push "null"
	cthis sounds=
	push "snd"
	push EpokiLevel
	pop $b
	popax
	add $a,$b
	push "_1"
	pop $b
	popax
	add $a,$b
	cthis cbplay
	end method
	method Epoki0
	push 1
	popax
	sub 0,$a
	cthis actionnr
	push 1
	cmpje
	cmp0
	je l3449
	cthis hide
	push 20
	cthis setz
	add ileznalezc,1
	pop ileznalezc
	jmp l3448
l3449:
	push 1
	popax
	sub 0,$a
	cthis actionnr
	push 2
	cmpje
	cmp0
	je l3451
	push 15
	cthis setz
l3451:
l3448:
	end method
	method Epoki1
	push "snd1_3"
	cthis cbplay
	call txtpt,getpx
	push 5
	pop $b
	popax
	add $a,$b
	call txtpt,getpy
	push "dd"
	call clp,show
	end method
	method Epoki2
	push 2
	pop EpokiLevel
	push "Epoki"
	call gameapi,play
	end method
	method Epoki3
	push "snd1_3"
	cthis cbplay
	call txtpt,getpx
	push 5
	pop $b
	popax
	add $a,$b
	call txtpt,getpy
	push "dd"
	call clp,show
	end method
	method mretstate
	push 1
	pop igmstate
	end method
	method mstart
	call cmov,unlock
	push 1
	pop igmstate
	call clp,stoph
	end method
	method mnext
	push inextsnd
	call grpod,size
	cmpje
	cmp0
	je l3453
	push "snd"
	push EpokiLevel
	pop $b
	popax
	add $a,$b
	push "_2"
	pop $b
	popax
	add $a,$b
	cthis cbplay
	call clp,stoph
	jmp l3452
l3453:
	push "snd"
	push EpokiLevel
	pop $b
	popax
	add $a,$b
	push "_"
	pop $b
	popax
	add $a,$b
	push inextsnd
	call grpod,get
	spushs
	spop $a
	call [$a],actionname
	pop $b
	popax
	add $a,$b
	cthis cbplay
	push inextsnd
	call grpod,get
	push "rd"
	call clp,showob
	add inextsnd,1
	pop inextsnd
l3452:
	end method
	method cmov_GET
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	localdef $3
	push igmstate
	push 1
	cmpje
	cmp0
	jne l3456
	push igmstate
	push 3
	cmpje
	jmp l3457
l3455:
	push 0
	jmp l3457
l3456:
	push 1
l3457:
	cmp0
	je l3458
	push $1
	push $2
	push 1
	push 1
	call grels,isin
	cmp0
	je l3460
	call fxgetpuz,play
	call grels,getsfound
	pop sgrfound
	push sgrfound
	spushs
	spop $a
	call [$a],getsfound
	pop $3
	push $3
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],actionnr
	push 2
	cmpje
	cmp0
	je l3462
	push $3
	spushs
	push 300
	spop $a
	call [$a],setz
	push $3
	cthis mssetobj
	push sgrfound
	spushs
	push $3
	spop $a
	call [$a],remove
l3462:
l3460:
l3458:
	end method
	method cmov_PUT
	localint $1
	localint $2
	call mouse,getpos
	pop $2
	pop $1
	localdef $3
	cthis getfree
	pop $3
	call fxputpuz,play
	push $1
	push $2
	push 1
	push 1
	call grpod,isin
	cmp0
	je l3464
	call grpod,getsfound
	spushs
	spop $a
	call [$a],actionname
	call $3,contains
	cmp0
	je l3466
	push $3
	spushs
	push 1
	push $3
	spushs
	spop $a
	call [$a],framenr
	spop $a
	call [$a],setframe
	push $3
	spushs
	push 20
	spop $a
	call [$a],setz
	push $3
	spushs
	push 0
	push 0
	spop $a
	call [$a],setpos
	sub ileznalezc,1
	pop ileznalezc
	push ileznalezc
	push 0
	cmpje
	cmp0
	je l3468
	push 2
	pop igmstate
	push "snd"
	push EpokiLevel
	pop $b
	popax
	add $a,$b
	push "_end"
	pop $b
	popax
	add $a,$b
	cthis cbplay
	jmp l3467
l3468:
	push 3
	pop igmstate
	push "sndgood"
	cthis cbplay
l3467:
	jmp l3465
l3466:
	localint $4
	call txtpt,get
	pop $4
	sub $4,1
	pop $4
	push $4
	push 0
	cmpjl
	cmp0
	je l3470
	push 2
	pop igmstate
	push "sndbadend"
	cthis cbplay
	jmp l3469
l3470:
	push $4
	call txtpt,txtset
	push 3
	pop igmstate
	push "sndnon"
	cthis cbplay
l3469:
	push $3
	spushs
	spop $a
	call [$a],mret
l3465:
	jmp l3463
l3464:
	push $3
	spushs
	spop $a
	call [$a],mret
l3463:
	end method
	method mret
	push sgrfound
	spushs
	cthis getname
	spop $a
	call [$a],add
	push 15
	cthis setz
	push 0
	push 0
	cthis setpos
	end method
	method mouse_lclick
	push igmstate
	push 2
	cmpjne
	cmp0
	je l3472
	push igmstate
	push 3
	cmpjne
	jmp l3474
l3472:
	push 0
	jmp l3474
l3473:
	push 1
l3474:
	cmp0
	je l3475
	push 1
	cthis cactsndstop
l3475:
	end method
	method mouse_rclick
	end method
	method mouse_move
	call mouse,getpos
	push 1
	push 1
	call grpod,isin
	cmp0
	je l3477
	call dzmouse,isstd
	cmp0
	je l3479
	call dzmouse,setact
l3479:
	jmp l3476
l3477:
	call dzmouse,isact
	cmp0
	je l3481
	call dzmouse,setstd
l3481:
l3476:
	end method
	end game

	new string,sArcheo
	push "lew"
	pop sArcheo
	game Archeo
	parent DziejeGame
	method init
	push "archeo"
	clparent DziejeGame,init
	cthis subgamebg
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push A
	push "getpuz 60"
	push "putpuz 60"
	cthis sfxs=
	new gmimgvec,grels
	push "grels"
	push sArcheo
	push ".pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator<
	new string,slastob
	call grels,last
	pop slastob
	call grels,removelast
	push slastob
	spushs
	spop $a
	call [$a],hide
	push slastob
	spushs
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 0
	spop $a
	call [$a],setpos
	push slastob
	spushs
	spop $a
	call [$a],getex
	push 1024
	cmpja
	cmp0
	je l3483
	push slastob
	spushs
	push 1024
	push slastob
	spushs
	spop $a
	call [$a],getex
	pop $b
	popax
	sub $a,$b
	push 3
	pop $b
	popax
	sub $a,$b
	push 0
	spop $a
	call [$a],move
l3483:
	call grels,hash
	push 10
	call grels,sortz
	localint $1
	call grels,size
	spushs
	spop $h
	call $h,rand
	pop $1
	new string,srand
	push $1
	call grels,get
	pop srand
	push $1
	call grels,removeat
	push srand
	spushs
	push 5
	spop $a
	call [$a],setz
	push srand
	spushs
	push 0
	push 0
	spop $a
	call [$a],setpos
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 10
	pop $b
	popax
	add $a,$b
	push Y1
	push X2
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push 10
	pop $b
	popax
	sub $a,$b
	push Y2
	push Y1
	pop $b
	popax
	sub $a,$b
	push 10
	pop $b
	popax
	sub $a,$b
	new Rect,rec1
	push "grels"
	call rec1,fitgrouprand
	new classplacepointer2,clp
	new DelayMover,cmov
	call cmov,unlock
	push A
	push "snd1"
	push "Archeolodzy znaleli staroytny przedmiot; Z go w cao wiedzc e"
	push "Archeo0"
	push "snd2"
	push "ta cz ley ju na swoim miejscu"
	push "Archeo1"
	push "sndbyk"
	push "Zoylimy tabliczk z bykiem z gow czowieka"
	push "null"
	push "sndglowa"
	push "Zrekonstruowalimy kamienny posg"
	push "null"
	push "sndlew"
	push "Po cikiej pracy zrekonstruowalimy przepikn mozaik"
	push "null"
	push "sndrydwan"
	push "Z tej kamiennej tabliczki dowiadujemy si jakie budowano rydwany"
	push "null"
	cthis sounds=
	push "snd1"
	cthis cbplay
	end method
	method Archeo0
	push "snd2"
	cthis cbplay
	push srand
	push "ld"
	call clp,showob
	end method
	method Archeo1
	call clp,stoph
	push 1
	pop igmstate
	end method
	method cmov_GET
	push igmstate
	push 1
	cmpjne
	cmp0
	je l3485
	ret
l3485:
	call mouse,getpos
	push 1
	push 1
	call grels,isin
	cmp0
	je l3487
	call fxgetpuz,play
	localdef $1
	call grels,getsfound
	pop $1
	push $1
	spushs
	push 300
	spop $a
	call [$a],setz
	push $1
	cthis mssetobj
	push $1
	call grels,remove
l3487:
	end method
	method cmov_PUT
	localdef $1
	cthis getfree
	pop $1
	call fxputpuz,play
	push $1
	spushs
	push 20
	spop $a
	call [$a],aninlod
	cmp0
	je l3489
	push $1
	spushs
	push 5
	spop $a
	call [$a],setz
	push $1
	spushs
	push 0
	push 0
	spop $a
	call [$a],setpos
	call grels,empty
	cmp0
	je l3491
	push 2
	pop igmstate
	push slastob
	spushs
	spop $a
	call [$a],show
	push sArcheo
	push "lew"
	cmpje
	cmp0
	je l3493
	push slastob
	spushs
	push 0
	push 0
	spop $a
	call [$a],setpos
	push slastob
	spushs
	push 100
	spop $a
	call [$a],setz
	push slastob
	spushs
	push slastob
	spushs
	spop $a
	call [$a],getex
	push slastob
	spushs
	spop $a
	call [$a],lodx
	pop $b
	popax
	sub $a,$b
	push 200
	pop $b
	popax
	sub $a,$b
	push slastob
	spushs
	spop $a
	call [$a],getey
	push slastob
	spushs
	spop $a
	call [$a],lody
	pop $b
	popax
	sub $a,$b
	push 170
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	push 10
	popax
	sub 0,$a
	push 0
	call grels,move
l3493:
	push "snd"
	push sArcheo
	pop $b
	popax
	add $a,$b
	cthis cbplay
l3491:
	jmp l3488
l3489:
	push $1
	call grels,add
	push 10
	call grels,sortz
l3488:
	end method
	method mouse_lclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3495
	push 1
	cthis cactsndstop
l3495:
	end method
	method mouse_rclick
	push igmdebug
	cmp0
	je l3497
	push 0
	push 0
	call grels,setpos
	push slastob
	spushs
	spop $a
	call [$a],show
l3497:
	end method
	end game

	game Bizuteria
	parent DziejeGame
	method init
	push "bizuteria"
	clparent DziejeGame,init
	push "archeo"
	cthis path=
	cthis subgamebg
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push A
	push "getpuz 60"
	push "putpuz 60"
	cthis sfxs=
	new gmimgvec,grels
	push "grels"
	push "bizuteria.pyz"
	popax
	pop $b
	psax
	call [$b],operator<
	call grels,removefirst
	call grels,hash
	push 10
	call grels,sortz
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 10
	pop $b
	popax
	add $a,$b
	push Y1
	push X2
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	push 10
	pop $b
	popax
	sub $a,$b
	push Y2
	push Y1
	pop $b
	popax
	sub $a,$b
	push 10
	pop $b
	popax
	sub $a,$b
	new Rect,rec1
	push "grels"
	call rec1,fitgrouprand
	new DelayMover,cmov
	call cmov,unlock
	push A
	push "snd1"
	push "W staroytnym grobowcu archeolodzy odnaleli ozdoby krlowej Ur; Ubierz w nie modelk"
	push "Bizuteria0"
	push "sndend"
	push "Brawo; Niejedna dama chciaaby wybra si z takimi ozdobami na bal"
	push "null"
	cthis sounds=
	push "snd1"
	cthis cbplay
	end method
	method Bizuteria0
	push 1
	pop igmstate
	end method
	method cmov_GET
	push igmstate
	push 1
	cmpjne
	cmp0
	je l3499
	ret
l3499:
	call mouse,getpos
	push 1
	push 1
	call grels,isin
	cmp0
	je l3501
	call fxgetpuz,play
	localdef $1
	call grels,getsfound
	pop $1
	push $1
	spushs
	push 300
	spop $a
	call [$a],setz
	push $1
	cthis mssetobj
	push $1
	call grels,remove
l3501:
	end method
	method cmov_PUT
	localdef $1
	cthis getfree
	pop $1
	call fxputpuz,play
	push $1
	spushs
	push 20
	spop $a
	call [$a],aninlod
	cmp0
	je l3503
	push $1
	spushs
	push 5
	spop $a
	call [$a],setz
	push $1
	spushs
	push 0
	push 0
	spop $a
	call [$a],setpos
	call grels,empty
	cmp0
	je l3505
	push 2
	pop igmstate
	push "sndend"
	cthis cbplay
l3505:
	jmp l3502
l3503:
	push $1
	call grels,add
	push 10
	call grels,sortz
l3502:
	end method
	method mouse_lclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3507
	push 1
	cthis cactsndstop
l3507:
	end method
	method mouse_rclick
	push igmdebug
	cmp0
	je l3509
	push "sndend"
	cthis cbplay
l3509:
	end method
	end game

	new int,MuzeumLevel
	push 1
	pop MuzeumLevel
	game Muzeum
	parent DziejeGame
	method init
	push "muzeum"
	clparent DziejeGame,init
	cthis subgamebg
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push A
	push "getpuz 60"
	push "putpuz 60"
	push "ok 70"
	cthis sfxs=
	push "licznik.pyz"
	cthis img=
	push MuzeumLevel
	push 2
	cmpje
	cmp0
	je l3511
	push "wiatrakP.pyz 5"
	cthis img=
l3511:
	new gmimgvec,grels
	push "grels"
	push "muz"
	push MuzeumLevel
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator<
	call grels,hide
	call grels,first
	spushs
	spop $a
	call [$a],show
	call grels,removefirst
	new gmimgvec,grlapy
	push 0
	push 1
	popax
	sub 0,$a
	call anlicznik,nofframes
	call grels,size
	push 2
	pop $b
	popax
	div $a,$b
	psax
	pop $b
	popax
	sub $a,$b
	call anlicznik,setframe
	push "Muzeum0"
	call grels,eval
	call grels,sortimgs
	push A
	push "snd1"
	push "Gwny kurator starego muzeum postanowi zbudowa wystaw sztuki i rzemiosa staroytnej Mezopotamii; Pom pracownikom muzeum znale mezopotamskie dziea w magazynie"
	push "Muzeum1"
	push "sndend1"
	push "wietnie; Przejdmy do kolejnego magazynu"
	push "Muzeum2"
	push "sndend"
	push "Wspaniale! Mamy ju wszystkie potrzebne dziea; Kliknij aby wrci do menu"
	push "Muzeum3"
	cthis sounds=
	push MuzeumLevel
	push 1
	cmpje
	cmp0
	je l3515
	push "snd1"
	cthis cbplay
	jmp l3514
l3515:
	push 1
	pop igmstate
l3514:
	end method
	method Muzeum0
	push 1
	popax
	sub 0,$a
	cthis actionnr
	push 2
	cmpje
	cmp0
	je l3513
	push 10
	cthis setz
	cthis getname
	call grlapy,add
l3513:
	end method
	method Muzeum1
	push 1
	pop igmstate
	end method
	method Muzeum2
	add MuzeumLevel,1
	pop MuzeumLevel
	push "Muzeum"
	call gameapi,play
	end method
	method Muzeum3
	push 3
	pop igmstate
	end method
	method mouse_lclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3517
	push 1
	cthis cactsndstop
	jmp l3516
l3517:
	push igmstate
	push 1
	cmpje
	cmp0
	je l3519
	call mouse,getpos
	push 0
	push 0
	call grels,isin
	cmp0
	je l3521
	localstring $1
	call grels,getsfound
	pop $1
	push $1
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],actionnr
	push 1
	cmpje
	cmp0
	je l3523
	localdef $2
	call grels,getfound
	pop $2
	push $2
	call grels,removeat
	push $2
	call grlapy,get
	spushs
	spop $a
	call [$a],show
	push $2
	call grlapy,removeat
	call fxok,play
	push 1
	popax
	sub 0,$a
	call anlicznik,nofframes
	call anlicznik,framenr
	push 1
	pop $b
	popax
	add $a,$b
	cmpje
	cmp0
	je l3525
	push 2
	pop igmstate
	call anlicznik,hide
	push MuzeumLevel
	push 3
	cmpjl
	cmp0
	je l3527
	push "sndend1"
	cthis cbplay
	jmp l3526
l3527:
	push "sndend"
	cthis cbplay
l3526:
	jmp l3524
l3525:
	call anlicznik,ansetnextfr
l3524:
l3523:
l3521:
	jmp l3518
l3519:
	push igmstate
	push 3
	cmpje
	cmp0
	je l3529
	push "MenuGry"
	call gameapi,play
l3529:
l3518:
l3516:
	end method
	method mouse_rclick
	push igmdebug
	cmp0
	je l3531
	push "sndend1"
	cthis cbplay
l3531:
	end method
	end game

	class TPuzzle
	method init
	end method
	method tinit
	localstring $1
	localstring $2
	localint $3
	localint $4
	localint $5
	localint $6
	pop $6
	pop $5
	pop $4
	pop $3
	pop $2
	pop $1
	new int,iCols
	push $4
	pop iCols
	new int,iRows
	push $3
	pop iRows
	push "imgbkg"
	push $1
	push 0
	cthis newimg
	new gmimgvec,grel
	new gmimgvec,grend
	push "grel"
	push $2
	popax
	pop $b
	psax
	call [$b],operator<
	call grel,hash
	push "TPuzzle0"
	call grel,each
	new int,ibadajl
	push 25
	pop ibadajl
	new string,sactpuz
	new int,iblitopacity
	push 255
	pop iblitopacity
	new int,PuzzleState
	push 0
	pop PuzzleState
	new DelayMover,cmov
	push 200
	new SimpleCounter,cnt
	new int,iX
	push $5
	pop iX
	new int,iY
	push $6
	pop iY
	push iX
	push iY
	call grel,move
	end method
	method TPuzzle0
	localdef $1
	pop $1
	push 10
	push $1
	pop $b
	popax
	add $a,$b
	cthis setz
	end method
	method setpuzstate
	localint $1
	pop $1
	push $1
	pop PuzzleState
	push PuzzleState
	push 1
	cmpje
	cmp0
	je l3533
	new gmimgvec,grblit
	localdef $2
	pop $2
	push "grblit"
	push $2
	popax
	pop $b
	psax
	call [$b],operator<
	call grblit,hide
l3533:
	end method
	method cmov_GET
	call mouse,getpos
	push 1
	push 1
	call grel,isin
	cmp0
	je l3535
	localstring $1
	call grel,getsfound
	pop $1
	push $1
	spushs
	push 900
	spop $a
	call [$a],setz
	push $1
	cthis mssetobj
	cthis tpuzzle_get
l3535:
	end method
	method cwithin
	localstring $1
	pop $1
	localint $2
	cthis gettype
	push "anima"
	cmpjne
	cmp0
	je l3537
	push 0
	pop $2
l3538:
	push $2
	cthis size
	cmpjl
	cmp0
	je l3539
	jmp l3541
l3540:
	add $2,1
	pop $2
	jmp l3538
l3541:
	push $2
	cthis get
	spushs
	push $1
	spop $a
	call [$a],cwithin
	cmp0
	je l3543
	push 1
	ret
l3543:
	jmp l3540
l3539:
	push 0
	ret
	jmp l3536
l3537:
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3545
	localint $3
	cthis framenr
	pop $3
	localint $4
	push $3
	push iCols
	pop $b
	popax
	div $a,$b
	push $d
	pop $4
	push A
	push $4
	push 0
	cmpja
	cmp0
	je l3547
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
l3547:
	push $4
	push iCols
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l3549
	push $3
	push 1
	pop $b
	popax
	add $a,$b
l3549:
	push $3
	push iCols
	pop $b
	popax
	div $a,$b
	psax
	pop $4
	push $4
	push 0
	cmpja
	cmp0
	je l3551
	push $3
	push iCols
	pop $b
	popax
	sub $a,$b
l3551:
	push $4
	push iRows
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l3553
	push $3
	push iCols
	pop $b
	popax
	add $a,$b
l3553:
	push $1
	spushs
	spop $a
	call [$a],framenr
	spushs
	spop $h
	call $h,in
	ret
	jmp l3544
l3545:
	push 0
	pop $2
l3554:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l3555
	jmp l3557
l3556:
	add $2,1
	pop $2
	jmp l3554
l3557:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis cwithin
	cmp0
	je l3559
	push 1
	ret
l3559:
	jmp l3556
l3555:
	push 0
	ret
l3544:
l3536:
	end method
	method cblit
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3561
	push PuzzleState
	push 1
	cmpje
	cmp0
	je l3563
	push $1
	spushs
	push iX
	push iY
	spop $a
	call [$a],setpos
	push $1
	spushs
	spop $a
	call [$a],hide
	push $1
	spushs
	spop $a
	call [$a],framenr
	call grblit,get
	pop $1
l3563:
	push $1
	spushs
	spop $a
	call [$a],TPuzzle1
	jmp l3560
l3561:
	localint $2
	push 0
	pop $2
l3564:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l3565
	jmp l3567
l3566:
	add $2,1
	pop $2
	jmp l3564
l3567:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis cblit
	jmp l3566
l3565:
l3560:
	end method
	method TPuzzle1
	push 1
	cthis setz
	cthis show
	push iX
	push iY
	cthis setpos
	localint $1
	cthis getpx
	pop $1
	localint $2
	cthis getpy
	pop $2
	cthis anaddfilter
	push iblitopacity
	cthis setopacity
	push $1
	push $2
	cthis setpos
	cthis getname
	call imgbkg,blit
	cthis unlink
	push iX
	push iY
	cthis setpos
	cthis hide
	end method
	method cmov_PUT
	push GAME
	spushs
	spop $a
	call [$a],cput
	end method
	method cput
	cthis tpuzzle_put
	localstring $1
	call cmov,getmover
	pop $1
	push $1
	spushs
	push 100
	call cnt,next
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setz
	call cmov,free
	call grel,TPuzzle2
	localstring $2
	push $1
	pop $2
	localstring $3
	push $1
	pop sactpuz
l3568:
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpjne
	cmp0
	je l3569
	push $1
	spushs
	push 0
	spop $a
	call [$a],get
	pop $1
	jmp l3568
l3569:
	push $1
	spushs
	spop $a
	call [$a],lodx
	push iX
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	spop $a
	call [$a],getpx
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],lody
	push iY
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	call ibadajl,length
	push ibadajl
	cmpjl
	cmp0
	je l3571
	push $2
	cthis cblit
	push $2
	call grel,remove
	push $2
	call grend,add
	cthis tpuzzle_blit
	call grel,empty
	cmp0
	je l3573
	call grend,show
	cthis tpuzzle_end
l3573:
	jmp l3570
l3571:
	push $2
	call grel,remove
	localint $4
	push 0
	pop $4
l3574:
	push $4
	call grel,size
	cmpjl
	cmp0
	je l3575
	jmp l3577
l3576:
	add $4,1
	pop $4
	jmp l3574
l3577:
	push $4
	call grel,get
	pop $1
	push $1
	push $2
	call cllen,iposlen
	push ibadajl
	cmpjl
	cmp0
	je l3579
	push $2
	spushs
	push $1
	spop $a
	call [$a],cwithin
	jmp l3581
l3579:
	push 0
	jmp l3581
l3580:
	push 1
l3581:
	cmp0
	je l3582
	localint $5
	localint $6
	push $1
	spushs
	spop $a
	call [$a],getpos
	pop $6
	pop $5
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3584
	push $2
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3586
	push "gr"
	push $1
	pop $b
	popax
	add $a,$b
	pop $3
	push $3
	spushs
	spop $e
	new gmimgvec,[$e]
	push $3
	spushs
	push $1
	spop $a
	call [$a],add
	push $3
	spushs
	push $2
	spop $a
	call [$a],add
	jmp l3585
l3586:
	push $2
	spushs
	push $1
	spop $a
	call [$a],add
	push $2
	pop $3
l3585:
	push $1
	call grel,remove
	push $3
	call grel,add
	jmp l3583
l3584:
	push $2
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3588
	push $1
	spushs
	push $2
	spop $a
	call [$a],add
	jmp l3587
l3588:
	push $1
	spushs
	push $2
	spop $a
	call [$a],addgr
l3587:
	push $1
	pop $3
l3583:
	push $3
	spushs
	push $5
	push $6
	spop $a
	call [$a],setpos
	push $3
	spushs
	push $2
	spushs
	spop $a
	call [$a],getz
	spop $a
	call [$a],setz
	call grel,sortimgs
	push $3
	pop sactpuz
	ret
l3582:
	jmp l3576
l3575:
	push $2
	call grel,add
l3570:
	end method
	method TPuzzle2
	cthis sortimgs
	push "TPuzzle3"
	cthis each
	end method
	method TPuzzle3
	localint $1
	pop $1
	push 10
	push $1
	pop $b
	popax
	add $a,$b
	cthis setz
	end method
	method tpuzzle_end
	end method
	method tpuzzle_get
	end method
	method tpuzzle_blit
	end method
	method tpuzzle_put
	end method
	end class

	game Puzzle
	parent DziejeGame
	parent TPuzzle
	method init
	localint $1
	pop $1
	push "puzzle"
	clparent DziejeGame,init
	push A
	push "getpuz 60"
	push "putpuz 60"
	push "ok 60"
	cthis sfxs=
	push "$scripts/plansza/podklad.png"
	push "p"
	push $1
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	push $1
	push $1
	push 0
	push 0
	cthis tinit
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push "anbelka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	call imgbkg,blit
	push "anbelka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	delete [$d]
	push "podklad"
	push $1
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push "anpodklad"
	push $1
	pop $b
	popax
	add $a,$b
	call imgbkg,blit
	push "anpodklad"
	push $1
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	delete [$d]
	push "anpodpo"
	push "podp"
	push $1
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	push 1
	cthis newanima
	call anpodpo,hide
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	cthis crect
	push 6
	push 54
	push 1012
	push 690
	new Rect,rec2
	push "grel"
	call rec,fitgrouprand
	push A
	push "sndintro"
	push "Z puzlle; Najed na przycisk Pomocy eby zobaczy podpowied"
	push "Puzzle0"
	push "sndok"
	push "Bardzo adnie; obejrzyj obrazek i kliknij by zoy kolejny"
	push "Puzzle1"
	cthis sounds=
	push "sndintro"
	cthis cbplay
	end method
	method Puzzle0
	cthis unlockall
	push 1
	pop igmstate
	end method
	method Puzzle1
	push 111
	pop igmstate
	end method
	method clbuts_help_butmoveon
	push igmstate
	push 111
	cmpjne
	cmp0
	je l3590
	call anpodpo,show
l3590:
	end method
	method clbuts_help_butmoveoff
	call anpodpo,hide
	end method
	method tpuzzle_get
	call fxgetpuz,play
	end method
	method tpuzzle_put
	call fxputpuz,play
	end method
	method tpuzzle_end
	call fxok,play
	call grend,hide
	push "sndok"
	cthis cbplay
	end method
	method cmov_PUT
	push GAME
	spushs
	spop $a
	call [$a],cput
	push sactpuz
	call rec2,fit
	end method
	method mouse_lclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3592
	push 1
	cthis cactsndstop
	jmp l3591
l3592:
	push igmstate
	push 111
	cmpje
	cmp0
	je l3594
	push "SubMenu"
	call gameapi,play
l3594:
l3591:
	end method
	method exit_click
	push "SubMenu"
	cthis askfor
	end method
	end game

	class TPuzzle2
	method init
	end method
	method tinit
	localstring $1
	localint $2
	localint $3
	pop $3
	pop $2
	pop $1
	new int,iCols1
	push 4
	pop iCols1
	new int,iRows1
	push 4
	pop iRows1
	new int,iCols2
	push 5
	pop iCols2
	new int,iRows2
	push 5
	pop iRows2
	new int,iCols3
	push 6
	pop iCols3
	new int,iRows3
	push 6
	pop iRows3
	new int,iCols4
	push 3
	pop iCols4
	new int,iRows4
	push 3
	pop iRows4
	new int,iCols
	new int,iRows
	push "imgbkg"
	push $1
	push 0
	cthis newimg
	new gmimgvec,grall
	new gmimgvec,grels
	new gmimgvec,grend
	new string,sgrel
	localstring $4
	localint $5
	push 1
	pop $5
l3595:
	push $5
	push 4
	cmpjle
	cmp0
	je l3596
	jmp l3598
l3597:
	add $5,1
	pop $5
	jmp l3595
l3598:
	push "grel"
	push $5
	pop $b
	popax
	add $a,$b
	pop $4
	push $4
	spushs
	spop $e
	new gmimgvec,[$e]
	push $4
	push "puz86_"
	push $5
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator<
	push $4
	spushs
	spop $a
	call [$a],hash
	push $4
	call grall,addgr
	push $4
	call grels,add
	jmp l3597
l3596:
	call grall,hash
	push 10
	call grall,sortz
	new int,ibadajl
	push 25
	pop ibadajl
	new string,sactpuz
	new int,iblitopacity
	push 255
	pop iblitopacity
	new int,PuzzleState
	push 0
	pop PuzzleState
	new DelayMover,cmov
	push 200
	new SimpleCounter,cnt
	new int,iX
	push $2
	pop iX
	new int,iY
	push $3
	pop iY
	push iX
	push iY
	call grels,move
	end method
	method setpuzstate
	localint $1
	pop $1
	push $1
	pop PuzzleState
	push PuzzleState
	push 1
	cmpje
	cmp0
	je l3600
	new gmimgvec,grblit
	localdef $2
	pop $2
	push "grblit"
	push $2
	popax
	pop $b
	psax
	call [$b],operator<
	call grblit,hide
l3600:
	end method
	method mgetcol
	localint $1
	pop $1
	push $1
	spushs
	push 1
	cmpst
	jne l3602
	spop $a
	push 4
	jmp l3601
l3602:
	push 2
	cmpst
	jne l3603
	spop $a
	push 5
	jmp l3601
l3603:
	push 3
	cmpst
	jne l3604
	spop $a
	push 6
	jmp l3601
l3604:
	push 4
	cmpst
	jne l3605
	spop $a
	push 3
	jmp l3601
l3605:
	spop $a
l3601:
	end method
	method cmov_GET
	call mouse,getpos
	push 1
	push 1
	call grels,isin
	cmp0
	je l3607
	call grels,getsfound
	pop sgrel
	push 0
	push 1
	call sgrel,gete
	cthis mgetcol
	pop iCols
	push iCols
	pop iRows
	localstring $1
	push sgrel
	spushs
	spop $a
	call [$a],getsfound
	pop $1
	push $1
	spushs
	push 900
	spop $a
	call [$a],setz
	push $1
	cthis mssetobj
	cthis tpuzzle_get
l3607:
	end method
	method cwithin
	localstring $1
	pop $1
	localint $2
	cthis gettype
	push "anima"
	cmpjne
	cmp0
	je l3609
	push 0
	pop $2
l3610:
	push $2
	cthis size
	cmpjl
	cmp0
	je l3611
	jmp l3613
l3612:
	add $2,1
	pop $2
	jmp l3610
l3613:
	push $2
	cthis get
	spushs
	push $1
	spop $a
	call [$a],cwithin
	cmp0
	je l3615
	push 1
	ret
l3615:
	jmp l3612
l3611:
	push 0
	ret
	jmp l3608
l3609:
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3617
	localint $3
	cthis framenr
	pop $3
	localint $4
	push $3
	push iCols
	pop $b
	popax
	div $a,$b
	push $d
	pop $4
	push A
	push $4
	push 0
	cmpja
	cmp0
	je l3619
	push $3
	push 1
	pop $b
	popax
	sub $a,$b
l3619:
	push $4
	push iCols
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l3621
	push $3
	push 1
	pop $b
	popax
	add $a,$b
l3621:
	push $3
	push iCols
	pop $b
	popax
	div $a,$b
	psax
	pop $4
	push $4
	push 0
	cmpja
	cmp0
	je l3623
	push $3
	push iCols
	pop $b
	popax
	sub $a,$b
l3623:
	push $4
	push iRows
	push 1
	pop $b
	popax
	sub $a,$b
	cmpjl
	cmp0
	je l3625
	push $3
	push iCols
	pop $b
	popax
	add $a,$b
l3625:
	push $1
	spushs
	spop $a
	call [$a],framenr
	spushs
	spop $h
	call $h,in
	ret
	jmp l3616
l3617:
	push 0
	pop $2
l3626:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l3627
	jmp l3629
l3628:
	add $2,1
	pop $2
	jmp l3626
l3629:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis cwithin
	cmp0
	je l3631
	push 1
	ret
l3631:
	jmp l3628
l3627:
	push 0
	ret
l3616:
l3608:
	end method
	method cblit
	localstring $1
	pop $1
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3633
	push PuzzleState
	push 1
	cmpje
	cmp0
	je l3635
	push $1
	spushs
	push iX
	push iY
	spop $a
	call [$a],setpos
	push $1
	spushs
	spop $a
	call [$a],hide
	push $1
	spushs
	spop $a
	call [$a],framenr
	call grblit,get
	pop $1
l3635:
	push $1
	spushs
	spop $a
	call [$a],TPuzzle20
	jmp l3632
l3633:
	localint $2
	push 0
	pop $2
l3636:
	push $2
	push $1
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l3637
	jmp l3639
l3638:
	add $2,1
	pop $2
	jmp l3636
l3639:
	push $1
	spushs
	push $2
	spop $a
	call [$a],get
	cthis cblit
	jmp l3638
l3637:
l3632:
	end method
	method TPuzzle20
	push 1
	cthis setz
	cthis show
	push iX
	push iY
	cthis setpos
	localint $1
	cthis getpx
	pop $1
	localint $2
	cthis getpy
	pop $2
	cthis anaddfilter
	push iblitopacity
	cthis setopacity
	push $1
	push $2
	cthis setpos
	cthis getname
	call imgbkg,blit
	cthis unlink
	push iX
	push iY
	cthis setpos
	cthis hide
	end method
	method cmov_PUT
	push GAME
	spushs
	spop $a
	call [$a],cput
	end method
	method cput
	cthis tpuzzle_put
	localstring $1
	call cmov,getmover
	pop $1
	push $1
	spushs
	push 100
	call cnt,next
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setz
	call cmov,free
	call grall,TPuzzle21
	localstring $2
	push $1
	pop $2
	localstring $3
	push $1
	pop sactpuz
l3640:
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpjne
	cmp0
	je l3641
	push $1
	spushs
	push 0
	spop $a
	call [$a],get
	pop $1
	jmp l3640
l3641:
	push $1
	spushs
	spop $a
	call [$a],lodx
	push iX
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	spop $a
	call [$a],getpx
	pop $b
	popax
	sub $a,$b
	push $1
	spushs
	spop $a
	call [$a],lody
	push iY
	pop $b
	popax
	add $a,$b
	push $1
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	call ibadajl,length
	push ibadajl
	cmpjl
	cmp0
	je l3643
	push $2
	cthis cblit
	push sgrel
	spushs
	push $2
	spop $a
	call [$a],remove
	push $2
	call grall,remove
	push $2
	call grend,add
	cthis tpuzzle_blit
	call grall,empty
	cmp0
	je l3645
	call grend,show
	cthis tpuzzle_end
l3645:
	jmp l3642
l3643:
	push sgrel
	spushs
	push $2
	spop $a
	call [$a],remove
	push $2
	call grall,remove
	localint $4
	push 0
	pop $4
l3646:
	push $4
	push sgrel
	spushs
	spop $a
	call [$a],size
	cmpjl
	cmp0
	je l3647
	jmp l3649
l3648:
	add $4,1
	pop $4
	jmp l3646
l3649:
	push sgrel
	spushs
	push $4
	spop $a
	call [$a],get
	pop $1
	push $1
	push $2
	call cllen,iposlen
	push ibadajl
	cmpjl
	cmp0
	je l3651
	push $2
	spushs
	push $1
	spop $a
	call [$a],cwithin
	jmp l3653
l3651:
	push 0
	jmp l3653
l3652:
	push 1
l3653:
	cmp0
	je l3654
	localint $5
	localint $6
	push $1
	spushs
	spop $a
	call [$a],getpos
	pop $6
	pop $5
	push $1
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3656
	push $2
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3658
	push "gr"
	push $1
	pop $b
	popax
	add $a,$b
	pop $3
	push $3
	spushs
	spop $e
	new gmimgvec,[$e]
	push $3
	spushs
	push $1
	spop $a
	call [$a],add
	push $3
	spushs
	push $2
	spop $a
	call [$a],add
	jmp l3657
l3658:
	push $2
	spushs
	push $1
	spop $a
	call [$a],add
	push $2
	pop $3
l3657:
	push sgrel
	spushs
	push $1
	spop $a
	call [$a],remove
	push $1
	call grall,remove
	push sgrel
	spushs
	push $3
	spop $a
	call [$a],add
	push $3
	call grall,add
	jmp l3655
l3656:
	push $2
	spushs
	spop $a
	call [$a],gettype
	push "anima"
	cmpje
	cmp0
	je l3660
	push $1
	spushs
	push $2
	spop $a
	call [$a],add
	jmp l3659
l3660:
	push $1
	spushs
	push $2
	spop $a
	call [$a],addgr
l3659:
	push $1
	pop $3
l3655:
	push $3
	spushs
	push $5
	push $6
	spop $a
	call [$a],setpos
	push $3
	spushs
	push $2
	spushs
	spop $a
	call [$a],getz
	spop $a
	call [$a],setz
	push sgrel
	spushs
	spop $a
	call [$a],sortimgs
	call grall,sortimgs
	push $3
	pop sactpuz
	ret
l3654:
	jmp l3648
l3647:
	push sgrel
	spushs
	push $2
	spop $a
	call [$a],add
	push $2
	call grall,add
l3642:
	end method
	method TPuzzle21
	cthis sortimgs
	push 10
	cthis sortz
	end method
	method tpuzzle_end
	end method
	method tpuzzle_get
	end method
	method tpuzzle_blit
	end method
	method tpuzzle_put
	end method
	end class

	game Puzzle2
	parent DziejeGame
	parent TPuzzle2
	method init
	push "puzzle"
	clparent DziejeGame,init
	push A
	push "getpuz 60"
	push "putpuz 60"
	push "ok 60"
	cthis sfxs=
	push "$scripts/plansza/podklad.png"
	push 0
	push 0
	cthis tinit
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push "anbelka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	call imgbkg,blit
	push "anbelka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	spushs
	spop $d
	delete [$d]
	push "podklad86.pyz"
	cthis img=
	push "anpodklad86"
	call imgbkg,blit
	delete anpodklad86
	push "anpodpo"
	push "podp86.pyz"
	push 1
	cthis newanima
	call anpodpo,hide
	cthis crect
	push 6
	push 54
	push 1012
	push 690
	new Rect,rec2
	push "grall"
	call rec,fitgrouprand
	push A
	push "sndintro"
	push "Z puzlle; Najed na przycisk Pomocy eby zobaczy podpowied"
	push "Puzzle20"
	push "sndok"
	push "Bardzo adnie; obejrzyj obrazek i kliknij by zoy kolejny"
	push "Puzzle21"
	cthis sounds=
	push "sndintro"
	cthis cbplay
	end method
	method Puzzle20
	cthis unlockall
	push 1
	pop igmstate
	end method
	method Puzzle21
	push 111
	pop igmstate
	end method
	method clbuts_help_butmoveon
	push igmstate
	push 111
	cmpjne
	cmp0
	je l3662
	call anpodpo,show
l3662:
	end method
	method clbuts_help_butmoveoff
	call anpodpo,hide
	end method
	method tpuzzle_get
	call fxgetpuz,play
	end method
	method tpuzzle_put
	call fxputpuz,play
	end method
	method tpuzzle_end
	call fxok,play
	push "sndok"
	cthis cbplay
	end method
	method cmov_PUT
	push GAME
	spushs
	spop $a
	call [$a],cput
	push sactpuz
	call rec2,fit
	end method
	method mouse_lclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3664
	push 1
	cthis cactsndstop
	jmp l3663
l3664:
	push igmstate
	push 111
	cmpje
	cmp0
	je l3666
	push "SubMenu"
	call gameapi,play
l3666:
l3663:
	end method
	method exit_click
	push "SubMenu"
	cthis askfor
	end method
	end game

	game Kolo
	parent DziejeGame
	parent TPainter
	method init
	localint $1
	pop $1
	new int,ikolololevel
	push $1
	pop ikolololevel
	push "kolo"
	clparent DziejeGame,init
	push "null"
	push "null"
	push "bkg.pyz"
	push "pedzel.pyz"
	push "draw"
	push $1
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	push "farby.pyz"
	push "ld"
	push "kolo_"
	push ikolololevel
	pop $b
	popax
	add $a,$b
	push ".db"
	pop $b
	popax
	add $a,$b
	cthis tinit
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push "farbymask.pyz"
	cthis img=
	push A
	push "sndhelp"
	push "Aby wyczyci obrazek kliknij przycisk restart"
	push "null"
	cthis sounds=
	push A
	push "pedzel"
	push "pedzel2"
	cthis sfxs=
	cthis unlock
	end method
	method clbuts_help_butclick
	push "sndhelp"
	cthis crplay
	end method
	method onpaint
	call fxpedzel,play
	end method
	method onsetbrush
	call fxpedzel2,play
	end method
	method but1_lclick
	push sobject
	push "null"
	cmpjne
	cmp0
	je l3668
	cthis savekols
l3668:
	end method
	method clbuts_reset_butclick
	call fxpedzel,play
	cthis tp_default_erase
	end method
	method claskexit_ask
	call mouse,show
	end method
	method claskexit_no
	call mouse,hide
	end method
	method mouse_lclick
	cthis tp_mouse_lclick
	end method
	method mouse_move
	cthis tp_mouse_move
	end method
	method game_exit
	cthis tp_exit
	cthis tp_savekols
	end method
	end game

	game MainMenu
	parent DziejeGame
	method init
	push "mainmenu"
	clparent DziejeGame,init
	push A
	push "bkg.pyz"
	push "prof.pyzL 30"
	push "maska.pyz 20"
	cthis imgs=
	push A
	push "putpuz2 50"
	cthis sfxs=
	push A
	push "sndgo"
	push "Witam w trzecim programie z serii Dzieje Ludzi; Dzi poznamy ycie w staroytnej Mezopotamii"
	push "mendpro"
	push "sndzycie"
	push "ycie i wynalazki w staroytnej Mezopotamii"
	push "mendpro"
	push "sndbajka"
	push "Niesamowite przygody Ramidy"
	push "mendpro"
	push "sndquiz"
	push "Wielki test wiedzy o Mezopotamii"
	push "mendpro"
	push "sndgry"
	push "Gry edukacyjne"
	push "mendpro"
	cthis sounds=
	push "buts.pyz"
	new Buttons,cbut
	push "MainMenu0"
	call ccs,enter
	end method
	method MainMenu0
	push igmbegin
	cmp0
	je l3670
	push 0
	pop igmbegin
	push "sndgo"
	cthis mprof
	jmp l3669
l3670:
	push 1
	pop igmstate
l3669:
	end method
	method cbut_lclick
	push igmstate
	push 1
	cmpjne
	cmp0
	je l3672
	ret
l3672:
	push sobject
	spushs
	push "zycie"
	cmpst
	jne l3674
	spop $a
	push "Mezo"
	call gameapi,play
	jmp l3673
l3674:
	push "gry"
	cmpst
	jne l3675
	spop $a
	push "MenuGry"
	call gameapi,play
	jmp l3673
l3675:
	push "bajka"
	cmpst
	jne l3676
	spop $a
	push "Bajka"
	call gameapi,play
	jmp l3673
l3676:
	push "quiz"
	cmpst
	jne l3677
	spop $a
	push "quiz"
	pop sSubMenu
	push "SubMenu"
	call gameapi,play
	jmp l3673
l3677:
	spop $a
l3673:
	end method
	method cbut_moveon
	push igmstate
	push 1
	cmpje
	cmp0
	je l3679
	localstring $1
	push "snd"
	push sobject
	pop $b
	popax
	add $a,$b
	pop $1
	cthis cisplaying
	neg
	cmp0
	jne l3682
	cthis cgetactsnd
	push $1
	cmpjne
	jmp l3683
l3681:
	push 0
	jmp l3683
l3682:
	push 1
l3683:
	cmp0
	je l3684
	push $1
	cthis mprof
l3684:
l3679:
	end method
	method mprof
	localstring $1
	pop $1
	push 0
	cthis cactsndstop
	push $1
	cthis cbplay
	push "talk"
	call anprof,play
	end method
	method mendpro
	push 1
	pop igmstate
	push "stand"
	call anprof,play
	end method
	method mouse_lclick
	push igmdebug
	cmp0
	je l3686
	push 1
	cthis cactsndstop
l3686:
	end method
	end game

	game MenuGry
	parent DziejeGame
	method init
	push "menugry"
	clparent DziejeGame,init
	push "menus"
	cthis path=
	push A
	push "putpuz2 50"
	cthis sfxs=
	push "bkggry.pyz"
	cthis img=
	push "menugry.pyz"
	new Buttons,cbut
	push A
	push "sndarcheo"
	push "Archeolog"
	push "null"
	push "sndepoki"
	push "Dopasuj epoki"
	push "null"
	push "sndmuzeum"
	push "Uporzdkuj muzeum"
	push "null"
	push "sndpuzzle"
	push "Puzzle"
	push "null"
	push "sndkolo"
	push "Kolorowanie"
	push "null"
	cthis sounds=
	end method
	method cbut_lclick
	push sobject
	pop sSubMenu
	push sSubMenu
	push "muzeum"
	cmpje
	cmp0
	je l3688
	push 1
	pop MuzeumLevel
	push "Muzeum"
	call gameapi,play
	jmp l3687
l3688:
	push "SubMenu"
	call gameapi,play
l3687:
	end method
	method cbut_moveon
	call fxputpuz2,play
	push "snd"
	push sobject
	pop $b
	popax
	add $a,$b
	cthis crselfplay
	end method
	end game

	new string,sSubMenu
	push "muzeum"
	pop sSubMenu
	game SubMenu
	parent DziejeGame
	method init
	push "submenu"
	clparent DziejeGame,init
	push "menus"
	cthis path=
	cthis subgamebg
	push A
	push "putpuz2 50"
	cthis sfxs=
	push "$scripts/menus/belka"
	push sSubMenu
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	cthis img=
	push sSubMenu
	push "buts.pyz"
	pop $b
	popax
	add $a,$b
	new Buttons,cbut
	push A
	push "sndl"
	push "Test normalny"
	push "null"
	push "sndt"
	push "Test trudny"
	push "null"
	cthis sounds=
	end method
	method cbut_lclick
	push sSubMenu
	spushs
	push "archeo"
	cmpst
	jne l3690
	spop $a
	push sobject
	push "bizuteria"
	cmpje
	cmp0
	je l3692
	push "Bizuteria"
	call gameapi,play
	jmp l3691
l3692:
	push sobject
	pop sArcheo
	push "Archeo"
	call gameapi,play
l3691:
	jmp l3689
l3690:
	push "puzzle"
	cmpst
	jne l3693
	spop $a
	push sobject
	spushs
	push 9
	cmpst
	jne l3695
	spop $a
	push 3
	push "Puzzle"
	call gameapi,play
	jmp l3694
l3695:
	push 16
	cmpst
	jne l3696
	spop $a
	push 4
	push "Puzzle"
	call gameapi,play
	jmp l3694
l3696:
	push 25
	cmpst
	jne l3697
	spop $a
	push 5
	push "Puzzle"
	call gameapi,play
	jmp l3694
l3697:
	push 36
	cmpst
	jne l3698
	spop $a
	push 6
	push "Puzzle"
	call gameapi,play
	jmp l3694
l3698:
	push 49
	cmpst
	jne l3699
	spop $a
	push 7
	push "Puzzle"
	call gameapi,play
	jmp l3694
l3699:
	push 86
	cmpst
	jne l3700
	spop $a
	push "Puzzle2"
	call gameapi,play
	jmp l3694
l3700:
	spop $a
l3694:
	jmp l3689
l3693:
	push "kolo"
	cmpst
	jne l3701
	spop $a
	push sobject
	push "Kolo"
	call gameapi,play
	jmp l3689
l3701:
	push "epoki"
	cmpst
	jne l3702
	spop $a
	push sobject
	push "babki"
	cmpje
	cmp0
	je l3704
	push 3
	jmp l3703
l3704:
	push 1
l3703:
	pop EpokiLevel
	push "Epoki"
	call gameapi,play
	jmp l3689
l3702:
	push "muzeum"
	cmpst
	jne l3705
	spop $a
	jmp l3689
l3705:
	push "quiz"
	cmpst
	jne l3706
	spop $a
	push sobject
	pop QuizMode
	push "Quiz"
	call gameapi,play
	jmp l3689
l3706:
	spop $a
l3689:
	end method
	method cbut_moveon
	call fxputpuz2,play
	push sSubMenu
	push "quiz"
	cmpje
	cmp0
	je l3708
	push "snd"
	push sobject
	pop $b
	popax
	add $a,$b
	cthis crselfplay
l3708:
	end method
	end game

	game Outro
	parent DziejeGame
	method init
	push "outro"
	clparent DziejeGame,init
	push "$lang/outro_bkg.pyz"
	cthis img=
	new gmimgvec,grob
	push "grob"
	push "programy.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push "dbend"
	push "napisy"
	cthis lang_db
	push "dbgry"
	push "gry"
	cthis lang_db
	new int,ystart
	push Y2
	push 100
	pop $b
	popax
	sub $a,$b
	pop ystart
	new int,ystop
	push 177
	pop ystop
	localdef $1
	push 24
	pop $1
	localdef $2
	push $1
	cthis stdfont
	pop $2
	push $2
	push $1
	push "$var:dbend"
	cthis mcol
	push iResX
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push ystart
	push 2
	push 5
	push "center"
	new TextDb,tdend
	call tdend,mtxtclip
	call tdend,W
	popax
	sub 0,$a
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push 0
	call tdend,move
	call grob,mclip
	localdef $3
	call grob,first
	pop $3
	localdef $4
	push 50
	pop $4
	new gmimgvec,grels
	localint $5
	push 0
	pop $5
l3709:
	push $5
	call grob,size
	cmpjl
	cmp0
	je l3710
	jmp l3712
l3711:
	add $5,1
	pop $5
	jmp l3709
l3712:
	push $5
	call grob,get
	pop $3
	push $5
	push 0
	cmpje
	cmp0
	je l3714
	push $3
	spushs
	push 0
	call tdend,getey
	push $4
	pop $b
	popax
	add $a,$b
	push $3
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	spop $a
	call [$a],setpos
	jmp l3713
l3714:
	push $3
	spushs
	push 0
	push $5
	push 1
	pop $b
	popax
	sub $a,$b
	call grob,get
	spushs
	spop $a
	call [$a],getey
	push $3
	spushs
	spop $a
	call [$a],getpy
	pop $b
	popax
	sub $a,$b
	push $4
	pop $b
	popax
	add $a,$b
	spop $a
	call [$a],setpos
l3713:
	localdef $6
	push "tdg"
	push $5
	pop $b
	popax
	add $a,$b
	pop $6
	push $6
	spushs
	push $2
	push $1
	push "$row:dbgry,"
	push $5
	pop $b
	popax
	add $a,$b
	cthis mcol
	push $3
	spushs
	spop $a
	call [$a],getex
	push 50
	pop $b
	popax
	add $a,$b
	push $3
	spushs
	spop $a
	call [$a],getpy
	push 2
	push 5
	push "left"
	spop $e
	new TextDb,[$e]
	push $6
	spushs
	spop $a
	call [$a],mtxtclip
	push $3
	call grels,add
	push $6
	call grels,add
	jmp l3711
l3710:
	push "timcyk"
	push "Outro0"
	cthis cycle=
	push 2
	call timcyk,setcycle
	call timcyk,play
	end method
	method Outro0
	push 0
	push 1
	popax
	sub 0,$a
	call tdend,move
	push 0
	push 1
	popax
	sub 0,$a
	call grels,move
	call grob,last
	spushs
	spop $a
	call [$a],getey
	push ystop
	cmpjl
	cmp0
	je l3716
	push igmstate
	push 0
	cmpje
	jmp l3718
l3716:
	push 0
	jmp l3718
l3717:
	push 1
l3718:
	cmp0
	je l3719
	cthis mouse_lclick
	jmp l3715
l3719:
	cthis play
l3715:
	end method
	method mcol
	push 0
	push 32
	push 224
	ret
	end method
	method mtxtclip
	call grtxt,mclip
	end method
	method mclip
	push "Outro1"
	cthis eval
	end method
	method Outro1
	push 0
	push ystop
	push iResX
	push ystart
	cthis clip
	end method
	method mouse_lclick
	push igmstate
	push 0
	cmpje
	cmp0
	je l3721
	push 1
	pop igmstate
	push 1000
	call mus,fadeout
	push "Outro2"
	call ccs,close
l3721:
	end method
	method Outro2
	call gameapi,exit
	end method
	end game

	game Intro
	parent DziejeGame
	method init
	push "intro"
	clparent DziejeGame,init
	new int,bgraj
	push 1
	pop bgraj
	push A
	push "bkg.pyz"
	push "krol.pyzP 85"
	push "archer.pyz 200"
	cthis imgs=
	push A
	push "rydwanN"
	push "walkaN 0"
	push "zamach 50"
	push "kon 30"
	push "szturmN 0"
	cthis sfxs=
	new classfadeinout,clfio
	new classfadeinout,clfio2
	new classfadeinout,clfio3
	new int,bbattle
	push 0
	pop bbattle
	new int,bwariors
	push 0
	pop bwariors
	push 15000
	popax
	sub 0,$a
	push 0
	call anarcher,move
	new gmimgvec,grels
	push "grels"
	push "ghosts.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	new gmimgvec,greps
	push "greps"
	push "egipcy.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push 1100
	popax
	sub 0,$a
	push 0
	call greps,move
	push "Intro0"
	call grels,each
	push "timarch"
	push "Intro12"
	cthis cycle=
	call timarch,play
	push "timgo"
	push 3000
	push "Intro14"
	cthis timer=
	push "Intro23"
	call ccs,enter
	end method
	method Intro0
	localdef $1
	pop $1
	push $1
	push 10
	pop $b
	popax
	mul $a,$b
	cthis setz
	push $1
	spushs
	push 0
	cmpst
	jne l3723
	spop $a
	push 100
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro1"
	cthis addmethod
	jmp l3722
l3723:
	push 1
	cmpst
	jne l3729
	spop $a
	push 300
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro2"
	cthis addmethod
	jmp l3722
l3729:
	push 2
	cmpst
	jne l3735
	spop $a
	push 500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro3"
	cthis addmethod
	jmp l3722
l3735:
	push 3
	cmpst
	jne l3741
	spop $a
	push 1000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro4"
	cthis addmethod
	jmp l3722
l3741:
	push 4
	cmpst
	jne l3747
	spop $a
	push 1000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro5"
	cthis addmethod
	jmp l3722
l3747:
	push 5
	cmpst
	jne l3753
	spop $a
	push 1800
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro6"
	cthis addmethod
	jmp l3722
l3753:
	push 6
	cmpst
	jne l3759
	spop $a
	push 1500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro7"
	cthis addmethod
	jmp l3722
l3759:
	push 7
	cmpst
	jne l3765
	spop $a
	push 100
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro8"
	cthis addmethod
	jmp l3722
l3765:
	push 8
	cmpst
	jne l3776
	spop $a
	push 2000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro9"
	cthis addmethod
	jmp l3722
l3776:
	push 9
	cmpst
	jne l3782
	spop $a
	push 3500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro10"
	cthis addmethod
	jmp l3722
l3782:
	push 10
	cmpst
	jne l3788
	spop $a
	push 3000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	add $a,$b
	push 0
	cthis setpos
	push "onendframe"
	push "Intro11"
	cthis addmethod
	jmp l3722
l3788:
	spop $a
l3722:
	push 1
	popax
	sub 0,$a
	cthis play
	end method
	method Intro1
	push 3
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3725
	cthis getpx
	push 1100
	cmpja
	jmp l3727
l3725:
	push 0
	jmp l3727
l3726:
	push 1
l3727:
	cmp0
	je l3728
	push 500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3728:
	end method
	method Intro2
	push 7
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3731
	cthis getpx
	push 1100
	cmpja
	jmp l3733
l3731:
	push 0
	jmp l3733
l3732:
	push 1
l3733:
	cmp0
	je l3734
	push 300
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3734:
	end method
	method Intro3
	push 7
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3737
	cthis getpx
	push 1100
	cmpja
	jmp l3739
l3737:
	push 0
	jmp l3739
l3738:
	push 1
l3739:
	cmp0
	je l3740
	push 500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3740:
	end method
	method Intro4
	push 3
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3743
	cthis getpx
	push 1100
	cmpja
	jmp l3745
l3743:
	push 0
	jmp l3745
l3744:
	push 1
l3745:
	cmp0
	je l3746
	push 1000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3746:
	end method
	method Intro5
	push 8
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3749
	cthis getpx
	push 1100
	cmpja
	jmp l3751
l3749:
	push 0
	jmp l3751
l3750:
	push 1
l3751:
	cmp0
	je l3752
	push 500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3752:
	end method
	method Intro6
	push 8
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3755
	cthis getpx
	push 1100
	cmpja
	jmp l3757
l3755:
	push 0
	jmp l3757
l3756:
	push 1
l3757:
	cmp0
	je l3758
	push 1800
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3758:
	end method
	method Intro7
	push 10
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3761
	cthis getpx
	push 1100
	cmpja
	jmp l3763
l3761:
	push 0
	jmp l3763
l3762:
	push 1
l3763:
	cmp0
	je l3764
	push 1500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3764:
	end method
	method Intro8
	push 2
	push 0
	cthis move
	cthis getposx
	push 400
	cmpjae
	cmp0
	je l3767
	cthis getposx
	push 404
	cmpjl
	cmp0
	je l3767
	push "hiha"
	cthis hasvar
	neg
	jmp l3769
l3767:
	push 0
	jmp l3769
l3768:
	push 1
l3769:
	cmp0
	je l3770
	new def,hiha
	call fxkon,play
l3770:
	push bbattle
	push 0
	cmpje
	cmp0
	je l3772
	cthis getpx
	push 1100
	cmpja
	jmp l3774
l3772:
	push 0
	jmp l3774
l3773:
	push 1
l3774:
	cmp0
	je l3775
	push 2500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3775:
	end method
	method Intro9
	push 15
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3778
	cthis getpx
	push 1100
	cmpja
	jmp l3780
l3778:
	push 0
	jmp l3780
l3779:
	push 1
l3780:
	cmp0
	je l3781
	push 2000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3781:
	end method
	method Intro10
	push 15
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3784
	cthis getpx
	push 1100
	cmpja
	jmp l3786
l3784:
	push 0
	jmp l3786
l3785:
	push 1
l3786:
	cmp0
	je l3787
	push 3500
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 1800
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3787:
	end method
	method Intro11
	push 30
	push 0
	cthis move
	push bbattle
	push 0
	cmpje
	cmp0
	je l3790
	cthis getpx
	push 1100
	cmpja
	jmp l3792
l3790:
	push 0
	jmp l3792
l3791:
	push 1
l3792:
	cmp0
	je l3793
	push 4000
	popax
	sub 0,$a
	cthis lodx
	pop $b
	popax
	sub $a,$b
	push 1500
	spushs
	spop $h
	call $h,rand
	pop $b
	popax
	sub $a,$b
	push 0
	cthis setpos
l3793:
	end method
	method Intro12
	push 35
	push 0
	call anarcher,move
	call anarcher,getpx
	push 0
	cmpja
	cmp0
	je l3795
	call anarcher,getpx
	push 200
	cmpjl
	cmp0
	je l3795
	push bbattle
	neg
	jmp l3797
l3795:
	push 0
	jmp l3797
l3796:
	push 1
l3797:
	cmp0
	je l3798
	push 0
	call anarcher,play
	push 1
	pop bbattle
	push "Intro13"
	call grels,eval
l3798:
	push GAME
	spushs
	push "bobrona"
	spop $a
	call [$a],hasvar
	cmp0
	je l3802
	call grobr,first
	spushs
	spop $a
	call [$a],getposx
	push 0
	cmpja
	cmp0
	je l3804
	push 0
	call greps,stop
	push 0
	call grels,stop
	push 0
	call grobr,stop
	push 0
	call ankrol,stop
	cthis mend
	jmp l3803
l3804:
	push 10
	push 0
	call grobr,move
	cthis play
l3803:
	jmp l3801
l3802:
	cthis play
l3801:
	end method
	method Intro13
	cthis getex
	push 0
	cmpjl
	cmp0
	je l3800
	push 0
	cthis stop
l3800:
	end method
	method Intro14
	push igmstate
	spushs
	push 0
	cmpst
	jne l3806
	spop $a
	push 1000
	cthis setdelay
	add igmstate,1
	pop igmstate
	push 8
	push 5
	push "fxwalka"
	push "null"
	call clfio,sndvolume
	cthis play
	jmp l3805
l3806:
	push 1
	cmpst
	jne l3807
	spop $a
	push bbattle
	cmp0
	je l3809
	push 4000
	cthis setdelay
	push 8
	push 5
	push "fxszturm"
	push "null"
	call clfio,sndvolume
	add igmstate,1
	pop igmstate
	push "Intro15"
	call greps,each
l3809:
	cthis play
	jmp l3805
l3807:
	push 2
	cmpst
	jne l3816
	spop $a
	push GAME
	spushs
	spop $a
	call [$a],Intro21
	jmp l3805
l3816:
	spop $a
l3805:
	end method
	method Intro15
	localdef $1
	pop $1
	push 10
	push $1
	pop $b
	popax
	mul $a,$b
	cthis setz
	push $1
	spushs
	push 0
	cmpst
	jne l3811
	spop $a
	push 300
	popax
	sub 0,$a
	push 0
	cthis move
	push "onendframe"
	push "Intro16"
	cthis addmethod
	jmp l3810
l3811:
	push 1
	cmpst
	jne l3812
	spop $a
	push 300
	popax
	sub 0,$a
	push 0
	cthis move
	push "onendframe"
	push "Intro17"
	cthis addmethod
	jmp l3810
l3812:
	push 2
	cmpst
	jne l3813
	spop $a
	push 1000
	popax
	sub 0,$a
	push 0
	cthis move
	push "onendframe"
	push "Intro18"
	cthis addmethod
	jmp l3810
l3813:
	push 3
	cmpst
	jne l3814
	spop $a
	push 1000
	popax
	sub 0,$a
	push 0
	cthis move
	push "onendframe"
	push "Intro19"
	cthis addmethod
	jmp l3810
l3814:
	push 4
	cmpst
	jne l3815
	spop $a
	cthis lodx
	popax
	sub 0,$a
	push 0
	cthis move
	push 1
	cthis setdelay
	push "onendframe"
	push "Intro20"
	cthis addmethod
	jmp l3810
l3815:
	spop $a
l3810:
	push 1
	popax
	sub 0,$a
	cthis play
	end method
	method Intro16
	push 18
	push 0
	cthis move
	end method
	method Intro17
	push 18
	push 0
	cthis move
	end method
	method Intro18
	push 25
	push 0
	cthis move
	end method
	method Intro19
	push 25
	push 0
	cthis move
	end method
	method Intro20
	push 5
	push 0
	cthis move
	end method
	method Intro21
	new gmimgvec,grobr
	push "grobr"
	push "obrona.pyz"
	popax
	pop $b
	psax
	call [$b],operator*
	push 1
	popax
	sub 0,$a
	call grobr,nplay
	push 1500
	popax
	sub 0,$a
	push 0
	call grobr,move
	push "Intro22"
	call grobr,each
	new int,bobrona
	end method
	method Intro22
	localdef $1
	pop $1
	push 70
	push $1
	push 10
	pop $b
	popax
	mul $a,$b
	pop $b
	popax
	add $a,$b
	cthis setz
	end method
	method Intro23
	call timgo,play
	end method
	method mend
	push bgraj
	cmp0
	je l3818
	push 1
	push 5
	popax
	sub 0,$a
	push "fxszturm"
	push "setvol"
	push 0
	call fxszturm,getvol
	push "null"
	push "null"
	call clfio,_play
	push 1
	push 5
	popax
	sub 0,$a
	push "fxwalka"
	push "setvol"
	push 0
	call fxwalka,getvol
	push "null"
	push "null"
	call clfio2,_play
	push 1
	push 5
	popax
	sub 0,$a
	push "fxrydwan"
	push "setvol"
	push 0
	call fxrydwan,getvol
	push "null"
	push "null"
	call clfio3,_play
	push 0
	pop bgraj
	push "Intro24"
	call ccs,close
l3818:
	end method
	method Intro24
	push "MainMenu"
	call gameapi,play
	end method
	method mouse_lclick
	cthis mend
	end method
	end game

	game Bajka
	parent DziejeGame
	method init
	push "bajka"
	clparent DziejeGame,init
	new int,BajkaNr
	push 1
	pop BajkaNr
	new int,BajkaPlansze
	push 42
	pop BajkaPlansze
	new gmimgvec,grb
	new int,tick
	new string,sfigura
	new int,inext2
	push 1
	popax
	sub 0,$a
	pop inext2
	push "timnext"
	push "Bajka0"
	cthis cycle=
	push A
	push "kijek 70"
	push "narasta 80"
	push "zamach 80"
	push "cios2 80"
	push "drzewobum 80"
	cthis sfxs=
	new gmobjvec,grtmp
	new snd,sndbgr
	new img,imgend
	push 1024
	push 768
	cthis black
	push 255
	call imgend,create
	push "dbend"
	push "koniec"
	cthis lang_db
	push "txtend"
	push 0
	push 0
	call dbend,get
	push 48
	cthis stdfont
	cthis white
	cthis newtext
	push iResX
	call txtend,getw
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	push iResY
	call txtend,geth
	pop $b
	popax
	sub $a,$b
	push 2
	pop $b
	popax
	div $a,$b
	psax
	call txtend,setpos
	push "txtend"
	call imgend,blit
	delete txtend
	push 200
	call imgend,setz
	call imgend,hide
	push A
	push "snd1"
	push "6000 lat temu w poudniowej Mezopotamii y Abraham z rodzin; Byli oni koczownikami; Przemierzali pustyni i yli w namiotach ktre rozbijali w oazach oraz nad rzekami"
	push "mnext"
	push "snd2"
	push "Synowie Abrahama dawno zaoyli ju wasne rodziny a sdziwy przywdca rodu zosta z ukochan najmodsz crk Ramid"
	push "mnext"
	push "snd3"
	push "Bardzo pragn jej szczcia jednak Ramida marzya o zdobyciu wiedzy o gwiazdach i pimie a tego biedny Abraham nie potrafi jej zapewni"
	push "mnext"
	push "snd4"
	push "Nastpnego dnia karawana ruszya do miasta Nur"
	push "mnext"
	push "snd5"
	push "Abraham jak nikt inny zna pustyni i jej tajemnice; Do miasta dotarli najkrtsz drog"
	push "Bajka1"
	push "snd6"
	push "W Nur mieszka kupiec Bazyli z ktrym Abraham czsto robi interesy"
	push "mnext"
	push "snd7"
	push "Take dzi Bazyli mia interes do Abrahama; Zleci mu przewz towarw do miasta Sars"
	push "mnext"
	push "snd8"
	push "Dokadny spis towarw tradycyjnie umieci w glinianych kulkach"
	push "null"
	push "snd9"
	push "Po zaadowaniu towarw i napojeniu wielbdw karawana Abrahama ruszya w podr"
	push "mnext"
	push "snd10"
	push "Znanymi tylko sobie szlakami Abraham zmierza wprost do miasta"
	push "mnext"
	push "snd11"
	push "Nagle co dziwnego przykuo jego uwag; Zatrzyma energicznie grup rozkaza nigdzie si nie rusza i oznajmi e musi i zbada teren"
	push "mnext"
	push "snd12"
	push "Nie myli czujny zmys starego lisa w pobliu znajdowa si obz gronych wojownikw Asyryjczykw; Musz szybko ostrzec ludzi pomyla Abraham"
	push "null"
	push "snd13"
	push "Przez ca noc karawana maszerowaa do Sarsu a wreszcie nad ranem dotarli do bram miasta"
	push "mnext"
	push "snd14"
	push "Poczekaj tu na mnie Ramido pjd prosi o audiencj u gwnego kapana Samona ktry rzdzi tym miastem i opowiem mu co widziaem wczoraj w nocy"
	push "mnext"
	push "snd15"
	push "Na wie o obozie zowrogich Asyryjczykw niedaleko Sarsu z Abrahamem spotka si kapan Samon oraz przywdca stray miasta Hektor"
	push "mnext"
	push "snd16"
	push "Samon by bardzo mdrym czowiekiem i docenia ogromn wag informacji jakich dostarczy mu stary koczownik; Jeli to co mwisz starcze jest prawd mj lud jest ci winien wielk nagrod; daj czego pragniesz; Powiedzia"
	push "mnext"
	push "snd17"
	push "Jedyne o co ci prosz panie to by przyj na nauki moj crk Ramid gdy tylko wy kapani macie dostp do wiedzy; miaa jest twoja proba odrzek Samon; Wiesz przecie e kobietom nie przysuguje przywilej nauczania ale sowo si rzeko; Dla Ramidy zrobi wyjtek"
	push "mnext"
	push "snd18"
	push "Tymczasem Hektor zarzdzi przygotowania do obrony; Kaza wykopa fos ustawi strae na murach i ciga zapasy ywnoci na wypadek dugotrwaego oblenia"
	push "mnext"
	push "snd19"
	push "Noc na szczycie wityni Samon opowiada Ramidzie; Ramido gwiazdy ukadaj si na niebie w cisym porzdku; Niektre stoj w miejscu inne przemierzaj nieboskon a my umiemy wyliczy ich drog"
	push "mnext"
	push "snd20"
	push "Czasami bogowie chc nam co przekaza i objawiaj si na niebie a potem znikaj; Czasami powracaj po wielu latach; Niektrzy ukazuj si nam tak rzadko e wiemy o nich tylko dziki temu e pisali o nich dawni kapani"
	push "mnext"
	push "snd21"
	push "Tymczasem stranicy rozstawieni na murach obserwowali teren; Nagle jeden z nich zobaczy znak alarmowy; Poncy stos oznacza e zblia si nieprzyjaciel"
	push "mnext"
	push "snd22"
	push "Nastpnego dnia pod mury Sarsu dotara armia budzcego postrach w caym kraju samego okrutnego Goliata"
	push "mnext"
	push "snd23"
	push "Otwiera bramy to moe ujdziecie z yciem ha ha ha; Jestem Goliat niezwyciony adne miasto mi si nie oparo! Rykn"
	push "mnext"
	push "snd24"
	push "Syszelimy o tobie i twoich wyczynach; Jestemy ubogimi ludmi nie masz u nas czego szuka; Odpu sobie"
	push "mnext"
	push "snd25"
	push "Chyba mnie nie zrozumiae stary durniu; Krzycza dalej Goliat; Ja zawsze dostaj to czego chc; Otwieraj natychmiast bram!"
	push "mnext"
	push "snd26"
	push "Ee szefie wyglda na to e nie wemiemy ich z zaskoczenia s wietnie przygotowani do obrony"
	push "mnext"
	push "snd27"
	push "Mylisz e twoi ndzni stranicy powstrzymaj moj armi Samonie? Chcesz unikn rzezi to wystaw najlepszego ze swoich wojownikw; Jeli mnie pokona uratujesz miasto jeli ja zwyci wezm was wszystkich w niewol; Jak nie przyjmiesz pojedynku to spal miasto i wytn mieszkacw! Daj wam jeden dzie do namysu"
	push "mnext"
	push "snd28"
	push "W miecie zapanowaa trwoga; Nikt nie mia szans pokona Goliata; Pozostawaa tylko niewola lub obrona do samego koca"
	push "mnext"
	push "snd29"
	push "Kiedy mczyni rozpaczliwie szukali rozwizania Abraham dostrzeg e Ramida gdzie si wymkna"
	push "mnext"
	push "snd30"
	push "Ramida potajemnie wykrada si pozaa mury i zaprzga dwa konie do pracy; W oddali Asyryjczycy ucztowali w wieo rozbitym obozie"
	push "null"
	push "snd31"
	push "Rankiem nim armia podesza pod mury puapka bya gotowa"
	push "mnext"
	push "snd32"
	push "Goliat wystpi przed bram i zawoa; Czy ktry z mieszkacw Sarsu stawi mi czoa; Odpowiedziaa mu gucha cisza; aden z wojownikw Hektora nie mia odwagi wystpi przeciwko olbrzymowi"
	push "mnext"
	push "snd33"
	push "Nagle kto wyoni si zza murw i cienki gos zabrzmia; Ja bd z tob walczy; Ty? Ha ha ha; Miasto Sars wystawia swojego najstraszliwszego wojownika; Jeszcze nigdy nikt mnie tak nie rozbawil ha ha ha"
	push "mnext2"
	push "snd35"
	push "Tym kamyczkiem chciaa mnie pokona? Zaraz pkn ze miechu"
	push "mnext2"
	push "snd36"
	push "Kto kamykiem wojuje od kamyka ginie he he he"
	push "mnext"
	push "snd37"
	push "Hyy hy hy"
	push "null"
	push "snd39"
	push "Pojedynek skoczony Goliacie; Bior ci w niewol eby nigdy wicej nie napada na uczciwych ludzi; A twoje otrzyki niech zmykaj std w mgnieniu oka albo skrc ci o ten zakuty eb"
	push "mnext"
	push "snd40"
	push "Hurra zwycistwo niech yje Ramida; Cieszyli si mieszkacy Sarsu"
	push "mnext"
	push "snd41"
	push "Po chwili stranicy aresztowali Goliata a jego byli onierze czmychnli jak najdalej od miasta; Jestem peen podziwu dla twojej crki Abrahamie; powiedzia Samon; Wszyscy zawdziczamy jej wolno i ycie"
	push "mnext"
	push "snd42"
	push "Ramida pokonaa najwikszego wojownika Mezopotamii nie si lecz sprytem; Samon pokocha j jak crk przekaza jej ca swoj wiedz i nim zmar uczyni krlow miasta; Pod rzdami Ramidy kwity nauka kultura i handel"
	push "Bajka3"
	cthis sounds=
	push 0
	cthis mbaja
	end method
	method Bajka0
	cthis mnext2
	end method
	method Bajka1
	push "tim4"
	push "Bajka2"
	cthis cycle=
	push 0
	pop tick
	call tim4,play
	end method
	method Bajka2
	push tick
	push 220
	cmpje
	cmp0
	je l3820
	cthis mnext
	jmp l3819
l3820:
	push 3
	cthis mget
	spushs
	push 0
	push 1
	spop $a
	call [$a],move
	push tick
	push 3
	pop $b
	popax
	div $a,$b
	push $d
	push 0
	cmpje
	cmp0
	je l3822
	push 2
	cthis mget
	spushs
	push 0
	push 1
	spop $a
	call [$a],move
l3822:
	push tick
	spushs
	push 110
	cmpst
	je l3825
	push 165
	cmpst
	je l3825
	push 192
	cmpst
	je l3825
	push 205
	cmpst
	je l3825
	jmp l3824
l3825:
	spop $a
	push 1
	cthis mget
	spushs
	spop $a
	call [$a],ansetnextfr
	jmp l3823
l3824:
	spop $a
l3823:
	push 4
	cthis mget
	spushs
	push 4
	push 2
	spop $a
	call [$a],move
	push 5
	cthis mget
	spushs
	push 4
	popax
	sub 0,$a
	push 2
	spop $a
	call [$a],move
	add tick,1
	pop tick
	cthis play
l3819:
	end method
	method Bajka3
	push "Bajka4"
	call ccs,close
	end method
	method Bajka4
	call imgend,show
	end method
	method mnext
	push "Bajka5"
	call ccs,close
	end method
	method Bajka5
	push 1
	cthis mbaja
	end method
	method mnext2
	push BajkaNr
	push 1
	pop $b
	popax
	add $a,$b
	pop inext2
	push 1
	cthis mbaja
	end method
	method mprev2
	push BajkaNr
	push 1
	pop $b
	popax
	sub $a,$b
	pop inext2
	call mus,stop
	push 1
	popax
	sub 0,$a
	cthis mbaja
	end method
	method mbaja
	localint $1
	pop $1
	push GAME
	spushs
	push $1
	spop $a
	call [$a],Bajka6
	end method
	method Bajka6
	localint $1
	pop $1
	call ccs,isplaying
	cmp0
	je l3827
	ret
l3827:
	push $1
	popax
	add BajkaNr,$a
	pop BajkaNr
	push BajkaNr
	push 1
	cmpjl
	cmp0
	je l3829
	push 1
	pop BajkaNr
	push 1
	pop inext2
	jmp l3828
l3829:
	push BajkaNr
	push BajkaPlansze
	cmpja
	cmp0
	je l3831
	push "MainMenu"
	call gameapi,play
	ret
l3831:
l3828:
	call imgend,hide
	push 0
	call sndbgr,stop
	push 0
	pop igmstate
	call grb,deleteloaded
	call grb,free
	push "grb"
	push "b"
	push BajkaNr
	pop $b
	popax
	add $a,$b
	push ".pyz"
	pop $b
	popax
	add $a,$b
	popax
	pop $b
	psax
	call [$b],operator*
	push BajkaNr
	spushs
	push 1
	cmpst
	je l3834
	push 2
	cmpst
	je l3834
	jmp l3833
l3834:
	spop $a
	push 1
	popax
	sub 0,$a
	call grb,nplay
	jmp l3832
l3833:
	push 5
	cmpst
	jne l3835
	spop $a
	push 4
	cthis mget
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],play
	push 5
	cthis mget
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],play
	jmp l3832
l3835:
	push 8
	cmpst
	jne l3836
	spop $a
	push 1
	cthis mget
	spushs
	push 148
	push 588
	spop $a
	call [$a],move
	push 2
	cthis mget
	spushs
	push 148
	push 588
	spop $a
	call [$a],move
	push 3
	cthis mget
	spushs
	push 148
	push 588
	spop $a
	call [$a],move
	push 4
	cthis mget
	spushs
	push 800
	popax
	sub 0,$a
	push 0
	spop $a
	call [$a],move
	push 0
	pop igmstate
	push "tim8"
	cthis vardelif
	push "tim8"
	push "Bajka7"
	cthis cycle=
	push 0
	pop tick
	call tim8,play
	jmp l3832
l3836:
	push 12
	cmpst
	jne l3848
	spop $a
	push 0
	pop igmstate
	push "gr12"
	cthis vardelif
	new gmimgvec,gr12
	push "grb"
	call gr12,addgr
	push 7
	cthis mget
	pop sfigura
	push 1024
	push 0
	cthis mget
	spushs
	spop $a
	call [$a],getw
	pop $b
	popax
	sub $a,$b
	push 0
	call gr12,move
	push sfigura
	call gr12,remove
	push 3
	cthis mget
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],play
	push 4
	cthis mget
	spushs
	push 1
	popax
	sub 0,$a
	spop $a
	call [$a],play
	push 0
	pop tick
	push "tim12"
	cthis vardelif
	push "tim12"
	push "Bajka8"
	cthis cycle=
	call tim12,play
	jmp l3832
l3848:
	push 30
	cmpst
	jne l3865
	spop $a
	push 3
	cthis mnexton
	jmp l3832
l3865:
	push 34
	cmpst
	jne l3866
	spop $a
	push 2
	cthis mnexton2
	jmp l3832
l3866:
	push 37
	cmpst
	jne l3867
	spop $a
	push 4
	cthis mnexton2
	jmp l3832
l3867:
	push 38
	cmpst
	jne l3868
	spop $a
	push 2
	cthis mnexton
	jmp l3832
l3868:
	spop $a
	push 1
	popax
	sub 0,$a
	call grb,nplay
l3832:
	push "snd"
	push BajkaNr
	pop $b
	popax
	add $a,$b
	cthis hasvar
	cmp0
	je l3870
	push inext2
	push BajkaNr
	cmpje
	cmp0
	je l3872
	push "snd"
	push BajkaNr
	pop $b
	popax
	add $a,$b
	cthis cbplay
	jmp l3871
l3872:
	push "Bajka11"
	call ccs,enter
l3871:
l3870:
	push BajkaNr
	spushs
	push 1
	cmpst
	je l3875
	push 2
	cmpst
	je l3875
	push 3
	cmpst
	je l3875
	jmp l3874
l3875:
	spop $a
	push "bgrogien"
	push 90
	cthis mplay
	jmp l3873
l3874:
	push 4
	cmpst
	jne l3876
	spop $a
	push "bgrkarawana"
	push 50
	cthis mplay
	jmp l3873
l3876:
	push 5
	cmpst
	jne l3877
	spop $a
	push "bgrwiatrL"
	push 30
	cthis mplay
	jmp l3873
l3877:
	push 6
	cmpst
	je l3879
	push 14
	cmpst
	je l3879
	jmp l3878
l3879:
	spop $a
	push "bgrzamekL"
	push 50
	cthis mplay
	push "mezo3.ogg -v 40"
	call mus,playstr
	jmp l3873
l3878:
	push 7
	cmpst
	jne l3880
	spop $a
	push "bgrzamekL"
	push 50
	cthis mplay
	call mus,isplaying
	neg
	cmp0
	je l3882
	push "mezo3.ogg -v 40"
	call mus,playstr
l3882:
	jmp l3873
l3880:
	push 8
	cmpst
	je l3884
	push 15
	cmpst
	je l3884
	push 16
	cmpst
	je l3884
	jmp l3883
l3884:
	spop $a
	call mus,isplaying
	neg
	cmp0
	je l3886
	push "mezo3.ogg -v 40"
	call mus,playstr
l3886:
	jmp l3873
l3883:
	push 9
	cmpst
	jne l3887
	spop $a
	call mus,isplaying
	cmp0
	je l3889
	push 1000
	call mus,fadeout
l3889:
	push "bgrkarawana"
	push 50
	cthis mplay
	jmp l3873
l3887:
	push 10
	cmpst
	je l3891
	push 11
	cmpst
	je l3891
	jmp l3890
l3891:
	spop $a
	push "bgrwiatrL"
	push 10
	cthis mplay
	jmp l3873
l3890:
	push 12
	cmpst
	jne l3892
	spop $a
	push "bgrpracaL"
	push 30
	cthis mplay
	jmp l3873
l3892:
	push 13
	cmpst
	je l3894
	push 18
	cmpst
	je l3894
	push 28
	cmpst
	je l3894
	push 29
	cmpst
	je l3894
	jmp l3893
l3894:
	spop $a
	push "bgrzamekL"
	push 20
	cthis mplay
	jmp l3873
l3893:
	push 17
	cmpst
	jne l3895
	spop $a
	call mus,isplaying
	cmp0
	je l3897
	push 1000
	call mus,fadeout
l3897:
	push "bgrzamekL"
	push 30
	cthis mplay
	jmp l3873
l3895:
	push 19
	cmpst
	je l3899
	push 20
	cmpst
	je l3899
	push 21
	cmpst
	je l3899
	push 30
	cmpst
	je l3899
	jmp l3898
l3899:
	spop $a
	push "bgrnoc2L"
	push 100
	cthis mplay
	jmp l3873
l3898:
	push 22
	cmpst
	jne l3900
	spop $a
	push "preh2.ogg -v 70"
	call mus,playstr
	jmp l3873
l3900:
	push 23
	cmpst
	je l3902
	push 24
	cmpst
	je l3902
	push 32
	cmpst
	je l3902
	jmp l3901
l3902:
	spop $a
	push "bgrzbojeL"
	push 20
	cthis mplay
	call mus,isplaying
	neg
	cmp0
	je l3904
	push "preh2.ogg -v 70"
	call mus,playstr
l3904:
	jmp l3873
l3901:
	push 25
	cmpst
	je l3906
	push 26
	cmpst
	je l3906
	push 39
	cmpst
	je l3906
	jmp l3905
l3906:
	spop $a
	push "bgrzbojeL"
	push 20
	cthis mplay
	call mus,isplaying
	cmp0
	je l3908
	push 1000
	call mus,fadeout
l3908:
	jmp l3873
l3905:
	push 27
	cmpst
	jne l3909
	spop $a
	push "tlumL"
	push 40
	cthis mplay
	jmp l3873
l3909:
	push 31
	cmpst
	jne l3910
	spop $a
	push "bgrzbojeL"
	push 5
	cthis mplay
	push "preh2.ogg -v 70"
	call mus,playstr
	jmp l3873
l3910:
	push 33
	cmpst
	je l3912
	push 37
	cmpst
	je l3912
	jmp l3911
l3912:
	spop $a
	push "wojeL"
	push 20
	cthis mplay
	call mus,isplaying
	cmp0
	je l3914
	push 1000
	call mus,fadeout
l3914:
	jmp l3873
l3911:
	push 34
	cmpst
	jne l3915
	spop $a
	push "wojeL"
	push 5
	cthis mplay
	call fxzamach,play
	jmp l3873
l3915:
	push 35
	cmpst
	je l3917
	push 36
	cmpst
	je l3917
	jmp l3916
l3917:
	spop $a
	push "wojeL"
	push 5
	cthis mplay
	jmp l3873
l3916:
	push 38
	cmpst
	jne l3918
	spop $a
	push "wojeL"
	push 20
	cthis mplay
	call fxdrzewobum,play
	jmp l3873
l3918:
	push 40
	cmpst
	jne l3919
	spop $a
	push "szturmL"
	push 80
	cthis mplay
	jmp l3873
l3919:
	push 41
	cmpst
	jne l3920
	spop $a
	push "szturmL"
	push 50
	cthis mplay
	jmp l3873
l3920:
	push 42
	cmpst
	jne l3921
	spop $a
	push "mezo3.ogg -v 40"
	call mus,playstr
	jmp l3873
l3921:
	spop $a
l3873:
	end method
	method Bajka7
	push igmstate
	spushs
	push 0
	cmpst
	jne l3838
	spop $a
	push 1
	cthis mget
	spushs
	spop $a
	call [$a],getposx
	push 0
	cmpje
	cmp0
	je l3840
	push 1
	pop igmstate
	jmp l3839
l3840:
	push 1
	cthis mget
	spushs
	push 2
	popax
	sub 0,$a
	push 8
	popax
	sub 0,$a
	spop $a
	call [$a],move
	push 2
	cthis mget
	spushs
	push 2
	popax
	sub 0,$a
	push 8
	popax
	sub 0,$a
	spop $a
	call [$a],move
	push 3
	cthis mget
	spushs
	push 2
	popax
	sub 0,$a
	push 8
	popax
	sub 0,$a
	spop $a
	call [$a],move
l3839:
	cthis play
	jmp l3837
l3838:
	push 1
	cmpst
	jne l3841
	spop $a
	push 4
	cthis mget
	spushs
	spop $a
	call [$a],getposx
	push 0
	cmpje
	cmp0
	je l3843
	push 2
	pop igmstate
	jmp l3842
l3843:
	push 4
	cthis mget
	spushs
	push 8
	push 0
	spop $a
	call [$a],move
l3842:
	cthis play
	jmp l3837
l3841:
	push 2
	cmpst
	jne l3844
	spop $a
	push 4
	cthis mget
	spushs
	spop $a
	call [$a],ansetnextfr
	push 2
	cthis mget
	spushs
	spop $a
	call [$a],hide
	push 3
	cthis mget
	spushs
	spop $a
	call [$a],hide
	push 3
	pop igmstate
	cthis play
	jmp l3837
l3844:
	push 3
	cmpst
	jne l3845
	spop $a
	push 4
	cthis mget
	spushs
	spop $a
	call [$a],getposx
	push 800
	popax
	sub 0,$a
	cmpje
	cmp0
	je l3847
	cthis mnext
	jmp l3846
l3847:
	push 4
	cthis mget
	spushs
	push 8
	popax
	sub 0,$a
	push 0
	spop $a
	call [$a],move
	push 1
	cthis mget
	spushs
	push 2
	push 8
	spop $a
	call [$a],move
	cthis play
l3846:
	jmp l3837
l3845:
	spop $a
l3837:
	end method
	method Bajka8
	push igmstate
	spushs
	push 0
	cmpst
	jne l3850
	spop $a
	push tick
	push 90
	cmpje
	cmp0
	je l3852
	add igmstate,1
	pop igmstate
	push 0
	pop tick
	jmp l3851
l3852:
	add tick,1
	pop tick
l3851:
	cthis play
	jmp l3849
l3850:
	push 1
	cmpst
	je l3854
	push 3
	cmpst
	je l3854
	jmp l3853
l3854:
	spop $a
	localreal $1
	push 70.0
	pop $1
	localreal $2
	push 370.0
	pop $2
	push sfigura
	spushs
	spop $a
	call [$a],getposy
	push $2
	cmpjae
	cmp0
	je l3856
	add igmstate,1
	pop igmstate
	jmp l3855
l3856:
	push sfigura
	spushs
	push 0
	push 2.0
	push $2
	push sfigura
	spushs
	spop $a
	call [$a],getposy
	pop $b
	popax
	sub $a,$b
	push $2
	push $1
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	div $a,$b
	psax
	push 20.0
	pop $b
	popax
	mul $a,$b
	push 20.0
	cthis between
	spop $a
	call [$a],move
l3855:
	cthis play
	jmp l3849
l3853:
	push 2
	cmpst
	je l3858
	push 5
	cmpst
	je l3858
	jmp l3857
l3858:
	spop $a
	localreal $1
	push 70.0
	pop $1
	localreal $2
	push 370.0
	pop $2
	push sfigura
	spushs
	spop $a
	call [$a],getposy
	push $1
	cmpjle
	cmp0
	je l3860
	add igmstate,1
	pop igmstate
	jmp l3859
l3860:
	push sfigura
	spushs
	push 0
	push 2.0
	push sfigura
	spushs
	spop $a
	call [$a],getposy
	spushs
	spop $h
	call $h,to_r
	push $1
	pop $b
	popax
	sub $a,$b
	push $2
	push $1
	pop $b
	popax
	sub $a,$b
	pop $b
	popax
	div $a,$b
	psax
	push 20.0
	pop $b
	popax
	mul $a,$b
	push 20.0
	cthis between
	popax
	sub 0,$a
	spop $a
	call [$a],move
l3859:
	cthis play
	jmp l3849
l3857:
	push 4
	cmpst
	jne l3861
	spop $a
	localdef $3
	push 3
	pop $3
	push 0
	cthis mget
	spushs
	spop $a
	call [$a],getposx
	push $3
	pop $b
	popax
	add $a,$b
	push 0
	cmpjae
	cmp0
	je l3863
	push "Bajka9"
	call fxkijek,objplayfin
	jmp l3862
l3863:
	push $3
	push 0
	call gr12,move
	cthis play
l3862:
	jmp l3849
l3861:
	push 6
	cmpst
	jne l3864
	spop $a
	cthis mnext
	jmp l3849
l3864:
	spop $a
l3849:
	end method
	method Bajka9
	push 6
	cthis mget
	spushs
	push 1
	popax
	sub 0,$a
	push "Bajka10"
	spop $a
	call [$a],anplayfin
	end method
	method Bajka10
	call fxnarasta,play
	push 5
	pop igmstate
	call tim12,play
	end method
	method Bajka11
	push "snd"
	push BajkaNr
	pop $b
	popax
	add $a,$b
	cthis cbplay
	end method
	method mnexton
	localint $1
	pop $1
	push $1
	cthis mget
	spushs
	push "onfinish"
	push "mnext"
	spop $a
	call [$a],addmethod
	push 1
	popax
	sub 0,$a
	call grb,nplay
	end method
	method mnexton2
	localint $1
	pop $1
	push $1
	cthis mget
	spushs
	push "onfinish"
	push "Bajka12"
	spop $a
	call [$a],addmethod
	push 1
	popax
	sub 0,$a
	call grb,nplay
	end method
	method Bajka12
	call timnext,play
	end method
	method mstopall
	push GAME
	spushs
	spop $a
	call [$a],Bajka13
	end method
	method Bajka13
	push 0
	call grb,stop
	push 0
	call timnext,stop
	push "tim8"
	cthis hasvar
	cmp0
	je l3923
	push 0
	call tim8,stop
l3923:
	push "tim12"
	cthis hasvar
	cmp0
	je l3925
	push 0
	call tim12,stop
l3925:
	push 0
	cthis cactsndstop
	end method
	method clbuts_next_butclick
	call ccs,isplaying
	cmp0
	je l3927
	ret
l3927:
	cthis mstopall
	cthis mnext2
	end method
	method clbuts_prev_butclick
	call ccs,isplaying
	cmp0
	je l3929
	ret
l3929:
	cthis mstopall
	cthis mprev2
	end method
	method mget
	localint $1
	pop $1
	push $1
	call grb,get
	end method
	method mouse_lclick
	end method
	method mplay
	localstring $1
	localint $2
	pop $2
	pop $1
	localint $3
	push 0
	pop $3
	push "L"
	call $1,contains
	cmp0
	je l3931
	push "L"
	call $1,strremove
	push 1
	pop $3
l3931:
	push SFXPATH
	push $1
	pop $b
	popax
	add $a,$b
	push ".wav"
	pop $b
	popax
	add $a,$b
	call sndbgr,load
	push $2
	call sndbgr,setvol
	push $3
	cmp0
	je l3933
	call sndbgr,playloop
	jmp l3932
l3933:
	call sndbgr,play
l3932:
	end method
	end game

