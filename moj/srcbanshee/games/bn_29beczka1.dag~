
game mg29_beczka1 : Banshee {
	init	{
    Banshee::init("mg29_beczka1");
    .imgs = (A, "bkg.jpg 1", "popup_bkg.pyz 2" ,"kurek.pyz 3", "table.pyz 4","wine_bottle.pyzH 5", "ramka.pyz 15", "popexit.pyz 17" );
    .butpopexit;
    .setasitemtopck("anwine_bottle");
    
    imgbkg {
		.addmethod("isbutin", func { (@x, @y)
			!anpopup_bkg.isin(x,y,0,0) ;
			} );
		.addmethod("butclick", func {
			if( !.advstdstate ) return;
			 .mend;
			} );
  		butgame.add(this);
  	};
    
    ankurek{
        .Button_isinvis;
        .addmethod("butmoveon", func {
  			 	if( !.advstdstate) return;
  				advmouse.set("take");
  				  
        } );
  			.addmethod("butmoveoff", func {
  				if( !.advstdstate ) return;
  				  advmouse.setstd;
  				} );
        .addmethod("butclick", func { 
          if( !.advstdstate  ) return;
          
        } );   
        butgame.add(this);
          
     };
     
     antable{
        .Button_isinvis;
        .addmethod("butmoveon", func {
  			 	if( !.advstdstate) return;
          if (!clsave.bis("e1_mg29_beczka1_bottle_on"))
            advmouse.set("use");
  				  
        } );
  			.addmethod("butmoveoff", func {
  				if( !.advstdstate ) return;
  				  advmouse.setstd;
  				} );
        .addmethod("butclick", func { 
          if( !.advstdstate  ) return;
          
        } );   
        butgame.add(this);
          
     }; 
    
    if(clsave.bis("e1_mg29_beczka1_bottle_on"))
    {
      anwine_bottle.show; 
      //antable.disable = (true); 
      butgame.removebut("antable");
    }
	
    
    .stdstart; 
  }// koniec init 
 mend {
    .stdexitdefadv("ad29_winiarnia", "gamead29_winiarnia0"); 
  }
  
  anwine_bottle_TAKE {
    .popitem_gotocenter("wine_bottle");
    clsave.set("e1_mg29_beczka1_bottle_on",0);
    //antable.enabled = (true);        
    butgame.addbut("antable");
  } 
  
   anwine_bottle_INPCK {
     .addtopck("wine_bottle");
 
  }  
  
  USE_wine_bottle
  {
   .advsetstdstate();
    if(antable.isin(mouse.getpos,0,1) ) {
		._removefrompck("wine_bottle",1);
		anwine_bottle.setframe(0,0);
		anwine_bottle.styperoto = ("init");
		anwine_bottle.setpos(0,0);
		anwine_bottle.anfadein(500,null); 
		clsave.bset("e1_mg29_beczka1_bottle_on"); 
		advmouse.setstd;
		//antable.disable = (true); 
		butgame.removebut("antable");
       
  } else {
    .item_gotopck;
  }
     
 }       
   
  HINT_CLICK {
    .showhint("anpopexit");   
  }
}