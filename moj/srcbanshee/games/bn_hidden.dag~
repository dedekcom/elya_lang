game HO07_Gruz : HOBanshee	{
	init	{
		new anima ankrasy;
		ankrasy.load("scripts/ho07_gruz/krasy.pyz");
		ankrasy.hide;
		
    new anima ankostka;
    ankostka.load("scripts/ho07_gruz/kostka.pyz");
    
	.HOBanshee_init("ho07_gruz");
	
	 
	.newsndfree("snd_skrzat", "kinnat_c1d1_4a");
	snd_skrzat.addmethod("onfinish", "advsetstdstate");   	
	
	mus.playstr("banshee2.ogg -v 70 -l");

	.imgs = (A, "bkg.jpg","final_bkg.pyzH 240", "popexit.pyzH 260" );
	ankostka.mhobut;
	ankostka.setz(10);
   
	.mmasks;
	

	new DelayMover cmov; cmov.unlock;
	new string scmov = null;
	new bool bignoremsclick = false;
	
	ankrasy.addmethod("onfinish", func {
		.setframe(0,0);
		igmstate = 1;
		.mho_click;
		} );
	
	.mtoloupe("ho_shovel"); 
	
	.setmovedcursor("ho_dwarf", "use");
	.setmovedcursor("ho_crown", "take");
	
	ccs.enter( func {
		igmstate = 1;
		.advsetstdstate;
		if( clsave.bgo("e1_tut13_shown") )	{
			.tutshow("T13hoitems",120,300);
			.tutpoint("guihoinventory","dd");
			//.timhide_tutorial(10000);
		}
	} );
      
     if(!clsave.bis("takenho_HO07_Gruz_ankostka"))
		  .mtoloupe("ankostka");  
     
    
	}
	horemoved_ankrasy	{		// jesli krol krasnal zostal zabrany, deaktywujemy krasnala i korone
		.removehoitem("ho_dwarf");
		.removehoitem("ho_crown");
	}
	ho_shovel_click	{
		.show;
		.remove_from_loupe(this);
	}
	
	ho_dwarf_preclick	{	.dwarf_preclick;	}
	ho_crown_preclick	{	.crown_preclick;	}
	tut14	{
		if( clsave.bgo("e1_tut14_shown") )	{
			.tutshow("T14yellowitem",20,20);
			//.timhide_tutorial(10000);
		}
	}
	tutorial_T13hoitems_hidden	{
		string s = .mgetel("ho_shovel");
		if( s==null ) s = "ankostka";
		s = <s>.stxtview;
		if( !<s>.isvisible || s==null ) return;
		.tutshow("T15greenitem",120,300);
		.tutpointxy( <s>.getpx + <s>.getw/2, <s>.getpy+<s>.geth/2,"dd");
		//.timhide_tutorial(10000);
	}
	tutorial_T15greenitem_hidden	{
		string s = .mgetel("ho_dwarf");
		.tutshowe("T14yellowitem",120,20);
		if( s!=null )
			.tutpointxy( <s>.getpx + <s>.getw/2, <s>.getpy+<s>.geth/2,"ld");
		s = .mgetel("ho_crown");
		if( s!=null )
			.tutpointxy2( <s>.getpx + <s>.getw/2, <s>.getpy+<s>.geth/2,"ld");
	}
	dwarf_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
			ankrasy.play(1);
			ankrasy.setz(610);
		 
		} 
		else 
			.cbplay("snd_skrzat");	
	}
	crown_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
			ankrasy.play(1);
			ankrasy.setz(610);
		 
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		} 
    
    
	}
  
	kostka_preclick {
		.remove_from_loupe("ankostka");
		ankostka.mho_click;
		ankostka.show;
		 
	}
	
	 
	hiddenobj_put	{
		.hide_tutorial;
		if( grtxt.empty )	{
			igmstate = 20;
			.set_mg_finished(); 
			.show_double_screen("kostka","puszka", "anfinal_bkg");   
		}
	}
	
	mend	{
	 .stdexitdefadv("ad03_placglowny", "gamead03_placglowny0"); 
	}
	
	mouse_lclick	{
		 if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
 
  
  
	HINT_CLICK	{
		if( !.ho_hint_click && igmstate==1 )	{
			if( butgame.contains("ankostka") ) {
				.showhint2v("ankostka");
				.showhint2v("guiglass");
			} else if( !grtxt.empty ) {
				_ = .mhintonobj( .mgetel( "ho_dwarf" ) );
				_ = .mhintonobj( .mgetel( "ho_crown" ) );
			}
		}
	}
}


game HO01_Altana :HOBanshee	{
	init	{
    new anima ankonewka;
    ankonewka.load("scripts/ho01_altana/water_can.pyz");
    new anima ankawalek_rzezby3;
    ankawalek_rzezby3.load("scripts/ho01_altana/kawalek_rzezby3.pyz");
    
    .HOBanshee_init("ho01_altana");
    mus.playstr("moments.ogg -v 50 -l");
    .imgs = (A, "bkg.jpg","final_bkg.pyzH 240", "popexit.pyzH 260" );
    ankonewka.mhobut;
    ankonewka.setz(10);
    
    ankawalek_rzezby3.mhobut;
    ankawalek_rzezby3.setz(10); 
    .checkexternalobj("ankawalek_rzezby3");
    /*if(!clsave.bis("takenho_HO01_Altana_ankawalek_rzezby3"))
    {
      ankawalek_rzezby3.mhobut;
      ankawalek_rzezby3.setz(10); 
    } 
    else
    {
       ankawalek_rzezby3.hide;  
    }*/
    .mmasks; 
    
    .stdhoenter;
    if(!clsave.bis("takenho_HO01_Altana_ankonewka"))
		  .mtoloupe("ankonewka");  
    }
  
	konewka_preclick {
		.remove_from_loupe("ankonewka");
		ankonewka.mho_click;
		ankonewka.show();
	}
  
	kawalek_rzezby3_preclick {
		ankawalek_rzezby3.mho_click;
	}
  
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		 .set_mg_finished(); 
		.show_single_screen("kawalek_rzezby3", "anfinal_bkg");  
		}
	} 
  
  mend{
	mus.fadeout(1000);
    .stdexitdefadv("ad11_altana", "gamead11_altana0");
  }
    
  HINT_CLICK	{
	 
	if( !.ho_hint_click )	{

		if ( grtxt.contains("txtel_ankonewka") ) 
		{
				_ = .mhintonobj("ankonewka");
		}
		else if ( grtxt.contains("txtel_ankawalek_rzezby3") ) 
		{
				_ = .mhintonobj("ankawalek_rzezby3");
		}
	}
  } 
}


 

game HO09_Brzegjeziora : HOBanshee	{
	init	{
	  new anima bottle_anim;
		bottle_anim.load("scripts/ho09_brzegjeziora/bottle_anim.pyz");
		bottle_anim.hide;
		new anima andluto;
		andluto.load("scripts/ho09_brzegjeziora/dluto.pyz");
   
		.HOBanshee_init("ho09_brzegjeziora");
		mus.playstr("moments.ogg -v 50 -l");
	  .imgs = (A, "bkg.png", "swiatlo.pyz 12", "final_bkg.pyzH 260", "popexit.pyzH 280" );
	  
	  .sfxs = (A, "zamekblyskawiczny");
	 
	
	.newsndfree("snd_bottle", "kinnat_c1d1_19a");
	snd_bottle.addmethod("onfinish", "advsetstdstate");
	 
		
    answiatlo.anopacityframe;
    answiatlo.play("new");
     
    andluto.mhobut;
    andluto.setz(1000);
   
		.mmasks;
    new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
    
  	bottle_anim.addmethod("onfinish", func {
		.setframe(0,0);
		igmstate = 1;
		.mho_click;
		} );
    if(!clsave.bis("takenho_HO09_Brzegjeziora_andluto"))
		  .mtoloupe("andluto");  
   
   <.mgetel("ho_letter")>.hide();
   <.mgetel("maska_bag_open")>.hide();
   <.mgetel("bag_open")>.hide();
  
	.setmovedcursor("ho_bottle", "use");
	.setmovedcursor("ho_letter", "take");
  
	 .stdhoenter;
} 
  
  horemoved_bottle_anim	{	 
		.removehoitem("ho_bottle");
	   <.mgetel("ho_letter")>.hide();
     <.mgetel("maska_bag_open")>.show();
     <.mgetel("bag_open")>.show();
    butgame.removebut(.mgetel("ho_bag"));
	} 
  
  ho_bag_preclick	{
	 <.mgetel("ho_letter")>.show();
   <.mgetel("maska_bag_open")>.show();
   <.mgetel("bag_open")>.show();
   butgame.removebut(.mgetel("ho_bag"));
   fxzamekblyskawiczny.play;
	}
  
  dluto_preclick {
    .remove_from_loupe("andluto");
    andluto.mho_click;
    andluto.show();
  }
  
  hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
      .set_mg_finished();
			.show_double_screen("bulka","dluto", "anfinal_bkg");  
    }
	}
  
	 
	mend	{
		mus.fadeout(1000);
	 .stdexitdefadv("ad04_brzegjeziora", "gamead04_brzegjeziora0");  
	}
   
	ho_bottle_preclick	{	.bottle_preclick;	}
	ho_letter_preclick	{	.letter_preclick;	}
	
	bottle_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	bottle_anim.play(1);
		 	bottle_anim.setz(610);
		// 	bottle_anim.ansetbpos(.getpx, .getpy);
		} else 
			.cbplay("snd_bottle");		
	}
	
	letter_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	bottle_anim.play(1);
		 	bottle_anim.setz(610);
		// 	bottle_anim.ansetbpos(.getpx, .getpy);
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}
	}
	  
	
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
  HINT_CLICK	{
		if( !.ho_hint_click )	{
			if( grtxt.contains("txtel_bottle_anim") )	{
        
    			_ = .mhintonobj( .mgetel( "ho_letter" ) );
    			_ = .mhintonobj( .mgetel( "ho_bottle" ) );
    		 
			} else if ( grtxt.contains("txtel_andluto") ) {
				_ = .mhintonobj("andluto");
			}
		}
	}
 
}

game HO04_Wodospad : HOBanshee	{
  init	{
    new anima bag_anim;
		bag_anim.load("scripts/ho04_wodospad/bag_anim.pyz");
		bag_anim.hide;
    
  /*  new anima ankawalek_rzezby4;
		ankawalek_rzezby4.load("scripts/ho04_wodospad/kawalek_lwa4.pyz");
    
    new anima ankawalek_rzezby2;
		ankawalek_rzezby2.load("scripts/ho04_wodospad/kawalek_rzezby2.pyz");*/
    
   	.HOBanshee_init("ho04_wodospad");
   	
   	mus.playstr("adventure_loop.ogg -v 30 -l");
   	.sfxs = (A, "monety1");
    
    .imgs = (A, "bkg.jpg", "lewy_bok.pyz 10","prawy_bok.pyz 20", "kawalek_lwa4.pyzH 120", "final_bkg.pyzH 220", "popexit.pyzH 230"); 
    .mmasks;
    new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
		
	.mtoloupe("ho_kawalek_rzezby4"); 	
   
	.setmovedcursor("ho_bag", "use");
	.setmovedcursor("ho_coins", "take");
    
	.stdhoenter;
     
	.newsndfree("snd_torba", "kinnat_c1d1_26f");
	snd_torba.addmethod("onfinish", "advsetstdstate");  
	
    bag_anim.addmethod("onfinish", func {
		.setframe(0,0);
		igmstate = 1;
		.mho_click;
		} );
		 
	}
  
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
			.set_mg_finished();
			.stdpiorko("n011");
			.show_double_screen("kawalek_lwa4","kawalek_rzezby2", "anfinal_bkg");  
		}
	}
    
	mend	{
		mus.fadeout(1000);
		.stdexitdefadv("ad08_latajacecospod", "gamead08_latajacecospod0"); 
	}
	horemoved_bag_anim	{	 
		.removehoitem("ho_bag");
		.removehoitem("ho_coins");
	}  
  
	ho_bag_preclick	{	.bag_preclick;	}
	ho_coins_preclick	{	.coins_preclick;	}
	coins_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	bag_anim.play(1);
		 	bag_anim.setz(610);
		 	fxmonety1.play;
		// 	bag_anim.ansetbpos(.getpx, .getpy);
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}
	}
  bag_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	bag_anim.play(1);
		 	fxmonety1.play;
		 	bag_anim.setz(610);
		// 	bag_anim.ansetbpos(.getpx, .getpy);
		} 
		else
			.cbplay("snd_torba"); 	
	}
  
 	mouse_lclick	{
		 if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
	 ho_kawalek_rzezby4_click {
		.remove_from_loupe(this);
		.show;
	}
    
	 
	HINT_CLICK	{
		if( !.ho_hint_click )	{
			if( grtxt.contains("txtel_bag_anim") )	{
				_ = .mhintonobj( .mgetel( "ho_bag" ) );
				_ = .mhintonobj( .mgetel( "ho_coins" ) );
			} 
		 
		}
	}	
}

game HO06_Ogrodrozany : HOBanshee	{
    
   init	{
    new anima playmusic_anim;
		playmusic_anim.load("scripts/ho06_ogrodrozany/playmusic_anim.pyz");
		playmusic_anim.hide;
    
     
    new anima ankawalek_rzezby1;
		ankawalek_rzezby1.load("scripts/ho06_ogrodrozany/sculpture_part1.pyz");
    
    new anima annote;
    annote.load("scripts/ho06_ogrodrozany/note.pyz");
		 
     
    .HOBanshee_init("ho06_ogrodrozany");
    
	if( clsave.bis("e1_ho06_playjazz") )	{
		mus.playstr("jazz -v 50 -l");
		playmusic_anim.play(1);
		playmusic_anim.setz(180);
	} else
		mus.playstr("ck1_loop -v 50 -l");
    
    .imgs = (A, "bkg.jpg", "final_bkg.pyzH 200", "popexit.pyzH 220"); 
    
    ankawalek_rzezby1.mhobut;
     
    ankawalek_rzezby1.setz(10);
    if(!clsave.bis("takenho_HO06_Ogrodrozany_ankawalek_rzezby1"))
		  .mtoloupe("ankawalek_rzezby1");
    annote.hide;
    
    .mmasks;
    
    new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
    
    .mtoloupe("ho_iron");  
    
	.setmovedcursor("ho_gramophone", "use");
	.setmovedcursor("ho_plyta", "take");
    
	.stdhoenter;
//   <ankawalek_rzezby1.stxtview>.createtxt( .guifontcolor ); 
	}
  
	ho_iron_click	{
		.show;
		.remove_from_loupe(this);
	}
  
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
			.set_mg_finished(); 
	  .show_single_screen("kawalek_rzezby1", "anfinal_bkg");  
	}
	}
	horemoved_annote	{	 
		.removehoitem("ho_plyta");
		.removehoitem("ho_gramophone");
		playmusic_anim.play(1);
		playmusic_anim.setz(180);
		"dupa"->print;
	} 
   
	ho_gramophone_preclick	{	.gramophone_preclick;	}
	ho_plyta_preclick	{	.plyta_preclick;	}
	plyta_preclick	{
		@s = cmov.getfree;
		if( s==null )	{
		  scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebutmoveoff( scmov );
      
		}
	}
  gramophone_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
		  scmov = null;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	playmusic_anim.play(1);
		  playmusic_anim.setz(180);
      igmstate = 1; 
      annote.mhobut;
      annote.show;
		  annote.mho_click;
		  clsave.bset("e1_ho06_playjazz");
		  mus.playstr("ck1_loop -v 50 -fout 500 jazz -v 50 -l");
    }  
	}
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
  sculpture_part_preclick  {
    .play("sculpture_part_rotostart"); 
    ankawalek_rzezby1.mho_click; 
  }
 
  mend	{
	mus.fadeout(1000);
    .stdexitdefadv("ad10_ogrodrozany", "gamead10_ogrodrozany0"); 
  }
 
  HINT_CLICK	{
    if( !.ho_hint_click )	{ 
			if( grtxt.contains("txtel_annote") ){
			 _ = .mhintonobj( .mgetel( "ho_plyta" ) );
    	 _ = .mhintonobj( .mgetel( "ho_gramophone" ) );
    	} else if (!clsave.bis("takenho_HO06_Ogrodrozany_ankawalek_rzezby1")){  
				.showhint2v("ankawalek_rzezby1");
      }
    }
	}
}

 
game HO12_Brama : HOBanshee	{
  init	{
    new anima padlock_anim;
		padlock_anim.load("scripts/ho12_brama/padlock_anim.pyz");
		padlock_anim.hide;
    
    new anima anserce_part2;
		anserce_part2.load("scripts/ho12_brama/serce_part2.pyz");
    
    
    .HOBanshee_init("ho12_brama");
    .imgs = (A, "bkg.jpg",  "final_bkg.pyzH 200", "popexit.pyzH 220" );
    
    
    
    anserce_part2.mhobut;
    anserce_part2.setz(2);
    
    .mmasks;
    
    new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
    
	.stdhoenter;
    if(!clsave.bis("takenho_HO12_Brama_anserce_part2"))
      .mtoloupe("anserce_part2"); 
	  
	if(!clsave.bis("takenho_HO12_Brama_ho_runa"))
      .mtoloupe("ho_runa"); 
    
    padlock_anim.addmethod("onfinish", func {
  		.setframe(0,0);
  		igmstate = 1;
  		.mho_click;
		} );
		
	.setmovedcursor("ho_padlock", "use");
	.setmovedcursor("ho_key", "take");
    
	.newsndfree("snd_padlock", "kinnat_c2d2_2d");
	snd_padlock.addmethod("onfinish", "advsetstdstate");  
   
	}//koniec init 
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
      .set_mg_finished(); 
      .show_double_screen("serce_part2","rune", "anfinal_bkg"); 
		}
	}
  
	horemoved_padlock_anim	{		 
		.removehoitem("ho_key");
		.removehoitem("ho_padlock");
	}
	
	 
 
	ho_key_preclick	{	.key_preclick;	}
 	ho_padlock_preclick	{	.padlock_preclick;	}
	key_preclick	{
	 	@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	padlock_anim.play(1);
		 	padlock_anim.setz(610);
	 	 	padlock_anim.ansetbpos(.getpx, .getpy);
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}    
	}
  padlock_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	padlock_anim.play(1);
		 	padlock_anim.setz(610);
	  	padlock_anim.ansetbpos(.getpx, .getpy);
		} 
		else
			.cbplay("snd_padlock");
	}
	
	ho_runa_click
	{
		.show;
		.remove_from_loupe(this);
	}
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
  serce_part2_preclick {
    .remove_from_loupe("anserce_part2");
   // anserce_part2.setframe("serce_part2_rotostart", 0);
    anserce_part2.show();
    anserce_part2.mho_click;
  }
  
  serce_part2_rotostart_preclick{
    .serce_part2_preclick;  
  }
     
  mend	{
    .stdexitdefadv("ad12_latajacecosna", "gamead12_latajacecosna0"); 
  }
 
  HINT_CLICK	{
    if(!.ho_hint_click )	{
      if( grtxt.contains("txtel_padlock_anim") )
      { 
			  _ = .mhintonobj( .mgetel( "ho_key") );
        _ = .mhintonobj( .mgetel( "ho_padlock") );
      }
      else if ( grtxt.contains("txtel_anserce_part2") )  
				_ = .mhintonobj("anserce_part2");
    } 
	}
}
game HO13_Wiszacymost : HOBanshee	{
    init	{
    
	new anima fire_anim;
		fire_anim.load("scripts/ho13_wiszacymost/fire_anim.pyz");
		fire_anim.hide;  
    
    new anima anrekawica_1;
		anrekawica_1.load("scripts/ho13_wiszacymost/rekawica_1.pyz");
    
    new anima anpan_bottom;
		anpan_bottom.load("scripts/ho13_wiszacymost/pan_bottom.pyz");
    
    .HOBanshee_init("ho13_wiszacymost");
    .imgs = (A, "bkg.jpg", "final_bkg.pyzH 200" ,"popexit.pyzH 220" ); 
    
	.newsndfree("snd_siano", "kinnat_c2d2_4e");
	snd_siano.addmethod("onfinish", "advsetstdstate"); 
	
    anrekawica_1.mhobut;
    anrekawica_1.setz(20);
    anpan_bottom.mhobut;
    anpan_bottom.setz(20);
    
    .mmasks;
    
    new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
     
	.stdhoenter;
        
    if(!clsave.bis("takenho_HO13_Wiszacymost_anrekawica_1"))
      .mtoloupe("anrekawica_1"); 
    if(!clsave.bis("takenho_HO13_Wiszacymost_anpan_bottom"))
      .mtoloupe("anpan_bottom");     
    
    fire_anim.addmethod("onfinish", func {
		.setframe(0,0);
		igmstate = 1;
		.mho_click;
	} );
		
	.setmovedcursor("ho_nest", "use");
	.setmovedcursor("ho_lighter", "take");	
    
	}//koniec init 
	
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
			.set_mg_finished();
			.show_double_screen("rekawica_1","pan_bottom", "anfinal_bkg");
		}
	}
	horemoved_fire_anim	{	 
		.removehoitem("ho_lighter");
		.removehoitem("ho_nest");
	} 

	 
    
 	ho_lighter_preclick	{	.lighter_preclick;	}
 	ho_nest_preclick	{	.nest_preclick;	}
	lighter_preclick	{
	 	@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	fire_anim.play(1);
		 	fire_anim.setz(610);
		 //	fire_anim.ansetbpos(.getpx, .getpy);
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}    
	}
  nest_preclick	{
		 
		@s = cmov.getfree;
		if( s!=null )	{
			  
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	fire_anim.play(1);
		 	fire_anim.setz(610);
	//	 	fire_anim.ansetbpos(.getpx, .getpy);
		} 
		else
			.cbplay("snd_siano"); 
	}
  
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
  rekawica_1_preclick {
    anrekawica_1.mho_click;
    anrekawica_1.show;
  }
  pan_bottom_preclick {
    anpan_bottom.mho_click;
    anpan_bottom.show;
  }      
  
	mend	{
		.stdexitdefadv("ad13_wiszacymost", "gamead13_wiszacymost0"); 
	}
 
	HINT_CLICK	{
		if(!.ho_hint_click )	{ 
			if( grtxt.contains("txtel_fire_anim") ) {
				_ = .mhintonobj( .mgetel( "ho_lighter") );
				_ = .mhintonobj( .mgetel( "ho_nest") ); 
			}
			else if ( grtxt.contains("txtel_anrekawica_1") ) {
					_ = .mhintonobj("anrekawica_1");
			} 
			else if ( grtxt.contains("txtel_anpan_bottom") ) {
					_ = .mhintonobj("anpan_bottom");
				 
			} 
		} 
	}		
}

game HO19_Szopa : HOBanshee	{
     
  init	{
    new anima tea_anim;
	tea_anim.load("scripts/ho19_szopa/tea_anim.pyz");
	tea_anim.hide; 

    new anima fire;
	fire.load("scripts/ho19_szopa/ogien.pyz");
	fire.setdrawmode(1); 
	new anima torch;
	torch.load("scripts/ho19_szopa/torch.pyz");
	  	
    fire.play(0);
    fire.setz(100);
	torch.setz(101);
    .HOBanshee_init("ho19_szopa");
    .imgs = (A, "bkg.jpg", "bkg_final.pyzH 260", "popexit.pyzH 280" );
     
     
	new DelayMover cmov; cmov.unlock;
	new string scmov = null;
	new bool bignoremsclick = false;
    
    .mtoloupe("HO_hat");  
    if (clsave.bis("HO19_Szopa_drawr_opened"))
       .open_drawer();
    else
      .close_drawer();
    
    tea_anim.addmethod("onfinish", func {
  		.setframe(0,0);
  		igmstate = 1;
  		.mho_click;
		} );
  //  <anrune7.stxtview>.createtxt( .guifontcolor );    
 //    .show_double_screen("rune","rune", "anbkg_final"); 
	.mmasks;  
	.stdhoenter;
	.setmovedcursor("HO_kettle", "use");
	.setmovedcursor("HO_herbs", "take");
	
	.newsndfree("snd_tea", "kinnat_c2d2_10e");
	snd_tea.addmethod("onfinish", "advsetstdstate");
	}//koniec init 
  
	 
	
	horemoved_tea_anim	{	 
		.removehoitem("HO_herbs");
		.removehoitem("HO_kettle");
	} 
  
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
			.set_mg_finished(); 
		   .show_double_screen("rune","rune", "anbkg_final");
		}
	}
  
    
 	HO_hat_click()
	{
		.show;
		.remove_from_loupe(this);
	}
  
	close_drawer(){
		if(!clsave.bis("takenho_HO19_Szopa_HO_rune7"))
			<.mgetel("HO_rune7")>.hide;
		for( int i=0; i<grels.size; i++)	{
			@s = grels.get(i);
			if( <s>.actionname->contains("sz") )
			<s>.hide();
		} 
  }
  
  open_drawer()
  {
    if(!clsave.bis("takenho_HO19_Szopa_HO_rune7"))
      <.mgetel("HO_rune7")>.show;
    <.mgetel("drawer")>.setframe(-1,0);
    for( int i=0; i<grels.size; i++)	{
      @s = grels.get(i);
      if( <s>.actionname->contains("sz") )
   	  <s>.show();
  	} 
    butgame.removebut(.mgetel("drawer")); 
    clsave.bset("HO19_Szopa_drawr_opened");
  }
  
  drawer_preclick()
  {
    .open_drawer();
  }
  
  
  HO_herbs_preclick	{	.herbs_preclick;	}
 	HO_kettle_preclick	{	.kettle_preclick;	}
	herbs_preclick	{
	 	@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	tea_anim.play(1);
		 	tea_anim.setz(610);
		// 	tea_anim.ansetbpos(.getpx, .getpy);
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}    
	}
  kettle_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	tea_anim.play(1);
		 	tea_anim.setz(610);
		 //	tea_anim.ansetbpos(.getpx, .getpy);
		} 
		else
			.cbplay("snd_tea");
	}
  
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
 
  mend	{
    .stdexitdefadv("ad19_szopa", "gamead19_szopa0"); 
  }
 
  HINT_CLICK	{
    if( !.ho_hint_click )	{
			if ( grtxt.contains("txtel_anrune7") ) {
				_ = .mhintonobj("anrune7");
			}
      else
      { 
        _ = .mhintonobj( .mgetel( "HO_herbs" ) );
        _ = .mhintonobj( .mgetel( "HO_kettle" ) );
      }
		}
    
	}   
}


game HO17_Fontanna : HOBanshee	{
  init	{
    new anima anrekawica_2;
	 	anrekawica_2.load("scripts/ho17_fontanna/rekawica_2.pyz");
    new anima ankielich;
	 	ankielich.load("scripts/ho17_fontanna/kielich.pyz");  
     
    .HOBanshee_init("ho17_fontanna");
    .imgs = (A, "bkg.jpg", "final_bkg.pyzH 300","popexit.pyzH 320" );
    
     
    anrekawica_2.mhobut;
    anrekawica_2.setz(20); 
    ankielich.mhobut;
    ankielich.setz(20); 
    .mmasks;
    
    <.mgetel("klatka_open")>.hide;
    if(!clsave.bis("takenho_HO17_Fontanna_anrekawica_2"))
      .mtoloupe("anrekawica_2");  
    
   if (clsave.bis("HO17_Fontanna_klatka_open"))
   {
     <.mgetel("klatka_closed")>.hide();
     <.mgetel("klatka_open")>.show();
   }
   if (!clsave.bis("takenho_HO17_Fontanna_HO_ring"))
   {
      @s = <.mgetel("HO_ring")>.stxtview;
      <s>.createtxt( .hoexternalcol );
   }
    .stdhoenter;
	
	
  }//koniec init 
  
  rekawica_2_preclick {
    .remove_from_loupe("anrekawica_2");
    anrekawica_2.mho_click;
    anrekawica_2.show;
  }   
   
  klatka_closed_click	{
  		.hide();
  		<.mgetel("klatka_open")>.show();
      clsave.bset("HO17_Fontanna_klatka_open");
  }
  
  hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
      .set_mg_finished(); 
      .show_double_screen("rekawica_2","kielich", "anfinal_bkg");   
    }
	} 
   
  mend	{
    .stdexitdefadv("ad17_fontanna", "gamead17_fontanna0"); 
  }
 
  HINT_CLICK	{
    if( !.ho_hint_click )	{
  	 if (ankielich.isvisible)
        .showhint("ankielich");
     else
      .showhint("anrekawica_2");
    }
  }   
}
 
 
game HO01a_ksmala : HOBanshee	{
	init	{
		HiddenShape = true;
		
		.HOBanshee_init("ho01a_ksmala");
		mus.playstr("crying_loop -v 40 -l");
		.imgs = (A, "anim_coord.pyzH", "bkg.jpg","popup_bkg.pyz 4","herb.pyzH 5", "ramka.pyzG 90","final_bkg.pyzH 100", "popexit.pyz 120" );
		.butpopexit;
     anhoexit.hide ; 
 

    .mtoloupe("part1");
    .mtoloupe("part2");
    .mtoloupe("part3");
    .mtoloupe("part4");
    .mtoloupe("part5"); 
    .mtoloupe("part6");
    .setasitemtopck("anherb");  
		.mmasks;
		anpopup_bkg {
  		.Button_isinalpha;
  		butgame.add(this);
  	};
    imgbkg {
		.Button_isinalpha;
		.addmethod("butclick", func {
			if( !.advstdstate ) return;
			.mend;
			} );
  		butgame.add(this);
  	};   
		ccs.enter( func {
		  igmstate = 1;
		  .advsetstdstate;
		  .show_tutorial("T8shapes", .tutpos);
		} ); 
     
	 
	
     
	} 
  part1_click	{
		.show;
		.remove_from_loupe(this);
	}
  part2_click	{
		.show;
		.remove_from_loupe(this);
	}
  part3_click	{
		.show;
		.remove_from_loupe(this);
	}
  part4_click	{
		.show;
		.remove_from_loupe(this);
	}
  part5_click	{
		.show;
		.remove_from_loupe(this);
	}
  part6_click	{
		.show;
		.remove_from_loupe(this);
	}
	
	hiddenobj_put	{
		.hide_tutorial;
		if( grtxt.empty )	{
			igmstate = 20;
      .set_mg_finished(); 
		  .show_single_screen("herb", "anfinal_bkg");  
    }
	}
	HINT_CLICK	{
		_ = .ho_hint_click;
		if( !grtxt.empty )	{
			.showhint2v("guiglass");
		}
	}
  
	mend	{
	 //	ccs.close(null);
	 mus.fadeout(1000);
  .stdexitdefadv("ad002a_kdoors", "gamead002a_kdoors0"); 
  }
}
 
game HO21_Holglowny : HOBanshee	{
	init	{
	 
	.HOBanshee_init("ho21_holglowny");

	mus.playstr("banshee2.ogg -v 70 -l");

	.imgs = (A, "bkg.jpg", "final_bkg.pyzH 300" ,"popexit.pyzH 320");
	.mtoloupe("ho_powder_compact");
    if(clsave.bis("takenho_HO21_Holglowny_ho_shawl"))
      <.mgetel("ho_shawl")>.hide;
    
    if(!clsave.bis("takenho_HO21_Holglowny_ho_tree"))
    {
      @s = <.mgetel("ho_tree")>.stxtview;
      <s>.createtxt( .hoexternalcol );
    }
		.mmasks;
		
	 
		.stdhoenter;
	}
	ho_powder_compact_click	{
		.show;
		.remove_from_loupe(this);
	}
  
	ho_shawl_click	{
		.anfadeout(400,null);
		clsave.bset("takenho_HO21_Holglowny_ho_shawl"); 
	}
 
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		   .set_mg_finished(); 
		  .show_double_screen("klucz_klodka","tree", "anfinal_bkg");  
       
		}
	}
	mend	{
	 .stdexitdefadv("ad21_holglowny", "gamead21_holglowny0"); 
	}
	 
}

game HO23_Spizarnia : HOBanshee	{
	init	{
	 
		.HOBanshee_init("ho23_spizarnia");
		
		mus.playstr("banshee2.ogg -v 70 -l");
		
		.imgs = (A, "bkg.jpg","swietlik.pyz 200","swietlik1.pyz 200","swietlik2.pyz 200","swietlik3.pyz 200","swietlik4.pyz 200","swietlik5.pyz 200", "final_bkg.pyzH 300" ,"popexit.pyzH 320");
	   
		.mmasks;
		 
		.mtoloupe("ho_knife");
		
		if(!clsave.bis("takenho_HO23_Spizarnia_ho_binoculars"))
		{
		  @s = <.mgetel("ho_binoculars")>.stxtview;
		  <s>.createtxt( .hoexternalcol );
		}
   
		if(!clsave.bis("takenho_HO23_Spizarnia_pix_close"))
			<.mgetel("pix_open")>.hide;
		else
			<.mgetel("pix_close")>.hide;
      
		answietlik.play(0);
		answietlik1.play(0);
		answietlik2.play(0);
		answietlik3.play(0);
		answietlik4.play(0);
		answietlik5.play(0);
  		.stdhoenter;
		
	}
   
	pix_close_click	{
		if(!clsave.bis("takenho_HO23_Spizarnia_pix_close"))
		{
			<.mgetel("pix_open")>.anfadein(400,null);
			.anfadeout(400,null);
			clsave.bset("takenho_HO23_Spizarnia_pix_close"); 
		}
	}
   
	ho_knife_click	{
		.show;
		.remove_from_loupe(this);
	}
   
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		   .set_mg_finished(); 
		   .show_double_screen("deska","noga_zaby", "anfinal_bkg");  
       
		}
	}
	mend	{
	 .stdexitdefadv("ad23_spizarnia", "gamead23_spizarnia0"); 
	}
	 
}


game HO22_Kuchnia : HOBanshee	{
	init	{
		 new anima anmizeria;
		anmizeria.load("scripts/ho22_kuchnia/mizeria.pyz");
		anmizeria.hide;
		.HOBanshee_init("ho22_kuchnia");

		mus.playstr("banshee2.ogg -v 70 -l");

		.imgs = (A, "bkg.jpg", "final_bkg.pyzH 300" ,"popexit.pyzH 320");
		.mtoloupe("ho_zgnilejablko");
 
		.mmasks;
		new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
    
		if(clsave.bis("takenho_HO22_Kuchnia_ZAMKNIETE"))
		{
			<.mgetel("ZAMKNIETE")>.hide;
			<.mgetel("OTWARTE")>.show;
		}
		else
		{
			<.mgetel("ZAMKNIETE")>.show;
			<.mgetel("OTWARTE")>.hide;
		}
	
		anmizeria.addmethod("onfinish", func {
			 igmstate = 1;
			 .mho_click;
			} );
     
  		.setmovedcursor("ho_ogoras", "use");
		.setmovedcursor("ho_chopper", "take");
		
		.stdhoenter;
		.newsndfree("snd_ogor", "kinnat_c3d3_5d");
        snd_ogor.addmethod("onfinish", "advsetstdstate");
	}
  
	horemoved_anmizeria	{		 
		.removehoitem("ho_ogoras");
		.removehoitem("ho_chopper");
	}
	ho_ogoras_preclick	{	.ogoras_preclick;	}
	ho_chopper_preclick	{	.mizeria_preclick;	}
	mizeria_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	anmizeria.play(1);
		 	anmizeria.setz(610);
		 	 
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}
	}
  
  ogoras_preclick{
    @s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	anmizeria.play(1);
		 	anmizeria.setz(610);
		}
		else
			.cbplay("snd_ogor");
  }
  
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
	ZAMKNIETE_click	{
		if (!clsave.bis("takenho_HO22_Kuchnia_ZAMKNIETE"))	
		{
			.anfadeout(400,null);
			<.mgetel("OTWARTE")>.show;
			clsave.bset("takenho_HO22_Kuchnia_ZAMKNIETE");
		}
	}
	ho_zgnilejablko_click	{
		.show;
		.remove_from_loupe(this);
	}
 
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		   .set_mg_finished(); 
		 .show_double_screen("chochla","magiczne_nasiona", "anfinal_bkg");  
      
		}
	}
   
  
	mend	{
	 .stdexitdefadv("ad22_kuchnia", "gamead22_kuchnia0"); 
	}
	 
  HINT_CLICK	{
		if( !.ho_hint_click )	{
			_ = .mhintonobj( .mgetel( "ho_ogoras" ) );
			_ = .mhintonobj( .mgetel( "ho_chopper" ) );
		}
	}
}

game HO25_Sypialnia : HOBanshee	{
	init	{
		new anima anrose_anim;
		anrose_anim.load("scripts/ho25_sypialnia/rose_anim.pyz");
		anrose_anim.hide;
		.HOBanshee_init("ho25_sypialnia");
		
		 
		.newsndfree("snd_rose", "kinnat_c3d3_9a");
		snd_rose.addmethod("onfinish", "advsetstdstate"); 
		
		mus.playstr("banshee2.ogg -v 70 -l");

		.imgs = (A, "bkg.jpg", "bkg_final.pyzH 300" ,"popexit.pyzH 320");
		.mtoloupe("Luneta_L3");
		// clsave.bset("e1_ad25_szmata_zawieszona");
		if (!clsave.bis("e1_ad25_szmata_zawieszona"))
		{
		  new anima anlight;
		  anlight.load("scripts/ho25_sypialnia/light.pyz");  
		  anlight.setz(300);
		  anlight {
			.addmethod("isbutin", func { (@x, @y)
				.isin(x,y,0,0);
				} );
			.addmethod("butclick", func {
				if( !.advstdstate ) return;
				  return;
				} );
				butgame.add(this);
		 };
      if (!clsave.bis("HO25_Sypialnia_intro_spoken"))
      { 
        .newsndfree("snd_intro", "kinnat_c3d3_7");
        snd_intro.addmethod("onfinish", "advsetstdstate");
        .cbplay("snd_intro"); 
        clsave.bset("HO25_Sypialnia_intro_spoken");       
      }     
      
    }
    else
    {
      if (!clsave.bis("HO25_Sypialnia_light_off_spoken"))
      { 
        .newsndfree("snd_intro", "kinnat_c3d3_9");
        snd_intro.addmethod("onfinish", "advsetstdstate");
        .cbplay("snd_intro"); 
        clsave.bset("HO25_Sypialnia_light_off_spoken");       
      }   

		.setmovedcursor("ho_rose", "use");
		.setmovedcursor("ho_lipstick", "take");
    }
 
	.mmasks;
	new DelayMover cmov; cmov.unlock;
	new string scmov = null;
	new bool bignoremsclick = false;
    
    anrose_anim.addmethod("onfinish", func {
			 igmstate = 1;
			 .mho_click;
			} );
     
		.stdhoenter;
	}
  
    horemoved_anrose_anim{		 
		.removehoitem("ho_rose");
		.removehoitem("ho_lipstick");
	}
	 
	
	ho_lipstick_preclick	{.lipstick_preclick;}
	ho_rose_preclick	{.rose_preclick;}
	lipstick_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		 	anrose_anim.play(1);
		 	anrose_anim.setz(610);
		 	 
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}
	}
  
	rose_preclick{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
			anrose_anim.play(1);
			anrose_anim.setz(610);
		}
		else
			.cbplay("snd_rose");
	}
  
  
  mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
  
  Luneta_L3_click	{
		.show;
		.remove_from_loupe(this);
	}
 
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		   .set_mg_finished(); 
		   .show_double_screen("fragment_lunety3","gwizdek", "anbkg_final");  
      
		}
	}
	mend	{
	 .stdexitdefadv("ad25_sypialnia", "gamead25_sypialnia0"); 
	}
	 
}

game HO36_cmentarz : HOBanshee	{
	init	{
		.HOBanshee_init("ho36_cmentarz");
		mus.playstr("banshee2.ogg -v 70 -l");
		new anima anknife_anim;
		anknife_anim.load("scripts/ho36_cmentarz/knife_anim.pyz");
		anknife_anim.hide;	
		.imgs = (A, "bkg.jpg" , "bkg_final.pyzH 300" ,"popexit.pyzH 320" );
		.mtoloupe("ho_pogrzebacz");
		.mmasks;
		new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
		.stdhoenter;
		
		// animacje
		new anima swiecaa;
		swiecaa.load("scripts/ho36_cmentarz/swiecaa.pyz");
		swiecaa.play(0);
		
		new anima swiecab;
		swiecab.load("scripts/ho36_cmentarz/swiecab.pyz");
		swiecab.play(0);
		
		new anima swiecac;
		swiecac.load("scripts/ho36_cmentarz/swiecac.pyz");
		swiecac.play(0);
		
		new anima swiecad;
		swiecad.load("scripts/ho36_cmentarz/swiecad.pyz");
		swiecad.play(0);
		
		
		<.mgetel("ho_pendant_otwarta_")>.hide();
		if(!clsave.bis("takenho_HO36_cmentarz_ho_golden_heart"))
		{
			<.mgetel("ho_golden_heart")>.hide(); 
			<.mgetel("ho_golden_heart")>.var2("bnohint", true); 
		} 
		
		if (clsave.bis("HO36_cmentarz_noz_uzyty")){		 
			.removehoitem("ho_knife");
			.removehoitem("ho_pendant");
			<.mgetel("ho_pendant_otwarta_")>.show();
			if(!clsave.bis("takenho_HO36_cmentarz_ho_golden_heart"))
			{
				<.mgetel("ho_golden_heart")>.show(); 
				<.mgetel("ho_golden_heart")>.bnohint = (false); 
			}
		}
		else
		{
			@s = <.mgetel("ho_golden_heart")>.stxtview;
			<s>.createtxt( .hoexternalcol );
			anknife_anim.addmethod("onfinish", func {
				.hide;
				igmstate = 1;
				.mho_click;
				<.mgetel("ho_pendant_otwarta_")>.show();
				<.mgetel("ho_golden_heart")>.show();
				<.mgetel("ho_golden_heart")>.bnohint = (false); 
				clsave.bset("HO36_cmentarz_noz_uzyty");
			} );
		
		
		}
		
		.setmovedcursor("ho_pendant", "use");
		.setmovedcursor("ho_knife", "take");
		
		 
		.newsndfree("snd_pendant", "kinnat_c4d4_12b");
        snd_pendant.addmethod("onfinish", "advsetstdstate");
		
	}
	
	ho_knife_preclick	{.knife_preclick;}
	ho_pendant_preclick	{.pendant_preclick;}
	knife_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		    anknife_anim.play(1);
		    anknife_anim.setz(610);
		 	 
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}
	}
  
	pendant_preclick{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
			anknife_anim.play(1);
			anknife_anim.setz(610);
		}
		else
			.cbplay("snd_pendant");
	}
	 
	
	mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
	
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		   .set_mg_finished(); 
		   .show_double_screen("korek","pogrzebacz", "anbkg_final");  
      
		}
	}
	
	mend	{
	 .stdexitdefadv("ad31_salatortur", "gamead31_salatortur0"); 
	}
	
	ho_pogrzebacz_click	{
		.show;
		.remove_from_loupe(this);
	}
	 
	HINT_CLICK	{
		if( !.ho_hint_click )	{
			_ = .mhintonobj( .mgetel( "ho_knife" ) );
			_ = .mhintonobj( .mgetel( "ho_pendant" ) );
		} 
	}
}

game HO44_Strych : HOBanshee	{
	init	{
    
		new anima ankot_anim;
		ankot_anim.load("scripts/ho44_strych/kot_anim.pyz");
		ankot_anim.hide;
		
		.HOBanshee_init("ho44_strych");
		mus.playstr("banshee2.ogg -v 70 -l"); 
		.mtoloupe("ho_jar");
		.imgs = (A, "bkg.jpg", "bkg_final.pyzH 300" ,"popexit.pyzH 320"  ); 
		.mmasks;
		new DelayMover cmov; cmov.unlock;
		new string scmov = null;
		new bool bignoremsclick = false;
		.stdhoenter;
		
		.newsndfree("snd_cat", "kinnat_c4d4_40a");
        snd_cat.addmethod("onfinish", "advsetstdstate");
		
		.setmovedcursor("ho_cat", "use");
		.setmovedcursor("ho_mirror", "take");
		
		.stdhoenter;
		
		ankot_anim.addmethod("onfinish", func {
			igmstate = 1;
			.mho_click;
		} );
 
	}
	
	horemoved_ankot_anim	{		 
		.removehoitem("ho_cat");
		.removehoitem("ho_mirror");
	}
	
	ho_cat_preclick	{.cat_preclick;}
	ho_mirror_preclick	{.mirror_preclick;}
	mirror_preclick	{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
		    ankot_anim.play(1);
		    ankot_anim.setz(610);
		 	 
		} else {
			scmov = this;
			bignoremsclick = true;
			igmstate = 6;
			.setz(600);
			.setframe(-1,0);
			cmov.mssetobj( scmov );
			butgame.removebut( scmov );
		}
	}
  
	cat_preclick{
		@s = cmov.getfree;
		if( s!=null )	{
			scmov = null;
			.hide;
			<s>.hide;
			butgame.removebutmoveoff(this);
			ankot_anim.play(1);
			ankot_anim.setz(610);
		}
		else
		 	.cbplay("snd_cat");
	}
	 
	
	mouse_lclick	{
		//.printstate;
		if( bignoremsclick )	{
			bignoremsclick = false;
		} else if( scmov!=null )	{
			// tu trzeba zrobic jakis efekt powrotu na miejsce
			_ = cmov.getfree;
			igmstate = 1;
			<scmov>.setpos(0,0);
			<scmov>.setframe(-1,1);
			<scmov>.setz(<scmov>.myz);
			butgame.add(scmov);
			scmov = null;
		}
	}
	
	ho_jar_click	{
		.show;
		.remove_from_loupe(this);
	}
	
 	ho_horse_click{
		 .setframe(-1,2);
		 
	}
	
	ho_wheel_click{
		 .setframe(-1,2);
		 
	}
	ho_ant_click{
		 .setframe(-1,2);
		 
	}
 	
	hiddenobj_put	{
		if( grtxt.empty )	{
			igmstate = 20;
		   .set_mg_finished(); 
		   .show_double_screen("kolko","oliwiarka", "anbkg_final");  
		}
	}
     
	mend	{
		 
		.stdexitdefadv("ad44_strych", "gamead44_strych0"); 
	}
 
	HINT_CLICK	{
		if( !.ho_hint_click )	 
		 
		{ 
			_ = .mhintonobj( .mgetel( "ho_cat" ) );
			_ = .mhintonobj( .mgetel( "ho_mirror" ) );
		}
		 
    
	}   
		 
	 
}
 
 
