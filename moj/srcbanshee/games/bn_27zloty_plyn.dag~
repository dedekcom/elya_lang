
game mg27zloty_plyn :Banshee {
	init{
    Banshee::init("mg27_zloty_plyn");
    .addtopck("chochla");
    .imgs = (A,"bkg.jpg 1" , "popup_bkg.pyz 2", "nalewanie.pyz 3", "zloty_plynH.pyz 4","gold.pyz 4", "ramka.pyz 22","popexit.pyz 23");
    .butpopexit;
	  .butpopexitisinramka;
    .setasitemtopck("anzloty_plyn"); 
    .newsnd("noitemsnd", "kinnat_c3d3_14");
     noitemsnd.addmethod("onfinish", "advsetstdstate"); 
    angold.setdrawmode(1);
    angold.play(0);
    annalewanie{
        .addmethod("isbutin", func { (int x, int y)
			   .advstdstate && .isin(x,y,0,1)  ;
				} ); 
			.addmethod("butmoveon", func {
		 	    if (!clsave.bis("e1_mg27_chochla_used"))
              advmouse.set("use");
          else
            advmouse.setstd; 
			 } );
			.addmethod("butmoveoff", func {
			   advmouse.setstd;
			} );
      .addmethod("butclick", func {
			   .cbplay("noitemsnd");
			} );
      .addmethod("onfinish", func {
			   .popitem_gotocenterobj("zloty_plyn", "anzloty_plyn"); 
			} );
      butgame.add(this);
    }; 
  
   
  .stdstart;     
  
  }// koniec init 
 
  USE_chochla{
	   .advsetstdstate(); 
     if(annalewanie.isin(mouse.getpos,0,0) )	{
        
         angold.anfadeout(300,func{angold.stop(true);});
        .removefrompck("chochla");
        .saveitemtopck("zloty_plyn"); 
        annalewanie.play(0);
        clsave.bset("e1_mg27_chochla_used");
        .set_mg_finished();
      } else  
		.item_gotopck;
  } 
  
  
  anzloty_plyn_INPCK	{
    .addtopck("zloty_plyn");
    .mend;
	}   
  
  mend	{
    .stdexitdefadv("ad27_lazienka", "gamead27_lazienka0"); 
  }
   
  
  HINT_CLICK {
    .showhint("anpopexit");  
  } 
}
 
