game ho19intro :Banshee {
	init{
    Banshee::init("ho19_intro");
    .imgs = (A,"bkg.pyz 1","zarowka.pyz 3", "zarowka_maska.pyzH 4", "zarowka_nowa.pyz 5", "maska_ciemno.pyz 7","zarowka_leci.pyzH 8", "maska_kabel.pyz 9","dark_mask.pyzH 10", "zarowka_nowa_wkrecanie.pyzH 11", "sparkle.pyzH 12");
  
   
  .gui_toloupe("anbkg");
  .gui_toloupe("anmaska_kabel"); 
  .gui_toloupe("anzarowka");
  .gui_toloupe("anmaska_ciemno");
  .gui_toloupe("anzarowka_nowa");  
  
  .timplay("timeprzepalenie", 1000, func {
		   .przepalenie();
      } );  
   
  .newsnd("sndstart", "kinnat_c2d2_10a");
  sndstart.addmethod("onfinish", "advsetstdstate"); 
  ansparkle.setdrawmode(1);  
  
//  .newsnd("sndglass", "kinnat_c2d2_10b");
//  sndglass.addmethod("onfinish", "advsetstdstate");   
  
   new ImgRect recexit {
      .Button_isin;
      .Button_moveoffms;
      .addmethod("butmoveon", func { advmouse.set("godd"); });
      .setrect( 0, 0.8 * igmapph, igmappw, igmapph );
      .setz(300); 
       butgame.add(this);
      .addmethod("butclick", func {
  			if( !.advstdstate ) return;
  				   .stdexitdefadv("ad19_szopa", "gamead19_szopa0");  
        });
    };  
   .stdstart;
  
  anmaska_ciemno.addmethod("onfinish", func {
		  andark_mask.anfadein(100,null);
      .timplay("timeintro", 500, func {
			.cbplay("sndstart");
       
      } );  
        
  } );
  
  anzarowka_nowa_wkrecanie.addmethod("onfinish", func {
		  andark_mask.hide;
      anmaska_ciemno.hide;
      .hide;
      anzarowka_nowa.show();
      clsave.bset("e1_HO19_Szopa_after_intro");
      clsave.set("e1_ad19_szopa_swiatlo_zgaszone", false);
      .stdexit("HO19_Szopa");
  } ); 
  
   anzarowka_leci.addmethod("onfinish", func {
		  .hide();
      clsave.bset("e1_ho19intro_zarowka_zdjeta"); 
  } );   
   
  anzarowka
        {
         .addmethod("isbutin", func { (int x, int y)
  			  .advstdstate && .isin(x,y,1,1) &&  !clsave.bis("e1_ho19intro_zarowka_zdjeta") && .loupe_visible;  
  				} ); 
  			.addmethod("butmoveon", func {
  		 	  advmouse.set("take"); 
  			 } );
  			.addmethod("butmoveoff", func {
  			   advmouse.setstd;
  				 
  			 } );
         .addmethod("butclick", func {
					if( !.advstdstate || clsave.bis("e1_ho19intro_zarowka_zdjeta") || !.loupe_visible ) return;
            advmouse.setstd;
            anzarowka_maska.show();
            .gui_toloupe("anzarowka_maska");
            .hide;
            .gui_toloupe("anzarowka_leci");
            anzarowka_leci.play(0);
               
          } );
  			 
  			butgame.add(this);
                  
        }; 
        
     anzarowka_nowa
        {
         .addmethod("isbutin", func { (int x, int y)
  			  .advstdstate && .isin(x,y,1,1) &&  clsave.bis("e1_ho19intro_zarowka_zdjeta") && .loupe_visible;  
  				} ); 
  			.addmethod("butmoveon", func {
  		 	  advmouse.set("take"); 
  			 } );
  			.addmethod("butmoveoff", func {
  			   advmouse.setstd;
  				 
  			 } );
         .addmethod("butclick", func {
					if( !.advstdstate || !.loupe_visible) return;
            advmouse.setstd;
            .hide;
            .play("on");
             
            .gui_removefromloupe("anzarowka_nowa");
            .gui_toloupe("anzarowka_nowa_wkrecanie");
            anzarowka_nowa_wkrecanie.play(0);
               
          } );
  			 
  			butgame.add(this);
                  
        }; 
      if (clsave.bis("e1_ho19intro_zarowka_zdjeta"))
      {
          anzarowka_maska.show();
          .gui_toloupe("anzarowka_maska");
      } 
  
  } // koniec init  
  
/*  LOUPE_SHOW {
    if (!clsave.bis("e1_ad19_sndglass_shown"))
    {
      .cbplay("sndglass");
      clsave.bset("e1_ad19_sndglass_shown");
    }
  }
*/  
  przepalenie{
    if (clsave.bis("e1_ad19_szopa_swiatlo_zgaszone"))
    {
      andark_mask.show;
    }
    else
    { 
      anmaska_ciemno.play(0); 
      anzarowka.play(0); 
      clsave.bset("e1_ad19_szopa_swiatlo_zgaszone"); 
        .timplay("timesparkle", 200, func {
		   ansparkle.play(0);
      } );  
       
    } 
  }     
  mend	{
    .stdexitdefadv("ad19_szopa", "gamead19_szopa0");  
  } 
  
  HINT_CLICK {
    
  }       
}
 
